import{r as V,I as KT,S as Of,T as Vf,M as Bn,C as ys,H as zI,a as WT,U as Uf,b as BI,c as zf,d as FI,P as Sh,e as zc,X as Ol,f as J_,g as qI,h as HI,i as GI,j as c_,Y as Il,k as Ah,l as YT,G as Bf,E as Ff,N as Ml,m as qf,B as ev,n as tv,o as Ih,A as Fh,p as u_,q as ZI,F as QT,R as Hf,s as $I,L as gw,t as Rg,u as nv,v as Gf,w as _w,x as vw,y as KI,z as XT,D as WI,J as YI,K as QI,O as XI,Q as JI,V as eC,W as yw,Z as tC,_ as nC,$ as iC,a0 as sC,a1 as xw,a2 as rC,a3 as bw,a4 as aC,a5 as oC,a6 as lC,a7 as cC,a8 as uC,a9 as hC,aa as dC}from"./ui-XzhNS_h5.js";import{r as fC,a as JT,g as eE}from"./vendor-gH-7aFTg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var kg={exports:{}},nh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ww;function mC(){if(ww)return nh;ww=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var _ in o)_!=="key"&&(c[_]=o[_])}else c=o;return o=c.ref,{$$typeof:n,type:s,key:f,ref:o!==void 0?o:null,props:c}}return nh.Fragment=e,nh.jsx=t,nh.jsxs=t,nh}var Tw;function pC(){return Tw||(Tw=1,kg.exports=mC()),kg.exports}var d=pC(),Pg={exports:{}},ih={},jg={exports:{}},Mg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function gC(){return Ew||(Ew=1,function(n){function e(ee,Y){var se=ee.length;ee.push(Y);e:for(;0<se;){var ce=se-1>>>1,ve=ee[ce];if(0<o(ve,Y))ee[ce]=Y,ee[se]=ve,se=ce;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var Y=ee[0],se=ee.pop();if(se!==Y){ee[0]=se;e:for(var ce=0,ve=ee.length,Te=ve>>>1;ce<Te;){var Me=2*(ce+1)-1,we=ee[Me],Ue=Me+1,Ve=ee[Ue];if(0>o(we,se))Ue<ve&&0>o(Ve,we)?(ee[ce]=Ve,ee[Ue]=se,ce=Ue):(ee[ce]=we,ee[Me]=se,ce=Me);else if(Ue<ve&&0>o(Ve,se))ee[ce]=Ve,ee[Ue]=se,ce=Ue;else break e}}return Y}function o(ee,Y){var se=ee.sortIndex-Y.sortIndex;return se!==0?se:ee.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,_=f.now();n.unstable_now=function(){return f.now()-_}}var y=[],b=[],E=1,A=null,I=3,F=!1,D=!1,M=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function _e(ee){for(var Y=t(b);Y!==null;){if(Y.callback===null)s(b);else if(Y.startTime<=ee)s(b),Y.sortIndex=Y.expirationTime,e(y,Y);else break;Y=t(b)}}function ge(ee){if(M=!1,_e(ee),!D)if(t(y)!==null)D=!0,xe||(xe=!0,Z());else{var Y=t(b);Y!==null&&Je(ge,Y.startTime-ee)}}var xe=!1,B=-1,k=5,j=-1;function U(){return z?!0:!(n.unstable_now()-j<k)}function q(){if(z=!1,xe){var ee=n.unstable_now();j=ee;var Y=!0;try{e:{D=!1,M&&(M=!1,$(B),B=-1),F=!0;var se=I;try{t:{for(_e(ee),A=t(y);A!==null&&!(A.expirationTime>ee&&U());){var ce=A.callback;if(typeof ce=="function"){A.callback=null,I=A.priorityLevel;var ve=ce(A.expirationTime<=ee);if(ee=n.unstable_now(),typeof ve=="function"){A.callback=ve,_e(ee),Y=!0;break t}A===t(y)&&s(y),_e(ee)}else s(y);A=t(y)}if(A!==null)Y=!0;else{var Te=t(b);Te!==null&&Je(ge,Te.startTime-ee),Y=!1}}break e}finally{A=null,I=se,F=!1}Y=void 0}}finally{Y?Z():xe=!1}}}var Z;if(typeof te=="function")Z=function(){te(q)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ce=O.port2;O.port1.onmessage=q,Z=function(){Ce.postMessage(null)}}else Z=function(){W(q,0)};function Je(ee,Y){B=W(function(){ee(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_next=function(ee){switch(I){case 1:case 2:case 3:var Y=3;break;default:Y=I}var se=I;I=Y;try{return ee()}finally{I=se}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(ee,Y){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=I;I=ee;try{return Y()}finally{I=se}},n.unstable_scheduleCallback=function(ee,Y,se){var ce=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ce+se:ce):se=ce,ee){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,ee={id:E++,callback:Y,priorityLevel:ee,startTime:se,expirationTime:ve,sortIndex:-1},se>ce?(ee.sortIndex=se,e(b,ee),t(y)===null&&ee===t(b)&&(M?($(B),B=-1):M=!0,Je(ge,se-ce))):(ee.sortIndex=ve,e(y,ee),D||F||(D=!0,xe||(xe=!0,Z()))),ee},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(ee){var Y=I;return function(){var se=I;I=Y;try{return ee.apply(this,arguments)}finally{I=se}}}}(Mg)),Mg}var Nw;function _C(){return Nw||(Nw=1,jg.exports=gC()),jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function vC(){if(Sw)return ih;Sw=1;var n=_C(),e=fC(),t=JT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function c(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function f(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function _(i){if(c(i)!==i)throw Error(s(188))}function y(i){var r=i.alternate;if(!r){if(r=c(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,h=r;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return _(g),i;if(v===h)return _(g),r;v=v.sibling}throw Error(s(188))}if(l.return!==h.return)l=g,h=v;else{for(var S=!1,R=g.child;R;){if(R===l){S=!0,l=g,h=v;break}if(R===h){S=!0,h=g,l=v;break}R=R.sibling}if(!S){for(R=v.child;R;){if(R===l){S=!0,l=v,h=g;break}if(R===h){S=!0,h=v,l=g;break}R=R.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),te=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var O=Symbol.for("react.client.reference");function Ce(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===O?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case z:return"Profiler";case M:return"StrictMode";case ge:return"Suspense";case xe:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case F:return"Portal";case te:return(i.displayName||"Context")+".Provider";case $:return(i._context.displayName||"Context")+".Consumer";case _e:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return r=i.displayName||null,r!==null?r:Ce(i.type)||"Memo";case k:r=i._payload,i=i._init;try{return Ce(i(r))}catch{}}return null}var Je=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},ce=[],ve=-1;function Te(i){return{current:i}}function Me(i){0>ve||(i.current=ce[ve],ce[ve]=null,ve--)}function we(i,r){ve++,ce[ve]=i.current,i.current=r}var Ue=Te(null),Ve=Te(null),de=Te(null),Re=Te(null);function Ke(i,r){switch(we(de,r),we(Ve,i),we(Ue,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Hb(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Hb(r),i=Gb(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Me(Ue),we(Ue,i)}function Ye(){Me(Ue),Me(Ve),Me(de)}function Be(i){i.memoizedState!==null&&we(Re,i);var r=Ue.current,l=Gb(r,i.type);r!==l&&(we(Ve,i),we(Ue,l))}function Tt(i){Ve.current===i&&(Me(Ue),Me(Ve)),Re.current===i&&(Me(Re),Qu._currentValue=se)}var Bt=Object.prototype.hasOwnProperty,ii=n.unstable_scheduleCallback,Ss=n.unstable_cancelCallback,ya=n.unstable_shouldYield,Ho=n.unstable_requestPaint,qn=n.unstable_now,xa=n.unstable_getCurrentPriorityLevel,Go=n.unstable_ImmediatePriority,kr=n.unstable_UserBlockingPriority,As=n.unstable_NormalPriority,Kl=n.unstable_LowPriority,Pr=n.unstable_IdlePriority,Zo=n.log,Wl=n.unstable_setDisableYieldValue,Mt=null,_t=null;function Hn(i){if(typeof Zo=="function"&&Wl(i),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Mt,i)}catch{}}var Tn=Math.clz32?Math.clz32:jr,$o=Math.log,Yl=Math.LN2;function jr(i){return i>>>=0,i===0?32:31-($o(i)/Yl|0)|0}var Xs=256,Is=4194304;function pi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ba(i,r,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,v=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var R=h&134217727;return R!==0?(h=R&~v,h!==0?g=pi(h):(S&=R,S!==0?g=pi(S):l||(l=R&~i,l!==0&&(g=pi(l))))):(R=h&~v,R!==0?g=pi(R):S!==0?g=pi(S):l||(l=h&~i,l!==0&&(g=pi(l)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:g}function Ai(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ko(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wo(){var i=Xs;return Xs<<=1,(Xs&4194048)===0&&(Xs=256),i}function wa(){var i=Is;return Is<<=1,(Is&62914560)===0&&(Is=4194304),i}function Xi(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Ji(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Yo(i,r,l,h,g,v){var S=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var R=i.entanglements,G=i.expirationTimes,ie=i.hiddenUpdates;for(l=S&~l;0<l;){var ue=31-Tn(l),me=1<<ue;R[ue]=0,G[ue]=-1;var re=ie[ue];if(re!==null)for(ie[ue]=null,ue=0;ue<re.length;ue++){var ae=re[ue];ae!==null&&(ae.lane&=-536870913)}l&=~me}h!==0&&es(i,h,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(S&~r))}function es(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var h=31-Tn(r);i.entangledLanes|=r,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Qo(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var h=31-Tn(l),g=1<<h;g&r|i[h]&r&&(i[h]|=r),l&=~g}}function Js(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ta(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function er(){var i=Y.p;return i!==0?i:(i=window.event,i===void 0?32:uw(i.type))}function Ea(i,r){var l=Y.p;try{return Y.p=i,r()}finally{Y.p=l}}var Dt=Math.random().toString(36).slice(2),sn="__reactFiber$"+Dt,Qt="__reactProps$"+Dt,gi="__reactContainer$"+Dt,Gn="__reactEvents$"+Dt,Pe="__reactListeners$"+Dt,Cs="__reactHandles$"+Dt,Xo="__reactResources$"+Dt,tr="__reactMarker$"+Dt;function Rs(i){delete i[sn],delete i[Qt],delete i[Gn],delete i[Pe],delete i[Cs]}function Ii(i){var r=i[sn];if(r)return r;for(var l=i.parentNode;l;){if(r=l[gi]||l[sn]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=Wb(i);i!==null;){if(l=i[sn])return l;i=Wb(i)}return r}i=l,l=i.parentNode}return null}function Ci(i){if(i=i[sn]||i[gi]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function jn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function En(i){var r=i[Xo];return r||(r=i[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Zt(i){i[tr]=!0}var Jo=new Set,Na={};function Ri(i,r){ts(i,r),ts(i+"Capture",r)}function ts(i,r){for(Na[i]=r,i=0;i<r.length;i++)Jo.add(r[i])}var Ql=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mr={},Dr={};function Xl(i){return Bt.call(Dr,i)?!0:Bt.call(Mr,i)?!1:Ql.test(i)?Dr[i]=!0:(Mr[i]=!0,!1)}function nr(i,r,l){if(Xl(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function ns(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function _n(i,r,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+h)}}var ks,ir;function is(i){if(ks===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);ks=r&&r[1]||"",ir=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+i+ir}var Lr=!1;function ss(i,r){if(!i||Lr)return"";Lr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ae){var re=ae}Reflect.construct(i,[],me)}else{try{me.call()}catch(ae){re=ae}i.call(me.prototype)}}else{try{throw Error()}catch(ae){re=ae}(me=i())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ae){if(ae&&re&&typeof ae.stack=="string")return[ae.stack,re.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),S=v[0],R=v[1];if(S&&R){var G=S.split(`
`),ie=R.split(`
`);for(g=h=0;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;for(;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;if(h===G.length||g===ie.length)for(h=G.length-1,g=ie.length-1;1<=h&&0<=g&&G[h]!==ie[g];)g--;for(;1<=h&&0<=g;h--,g--)if(G[h]!==ie[g]){if(h!==1||g!==1)do if(h--,g--,0>g||G[h]!==ie[g]){var ue=`
`+G[h].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=h&&0<=g);break}}}finally{Lr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?is(l):""}function st(i){switch(i.tag){case 26:case 27:case 5:return is(i.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return ss(i.type,!1);case 11:return ss(i.type.render,!1);case 1:return ss(i.type,!0);case 31:return is("Activity");default:return""}}function xt(i){try{var r="";do r+=st(i),i=i.return;while(i);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function un(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rs(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function sr(i){var r=rs(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),h=""+i[r];if(!i.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(S){h=""+S,v.call(this,S)}}),Object.defineProperty(i,r,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(S){h=""+S},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function rr(i){i._valueTracker||(i._valueTracker=sr(i))}function Qe(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return i&&(h=rs(i)?i.checked?"true":"false":i.value),i=h,i!==l?(r.setValue(i),!0):!1}function Et(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var el=/[\n"\\]/g;function Ft(i){return i.replace(el,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Lt(i,r,l,h,g,v,S,R){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),r!=null?S==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+un(r)):i.value!==""+un(r)&&(i.value=""+un(r)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),r!=null?ki(i,S,un(r)):l!=null?ki(i,S,un(l)):h!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+un(R):i.removeAttribute("name")}function Or(i,r,l,h,g,v,S,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;l=l!=null?""+un(l):"",r=r!=null?""+un(r):l,R||r===i.value||(i.value=r),i.defaultValue=r}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=R?i.checked:!!h,i.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S)}function ki(i,r,l){r==="number"&&Et(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Mn(i,r,l,h){if(i=i.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=r.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+un(l),r=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function He(i,r,l){if(r!=null&&(r=""+un(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+un(l):""}function si(i,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(s(92));if(Je(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=un(r),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function Nn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var Pi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sa(i,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":h?i.setProperty(r,l):typeof l!="number"||l===0||Pi.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Ps(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in r)h=r[g],r.hasOwnProperty(g)&&l[g]!==h&&Sa(i,g,h)}else for(var v in r)r.hasOwnProperty(v)&&Sa(i,v,r[v])}function Vr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(i){return Aa.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ji=null;function Dn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var as=null,Mi=null;function nl(i){var r=Ci(i);if(r&&(i=r.stateNode)){var l=i[Qt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Lt(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ft(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==i&&h.form===i.form){var g=h[Qt]||null;if(!g)throw Error(s(90));Lt(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===i.form&&Qe(h)}break e;case"textarea":He(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Mn(i,!!l.multiple,r,!1)}}}var ze=!1;function ri(i,r,l){if(ze)return i(r,l);ze=!0;try{var h=i(r);return h}finally{if(ze=!1,(as!==null||Mi!==null)&&(qd(),as&&(r=as,i=Mi,Mi=as=null,nl(r),i)))for(r=0;r<i.length;r++)nl(i[r])}}function mt(i,r){var l=i.stateNode;if(l===null)return null;var h=l[Qt]||null;if(h===null)return null;l=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(_i)try{var js={};Object.defineProperty(js,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Zn=!1}var vi=null,$n=null,Di=null;function Ms(){if(Di)return Di;var i,r=$n,l=r.length,h,g="value"in vi?vi.value:vi.textContent,v=g.length;for(i=0;i<l&&r[i]===g[i];i++);var S=l-i;for(h=1;h<=S&&r[l-h]===g[v-h];h++);return Di=g.slice(i,1<h?1-h:void 0)}function At(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Sn(){return!0}function Ia(){return!1}function rn(i){function r(l,h,g,v,S){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(l=i[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Sn:Ia,this.isPropagationStopped=Ia,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Sn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Sn)},persist:function(){},isPersistent:Sn}),r}var vt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=rn(vt),Ds=E({},vt,{view:0,detail:0}),Jl=rn(Ds),zr,tt,os,vn=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==os&&(os&&i.type==="mousemove"?(zr=i.screenX-os.screenX,tt=i.screenY-os.screenY):tt=zr=0,os=i),zr)},movementY:function(i){return"movementY"in i?i.movementY:tt}}),An=rn(vn),il=E({},vn,{dataTransfer:0}),mu=rn(il),Ls=E({},Ds,{relatedTarget:0}),Ca=rn(Ls),Ra=E({},vt,{animationName:0,elapsedTime:0,pseudoElement:0}),ka=rn(Ra),ec=E({},vt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),or=rn(ec),pu=E({},vt,{data:0}),Kn=rn(pu),Br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Li={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pa(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Li[i])?!!r[i]:!1}function lr(){return Pa}var ja=E({},Ds,{key:function(i){if(i.key){var r=Br[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=At(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lr,charCode:function(i){return i.type==="keypress"?At(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?At(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ma=rn(ja),rl=E({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Da=rn(rl),Os=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lr}),tc=rn(Os),La=E({},vt,{propertyName:0,elapsedTime:0,pseudoElement:0}),nc=rn(La),al=E({},vn,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Fr=rn(al),hn=E({},vt,{newState:0,oldState:0}),ls=rn(hn),ic=[9,13,27,32],Wn=_i&&"CompositionEvent"in window,m=null;_i&&"documentMode"in document&&(m=document.documentMode);var w=_i&&"TextEvent"in window&&!m,N=_i&&(!Wn||m&&8<m&&11>=m),P=" ",X=!1;function le(i,r){switch(i){case"keyup":return ic.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function be(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ct=!1;function Xt(i,r){switch(i){case"compositionend":return be(r);case"keypress":return r.which!==32?null:(X=!0,P);case"textInput":return i=r.data,i===P&&X?null:i;default:return null}}function ut(i,r){if(ct)return i==="compositionend"||!Wn&&le(i,r)?(i=Ms(),Di=$n=vi=null,ct=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return N&&r.locale!=="ko"?null:r.data;default:return null}}var bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ot(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!bt[i.type]:r==="textarea"}function Vs(i,r,l,h){as?Mi?Mi.push(h):Mi=[h]:as=h,r=Wd(r,"onChange"),0<r.length&&(l=new Ur("onChange","change",null,l,h),i.push({event:l,listeners:r}))}var kt=null,cs=null;function us(i){Ub(i,0)}function sc(i){var r=jn(i);if(Qe(r))return i}function Oa(i,r){if(i==="change")return r}var gu=!1;if(_i){var Va;if(_i){var _u="oninput"in document;if(!_u){var Us=document.createElement("div");Us.setAttribute("oninput","return;"),_u=typeof Us.oninput=="function"}Va=_u}else Va=!1;gu=Va&&(!document.documentMode||9<document.documentMode)}function ol(){kt&&(kt.detachEvent("onpropertychange",ld),cs=kt=null)}function ld(i){if(i.propertyName==="value"&&sc(cs)){var r=[];Vs(r,cs,i,Dn(i)),ri(us,r)}}function vu(i,r,l){i==="focusin"?(ol(),kt=r,cs=l,kt.attachEvent("onpropertychange",ld)):i==="focusout"&&ol()}function ep(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return sc(cs)}function zs(i,r){if(i==="click")return sc(r)}function tp(i,r){if(i==="input"||i==="change")return sc(r)}function Ua(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ai=typeof Object.is=="function"?Object.is:Ua;function oi(i,r){if(ai(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Bt.call(r,g)||!ai(i[g],r[g]))return!1}return!0}function ll(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yu(i,r){var l=ll(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=r&&h>=r)return{node:l,offset:r-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ll(l)}}function rc(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?rc(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function cl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Et(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=Et(i.document)}return r}function ul(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var ac=_i&&"documentMode"in document&&11>=document.documentMode,Oi=null,za=null,qr=null,oc=!1;function cd(i,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;oc||Oi==null||Oi!==Et(h)||(h=Oi,"selectionStart"in h&&ul(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),qr&&oi(qr,h)||(qr=h,h=Wd(za,"onSelect"),0<h.length&&(r=new Ur("onSelect","select",null,r,l),i.push({event:r,listeners:h}),r.target=Oi)))}function hs(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var Ba={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionrun:hs("Transition","TransitionRun"),transitionstart:hs("Transition","TransitionStart"),transitioncancel:hs("Transition","TransitionCancel"),transitionend:hs("Transition","TransitionEnd")},lc={},ud={};_i&&(ud=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function cr(i){if(lc[i])return lc[i];if(!Ba[i])return i;var r=Ba[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in ud)return lc[i]=r[l];return i}var hd=cr("animationend"),Vi=cr("animationiteration"),hl=cr("animationstart"),np=cr("transitionrun"),cc=cr("transitionstart"),ip=cr("transitioncancel"),xu=cr("transitionend"),dd=new Map,Hr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hr.push("scrollEnd");function Ui(i,r){dd.set(i,r),Ri(r,[i])}var Gr=new WeakMap;function li(i,r){if(typeof i=="object"&&i!==null){var l=Gr.get(i);return l!==void 0?l:(r={value:i,source:r,stack:xt(r)},Gr.set(i,r),r)}return{value:i,source:r,stack:xt(r)}}var ci=[],Fa=0,zi=0;function dl(){for(var i=Fa,r=zi=Fa=0;r<i;){var l=ci[r];ci[r++]=null;var h=ci[r];ci[r++]=null;var g=ci[r];ci[r++]=null;var v=ci[r];if(ci[r++]=null,h!==null&&g!==null){var S=h.pending;S===null?g.next=g:(g.next=S.next,S.next=g),h.pending=g}v!==0&&ml(l,g,v)}}function fl(i,r,l,h){ci[Fa++]=i,ci[Fa++]=r,ci[Fa++]=l,ci[Fa++]=h,zi|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Zr(i,r,l,h){return fl(i,r,l,h),ur(i)}function qa(i,r){return fl(i,null,null,r),ur(i)}function ml(i,r,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,h=v.alternate,h!==null&&(h.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&r!==null&&(g=31-Tn(l),i=v.hiddenUpdates,h=i[g],h===null?i[g]=[r]:h.push(r),r.lane=l|536870912),v):null}function ur(i){if(50<qu)throw qu=0,eg=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var $r={};function fd(i,r,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(i,r,l,h){return new fd(i,r,l,h)}function uc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ds(i,r){var l=i.alternate;return l===null?(l=ui(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function bu(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function pl(i,r,l,h,g,v){var S=0;if(h=i,typeof i=="function")uc(i)&&(S=1);else if(typeof i=="string")S=AI(i,l,Ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=ui(31,l,r,g),i.elementType=j,i.lanes=v,i;case D:return hr(l.children,g,v,r);case M:S=8,g|=24;break;case z:return i=ui(12,l,r,g|2),i.elementType=z,i.lanes=v,i;case ge:return i=ui(13,l,r,g),i.elementType=ge,i.lanes=v,i;case xe:return i=ui(19,l,r,g),i.elementType=xe,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:case te:S=10;break e;case $:S=9;break e;case _e:S=11;break e;case B:S=14;break e;case k:S=16,h=null;break e}S=29,l=Error(s(130,i===null?"null":typeof i,"")),h=null}return r=ui(S,l,r,g),r.elementType=i,r.type=h,r.lanes=v,r}function hr(i,r,l,h){return i=ui(7,i,h,r),i.lanes=l,i}function wu(i,r,l){return i=ui(6,i,null,r),i.lanes=l,i}function hc(i,r,l){return r=ui(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Kr=[],Ha=0,a=null,u=0,p=[],x=0,T=null,C=1,H="";function J(i,r){Kr[Ha++]=u,Kr[Ha++]=a,a=i,u=r}function oe(i,r,l){p[x++]=C,p[x++]=H,p[x++]=T,T=i;var h=C;i=H;var g=32-Tn(h)-1;h&=~(1<<g),l+=1;var v=32-Tn(r)+g;if(30<v){var S=g-g%5;v=(h&(1<<S)-1).toString(32),h>>=S,g-=S,C=1<<32-Tn(r)+g|l<<g|h,H=v+i}else C=1<<v|l<<g|h,H=i}function ye(i){i.return!==null&&(J(i,1),oe(i,1,0))}function Ee(i){for(;i===a;)a=Kr[--Ha],Kr[Ha]=null,u=Kr[--Ha],Kr[Ha]=null;for(;i===T;)T=p[--x],p[x]=null,H=p[--x],p[x]=null,C=p[--x],p[x]=null}var Ae=null,ke=null,We=!1,Vt=null,$t=!1,In=Error(s(519));function yi(i){var r=Error(s(418,""));throw Za(li(r,i)),In}function md(i){var r=i.stateNode,l=i.type,h=i.memoizedProps;switch(r[sn]=i,r[Qt]=h,l){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(l=0;l<Gu.length;l++)ot(Gu[l],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":ot("invalid",r),Or(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),rr(r);break;case"select":ot("invalid",r);break;case"textarea":ot("invalid",r),si(r,h.value,h.defaultValue,h.children),rr(r)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||qb(r.textContent,l)?(h.popover!=null&&(ot("beforetoggle",r),ot("toggle",r)),h.onScroll!=null&&ot("scroll",r),h.onScrollEnd!=null&&ot("scrollend",r),h.onClick!=null&&(r.onclick=Yd),r=!0):r=!1,r||yi(i)}function pd(i){for(Ae=i.return;Ae;)switch(Ae.tag){case 5:case 13:$t=!1;return;case 27:case 3:$t=!0;return;default:Ae=Ae.return}}function gl(i){if(i!==Ae)return!1;if(!We)return pd(i),We=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||gg(i.type,i.memoizedProps)),l=!l),l&&ke&&yi(i),pd(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(r===0){ke=Hs(i.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;i=i.nextSibling}ke=null}}else r===27?(r=ke,oo(i.type)?(i=xg,xg=null,ke=i):ke=r):ke=Ae?Hs(i.stateNode.nextSibling):null;return!0}function Ga(){ke=Ae=null,We=!1}function gd(){var i=Vt;return i!==null&&(wi===null?wi=i:wi.push.apply(wi,i),Vt=null),i}function Za(i){Vt===null?Vt=[i]:Vt.push(i)}var Ht=Te(null),fs=null,Bs=null;function dr(i,r,l){we(Ht,r._currentValue),r._currentValue=l}function Fs(i){i._currentValue=Ht.current,Me(Ht)}function _l(i,r,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),i===l)break;i=i.return}}function dc(i,r,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var S=g.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=g;for(var G=0;G<r.length;G++)if(R.context===r[G]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),_l(v.return,l,i),h||(S=null);break e}v=R.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(s(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),_l(S,l,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function vl(i,r,l,h){i=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var R=g.type;ai(g.pendingProps.value,S.value)||(i!==null?i.push(R):i=[R])}}else if(g===Re.current){if(S=g.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Qu):i=[Qu])}g=g.return}i!==null&&dc(r,i,l,h),r.flags|=262144}function _d(i){for(i=i.firstContext;i!==null;){if(!ai(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yl(i){fs=i,Bs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Yn(i){return Cy(fs,i)}function vd(i,r){return fs===null&&yl(i),Cy(i,r)}function Cy(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Bs===null){if(i===null)throw Error(s(308));Bs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Bs=Bs.next=r;return l}var SA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},AA=n.unstable_scheduleCallback,IA=n.unstable_NormalPriority,yn={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sp(){return{controller:new SA,data:new Map,refCount:0}}function Tu(i){i.refCount--,i.refCount===0&&AA(IA,function(){i.controller.abort()})}var Eu=null,rp=0,fc=0,mc=null;function CA(i,r){if(Eu===null){var l=Eu=[];rp=0,fc=og(),mc={status:"pending",value:void 0,then:function(h){l.push(h)}}}return rp++,r.then(Ry,Ry),r}function Ry(){if(--rp===0&&Eu!==null){mc!==null&&(mc.status="fulfilled");var i=Eu;Eu=null,fc=0,mc=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function RA(i,r){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var ky=ee.S;ee.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&CA(i,r),ky!==null&&ky(i,r)};var xl=Te(null);function ap(){var i=xl.current;return i!==null?i:Ut.pooledCache}function yd(i,r){r===null?we(xl,xl.current):we(xl,r.pool)}function Py(){var i=ap();return i===null?null:{parent:yn._currentValue,pool:i}}var Nu=Error(s(460)),jy=Error(s(474)),xd=Error(s(542)),op={then:function(){}};function My(i){return i=i.status,i==="fulfilled"||i==="rejected"}function bd(){}function Dy(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(bd,bd),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Oy(i),i;default:if(typeof r.status=="string")r.then(bd,bd);else{if(i=Ut,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(h){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=h}},function(h){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Oy(i),i}throw Su=r,Nu}}var Su=null;function Ly(){if(Su===null)throw Error(s(459));var i=Su;return Su=null,i}function Oy(i){if(i===Nu||i===xd)throw Error(s(483))}var $a=!1;function lp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cp(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ka(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Wa(i,r,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Nt&2)!==0){var g=h.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),h.pending=r,r=ur(i),ml(i,null,l),r}return fl(i,h,r,l),ur(i)}function Au(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,Qo(i,l)}}function up(i,r){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?g=v=r:v=v.next=r}else g=v=r;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var hp=!1;function Iu(){if(hp){var i=mc;if(i!==null)throw i}}function Cu(i,r,l,h){hp=!1;var g=i.updateQueue;$a=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var G=R,ie=G.next;G.next=null,S===null?v=ie:S.next=ie,S=G;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,R=ue.lastBaseUpdate,R!==S&&(R===null?ue.firstBaseUpdate=ie:R.next=ie,ue.lastBaseUpdate=G))}if(v!==null){var me=g.baseState;S=0,ue=ie=G=null,R=v;do{var re=R.lane&-536870913,ae=re!==R.lane;if(ae?(pt&re)===re:(h&re)===re){re!==0&&re===fc&&(hp=!0),ue!==null&&(ue=ue.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var $e=i,Fe=R;re=r;var Rt=l;switch(Fe.tag){case 1:if($e=Fe.payload,typeof $e=="function"){me=$e.call(Rt,me,re);break e}me=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Fe.payload,re=typeof $e=="function"?$e.call(Rt,me,re):$e,re==null)break e;me=E({},me,re);break e;case 2:$a=!0}}re=R.callback,re!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=g.callbacks,ae===null?g.callbacks=[re]:ae.push(re))}else ae={lane:re,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ue===null?(ie=ue=ae,G=me):ue=ue.next=ae,S|=re;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;ae=R,R=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);ue===null&&(G=me),g.baseState=G,g.firstBaseUpdate=ie,g.lastBaseUpdate=ue,v===null&&(g.shared.lanes=0),io|=S,i.lanes=S,i.memoizedState=me}}function Vy(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Uy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Vy(l[i],r)}var pc=Te(null),wd=Te(0);function zy(i,r){i=ta,we(wd,i),we(pc,r),ta=i|r.baseLanes}function dp(){we(wd,ta),we(pc,pc.current)}function fp(){ta=wd.current,Me(pc),Me(wd)}var Ya=0,it=null,It=null,dn=null,Td=!1,gc=!1,bl=!1,Ed=0,Ru=0,_c=null,kA=0;function an(){throw Error(s(321))}function mp(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!ai(i[l],r[l]))return!1;return!0}function pp(i,r,l,h,g,v){return Ya=v,it=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ee.H=i===null||i.memoizedState===null?Tx:Ex,bl=!1,v=l(h,g),bl=!1,gc&&(v=Fy(r,l,h,g)),By(i),v}function By(i){ee.H=Rd;var r=It!==null&&It.next!==null;if(Ya=0,dn=It=it=null,Td=!1,Ru=0,_c=null,r)throw Error(s(300));i===null||Cn||(i=i.dependencies,i!==null&&_d(i)&&(Cn=!0))}function Fy(i,r,l,h){it=i;var g=0;do{if(gc&&(_c=null),Ru=0,gc=!1,25<=g)throw Error(s(301));if(g+=1,dn=It=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}ee.H=VA,v=r(l,h)}while(gc);return v}function PA(){var i=ee.H,r=i.useState()[0];return r=typeof r.then=="function"?ku(r):r,i=i.useState()[0],(It!==null?It.memoizedState:null)!==i&&(it.flags|=1024),r}function gp(){var i=Ed!==0;return Ed=0,i}function _p(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function vp(i){if(Td){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Td=!1}Ya=0,dn=It=it=null,gc=!1,Ru=Ed=0,_c=null}function xi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?it.memoizedState=dn=i:dn=dn.next=i,dn}function fn(){if(It===null){var i=it.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var r=dn===null?it.memoizedState:dn.next;if(r!==null)dn=r,It=i;else{if(i===null)throw it.alternate===null?Error(s(467)):Error(s(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},dn===null?it.memoizedState=dn=i:dn=dn.next=i}return dn}function yp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ku(i){var r=Ru;return Ru+=1,_c===null&&(_c=[]),i=Dy(_c,i,r),r=it,(dn===null?r.memoizedState:dn.next)===null&&(r=r.alternate,ee.H=r===null||r.memoizedState===null?Tx:Ex),i}function Nd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ku(i);if(i.$$typeof===te)return Yn(i)}throw Error(s(438,String(i)))}function xp(i){var r=null,l=it.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=it.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=yp(),it.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),h=0;h<i;h++)l[h]=U;return r.index++,l}function Wr(i,r){return typeof r=="function"?r(i):r}function Sd(i){var r=fn();return bp(r,It,i)}function bp(i,r,l){var h=i.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var g=i.baseQueue,v=h.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}r.baseQueue=g=v,h.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{r=g.next;var R=S=null,G=null,ie=r,ue=!1;do{var me=ie.lane&-536870913;if(me!==ie.lane?(pt&me)===me:(Ya&me)===me){var re=ie.revertLane;if(re===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),me===fc&&(ue=!0);else if((Ya&re)===re){ie=ie.next,re===fc&&(ue=!0);continue}else me={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},G===null?(R=G=me,S=v):G=G.next=me,it.lanes|=re,io|=re;me=ie.action,bl&&l(v,me),v=ie.hasEagerState?ie.eagerState:l(v,me)}else re={lane:me,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},G===null?(R=G=re,S=v):G=G.next=re,it.lanes|=me,io|=me;ie=ie.next}while(ie!==null&&ie!==r);if(G===null?S=v:G.next=R,!ai(v,i.memoizedState)&&(Cn=!0,ue&&(l=mc,l!==null)))throw l;i.memoizedState=v,i.baseState=S,i.baseQueue=G,h.lastRenderedState=v}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function wp(i){var r=fn(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,v=r.memoizedState;if(g!==null){l.pending=null;var S=g=g.next;do v=i(v,S.action),S=S.next;while(S!==g);ai(v,r.memoizedState)||(Cn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,h]}function qy(i,r,l){var h=it,g=fn(),v=We;if(v){if(l===void 0)throw Error(s(407));l=l()}else l=r();var S=!ai((It||g).memoizedState,l);S&&(g.memoizedState=l,Cn=!0),g=g.queue;var R=Zy.bind(null,h,g,i);if(Pu(2048,8,R,[i]),g.getSnapshot!==r||S||dn!==null&&dn.memoizedState.tag&1){if(h.flags|=2048,vc(9,Ad(),Gy.bind(null,h,g,l,r),null),Ut===null)throw Error(s(349));v||(Ya&124)!==0||Hy(h,r,l)}return l}function Hy(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=it.updateQueue,r===null?(r=yp(),it.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Gy(i,r,l,h){r.value=l,r.getSnapshot=h,$y(r)&&Ky(i)}function Zy(i,r,l){return l(function(){$y(r)&&Ky(i)})}function $y(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!ai(i,l)}catch{return!0}}function Ky(i){var r=qa(i,2);r!==null&&Gi(r,i,2)}function Tp(i){var r=xi();if(typeof i=="function"){var l=i;if(i=l(),bl){Hn(!0);try{l()}finally{Hn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:i},r}function Wy(i,r,l,h){return i.baseState=l,bp(i,It,typeof h=="function"?h:Wr)}function jA(i,r,l,h,g){if(Cd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};ee.T!==null?l(!0):v.isTransition=!1,h(v),l=r.pending,l===null?(v.next=r.pending=v,Yy(r,v)):(v.next=l.next,r.pending=l.next=v)}}function Yy(i,r){var l=r.action,h=r.payload,g=i.state;if(r.isTransition){var v=ee.T,S={};ee.T=S;try{var R=l(g,h),G=ee.S;G!==null&&G(S,R),Qy(i,r,R)}catch(ie){Ep(i,r,ie)}finally{ee.T=v}}else try{v=l(g,h),Qy(i,r,v)}catch(ie){Ep(i,r,ie)}}function Qy(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Xy(i,r,h)},function(h){return Ep(i,r,h)}):Xy(i,r,l)}function Xy(i,r,l){r.status="fulfilled",r.value=l,Jy(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,Yy(i,l)))}function Ep(i,r,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,Jy(r),r=r.next;while(r!==h)}i.action=null}function Jy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ex(i,r){return r}function tx(i,r){if(We){var l=Ut.formState;if(l!==null){e:{var h=it;if(We){if(ke){t:{for(var g=ke,v=$t;g.nodeType!==8;){if(!v){g=null;break t}if(g=Hs(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){ke=Hs(g.nextSibling),h=g.data==="F!";break e}}yi(h)}h=!1}h&&(r=l[0])}}return l=xi(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ex,lastRenderedState:r},l.queue=h,l=xx.bind(null,it,h),h.dispatch=l,h=Tp(!1),v=Cp.bind(null,it,!1,h.queue),h=xi(),g={state:r,dispatch:null,action:i,pending:null},h.queue=g,l=jA.bind(null,it,g,v,l),g.dispatch=l,h.memoizedState=i,[r,l,!1]}function nx(i){var r=fn();return ix(r,It,i)}function ix(i,r,l){if(r=bp(i,r,ex)[0],i=Sd(Wr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=ku(r)}catch(S){throw S===Nu?xd:S}else h=r;r=fn();var g=r.queue,v=g.dispatch;return l!==r.memoizedState&&(it.flags|=2048,vc(9,Ad(),MA.bind(null,g,l),null)),[h,v,i]}function MA(i,r){i.action=r}function sx(i){var r=fn(),l=It;if(l!==null)return ix(r,l,i);fn(),r=r.memoizedState,l=fn();var h=l.queue.dispatch;return l.memoizedState=i,[r,h,!1]}function vc(i,r,l,h){return i={tag:i,create:l,deps:h,inst:r,next:null},r=it.updateQueue,r===null&&(r=yp(),it.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,r.lastEffect=i),i}function Ad(){return{destroy:void 0,resource:void 0}}function rx(){return fn().memoizedState}function Id(i,r,l,h){var g=xi();h=h===void 0?null:h,it.flags|=i,g.memoizedState=vc(1|r,Ad(),l,h)}function Pu(i,r,l,h){var g=fn();h=h===void 0?null:h;var v=g.memoizedState.inst;It!==null&&h!==null&&mp(h,It.memoizedState.deps)?g.memoizedState=vc(r,v,l,h):(it.flags|=i,g.memoizedState=vc(1|r,v,l,h))}function ax(i,r){Id(8390656,8,i,r)}function ox(i,r){Pu(2048,8,i,r)}function lx(i,r){return Pu(4,2,i,r)}function cx(i,r){return Pu(4,4,i,r)}function ux(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function hx(i,r,l){l=l!=null?l.concat([i]):null,Pu(4,4,ux.bind(null,r,i),l)}function Np(){}function dx(i,r){var l=fn();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&mp(r,h[1])?h[0]:(l.memoizedState=[i,r],i)}function fx(i,r){var l=fn();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&mp(r,h[1]))return h[0];if(h=i(),bl){Hn(!0);try{i()}finally{Hn(!1)}}return l.memoizedState=[h,r],h}function Sp(i,r,l){return l===void 0||(Ya&1073741824)!==0?i.memoizedState=r:(i.memoizedState=l,i=gb(),it.lanes|=i,io|=i,l)}function mx(i,r,l,h){return ai(l,r)?l:pc.current!==null?(i=Sp(i,l,h),ai(i,r)||(Cn=!0),i):(Ya&42)===0?(Cn=!0,i.memoizedState=l):(i=gb(),it.lanes|=i,io|=i,r)}function px(i,r,l,h,g){var v=Y.p;Y.p=v!==0&&8>v?v:8;var S=ee.T,R={};ee.T=R,Cp(i,!1,r,l);try{var G=g(),ie=ee.S;if(ie!==null&&ie(R,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ue=RA(G,h);ju(i,r,ue,Hi(i))}else ju(i,r,h,Hi(i))}catch(me){ju(i,r,{then:function(){},status:"rejected",reason:me},Hi())}finally{Y.p=v,ee.T=S}}function DA(){}function Ap(i,r,l,h){if(i.tag!==5)throw Error(s(476));var g=gx(i).queue;px(i,g,r,se,l===null?DA:function(){return _x(i),l(h)})}function gx(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:se},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function _x(i){var r=gx(i).next.queue;ju(i,r,{},Hi())}function Ip(){return Yn(Qu)}function vx(){return fn().memoizedState}function yx(){return fn().memoizedState}function LA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Hi();i=Ka(l);var h=Wa(r,i,l);h!==null&&(Gi(h,r,l),Au(h,r,l)),r={cache:sp()},i.payload=r;return}r=r.return}}function OA(i,r,l){var h=Hi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Cd(i)?bx(r,l):(l=Zr(i,r,l,h),l!==null&&(Gi(l,i,h),wx(l,r,h)))}function xx(i,r,l){var h=Hi();ju(i,r,l,h)}function ju(i,r,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Cd(i))bx(r,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var S=r.lastRenderedState,R=v(S,l);if(g.hasEagerState=!0,g.eagerState=R,ai(R,S))return fl(i,r,g,0),Ut===null&&dl(),!1}catch{}finally{}if(l=Zr(i,r,g,h),l!==null)return Gi(l,i,h),wx(l,r,h),!0}return!1}function Cp(i,r,l,h){if(h={lane:2,revertLane:og(),action:h,hasEagerState:!1,eagerState:null,next:null},Cd(i)){if(r)throw Error(s(479))}else r=Zr(i,l,h,2),r!==null&&Gi(r,i,2)}function Cd(i){var r=i.alternate;return i===it||r!==null&&r===it}function bx(i,r){gc=Td=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function wx(i,r,l){if((l&4194048)!==0){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,Qo(i,l)}}var Rd={readContext:Yn,use:Nd,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an},Tx={readContext:Yn,use:Nd,useCallback:function(i,r){return xi().memoizedState=[i,r===void 0?null:r],i},useContext:Yn,useEffect:ax,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Id(4194308,4,ux.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Id(4194308,4,i,r)},useInsertionEffect:function(i,r){Id(4,2,i,r)},useMemo:function(i,r){var l=xi();r=r===void 0?null:r;var h=i();if(bl){Hn(!0);try{i()}finally{Hn(!1)}}return l.memoizedState=[h,r],h},useReducer:function(i,r,l){var h=xi();if(l!==void 0){var g=l(r);if(bl){Hn(!0);try{l(r)}finally{Hn(!1)}}}else g=r;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=OA.bind(null,it,i),[h.memoizedState,i]},useRef:function(i){var r=xi();return i={current:i},r.memoizedState=i},useState:function(i){i=Tp(i);var r=i.queue,l=xx.bind(null,it,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:Np,useDeferredValue:function(i,r){var l=xi();return Sp(l,i,r)},useTransition:function(){var i=Tp(!1);return i=px.bind(null,it,i.queue,!0,!1),xi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var h=it,g=xi();if(We){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Ut===null)throw Error(s(349));(pt&124)!==0||Hy(h,r,l)}g.memoizedState=l;var v={value:l,getSnapshot:r};return g.queue=v,ax(Zy.bind(null,h,v,i),[i]),h.flags|=2048,vc(9,Ad(),Gy.bind(null,h,v,l,r),null),l},useId:function(){var i=xi(),r=Ut.identifierPrefix;if(We){var l=H,h=C;l=(h&~(1<<32-Tn(h)-1)).toString(32)+l,r="«"+r+"R"+l,l=Ed++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=kA++,r="«"+r+"r"+l.toString(32)+"»";return i.memoizedState=r},useHostTransitionStatus:Ip,useFormState:tx,useActionState:tx,useOptimistic:function(i){var r=xi();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Cp.bind(null,it,!0,l),l.dispatch=r,[i,r]},useMemoCache:xp,useCacheRefresh:function(){return xi().memoizedState=LA.bind(null,it)}},Ex={readContext:Yn,use:Nd,useCallback:dx,useContext:Yn,useEffect:ox,useImperativeHandle:hx,useInsertionEffect:lx,useLayoutEffect:cx,useMemo:fx,useReducer:Sd,useRef:rx,useState:function(){return Sd(Wr)},useDebugValue:Np,useDeferredValue:function(i,r){var l=fn();return mx(l,It.memoizedState,i,r)},useTransition:function(){var i=Sd(Wr)[0],r=fn().memoizedState;return[typeof i=="boolean"?i:ku(i),r]},useSyncExternalStore:qy,useId:vx,useHostTransitionStatus:Ip,useFormState:nx,useActionState:nx,useOptimistic:function(i,r){var l=fn();return Wy(l,It,i,r)},useMemoCache:xp,useCacheRefresh:yx},VA={readContext:Yn,use:Nd,useCallback:dx,useContext:Yn,useEffect:ox,useImperativeHandle:hx,useInsertionEffect:lx,useLayoutEffect:cx,useMemo:fx,useReducer:wp,useRef:rx,useState:function(){return wp(Wr)},useDebugValue:Np,useDeferredValue:function(i,r){var l=fn();return It===null?Sp(l,i,r):mx(l,It.memoizedState,i,r)},useTransition:function(){var i=wp(Wr)[0],r=fn().memoizedState;return[typeof i=="boolean"?i:ku(i),r]},useSyncExternalStore:qy,useId:vx,useHostTransitionStatus:Ip,useFormState:sx,useActionState:sx,useOptimistic:function(i,r){var l=fn();return It!==null?Wy(l,It,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:xp,useCacheRefresh:yx},yc=null,Mu=0;function kd(i){var r=Mu;return Mu+=1,yc===null&&(yc=[]),Dy(yc,i,r)}function Du(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Pd(i,r){throw r.$$typeof===A?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Nx(i){var r=i._init;return r(i._payload)}function Sx(i){function r(Q,K){if(i){var ne=Q.deletions;ne===null?(Q.deletions=[K],Q.flags|=16):ne.push(K)}}function l(Q,K){if(!i)return null;for(;K!==null;)r(Q,K),K=K.sibling;return null}function h(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function g(Q,K){return Q=ds(Q,K),Q.index=0,Q.sibling=null,Q}function v(Q,K,ne){return Q.index=ne,i?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<K?(Q.flags|=67108866,K):ne):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function S(Q){return i&&Q.alternate===null&&(Q.flags|=67108866),Q}function R(Q,K,ne,he){return K===null||K.tag!==6?(K=wu(ne,Q.mode,he),K.return=Q,K):(K=g(K,ne),K.return=Q,K)}function G(Q,K,ne,he){var Ie=ne.type;return Ie===D?ue(Q,K,ne.props.children,he,ne.key):K!==null&&(K.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===k&&Nx(Ie)===K.type)?(K=g(K,ne.props),Du(K,ne),K.return=Q,K):(K=pl(ne.type,ne.key,ne.props,null,Q.mode,he),Du(K,ne),K.return=Q,K)}function ie(Q,K,ne,he){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=hc(ne,Q.mode,he),K.return=Q,K):(K=g(K,ne.children||[]),K.return=Q,K)}function ue(Q,K,ne,he,Ie){return K===null||K.tag!==7?(K=hr(ne,Q.mode,he,Ie),K.return=Q,K):(K=g(K,ne),K.return=Q,K)}function me(Q,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=wu(""+K,Q.mode,ne),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return ne=pl(K.type,K.key,K.props,null,Q.mode,ne),Du(ne,K),ne.return=Q,ne;case F:return K=hc(K,Q.mode,ne),K.return=Q,K;case k:var he=K._init;return K=he(K._payload),me(Q,K,ne)}if(Je(K)||Z(K))return K=hr(K,Q.mode,ne,null),K.return=Q,K;if(typeof K.then=="function")return me(Q,kd(K),ne);if(K.$$typeof===te)return me(Q,vd(Q,K),ne);Pd(Q,K)}return null}function re(Q,K,ne,he){var Ie=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ie!==null?null:R(Q,K,""+ne,he);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return ne.key===Ie?G(Q,K,ne,he):null;case F:return ne.key===Ie?ie(Q,K,ne,he):null;case k:return Ie=ne._init,ne=Ie(ne._payload),re(Q,K,ne,he)}if(Je(ne)||Z(ne))return Ie!==null?null:ue(Q,K,ne,he,null);if(typeof ne.then=="function")return re(Q,K,kd(ne),he);if(ne.$$typeof===te)return re(Q,K,vd(Q,ne),he);Pd(Q,ne)}return null}function ae(Q,K,ne,he,Ie){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(ne)||null,R(K,Q,""+he,Ie);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case I:return Q=Q.get(he.key===null?ne:he.key)||null,G(K,Q,he,Ie);case F:return Q=Q.get(he.key===null?ne:he.key)||null,ie(K,Q,he,Ie);case k:var rt=he._init;return he=rt(he._payload),ae(Q,K,ne,he,Ie)}if(Je(he)||Z(he))return Q=Q.get(ne)||null,ue(K,Q,he,Ie,null);if(typeof he.then=="function")return ae(Q,K,ne,kd(he),Ie);if(he.$$typeof===te)return ae(Q,K,ne,vd(K,he),Ie);Pd(K,he)}return null}function $e(Q,K,ne,he){for(var Ie=null,rt=null,De=K,qe=K=0,kn=null;De!==null&&qe<ne.length;qe++){De.index>qe?(kn=De,De=null):kn=De.sibling;var yt=re(Q,De,ne[qe],he);if(yt===null){De===null&&(De=kn);break}i&&De&&yt.alternate===null&&r(Q,De),K=v(yt,K,qe),rt===null?Ie=yt:rt.sibling=yt,rt=yt,De=kn}if(qe===ne.length)return l(Q,De),We&&J(Q,qe),Ie;if(De===null){for(;qe<ne.length;qe++)De=me(Q,ne[qe],he),De!==null&&(K=v(De,K,qe),rt===null?Ie=De:rt.sibling=De,rt=De);return We&&J(Q,qe),Ie}for(De=h(De);qe<ne.length;qe++)kn=ae(De,Q,qe,ne[qe],he),kn!==null&&(i&&kn.alternate!==null&&De.delete(kn.key===null?qe:kn.key),K=v(kn,K,qe),rt===null?Ie=kn:rt.sibling=kn,rt=kn);return i&&De.forEach(function(fo){return r(Q,fo)}),We&&J(Q,qe),Ie}function Fe(Q,K,ne,he){if(ne==null)throw Error(s(151));for(var Ie=null,rt=null,De=K,qe=K=0,kn=null,yt=ne.next();De!==null&&!yt.done;qe++,yt=ne.next()){De.index>qe?(kn=De,De=null):kn=De.sibling;var fo=re(Q,De,yt.value,he);if(fo===null){De===null&&(De=kn);break}i&&De&&fo.alternate===null&&r(Q,De),K=v(fo,K,qe),rt===null?Ie=fo:rt.sibling=fo,rt=fo,De=kn}if(yt.done)return l(Q,De),We&&J(Q,qe),Ie;if(De===null){for(;!yt.done;qe++,yt=ne.next())yt=me(Q,yt.value,he),yt!==null&&(K=v(yt,K,qe),rt===null?Ie=yt:rt.sibling=yt,rt=yt);return We&&J(Q,qe),Ie}for(De=h(De);!yt.done;qe++,yt=ne.next())yt=ae(De,Q,qe,yt.value,he),yt!==null&&(i&&yt.alternate!==null&&De.delete(yt.key===null?qe:yt.key),K=v(yt,K,qe),rt===null?Ie=yt:rt.sibling=yt,rt=yt);return i&&De.forEach(function(UI){return r(Q,UI)}),We&&J(Q,qe),Ie}function Rt(Q,K,ne,he){if(typeof ne=="object"&&ne!==null&&ne.type===D&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:e:{for(var Ie=ne.key;K!==null;){if(K.key===Ie){if(Ie=ne.type,Ie===D){if(K.tag===7){l(Q,K.sibling),he=g(K,ne.props.children),he.return=Q,Q=he;break e}}else if(K.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===k&&Nx(Ie)===K.type){l(Q,K.sibling),he=g(K,ne.props),Du(he,ne),he.return=Q,Q=he;break e}l(Q,K);break}else r(Q,K);K=K.sibling}ne.type===D?(he=hr(ne.props.children,Q.mode,he,ne.key),he.return=Q,Q=he):(he=pl(ne.type,ne.key,ne.props,null,Q.mode,he),Du(he,ne),he.return=Q,Q=he)}return S(Q);case F:e:{for(Ie=ne.key;K!==null;){if(K.key===Ie)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){l(Q,K.sibling),he=g(K,ne.children||[]),he.return=Q,Q=he;break e}else{l(Q,K);break}else r(Q,K);K=K.sibling}he=hc(ne,Q.mode,he),he.return=Q,Q=he}return S(Q);case k:return Ie=ne._init,ne=Ie(ne._payload),Rt(Q,K,ne,he)}if(Je(ne))return $e(Q,K,ne,he);if(Z(ne)){if(Ie=Z(ne),typeof Ie!="function")throw Error(s(150));return ne=Ie.call(ne),Fe(Q,K,ne,he)}if(typeof ne.then=="function")return Rt(Q,K,kd(ne),he);if(ne.$$typeof===te)return Rt(Q,K,vd(Q,ne),he);Pd(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(l(Q,K.sibling),he=g(K,ne),he.return=Q,Q=he):(l(Q,K),he=wu(ne,Q.mode,he),he.return=Q,Q=he),S(Q)):l(Q,K)}return function(Q,K,ne,he){try{Mu=0;var Ie=Rt(Q,K,ne,he);return yc=null,Ie}catch(De){if(De===Nu||De===xd)throw De;var rt=ui(29,De,null,Q.mode);return rt.lanes=he,rt.return=Q,rt}finally{}}}var xc=Sx(!0),Ax=Sx(!1),ms=Te(null),fr=null;function Qa(i){var r=i.alternate;we(xn,xn.current&1),we(ms,i),fr===null&&(r===null||pc.current!==null||r.memoizedState!==null)&&(fr=i)}function Ix(i){if(i.tag===22){if(we(xn,xn.current),we(ms,i),fr===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(fr=i)}}else Xa()}function Xa(){we(xn,xn.current),we(ms,ms.current)}function Yr(i){Me(ms),fr===i&&(fr=null),Me(xn)}var xn=Te(0);function jd(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||yg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Rp(i,r,l,h){r=i.memoizedState,l=l(h,r),l=l==null?r:E({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var kp={enqueueSetState:function(i,r,l){i=i._reactInternals;var h=Hi(),g=Ka(h);g.payload=r,l!=null&&(g.callback=l),r=Wa(i,g,h),r!==null&&(Gi(r,i,h),Au(r,i,h))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var h=Hi(),g=Ka(h);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Wa(i,g,h),r!==null&&(Gi(r,i,h),Au(r,i,h))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Hi(),h=Ka(l);h.tag=2,r!=null&&(h.callback=r),r=Wa(i,h,l),r!==null&&(Gi(r,i,l),Au(r,i,l))}};function Cx(i,r,l,h,g,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,S):r.prototype&&r.prototype.isPureReactComponent?!oi(l,h)||!oi(g,v):!0}function Rx(i,r,l,h){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==i&&kp.enqueueReplaceState(r,r.state,null)}function wl(i,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(i=i.defaultProps){l===r&&(l=E({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var Md=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function kx(i){Md(i)}function Px(i){console.error(i)}function jx(i){Md(i)}function Dd(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Mx(i,r,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Pp(i,r,l){return l=Ka(l),l.tag=3,l.payload={element:null},l.callback=function(){Dd(i,r)},l}function Dx(i){return i=Ka(i),i.tag=3,i}function Lx(i,r,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=h.value;i.payload=function(){return g(v)},i.callback=function(){Mx(r,l,h)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Mx(r,l,h),typeof g!="function"&&(so===null?so=new Set([this]):so.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function UA(i,r,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&vl(r,l,g,!0),l=ms.current,l!==null){switch(l.tag){case 13:return fr===null?ng():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===op?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),sg(i,h,g)),!1;case 22:return l.flags|=65536,h===op?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),sg(i,h,g)),!1}throw Error(s(435,l.tag))}return sg(i,h,g),ng(),!1}if(We)return r=ms.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,h!==In&&(i=Error(s(422),{cause:h}),Za(li(i,l)))):(h!==In&&(r=Error(s(423),{cause:h}),Za(li(r,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=li(h,l),g=Pp(i.stateNode,h,g),up(i,g),Jt!==4&&(Jt=2)),!1;var v=Error(s(520),{cause:h});if(v=li(v,l),Fu===null?Fu=[v]:Fu.push(v),Jt!==4&&(Jt=2),r===null)return!0;h=li(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=Pp(l.stateNode,h,i),up(l,i),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(so===null||!so.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Dx(g),Lx(g,i,l,h),up(l,g),!1}l=l.return}while(l!==null);return!1}var Ox=Error(s(461)),Cn=!1;function Ln(i,r,l,h){r.child=i===null?Ax(r,null,l,h):xc(r,i.child,l,h)}function Vx(i,r,l,h,g){l=l.render;var v=r.ref;if("ref"in h){var S={};for(var R in h)R!=="ref"&&(S[R]=h[R])}else S=h;return yl(r),h=pp(i,r,l,S,v,g),R=gp(),i!==null&&!Cn?(_p(i,r,g),Qr(i,r,g)):(We&&R&&ye(r),r.flags|=1,Ln(i,r,h,g),r.child)}function Ux(i,r,l,h,g){if(i===null){var v=l.type;return typeof v=="function"&&!uc(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,zx(i,r,v,h,g)):(i=pl(l.type,null,h,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!zp(i,g)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:oi,l(S,h)&&i.ref===r.ref)return Qr(i,r,g)}return r.flags|=1,i=ds(v,h),i.ref=r.ref,i.return=r,r.child=i}function zx(i,r,l,h,g){if(i!==null){var v=i.memoizedProps;if(oi(v,h)&&i.ref===r.ref)if(Cn=!1,r.pendingProps=h=v,zp(i,g))(i.flags&131072)!==0&&(Cn=!0);else return r.lanes=i.lanes,Qr(i,r,g)}return jp(i,r,l,h,g)}function Bx(i,r,l){var h=r.pendingProps,g=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=v!==null?v.baseLanes|l:l,i!==null){for(g=r.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;r.childLanes=v&~h}else r.childLanes=0,r.child=null;return Fx(i,r,h,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&yd(r,v!==null?v.cachePool:null),v!==null?zy(r,v):dp(),Ix(r);else return r.lanes=r.childLanes=536870912,Fx(i,r,v!==null?v.baseLanes|l:l,l)}else v!==null?(yd(r,v.cachePool),zy(r,v),Xa(),r.memoizedState=null):(i!==null&&yd(r,null),dp(),Xa());return Ln(i,r,g,l),r.child}function Fx(i,r,l,h){var g=ap();return g=g===null?null:{parent:yn._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},i!==null&&yd(r,null),dp(),Ix(r),i!==null&&vl(i,r,h,!0),null}function Ld(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function jp(i,r,l,h,g){return yl(r),l=pp(i,r,l,h,void 0,g),h=gp(),i!==null&&!Cn?(_p(i,r,g),Qr(i,r,g)):(We&&h&&ye(r),r.flags|=1,Ln(i,r,l,g),r.child)}function qx(i,r,l,h,g,v){return yl(r),r.updateQueue=null,l=Fy(r,h,l,g),By(i),h=gp(),i!==null&&!Cn?(_p(i,r,v),Qr(i,r,v)):(We&&h&&ye(r),r.flags|=1,Ln(i,r,l,v),r.child)}function Hx(i,r,l,h,g){if(yl(r),r.stateNode===null){var v=$r,S=l.contextType;typeof S=="object"&&S!==null&&(v=Yn(S)),v=new l(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=kp,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},lp(r),S=l.contextType,v.context=typeof S=="object"&&S!==null?Yn(S):$r,v.state=r.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Rp(r,l,S,h),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&kp.enqueueReplaceState(v,v.state,null),Cu(r,h,v,g),Iu(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(i===null){v=r.stateNode;var R=r.memoizedProps,G=wl(l,R);v.props=G;var ie=v.context,ue=l.contextType;S=$r,typeof ue=="object"&&ue!==null&&(S=Yn(ue));var me=l.getDerivedStateFromProps;ue=typeof me=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,ue||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||ie!==S)&&Rx(r,v,h,S),$a=!1;var re=r.memoizedState;v.state=re,Cu(r,h,v,g),Iu(),ie=r.memoizedState,R||re!==ie||$a?(typeof me=="function"&&(Rp(r,l,me,h),ie=r.memoizedState),(G=$a||Cx(r,l,G,h,re,ie,S))?(ue||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=ie),v.props=h,v.state=ie,v.context=S,h=G):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,cp(i,r),S=r.memoizedProps,ue=wl(l,S),v.props=ue,me=r.pendingProps,re=v.context,ie=l.contextType,G=$r,typeof ie=="object"&&ie!==null&&(G=Yn(ie)),R=l.getDerivedStateFromProps,(ie=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==me||re!==G)&&Rx(r,v,h,G),$a=!1,re=r.memoizedState,v.state=re,Cu(r,h,v,g),Iu();var ae=r.memoizedState;S!==me||re!==ae||$a||i!==null&&i.dependencies!==null&&_d(i.dependencies)?(typeof R=="function"&&(Rp(r,l,R,h),ae=r.memoizedState),(ue=$a||Cx(r,l,ue,h,re,ae,G)||i!==null&&i.dependencies!==null&&_d(i.dependencies))?(ie||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ae,G),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ae,G)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&re===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&re===i.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=ae),v.props=h,v.state=ae,v.context=G,h=ue):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&re===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&re===i.memoizedState||(r.flags|=1024),h=!1)}return v=h,Ld(i,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&h?(r.child=xc(r,i.child,null,g),r.child=xc(r,null,l,g)):Ln(i,r,l,g),r.memoizedState=v.state,i=r.child):i=Qr(i,r,g),i}function Gx(i,r,l,h){return Ga(),r.flags|=256,Ln(i,r,l,h),r.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dp(i){return{baseLanes:i,cachePool:Py()}}function Lp(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=ps),i}function Zx(i,r,l){var h=r.pendingProps,g=!1,v=(r.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(xn.current&2)!==0),S&&(g=!0,r.flags&=-129),S=(r.flags&32)!==0,r.flags&=-33,i===null){if(We){if(g?Qa(r):Xa(),We){var R=ke,G;if(G=R){e:{for(G=R,R=$t;G.nodeType!==8;){if(!R){R=null;break e}if(G=Hs(G.nextSibling),G===null){R=null;break e}}R=G}R!==null?(r.memoizedState={dehydrated:R,treeContext:T!==null?{id:C,overflow:H}:null,retryLane:536870912,hydrationErrors:null},G=ui(18,null,null,0),G.stateNode=R,G.return=r,r.child=G,Ae=r,ke=null,G=!0):G=!1}G||yi(r)}if(R=r.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return yg(R)?r.lanes=32:r.lanes=536870912,null;Yr(r)}return R=h.children,h=h.fallback,g?(Xa(),g=r.mode,R=Od({mode:"hidden",children:R},g),h=hr(h,g,l,null),R.return=r,h.return=r,R.sibling=h,r.child=R,g=r.child,g.memoizedState=Dp(l),g.childLanes=Lp(i,S,l),r.memoizedState=Mp,h):(Qa(r),Op(r,R))}if(G=i.memoizedState,G!==null&&(R=G.dehydrated,R!==null)){if(v)r.flags&256?(Qa(r),r.flags&=-257,r=Vp(i,r,l)):r.memoizedState!==null?(Xa(),r.child=i.child,r.flags|=128,r=null):(Xa(),g=h.fallback,R=r.mode,h=Od({mode:"visible",children:h.children},R),g=hr(g,R,l,null),g.flags|=2,h.return=r,g.return=r,h.sibling=g,r.child=h,xc(r,i.child,null,l),h=r.child,h.memoizedState=Dp(l),h.childLanes=Lp(i,S,l),r.memoizedState=Mp,r=g);else if(Qa(r),yg(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var ie=S.dgst;S=ie,h=Error(s(419)),h.stack="",h.digest=S,Za({value:h,source:null,stack:null}),r=Vp(i,r,l)}else if(Cn||vl(i,r,l,!1),S=(l&i.childLanes)!==0,Cn||S){if(S=Ut,S!==null&&(h=l&-l,h=(h&42)!==0?1:Js(h),h=(h&(S.suspendedLanes|l))!==0?0:h,h!==0&&h!==G.retryLane))throw G.retryLane=h,qa(i,h),Gi(S,i,h),Ox;R.data==="$?"||ng(),r=Vp(i,r,l)}else R.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=G.treeContext,ke=Hs(R.nextSibling),Ae=r,We=!0,Vt=null,$t=!1,i!==null&&(p[x++]=C,p[x++]=H,p[x++]=T,C=i.id,H=i.overflow,T=r),r=Op(r,h.children),r.flags|=4096);return r}return g?(Xa(),g=h.fallback,R=r.mode,G=i.child,ie=G.sibling,h=ds(G,{mode:"hidden",children:h.children}),h.subtreeFlags=G.subtreeFlags&65011712,ie!==null?g=ds(ie,g):(g=hr(g,R,l,null),g.flags|=2),g.return=r,h.return=r,h.sibling=g,r.child=h,h=g,g=r.child,R=i.child.memoizedState,R===null?R=Dp(l):(G=R.cachePool,G!==null?(ie=yn._currentValue,G=G.parent!==ie?{parent:ie,pool:ie}:G):G=Py(),R={baseLanes:R.baseLanes|l,cachePool:G}),g.memoizedState=R,g.childLanes=Lp(i,S,l),r.memoizedState=Mp,h):(Qa(r),l=i.child,i=l.sibling,l=ds(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,i!==null&&(S=r.deletions,S===null?(r.deletions=[i],r.flags|=16):S.push(i)),r.child=l,r.memoizedState=null,l)}function Op(i,r){return r=Od({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Od(i,r){return i=ui(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Vp(i,r,l){return xc(r,i.child,null,l),i=Op(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function $x(i,r,l){i.lanes|=r;var h=i.alternate;h!==null&&(h.lanes|=r),_l(i.return,r,l)}function Up(i,r,l,h,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=g)}function Kx(i,r,l){var h=r.pendingProps,g=h.revealOrder,v=h.tail;if(Ln(i,r,h.children,l),h=xn.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&$x(i,l,r);else if(i.tag===19)$x(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(we(xn,h),g){case"forwards":for(l=r.child,g=null;l!==null;)i=l.alternate,i!==null&&jd(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Up(r,!1,g,l,v);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&jd(i)===null){r.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Up(r,!0,l,null,v);break;case"together":Up(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Qr(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),io|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(vl(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=ds(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=ds(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function zp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&_d(i)))}function zA(i,r,l){switch(r.tag){case 3:Ke(r,r.stateNode.containerInfo),dr(r,yn,i.memoizedState.cache),Ga();break;case 27:case 5:Be(r);break;case 4:Ke(r,r.stateNode.containerInfo);break;case 10:dr(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Qa(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Zx(i,r,l):(Qa(r),i=Qr(i,r,l),i!==null?i.sibling:null);Qa(r);break;case 19:var g=(i.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(vl(i,r,l,!1),h=(l&r.childLanes)!==0),g){if(h)return Kx(i,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),we(xn,xn.current),h)break;return null;case 22:case 23:return r.lanes=0,Bx(i,r,l);case 24:dr(r,yn,i.memoizedState.cache)}return Qr(i,r,l)}function Wx(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Cn=!0;else{if(!zp(i,l)&&(r.flags&128)===0)return Cn=!1,zA(i,r,l);Cn=(i.flags&131072)!==0}else Cn=!1,We&&(r.flags&1048576)!==0&&oe(r,u,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var h=r.elementType,g=h._init;if(h=g(h._payload),r.type=h,typeof h=="function")uc(h)?(i=wl(h,i),r.tag=1,r=Hx(null,r,h,i,l)):(r.tag=0,r=jp(null,r,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===_e){r.tag=11,r=Vx(null,r,h,i,l);break e}else if(g===B){r.tag=14,r=Ux(null,r,h,i,l);break e}}throw r=Ce(h)||h,Error(s(306,r,""))}}return r;case 0:return jp(i,r,r.type,r.pendingProps,l);case 1:return h=r.type,g=wl(h,r.pendingProps),Hx(i,r,h,g,l);case 3:e:{if(Ke(r,r.stateNode.containerInfo),i===null)throw Error(s(387));h=r.pendingProps;var v=r.memoizedState;g=v.element,cp(i,r),Cu(r,h,null,l);var S=r.memoizedState;if(h=S.cache,dr(r,yn,h),h!==v.cache&&dc(r,[yn],l,!0),Iu(),h=S.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:S.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Gx(i,r,h,l);break e}else if(h!==g){g=li(Error(s(424)),r),Za(g),r=Gx(i,r,h,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ke=Hs(i.firstChild),Ae=r,We=!0,Vt=null,$t=!0,l=Ax(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ga(),h===g){r=Qr(i,r,l);break e}Ln(i,r,h,l)}r=r.child}return r;case 26:return Ld(i,r),i===null?(l=Jb(r.type,null,r.pendingProps,null))?r.memoizedState=l:We||(l=r.type,i=r.pendingProps,h=Qd(de.current).createElement(l),h[sn]=r,h[Qt]=i,Vn(h,l,i),Zt(h),r.stateNode=h):r.memoizedState=Jb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Be(r),i===null&&We&&(h=r.stateNode=Yb(r.type,r.pendingProps,de.current),Ae=r,$t=!0,g=ke,oo(r.type)?(xg=g,ke=Hs(h.firstChild)):ke=g),Ln(i,r,r.pendingProps.children,l),Ld(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&We&&((g=h=ke)&&(h=mI(h,r.type,r.pendingProps,$t),h!==null?(r.stateNode=h,Ae=r,ke=Hs(h.firstChild),$t=!1,g=!0):g=!1),g||yi(r)),Be(r),g=r.type,v=r.pendingProps,S=i!==null?i.memoizedProps:null,h=v.children,gg(g,v)?h=null:S!==null&&gg(g,S)&&(r.flags|=32),r.memoizedState!==null&&(g=pp(i,r,PA,null,null,l),Qu._currentValue=g),Ld(i,r),Ln(i,r,h,l),r.child;case 6:return i===null&&We&&((i=l=ke)&&(l=pI(l,r.pendingProps,$t),l!==null?(r.stateNode=l,Ae=r,ke=null,i=!0):i=!1),i||yi(r)),null;case 13:return Zx(i,r,l);case 4:return Ke(r,r.stateNode.containerInfo),h=r.pendingProps,i===null?r.child=xc(r,null,h,l):Ln(i,r,h,l),r.child;case 11:return Vx(i,r,r.type,r.pendingProps,l);case 7:return Ln(i,r,r.pendingProps,l),r.child;case 8:return Ln(i,r,r.pendingProps.children,l),r.child;case 12:return Ln(i,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,dr(r,r.type,h.value),Ln(i,r,h.children,l),r.child;case 9:return g=r.type._context,h=r.pendingProps.children,yl(r),g=Yn(g),h=h(g),r.flags|=1,Ln(i,r,h,l),r.child;case 14:return Ux(i,r,r.type,r.pendingProps,l);case 15:return zx(i,r,r.type,r.pendingProps,l);case 19:return Kx(i,r,l);case 31:return h=r.pendingProps,l=r.mode,h={mode:h.mode,children:h.children},i===null?(l=Od(h,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=ds(i.child,h),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return Bx(i,r,l);case 24:return yl(r),h=Yn(yn),i===null?(g=ap(),g===null&&(g=Ut,v=sp(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),r.memoizedState={parent:h,cache:g},lp(r),dr(r,yn,g)):((i.lanes&l)!==0&&(cp(i,r),Cu(r,null,null,l),Iu()),g=i.memoizedState,v=r.memoizedState,g.parent!==h?(g={parent:h,cache:h},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),dr(r,yn,h)):(h=v.cache,dr(r,yn,h),h!==g.cache&&dc(r,[yn],l,!0))),Ln(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xr(i){i.flags|=4}function Yx(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!sw(r)){if(r=ms.current,r!==null&&((pt&4194048)===pt?fr!==null:(pt&62914560)!==pt&&(pt&536870912)===0||r!==fr))throw Su=op,jy;i.flags|=8192}}function Vd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?wa():536870912,i.lanes|=r,Ec|=r)}function Lu(i,r){if(!We)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Kt(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(r)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,r}function BA(i,r,l){var h=r.pendingProps;switch(Ee(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(r),null;case 1:return Kt(r),null;case 3:return l=r.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),Fs(yn),Ye(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(gl(r)?Xr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,gd())),Kt(r),null;case 26:return l=r.memoizedState,i===null?(Xr(r),l!==null?(Kt(r),Yx(r,l)):(Kt(r),r.flags&=-16777217)):l?l!==i.memoizedState?(Xr(r),Kt(r),Yx(r,l)):(Kt(r),r.flags&=-16777217):(i.memoizedProps!==h&&Xr(r),Kt(r),r.flags&=-16777217),null;case 27:Tt(r),l=de.current;var g=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Xr(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return Kt(r),null}i=Ue.current,gl(r)?md(r):(i=Yb(g,h,l),r.stateNode=i,Xr(r))}return Kt(r),null;case 5:if(Tt(r),l=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Xr(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return Kt(r),null}if(i=Ue.current,gl(r))md(r);else{switch(g=Qd(de.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[sn]=r,i[Qt]=h;e:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break e;for(;g.sibling===null;){if(g.return===null||g.return===r)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=i;e:switch(Vn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Xr(r)}}return Kt(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==h&&Xr(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(s(166));if(i=de.current,gl(r)){if(i=r.stateNode,l=r.memoizedProps,h=null,g=Ae,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[sn]=r,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||qb(i.nodeValue,l)),i||yi(r)}else i=Qd(i).createTextNode(h),i[sn]=r,r.stateNode=i}return Kt(r),null;case 13:if(h=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=gl(r),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[sn]=r}else Ga(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Kt(r),g=!1}else g=gd(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Yr(r),r):(Yr(r),null)}if(Yr(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=r.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==g&&(h.flags|=2048)}return l!==i&&l&&(r.child.flags|=8192),Vd(r,r.updateQueue),Kt(r),null;case 4:return Ye(),i===null&&hg(r.stateNode.containerInfo),Kt(r),null;case 10:return Fs(r.type),Kt(r),null;case 19:if(Me(xn),g=r.memoizedState,g===null)return Kt(r),null;if(h=(r.flags&128)!==0,v=g.rendering,v===null)if(h)Lu(g,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=jd(i),v!==null){for(r.flags|=128,Lu(g,!1),i=v.updateQueue,r.updateQueue=i,Vd(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)bu(l,i),l=l.sibling;return we(xn,xn.current&1|2),r.child}i=i.sibling}g.tail!==null&&qn()>Bd&&(r.flags|=128,h=!0,Lu(g,!1),r.lanes=4194304)}else{if(!h)if(i=jd(v),i!==null){if(r.flags|=128,h=!0,i=i.updateQueue,r.updateQueue=i,Vd(r,i),Lu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!We)return Kt(r),null}else 2*qn()-g.renderingStartTime>Bd&&l!==536870912&&(r.flags|=128,h=!0,Lu(g,!1),r.lanes=4194304);g.isBackwards?(v.sibling=r.child,r.child=v):(i=g.last,i!==null?i.sibling=v:r.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=qn(),r.sibling=null,i=xn.current,we(xn,h?i&1|2:i&1),r):(Kt(r),null);case 22:case 23:return Yr(r),fp(),h=r.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(Kt(r),r.subtreeFlags&6&&(r.flags|=8192)):Kt(r),l=r.updateQueue,l!==null&&Vd(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),i!==null&&Me(xl),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Fs(yn),Kt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function FA(i,r){switch(Ee(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Fs(yn),Ye(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Tt(r),null;case 13:if(Yr(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ga()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Me(xn),null;case 4:return Ye(),null;case 10:return Fs(r.type),null;case 22:case 23:return Yr(r),fp(),i!==null&&Me(xl),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Fs(yn),null;case 25:return null;default:return null}}function Qx(i,r){switch(Ee(r),r.tag){case 3:Fs(yn),Ye();break;case 26:case 27:case 5:Tt(r);break;case 4:Ye();break;case 13:Yr(r);break;case 19:Me(xn);break;case 10:Fs(r.type);break;case 22:case 23:Yr(r),fp(),i!==null&&Me(xl);break;case 24:Fs(yn)}}function Ou(i,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var v=l.create,S=l.inst;h=v(),S.destroy=h}l=l.next}while(l!==g)}}catch(R){Pt(r,r.return,R)}}function Ja(i,r,l){try{var h=r.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var v=g.next;h=v;do{if((h.tag&i)===i){var S=h.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,g=r;var G=l,ie=R;try{ie()}catch(ue){Pt(g,G,ue)}}}h=h.next}while(h!==v)}}catch(ue){Pt(r,r.return,ue)}}function Xx(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{Uy(r,l)}catch(h){Pt(i,i.return,h)}}}function Jx(i,r,l){l.props=wl(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Pt(i,r,h)}}function Vu(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Pt(i,r,g)}}function mr(i,r){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Pt(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Pt(i,r,g)}else l.current=null}function eb(i){var r=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Pt(i,i.return,g)}}function Bp(i,r,l){try{var h=i.stateNode;cI(h,i.type,l,r),h[Qt]=r}catch(g){Pt(i,i.return,g)}}function tb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&oo(i.type)||i.tag===4}function Fp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||tb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&oo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qp(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Yd));else if(h!==4&&(h===27&&oo(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(qp(i,r,l),i=i.sibling;i!==null;)qp(i,r,l),i=i.sibling}function Ud(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(h!==4&&(h===27&&oo(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Ud(i,r,l),i=i.sibling;i!==null;)Ud(i,r,l),i=i.sibling}function nb(i){var r=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Vn(r,h,l),r[sn]=i,r[Qt]=l}catch(v){Pt(i,i.return,v)}}var Jr=!1,on=!1,Hp=!1,ib=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function qA(i,r){if(i=i.containerInfo,mg=sf,i=cl(i),ul(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,R=-1,G=-1,ie=0,ue=0,me=i,re=null;t:for(;;){for(var ae;me!==l||g!==0&&me.nodeType!==3||(R=S+g),me!==v||h!==0&&me.nodeType!==3||(G=S+h),me.nodeType===3&&(S+=me.nodeValue.length),(ae=me.firstChild)!==null;)re=me,me=ae;for(;;){if(me===i)break t;if(re===l&&++ie===g&&(R=S),re===v&&++ue===h&&(G=S),(ae=me.nextSibling)!==null)break;me=re,re=me.parentNode}me=ae}l=R===-1||G===-1?null:{start:R,end:G}}else l=null}l=l||{start:0,end:0}}else l=null;for(pg={focusedElem:i,selectionRange:l},sf=!1,Rn=r;Rn!==null;)if(r=Rn,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Rn=i;else for(;Rn!==null;){switch(r=Rn,v=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=r,g=v.memoizedProps,v=v.memoizedState,h=l.stateNode;try{var $e=wl(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate($e,v),h.__reactInternalSnapshotBeforeUpdate=i}catch(Fe){Pt(l,l.return,Fe)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)vg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":vg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Rn=i;break}Rn=r.return}}function sb(i,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:eo(i,l),h&4&&Ou(5,l);break;case 1:if(eo(i,l),h&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(S){Pt(l,l.return,S)}else{var g=wl(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Pt(l,l.return,S)}}h&64&&Xx(l),h&512&&Vu(l,l.return);break;case 3:if(eo(i,l),h&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Uy(i,r)}catch(S){Pt(l,l.return,S)}}break;case 27:r===null&&h&4&&nb(l);case 26:case 5:eo(i,l),r===null&&h&4&&eb(l),h&512&&Vu(l,l.return);break;case 12:eo(i,l);break;case 13:eo(i,l),h&4&&ob(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=XA.bind(null,l),gI(i,l))));break;case 22:if(h=l.memoizedState!==null||Jr,!h){r=r!==null&&r.memoizedState!==null||on,g=Jr;var v=on;Jr=h,(on=r)&&!v?to(i,l,(l.subtreeFlags&8772)!==0):eo(i,l),Jr=g,on=v}break;case 30:break;default:eo(i,l)}}function rb(i){var r=i.alternate;r!==null&&(i.alternate=null,rb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Rs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Gt=null,bi=!1;function ea(i,r,l){for(l=l.child;l!==null;)ab(i,r,l),l=l.sibling}function ab(i,r,l){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Mt,l)}catch{}switch(l.tag){case 26:on||mr(l,r),ea(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||mr(l,r);var h=Gt,g=bi;oo(l.type)&&(Gt=l.stateNode,bi=!1),ea(i,r,l),$u(l.stateNode),Gt=h,bi=g;break;case 5:on||mr(l,r);case 6:if(h=Gt,g=bi,Gt=null,ea(i,r,l),Gt=h,bi=g,Gt!==null)if(bi)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(l.stateNode)}catch(v){Pt(l,r,v)}else try{Gt.removeChild(l.stateNode)}catch(v){Pt(l,r,v)}break;case 18:Gt!==null&&(bi?(i=Gt,Kb(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),th(i)):Kb(Gt,l.stateNode));break;case 4:h=Gt,g=bi,Gt=l.stateNode.containerInfo,bi=!0,ea(i,r,l),Gt=h,bi=g;break;case 0:case 11:case 14:case 15:on||Ja(2,l,r),on||Ja(4,l,r),ea(i,r,l);break;case 1:on||(mr(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&Jx(l,r,h)),ea(i,r,l);break;case 21:ea(i,r,l);break;case 22:on=(h=on)||l.memoizedState!==null,ea(i,r,l),on=h;break;default:ea(i,r,l)}}function ob(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{th(i)}catch(l){Pt(r,r.return,l)}}function HA(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new ib),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new ib),r;default:throw Error(s(435,i.tag))}}function Gp(i,r){var l=HA(i);r.forEach(function(h){var g=JA.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function Bi(i,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],v=i,S=r,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(oo(R.type)){Gt=R.stateNode,bi=!1;break e}break;case 5:Gt=R.stateNode,bi=!1;break e;case 3:case 4:Gt=R.stateNode.containerInfo,bi=!0;break e}R=R.return}if(Gt===null)throw Error(s(160));ab(v,S,g),Gt=null,bi=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)lb(r,i),r=r.sibling}var qs=null;function lb(i,r){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Bi(r,i),Fi(i),h&4&&(Ja(3,i,i.return),Ou(3,i),Ja(5,i,i.return));break;case 1:Bi(r,i),Fi(i),h&512&&(on||l===null||mr(l,l.return)),h&64&&Jr&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=qs;if(Bi(r,i),Fi(i),h&512&&(on||l===null||mr(l,l.return)),h&4){var v=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":v=g.getElementsByTagName("title")[0],(!v||v[tr]||v[sn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(h),g.head.insertBefore(v,g.querySelector("head > title"))),Vn(v,h,l),v[sn]=i,Zt(v),h=v;break e;case"link":var S=nw("link","href",g).get(h+(l.href||""));if(S){for(var R=0;R<S.length;R++)if(v=S[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(R,1);break t}}v=g.createElement(h),Vn(v,h,l),g.head.appendChild(v);break;case"meta":if(S=nw("meta","content",g).get(h+(l.content||""))){for(R=0;R<S.length;R++)if(v=S[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(R,1);break t}}v=g.createElement(h),Vn(v,h,l),g.head.appendChild(v);break;default:throw Error(s(468,h))}v[sn]=i,Zt(v),h=v}i.stateNode=h}else iw(g,i.type,i.stateNode);else i.stateNode=tw(g,h,i.memoizedProps);else v!==h?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,h===null?iw(g,i.type,i.stateNode):tw(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Bp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Bi(r,i),Fi(i),h&512&&(on||l===null||mr(l,l.return)),l!==null&&h&4&&Bp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Bi(r,i),Fi(i),h&512&&(on||l===null||mr(l,l.return)),i.flags&32){g=i.stateNode;try{Nn(g,"")}catch(ae){Pt(i,i.return,ae)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Bp(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Hp=!0);break;case 6:if(Bi(r,i),Fi(i),h&4){if(i.stateNode===null)throw Error(s(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(ae){Pt(i,i.return,ae)}}break;case 3:if(ef=null,g=qs,qs=Xd(r.containerInfo),Bi(r,i),qs=g,Fi(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{th(r.containerInfo)}catch(ae){Pt(i,i.return,ae)}Hp&&(Hp=!1,cb(i));break;case 4:h=qs,qs=Xd(i.stateNode.containerInfo),Bi(r,i),Fi(i),qs=h;break;case 12:Bi(r,i),Fi(i);break;case 13:Bi(r,i),Fi(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Qp=qn()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Gp(i,h)));break;case 22:g=i.memoizedState!==null;var G=l!==null&&l.memoizedState!==null,ie=Jr,ue=on;if(Jr=ie||g,on=ue||G,Bi(r,i),on=ue,Jr=ie,Fi(i),h&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||G||Jr||on||Tl(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){G=l=r;try{if(v=G.stateNode,g)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=G.stateNode;var me=G.memoizedProps.style,re=me!=null&&me.hasOwnProperty("display")?me.display:null;R.style.display=re==null||typeof re=="boolean"?"":(""+re).trim()}}catch(ae){Pt(G,G.return,ae)}}}else if(r.tag===6){if(l===null){G=r;try{G.stateNode.nodeValue=g?"":G.memoizedProps}catch(ae){Pt(G,G.return,ae)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,Gp(i,l))));break;case 19:Bi(r,i),Fi(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,Gp(i,h)));break;case 30:break;case 21:break;default:Bi(r,i),Fi(i)}}function Fi(i){var r=i.flags;if(r&2){try{for(var l,h=i.return;h!==null;){if(tb(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,v=Fp(i);Ud(i,v,g);break;case 5:var S=l.stateNode;l.flags&32&&(Nn(S,""),l.flags&=-33);var R=Fp(i);Ud(i,R,S);break;case 3:case 4:var G=l.stateNode.containerInfo,ie=Fp(i);qp(i,ie,G);break;default:throw Error(s(161))}}catch(ue){Pt(i,i.return,ue)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function cb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;cb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function eo(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)sb(i,r.alternate,r),r=r.sibling}function Tl(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ja(4,r,r.return),Tl(r);break;case 1:mr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Jx(r,r.return,l),Tl(r);break;case 27:$u(r.stateNode);case 26:case 5:mr(r,r.return),Tl(r);break;case 22:r.memoizedState===null&&Tl(r);break;case 30:Tl(r);break;default:Tl(r)}i=i.sibling}}function to(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,g=i,v=r,S=v.flags;switch(v.tag){case 0:case 11:case 15:to(g,v,l),Ou(4,v);break;case 1:if(to(g,v,l),h=v,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ie){Pt(h,h.return,ie)}if(h=v,g=h.updateQueue,g!==null){var R=h.stateNode;try{var G=g.shared.hiddenCallbacks;if(G!==null)for(g.shared.hiddenCallbacks=null,g=0;g<G.length;g++)Vy(G[g],R)}catch(ie){Pt(h,h.return,ie)}}l&&S&64&&Xx(v),Vu(v,v.return);break;case 27:nb(v);case 26:case 5:to(g,v,l),l&&h===null&&S&4&&eb(v),Vu(v,v.return);break;case 12:to(g,v,l);break;case 13:to(g,v,l),l&&S&4&&ob(g,v);break;case 22:v.memoizedState===null&&to(g,v,l),Vu(v,v.return);break;case 30:break;default:to(g,v,l)}r=r.sibling}}function Zp(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Tu(l))}function $p(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Tu(i))}function pr(i,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ub(i,r,l,h),r=r.sibling}function ub(i,r,l,h){var g=r.flags;switch(r.tag){case 0:case 11:case 15:pr(i,r,l,h),g&2048&&Ou(9,r);break;case 1:pr(i,r,l,h);break;case 3:pr(i,r,l,h),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Tu(i)));break;case 12:if(g&2048){pr(i,r,l,h),i=r.stateNode;try{var v=r.memoizedProps,S=v.id,R=v.onPostCommit;typeof R=="function"&&R(S,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){Pt(r,r.return,G)}}else pr(i,r,l,h);break;case 13:pr(i,r,l,h);break;case 23:break;case 22:v=r.stateNode,S=r.alternate,r.memoizedState!==null?v._visibility&2?pr(i,r,l,h):Uu(i,r):v._visibility&2?pr(i,r,l,h):(v._visibility|=2,bc(i,r,l,h,(r.subtreeFlags&10256)!==0)),g&2048&&Zp(S,r);break;case 24:pr(i,r,l,h),g&2048&&$p(r.alternate,r);break;default:pr(i,r,l,h)}}function bc(i,r,l,h,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=i,S=r,R=l,G=h,ie=S.flags;switch(S.tag){case 0:case 11:case 15:bc(v,S,R,G,g),Ou(8,S);break;case 23:break;case 22:var ue=S.stateNode;S.memoizedState!==null?ue._visibility&2?bc(v,S,R,G,g):Uu(v,S):(ue._visibility|=2,bc(v,S,R,G,g)),g&&ie&2048&&Zp(S.alternate,S);break;case 24:bc(v,S,R,G,g),g&&ie&2048&&$p(S.alternate,S);break;default:bc(v,S,R,G,g)}r=r.sibling}}function Uu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,h=r,g=h.flags;switch(h.tag){case 22:Uu(l,h),g&2048&&Zp(h.alternate,h);break;case 24:Uu(l,h),g&2048&&$p(h.alternate,h);break;default:Uu(l,h)}r=r.sibling}}var zu=8192;function wc(i){if(i.subtreeFlags&zu)for(i=i.child;i!==null;)hb(i),i=i.sibling}function hb(i){switch(i.tag){case 26:wc(i),i.flags&zu&&i.memoizedState!==null&&CI(qs,i.memoizedState,i.memoizedProps);break;case 5:wc(i);break;case 3:case 4:var r=qs;qs=Xd(i.stateNode.containerInfo),wc(i),qs=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=zu,zu=16777216,wc(i),zu=r):wc(i));break;default:wc(i)}}function db(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Bu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];Rn=h,mb(h,i)}db(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)fb(i),i=i.sibling}function fb(i){switch(i.tag){case 0:case 11:case 15:Bu(i),i.flags&2048&&Ja(9,i,i.return);break;case 3:Bu(i);break;case 12:Bu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,zd(i)):Bu(i);break;default:Bu(i)}}function zd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];Rn=h,mb(h,i)}db(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ja(8,r,r.return),zd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,zd(r));break;default:zd(r)}i=i.sibling}}function mb(i,r){for(;Rn!==null;){var l=Rn;switch(l.tag){case 0:case 11:case 15:Ja(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Tu(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Rn=h;else e:for(l=i;Rn!==null;){h=Rn;var g=h.sibling,v=h.return;if(rb(h),h===l){Rn=null;break e}if(g!==null){g.return=v,Rn=g;break e}Rn=v}}}var GA={getCacheForType:function(i){var r=Yn(yn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l}},ZA=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Ut=null,at=null,pt=0,St=0,qi=null,no=!1,Tc=!1,Kp=!1,ta=0,Jt=0,io=0,El=0,Wp=0,ps=0,Ec=0,Fu=null,wi=null,Yp=!1,Qp=0,Bd=1/0,Fd=null,so=null,On=0,ro=null,Nc=null,Sc=0,Xp=0,Jp=null,pb=null,qu=0,eg=null;function Hi(){if((Nt&2)!==0&&pt!==0)return pt&-pt;if(ee.T!==null){var i=fc;return i!==0?i:og()}return er()}function gb(){ps===0&&(ps=(pt&536870912)===0||We?Wo():536870912);var i=ms.current;return i!==null&&(i.flags|=32),ps}function Gi(i,r,l){(i===Ut&&(St===2||St===9)||i.cancelPendingCommit!==null)&&(Ac(i,0),ao(i,pt,ps,!1)),Ji(i,l),((Nt&2)===0||i!==Ut)&&(i===Ut&&((Nt&2)===0&&(El|=l),Jt===4&&ao(i,pt,ps,!1)),gr(i))}function _b(i,r,l){if((Nt&6)!==0)throw Error(s(327));var h=!l&&(r&124)===0&&(r&i.expiredLanes)===0||Ai(i,r),g=h?WA(i,r):ig(i,r,!0),v=h;do{if(g===0){Tc&&!h&&ao(i,r,0,!1);break}else{if(l=i.current.alternate,v&&!$A(l)){g=ig(i,r,!1),v=!1;continue}if(g===2){if(v=r,i.errorRecoveryDisabledLanes&v)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){r=S;e:{var R=i;g=Fu;var G=R.current.memoizedState.isDehydrated;if(G&&(Ac(R,S).flags|=256),S=ig(R,S,!1),S!==2){if(Kp&&!G){R.errorRecoveryDisabledLanes|=v,El|=v,g=4;break e}v=wi,wi=g,v!==null&&(wi===null?wi=v:wi.push.apply(wi,v))}g=S}if(v=!1,g!==2)continue}}if(g===1){Ac(i,0),ao(i,r,0,!0);break}e:{switch(h=i,v=g,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ao(h,r,ps,!no);break e;case 2:wi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=Qp+300-qn(),10<g)){if(ao(h,r,ps,!no),ba(h,0,!0)!==0)break e;h.timeoutHandle=Zb(vb.bind(null,h,l,wi,Fd,Yp,r,ps,El,Ec,no,v,2,-0,0),g);break e}vb(h,l,wi,Fd,Yp,r,ps,El,Ec,no,v,0,-0,0)}}break}while(!0);gr(i)}function vb(i,r,l,h,g,v,S,R,G,ie,ue,me,re,ae){if(i.timeoutHandle=-1,me=r.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Yu={stylesheets:null,count:0,unsuspend:II},hb(r),me=RI(),me!==null)){i.cancelPendingCommit=me(Nb.bind(null,i,r,v,l,h,g,S,R,G,ue,1,re,ae)),ao(i,v,S,!ie);return}Nb(i,r,v,l,h,g,S,R,G)}function $A(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],v=g.getSnapshot;g=g.value;try{if(!ai(v(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ao(i,r,l,h){r&=~Wp,r&=~El,i.suspendedLanes|=r,i.pingedLanes&=~r,h&&(i.warmLanes|=r),h=i.expirationTimes;for(var g=r;0<g;){var v=31-Tn(g),S=1<<v;h[v]=-1,g&=~S}l!==0&&es(i,l,r)}function qd(){return(Nt&6)===0?(Hu(0),!1):!0}function tg(){if(at!==null){if(St===0)var i=at.return;else i=at,Bs=fs=null,vp(i),yc=null,Mu=0,i=at;for(;i!==null;)Qx(i.alternate,i),i=i.return;at=null}}function Ac(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,hI(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),tg(),Ut=i,at=l=ds(i.current,null),pt=r,St=0,qi=null,no=!1,Tc=Ai(i,r),Kp=!1,Ec=ps=Wp=El=io=Jt=0,wi=Fu=null,Yp=!1,(r&8)!==0&&(r|=r&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=r;0<h;){var g=31-Tn(h),v=1<<g;r|=i[g],h&=~v}return ta=r,dl(),l}function yb(i,r){it=null,ee.H=Rd,r===Nu||r===xd?(r=Ly(),St=3):r===jy?(r=Ly(),St=4):St=r===Ox?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,qi=r,at===null&&(Jt=1,Dd(i,li(r,i.current)))}function xb(){var i=ee.H;return ee.H=Rd,i===null?Rd:i}function bb(){var i=ee.A;return ee.A=GA,i}function ng(){Jt=4,no||(pt&4194048)!==pt&&ms.current!==null||(Tc=!0),(io&134217727)===0&&(El&134217727)===0||Ut===null||ao(Ut,pt,ps,!1)}function ig(i,r,l){var h=Nt;Nt|=2;var g=xb(),v=bb();(Ut!==i||pt!==r)&&(Fd=null,Ac(i,r)),r=!1;var S=Jt;e:do try{if(St!==0&&at!==null){var R=at,G=qi;switch(St){case 8:tg(),S=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(r=!0);var ie=St;if(St=0,qi=null,Ic(i,R,G,ie),l&&Tc){S=0;break e}break;default:ie=St,St=0,qi=null,Ic(i,R,G,ie)}}KA(),S=Jt;break}catch(ue){yb(i,ue)}while(!0);return r&&i.shellSuspendCounter++,Bs=fs=null,Nt=h,ee.H=g,ee.A=v,at===null&&(Ut=null,pt=0,dl()),S}function KA(){for(;at!==null;)wb(at)}function WA(i,r){var l=Nt;Nt|=2;var h=xb(),g=bb();Ut!==i||pt!==r?(Fd=null,Bd=qn()+500,Ac(i,r)):Tc=Ai(i,r);e:do try{if(St!==0&&at!==null){r=at;var v=qi;t:switch(St){case 1:St=0,qi=null,Ic(i,r,v,1);break;case 2:case 9:if(My(v)){St=0,qi=null,Tb(r);break}r=function(){St!==2&&St!==9||Ut!==i||(St=7),gr(i)},v.then(r,r);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:My(v)?(St=0,qi=null,Tb(r)):(St=0,qi=null,Ic(i,r,v,7));break;case 5:var S=null;switch(at.tag){case 26:S=at.memoizedState;case 5:case 27:var R=at;if(!S||sw(S)){St=0,qi=null;var G=R.sibling;if(G!==null)at=G;else{var ie=R.return;ie!==null?(at=ie,Hd(ie)):at=null}break t}}St=0,qi=null,Ic(i,r,v,5);break;case 6:St=0,qi=null,Ic(i,r,v,6);break;case 8:tg(),Jt=6;break e;default:throw Error(s(462))}}YA();break}catch(ue){yb(i,ue)}while(!0);return Bs=fs=null,ee.H=h,ee.A=g,Nt=l,at!==null?0:(Ut=null,pt=0,dl(),Jt)}function YA(){for(;at!==null&&!ya();)wb(at)}function wb(i){var r=Wx(i.alternate,i,ta);i.memoizedProps=i.pendingProps,r===null?Hd(i):at=r}function Tb(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=qx(l,r,r.pendingProps,r.type,void 0,pt);break;case 11:r=qx(l,r,r.pendingProps,r.type.render,r.ref,pt);break;case 5:vp(r);default:Qx(l,r),r=at=bu(r,ta),r=Wx(l,r,ta)}i.memoizedProps=i.pendingProps,r===null?Hd(i):at=r}function Ic(i,r,l,h){Bs=fs=null,vp(r),yc=null,Mu=0;var g=r.return;try{if(UA(i,g,r,l,pt)){Jt=1,Dd(i,li(l,i.current)),at=null;return}}catch(v){if(g!==null)throw at=g,v;Jt=1,Dd(i,li(l,i.current)),at=null;return}r.flags&32768?(We||h===1?i=!0:Tc||(pt&536870912)!==0?i=!1:(no=i=!0,(h===2||h===9||h===3||h===6)&&(h=ms.current,h!==null&&h.tag===13&&(h.flags|=16384))),Eb(r,i)):Hd(r)}function Hd(i){var r=i;do{if((r.flags&32768)!==0){Eb(r,no);return}i=r.return;var l=BA(r.alternate,r,ta);if(l!==null){at=l;return}if(r=r.sibling,r!==null){at=r;return}at=r=i}while(r!==null);Jt===0&&(Jt=5)}function Eb(i,r){do{var l=FA(i.alternate,i);if(l!==null){l.flags&=32767,at=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){at=i;return}at=i=l}while(i!==null);Jt=6,at=null}function Nb(i,r,l,h,g,v,S,R,G){i.cancelPendingCommit=null;do Gd();while(On!==0);if((Nt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=zi,Yo(i,l,v,S,R,G),i===Ut&&(at=Ut=null,pt=0),Nc=r,ro=i,Sc=l,Xp=v,Jp=g,pb=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,eI(As,function(){return Rb(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,g=Y.p,Y.p=2,S=Nt,Nt|=4;try{qA(i,r,l)}finally{Nt=S,Y.p=g,ee.T=h}}On=1,Sb(),Ab(),Ib()}}function Sb(){if(On===1){On=0;var i=ro,r=Nc,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null;var h=Y.p;Y.p=2;var g=Nt;Nt|=4;try{lb(r,i);var v=pg,S=cl(i.containerInfo),R=v.focusedElem,G=v.selectionRange;if(S!==R&&R&&R.ownerDocument&&rc(R.ownerDocument.documentElement,R)){if(G!==null&&ul(R)){var ie=G.start,ue=G.end;if(ue===void 0&&(ue=ie),"selectionStart"in R)R.selectionStart=ie,R.selectionEnd=Math.min(ue,R.value.length);else{var me=R.ownerDocument||document,re=me&&me.defaultView||window;if(re.getSelection){var ae=re.getSelection(),$e=R.textContent.length,Fe=Math.min(G.start,$e),Rt=G.end===void 0?Fe:Math.min(G.end,$e);!ae.extend&&Fe>Rt&&(S=Rt,Rt=Fe,Fe=S);var Q=yu(R,Fe),K=yu(R,Rt);if(Q&&K&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var ne=me.createRange();ne.setStart(Q.node,Q.offset),ae.removeAllRanges(),Fe>Rt?(ae.addRange(ne),ae.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),ae.addRange(ne))}}}}for(me=[],ae=R;ae=ae.parentNode;)ae.nodeType===1&&me.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<me.length;R++){var he=me[R];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}sf=!!mg,pg=mg=null}finally{Nt=g,Y.p=h,ee.T=l}}i.current=r,On=2}}function Ab(){if(On===2){On=0;var i=ro,r=Nc,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=ee.T,ee.T=null;var h=Y.p;Y.p=2;var g=Nt;Nt|=4;try{sb(i,r.alternate,r)}finally{Nt=g,Y.p=h,ee.T=l}}On=3}}function Ib(){if(On===4||On===3){On=0,Ho();var i=ro,r=Nc,l=Sc,h=pb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?On=5:(On=0,Nc=ro=null,Cb(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(so=null),Ta(l),r=r.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Mt,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=ee.T,g=Y.p,Y.p=2,ee.T=null;try{for(var v=i.onRecoverableError,S=0;S<h.length;S++){var R=h[S];v(R.value,{componentStack:R.stack})}}finally{ee.T=r,Y.p=g}}(Sc&3)!==0&&Gd(),gr(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===eg?qu++:(qu=0,eg=i):qu=0,Hu(0)}}function Cb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Tu(r)))}function Gd(i){return Sb(),Ab(),Ib(),Rb()}function Rb(){if(On!==5)return!1;var i=ro,r=Xp;Xp=0;var l=Ta(Sc),h=ee.T,g=Y.p;try{Y.p=32>l?32:l,ee.T=null,l=Jp,Jp=null;var v=ro,S=Sc;if(On=0,Nc=ro=null,Sc=0,(Nt&6)!==0)throw Error(s(331));var R=Nt;if(Nt|=4,fb(v.current),ub(v,v.current,S,l),Nt=R,Hu(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Mt,v)}catch{}return!0}finally{Y.p=g,ee.T=h,Cb(i,r)}}function kb(i,r,l){r=li(l,r),r=Pp(i.stateNode,r,2),i=Wa(i,r,2),i!==null&&(Ji(i,2),gr(i))}function Pt(i,r,l){if(i.tag===3)kb(i,i,l);else for(;r!==null;){if(r.tag===3){kb(r,i,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(so===null||!so.has(h))){i=li(l,i),l=Dx(2),h=Wa(r,l,2),h!==null&&(Lx(l,h,r,i),Ji(h,2),gr(h));break}}r=r.return}}function sg(i,r,l){var h=i.pingCache;if(h===null){h=i.pingCache=new ZA;var g=new Set;h.set(r,g)}else g=h.get(r),g===void 0&&(g=new Set,h.set(r,g));g.has(l)||(Kp=!0,g.add(l),i=QA.bind(null,i,r,l),r.then(i,i))}function QA(i,r,l){var h=i.pingCache;h!==null&&h.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ut===i&&(pt&l)===l&&(Jt===4||Jt===3&&(pt&62914560)===pt&&300>qn()-Qp?(Nt&2)===0&&Ac(i,0):Wp|=l,Ec===pt&&(Ec=0)),gr(i)}function Pb(i,r){r===0&&(r=wa()),i=qa(i,r),i!==null&&(Ji(i,r),gr(i))}function XA(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),Pb(i,l)}function JA(i,r){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(r),Pb(i,l)}function eI(i,r){return ii(i,r)}var Zd=null,Cc=null,rg=!1,$d=!1,ag=!1,Nl=0;function gr(i){i!==Cc&&i.next===null&&(Cc===null?Zd=Cc=i:Cc=Cc.next=i),$d=!0,rg||(rg=!0,nI())}function Hu(i,r){if(!ag&&$d){ag=!0;do for(var l=!1,h=Zd;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var v=0;else{var S=h.suspendedLanes,R=h.pingedLanes;v=(1<<31-Tn(42|i)+1)-1,v&=g&~(S&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,Lb(h,v))}else v=pt,v=ba(h,h===Ut?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Ai(h,v)||(l=!0,Lb(h,v));h=h.next}while(l);ag=!1}}function tI(){jb()}function jb(){$d=rg=!1;var i=0;Nl!==0&&(uI()&&(i=Nl),Nl=0);for(var r=qn(),l=null,h=Zd;h!==null;){var g=h.next,v=Mb(h,r);v===0?(h.next=null,l===null?Zd=g:l.next=g,g===null&&(Cc=l)):(l=h,(i!==0||(v&3)!==0)&&($d=!0)),h=g}Hu(i)}function Mb(i,r){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var S=31-Tn(v),R=1<<S,G=g[S];G===-1?((R&l)===0||(R&h)!==0)&&(g[S]=Ko(R,r)):G<=r&&(i.expiredLanes|=R),v&=~R}if(r=Ut,l=pt,l=ba(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===r&&(St===2||St===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ss(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ai(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(h!==null&&Ss(h),Ta(l)){case 2:case 8:l=kr;break;case 32:l=As;break;case 268435456:l=Pr;break;default:l=As}return h=Db.bind(null,i),l=ii(l,h),i.callbackPriority=r,i.callbackNode=l,r}return h!==null&&h!==null&&Ss(h),i.callbackPriority=2,i.callbackNode=null,2}function Db(i,r){if(On!==0&&On!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Gd()&&i.callbackNode!==l)return null;var h=pt;return h=ba(i,i===Ut?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(_b(i,h,r),Mb(i,qn()),i.callbackNode!=null&&i.callbackNode===l?Db.bind(null,i):null)}function Lb(i,r){if(Gd())return null;_b(i,r,!0)}function nI(){dI(function(){(Nt&6)!==0?ii(Go,tI):jb()})}function og(){return Nl===0&&(Nl=Wo()),Nl}function Ob(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ar(""+i)}function Vb(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function iI(i,r,l,h,g){if(r==="submit"&&l&&l.stateNode===g){var v=Ob((g[Qt]||null).action),S=h.submitter;S&&(r=(r=S[Qt]||null)?Ob(r.formAction):S.getAttribute("formAction"),r!==null&&(v=r,S=null));var R=new Ur("action","action",null,h,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Nl!==0){var G=S?Vb(g,S):new FormData(g);Ap(l,{pending:!0,data:G,method:g.method,action:v},null,G)}}else typeof v=="function"&&(R.preventDefault(),G=S?Vb(g,S):new FormData(g),Ap(l,{pending:!0,data:G,method:g.method,action:v},v,G))},currentTarget:g}]})}}for(var lg=0;lg<Hr.length;lg++){var cg=Hr[lg],sI=cg.toLowerCase(),rI=cg[0].toUpperCase()+cg.slice(1);Ui(sI,"on"+rI)}Ui(hd,"onAnimationEnd"),Ui(Vi,"onAnimationIteration"),Ui(hl,"onAnimationStart"),Ui("dblclick","onDoubleClick"),Ui("focusin","onFocus"),Ui("focusout","onBlur"),Ui(np,"onTransitionRun"),Ui(cc,"onTransitionStart"),Ui(ip,"onTransitionCancel"),Ui(xu,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gu));function Ub(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var S=h.length-1;0<=S;S--){var R=h[S],G=R.instance,ie=R.currentTarget;if(R=R.listener,G!==v&&g.isPropagationStopped())break e;v=R,g.currentTarget=ie;try{v(g)}catch(ue){Md(ue)}g.currentTarget=null,v=G}else for(S=0;S<h.length;S++){if(R=h[S],G=R.instance,ie=R.currentTarget,R=R.listener,G!==v&&g.isPropagationStopped())break e;v=R,g.currentTarget=ie;try{v(g)}catch(ue){Md(ue)}g.currentTarget=null,v=G}}}}function ot(i,r){var l=r[Gn];l===void 0&&(l=r[Gn]=new Set);var h=i+"__bubble";l.has(h)||(zb(r,i,2,!1),l.add(h))}function ug(i,r,l){var h=0;r&&(h|=4),zb(l,i,h,r)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function hg(i){if(!i[Kd]){i[Kd]=!0,Jo.forEach(function(l){l!=="selectionchange"&&(aI.has(l)||ug(l,!1,i),ug(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Kd]||(r[Kd]=!0,ug("selectionchange",!1,r))}}function zb(i,r,l,h){switch(uw(r)){case 2:var g=jI;break;case 8:g=MI;break;default:g=Ng}l=g.bind(null,r,l,i),g=void 0,!Zn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(r,l,{capture:!0,passive:g}):i.addEventListener(r,l,!0):g!==void 0?i.addEventListener(r,l,{passive:g}):i.addEventListener(r,l,!1)}function dg(i,r,l,h,g){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var R=h.stateNode.containerInfo;if(R===g)break;if(S===4)for(S=h.return;S!==null;){var G=S.tag;if((G===3||G===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;R!==null;){if(S=Ii(R),S===null)return;if(G=S.tag,G===5||G===6||G===26||G===27){h=v=S;continue e}R=R.parentNode}}h=h.return}ri(function(){var ie=v,ue=Dn(l),me=[];e:{var re=dd.get(i);if(re!==void 0){var ae=Ur,$e=i;switch(i){case"keypress":if(At(l)===0)break e;case"keydown":case"keyup":ae=Ma;break;case"focusin":$e="focus",ae=Ca;break;case"focusout":$e="blur",ae=Ca;break;case"beforeblur":case"afterblur":ae=Ca;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=An;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=tc;break;case hd:case Vi:case hl:ae=ka;break;case xu:ae=nc;break;case"scroll":case"scrollend":ae=Jl;break;case"wheel":ae=Fr;break;case"copy":case"cut":case"paste":ae=or;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Da;break;case"toggle":case"beforetoggle":ae=ls}var Fe=(r&4)!==0,Rt=!Fe&&(i==="scroll"||i==="scrollend"),Q=Fe?re!==null?re+"Capture":null:re;Fe=[];for(var K=ie,ne;K!==null;){var he=K;if(ne=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ne===null||Q===null||(he=mt(K,Q),he!=null&&Fe.push(Zu(K,he,ne))),Rt)break;K=K.return}0<Fe.length&&(re=new ae(re,$e,null,l,ue),me.push({event:re,listeners:Fe}))}}if((r&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",re&&l!==ji&&($e=l.relatedTarget||l.fromElement)&&(Ii($e)||$e[gi]))break e;if((ae||re)&&(re=ue.window===ue?ue:(re=ue.ownerDocument)?re.defaultView||re.parentWindow:window,ae?($e=l.relatedTarget||l.toElement,ae=ie,$e=$e?Ii($e):null,$e!==null&&(Rt=c($e),Fe=$e.tag,$e!==Rt||Fe!==5&&Fe!==27&&Fe!==6)&&($e=null)):(ae=null,$e=ie),ae!==$e)){if(Fe=An,he="onMouseLeave",Q="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Fe=Da,he="onPointerLeave",Q="onPointerEnter",K="pointer"),Rt=ae==null?re:jn(ae),ne=$e==null?re:jn($e),re=new Fe(he,K+"leave",ae,l,ue),re.target=Rt,re.relatedTarget=ne,he=null,Ii(ue)===ie&&(Fe=new Fe(Q,K+"enter",$e,l,ue),Fe.target=ne,Fe.relatedTarget=Rt,he=Fe),Rt=he,ae&&$e)t:{for(Fe=ae,Q=$e,K=0,ne=Fe;ne;ne=Rc(ne))K++;for(ne=0,he=Q;he;he=Rc(he))ne++;for(;0<K-ne;)Fe=Rc(Fe),K--;for(;0<ne-K;)Q=Rc(Q),ne--;for(;K--;){if(Fe===Q||Q!==null&&Fe===Q.alternate)break t;Fe=Rc(Fe),Q=Rc(Q)}Fe=null}else Fe=null;ae!==null&&Bb(me,re,ae,Fe,!1),$e!==null&&Rt!==null&&Bb(me,Rt,$e,Fe,!0)}}e:{if(re=ie?jn(ie):window,ae=re.nodeName&&re.nodeName.toLowerCase(),ae==="select"||ae==="input"&&re.type==="file")var Ie=Oa;else if(Ot(re))if(gu)Ie=tp;else{Ie=ep;var rt=vu}else ae=re.nodeName,!ae||ae.toLowerCase()!=="input"||re.type!=="checkbox"&&re.type!=="radio"?ie&&Vr(ie.elementType)&&(Ie=Oa):Ie=zs;if(Ie&&(Ie=Ie(i,ie))){Vs(me,Ie,l,ue);break e}rt&&rt(i,re,ie),i==="focusout"&&ie&&re.type==="number"&&ie.memoizedProps.value!=null&&ki(re,"number",re.value)}switch(rt=ie?jn(ie):window,i){case"focusin":(Ot(rt)||rt.contentEditable==="true")&&(Oi=rt,za=ie,qr=null);break;case"focusout":qr=za=Oi=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,cd(me,l,ue);break;case"selectionchange":if(ac)break;case"keydown":case"keyup":cd(me,l,ue)}var De;if(Wn)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ct?le(i,l)&&(qe="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(N&&l.locale!=="ko"&&(ct||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ct&&(De=Ms()):(vi=ue,$n="value"in vi?vi.value:vi.textContent,ct=!0)),rt=Wd(ie,qe),0<rt.length&&(qe=new Kn(qe,i,null,l,ue),me.push({event:qe,listeners:rt}),De?qe.data=De:(De=be(l),De!==null&&(qe.data=De)))),(De=w?Xt(i,l):ut(i,l))&&(qe=Wd(ie,"onBeforeInput"),0<qe.length&&(rt=new Kn("onBeforeInput","beforeinput",null,l,ue),me.push({event:rt,listeners:qe}),rt.data=De)),iI(me,i,ie,l,ue)}Ub(me,r)})}function Zu(i,r,l){return{instance:i,listener:r,currentTarget:l}}function Wd(i,r){for(var l=r+"Capture",h=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=mt(i,l),g!=null&&h.unshift(Zu(i,g,v)),g=mt(i,r),g!=null&&h.push(Zu(i,g,v))),i.tag===3)return h;i=i.return}return[]}function Rc(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Bb(i,r,l,h,g){for(var v=r._reactName,S=[];l!==null&&l!==h;){var R=l,G=R.alternate,ie=R.stateNode;if(R=R.tag,G!==null&&G===h)break;R!==5&&R!==26&&R!==27||ie===null||(G=ie,g?(ie=mt(l,v),ie!=null&&S.unshift(Zu(l,ie,G))):g||(ie=mt(l,v),ie!=null&&S.push(Zu(l,ie,G)))),l=l.return}S.length!==0&&i.push({event:r,listeners:S})}var oI=/\r\n?/g,lI=/\u0000|\uFFFD/g;function Fb(i){return(typeof i=="string"?i:""+i).replace(oI,`
`).replace(lI,"")}function qb(i,r){return r=Fb(r),Fb(i)===r}function Yd(){}function Ct(i,r,l,h,g,v){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Nn(i,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Nn(i,""+h);break;case"className":ns(i,"class",h);break;case"tabIndex":ns(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(i,l,h);break;case"style":Ps(i,h,v);break;case"data":if(r!=="object"){ns(i,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=ar(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&Ct(i,r,"name",g.name,g,null),Ct(i,r,"formEncType",g.formEncType,g,null),Ct(i,r,"formMethod",g.formMethod,g,null),Ct(i,r,"formTarget",g.formTarget,g,null)):(Ct(i,r,"encType",g.encType,g,null),Ct(i,r,"method",g.method,g,null),Ct(i,r,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=ar(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Yd);break;case"onScroll":h!=null&&ot("scroll",i);break;case"onScrollEnd":h!=null&&ot("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=ar(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":ot("beforetoggle",i),ot("toggle",i),nr(i,"popover",h);break;case"xlinkActuate":_n(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":_n(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":_n(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":_n(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":_n(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":_n(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":_n(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":_n(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":_n(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":nr(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=tl.get(l)||l,nr(i,l,h))}}function fg(i,r,l,h,g,v){switch(l){case"style":Ps(i,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Nn(i,h):(typeof h=="number"||typeof h=="bigint")&&Nn(i,""+h);break;case"onScroll":h!=null&&ot("scroll",i);break;case"onScrollEnd":h!=null&&ot("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Yd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Na.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),v=i[Qt]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(r,v,g),typeof h=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):nr(i,l,h)}}}function Vn(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",i),ot("load",i);var h=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ct(i,r,v,S,l,null)}}g&&Ct(i,r,"srcSet",l.srcSet,l,null),h&&Ct(i,r,"src",l.src,l,null);return;case"input":ot("invalid",i);var R=v=S=g=null,G=null,ie=null;for(h in l)if(l.hasOwnProperty(h)){var ue=l[h];if(ue!=null)switch(h){case"name":g=ue;break;case"type":S=ue;break;case"checked":G=ue;break;case"defaultChecked":ie=ue;break;case"value":v=ue;break;case"defaultValue":R=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(s(137,r));break;default:Ct(i,r,h,ue,l,null)}}Or(i,v,R,G,ie,S,g,!1),rr(i);return;case"select":ot("invalid",i),h=S=v=null;for(g in l)if(l.hasOwnProperty(g)&&(R=l[g],R!=null))switch(g){case"value":v=R;break;case"defaultValue":S=R;break;case"multiple":h=R;default:Ct(i,r,g,R,l,null)}r=v,l=S,i.multiple=!!h,r!=null?Mn(i,!!h,r,!1):l!=null&&Mn(i,!!h,l,!0);return;case"textarea":ot("invalid",i),v=g=h=null;for(S in l)if(l.hasOwnProperty(S)&&(R=l[S],R!=null))switch(S){case"value":h=R;break;case"defaultValue":g=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(91));break;default:Ct(i,r,S,R,l,null)}si(i,h,g,v),rr(i);return;case"option":for(G in l)if(l.hasOwnProperty(G)&&(h=l[G],h!=null))switch(G){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ct(i,r,G,h,l,null)}return;case"dialog":ot("beforetoggle",i),ot("toggle",i),ot("cancel",i),ot("close",i);break;case"iframe":case"object":ot("load",i);break;case"video":case"audio":for(h=0;h<Gu.length;h++)ot(Gu[h],i);break;case"image":ot("error",i),ot("load",i);break;case"details":ot("toggle",i);break;case"embed":case"source":case"link":ot("error",i),ot("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in l)if(l.hasOwnProperty(ie)&&(h=l[ie],h!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ct(i,r,ie,h,l,null)}return;default:if(Vr(r)){for(ue in l)l.hasOwnProperty(ue)&&(h=l[ue],h!==void 0&&fg(i,r,ue,h,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(h=l[R],h!=null&&Ct(i,r,R,h,l,null))}function cI(i,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,S=null,R=null,G=null,ie=null,ue=null;for(ae in l){var me=l[ae];if(l.hasOwnProperty(ae)&&me!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":G=me;default:h.hasOwnProperty(ae)||Ct(i,r,ae,null,h,me)}}for(var re in h){var ae=h[re];if(me=l[re],h.hasOwnProperty(re)&&(ae!=null||me!=null))switch(re){case"type":v=ae;break;case"name":g=ae;break;case"checked":ie=ae;break;case"defaultChecked":ue=ae;break;case"value":S=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,r));break;default:ae!==me&&Ct(i,r,re,ae,h,me)}}Lt(i,S,R,G,ie,ue,v,g);return;case"select":ae=S=R=re=null;for(v in l)if(G=l[v],l.hasOwnProperty(v)&&G!=null)switch(v){case"value":break;case"multiple":ae=G;default:h.hasOwnProperty(v)||Ct(i,r,v,null,h,G)}for(g in h)if(v=h[g],G=l[g],h.hasOwnProperty(g)&&(v!=null||G!=null))switch(g){case"value":re=v;break;case"defaultValue":R=v;break;case"multiple":S=v;default:v!==G&&Ct(i,r,g,v,h,G)}r=R,l=S,h=ae,re!=null?Mn(i,!!l,re,!1):!!h!=!!l&&(r!=null?Mn(i,!!l,r,!0):Mn(i,!!l,l?[]:"",!1));return;case"textarea":ae=re=null;for(R in l)if(g=l[R],l.hasOwnProperty(R)&&g!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ct(i,r,R,null,h,g)}for(S in h)if(g=h[S],v=l[S],h.hasOwnProperty(S)&&(g!=null||v!=null))switch(S){case"value":re=g;break;case"defaultValue":ae=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==v&&Ct(i,r,S,g,h,v)}He(i,re,ae);return;case"option":for(var $e in l)if(re=l[$e],l.hasOwnProperty($e)&&re!=null&&!h.hasOwnProperty($e))switch($e){case"selected":i.selected=!1;break;default:Ct(i,r,$e,null,h,re)}for(G in h)if(re=h[G],ae=l[G],h.hasOwnProperty(G)&&re!==ae&&(re!=null||ae!=null))switch(G){case"selected":i.selected=re&&typeof re!="function"&&typeof re!="symbol";break;default:Ct(i,r,G,re,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in l)re=l[Fe],l.hasOwnProperty(Fe)&&re!=null&&!h.hasOwnProperty(Fe)&&Ct(i,r,Fe,null,h,re);for(ie in h)if(re=h[ie],ae=l[ie],h.hasOwnProperty(ie)&&re!==ae&&(re!=null||ae!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,r));break;default:Ct(i,r,ie,re,h,ae)}return;default:if(Vr(r)){for(var Rt in l)re=l[Rt],l.hasOwnProperty(Rt)&&re!==void 0&&!h.hasOwnProperty(Rt)&&fg(i,r,Rt,void 0,h,re);for(ue in h)re=h[ue],ae=l[ue],!h.hasOwnProperty(ue)||re===ae||re===void 0&&ae===void 0||fg(i,r,ue,re,h,ae);return}}for(var Q in l)re=l[Q],l.hasOwnProperty(Q)&&re!=null&&!h.hasOwnProperty(Q)&&Ct(i,r,Q,null,h,re);for(me in h)re=h[me],ae=l[me],!h.hasOwnProperty(me)||re===ae||re==null&&ae==null||Ct(i,r,me,re,h,ae)}var mg=null,pg=null;function Qd(i){return i.nodeType===9?i:i.ownerDocument}function Hb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gb(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function gg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var _g=null;function uI(){var i=window.event;return i&&i.type==="popstate"?i===_g?!1:(_g=i,!0):(_g=null,!1)}var Zb=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,dI=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(i){return $b.resolve(null).then(i).catch(fI)}:Zb;function fI(i){setTimeout(function(){throw i})}function oo(i){return i==="head"}function Kb(i,r){var l=r,h=0,g=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(0<h&&8>h){l=h;var S=i.ownerDocument;if(l&1&&$u(S.documentElement),l&2&&$u(S.body),l&4)for(l=S.head,$u(l),S=l.firstChild;S;){var R=S.nextSibling,G=S.nodeName;S[tr]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=R}}if(g===0){i.removeChild(v),th(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=v}while(l);th(r)}function vg(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":vg(l),Rs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function mI(i,r,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[tr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Hs(i.nextSibling),i===null)break}return null}function pI(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Hs(i.nextSibling),i===null))return null;return i}function yg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function gI(i,r){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Hs(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var xg=null;function Wb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return i;r--}else l==="/$"&&r++}i=i.previousSibling}return null}function Yb(i,r,l){switch(r=Qd(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function $u(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Rs(i)}var gs=new Map,Qb=new Set;function Xd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var na=Y.d;Y.d={f:_I,r:vI,D:yI,C:xI,L:bI,m:wI,X:EI,S:TI,M:NI};function _I(){var i=na.f(),r=qd();return i||r}function vI(i){var r=Ci(i);r!==null&&r.tag===5&&r.type==="form"?_x(r):na.r(i)}var kc=typeof document>"u"?null:document;function Xb(i,r,l){var h=kc;if(h&&typeof r=="string"&&r){var g=Ft(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Qb.has(g)||(Qb.add(g),i={rel:i,crossOrigin:l,href:r},h.querySelector(g)===null&&(r=h.createElement("link"),Vn(r,"link",i),Zt(r),h.head.appendChild(r)))}}function yI(i){na.D(i),Xb("dns-prefetch",i,null)}function xI(i,r){na.C(i,r),Xb("preconnect",i,r)}function bI(i,r,l){na.L(i,r,l);var h=kc;if(h&&i&&r){var g='link[rel="preload"][as="'+Ft(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Ft(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Ft(l.imageSizes)+'"]')):g+='[href="'+Ft(i)+'"]';var v=g;switch(r){case"style":v=Pc(i);break;case"script":v=jc(i)}gs.has(v)||(i=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),gs.set(v,i),h.querySelector(g)!==null||r==="style"&&h.querySelector(Ku(v))||r==="script"&&h.querySelector(Wu(v))||(r=h.createElement("link"),Vn(r,"link",i),Zt(r),h.head.appendChild(r)))}}function wI(i,r){na.m(i,r);var l=kc;if(l&&i){var h=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Ft(h)+'"][href="'+Ft(i)+'"]',v=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=jc(i)}if(!gs.has(v)&&(i=E({rel:"modulepreload",href:i},r),gs.set(v,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wu(v)))return}h=l.createElement("link"),Vn(h,"link",i),Zt(h),l.head.appendChild(h)}}}function TI(i,r,l){na.S(i,r,l);var h=kc;if(h&&i){var g=En(h).hoistableStyles,v=Pc(i);r=r||"default";var S=g.get(v);if(!S){var R={loading:0,preload:null};if(S=h.querySelector(Ku(v)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},l),(l=gs.get(v))&&bg(i,l);var G=S=h.createElement("link");Zt(G),Vn(G,"link",i),G._p=new Promise(function(ie,ue){G.onload=ie,G.onerror=ue}),G.addEventListener("load",function(){R.loading|=1}),G.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Jd(S,r,h)}S={type:"stylesheet",instance:S,count:1,state:R},g.set(v,S)}}}function EI(i,r){na.X(i,r);var l=kc;if(l&&i){var h=En(l).hoistableScripts,g=jc(i),v=h.get(g);v||(v=l.querySelector(Wu(g)),v||(i=E({src:i,async:!0},r),(r=gs.get(g))&&wg(i,r),v=l.createElement("script"),Zt(v),Vn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(g,v))}}function NI(i,r){na.M(i,r);var l=kc;if(l&&i){var h=En(l).hoistableScripts,g=jc(i),v=h.get(g);v||(v=l.querySelector(Wu(g)),v||(i=E({src:i,async:!0,type:"module"},r),(r=gs.get(g))&&wg(i,r),v=l.createElement("script"),Zt(v),Vn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(g,v))}}function Jb(i,r,l,h){var g=(g=de.current)?Xd(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Pc(l.href),l=En(g).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Pc(l.href);var v=En(g).hoistableStyles,S=v.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,S),(v=g.querySelector(Ku(i)))&&!v._p&&(S.instance=v,S.state.loading=5),gs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},gs.set(i,l),v||SI(g,i,l,S.state))),r&&h===null)throw Error(s(528,""));return S}if(r&&h!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=jc(l),l=En(g).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Pc(i){return'href="'+Ft(i)+'"'}function Ku(i){return'link[rel="stylesheet"]['+i+"]"}function ew(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function SI(i,r,l,h){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=i.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),Vn(r,"link",l),Zt(r),i.head.appendChild(r))}function jc(i){return'[src="'+Ft(i)+'"]'}function Wu(i){return"script[async]"+i}function tw(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=i.querySelector('style[data-href~="'+Ft(l.href)+'"]');if(h)return r.instance=h,Zt(h),h;var g=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Zt(h),Vn(h,"style",g),Jd(h,l.precedence,i),r.instance=h;case"stylesheet":g=Pc(l.href);var v=i.querySelector(Ku(g));if(v)return r.state.loading|=4,r.instance=v,Zt(v),v;h=ew(l),(g=gs.get(g))&&bg(h,g),v=(i.ownerDocument||i).createElement("link"),Zt(v);var S=v;return S._p=new Promise(function(R,G){S.onload=R,S.onerror=G}),Vn(v,"link",h),r.state.loading|=4,Jd(v,l.precedence,i),r.instance=v;case"script":return v=jc(l.src),(g=i.querySelector(Wu(v)))?(r.instance=g,Zt(g),g):(h=l,(g=gs.get(v))&&(h=E({},l),wg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Zt(g),Vn(g,"link",h),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Jd(h,l.precedence,i));return r.instance}function Jd(i,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,v=g,S=0;S<h.length;S++){var R=h[S];if(R.dataset.precedence===r)v=R;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function bg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function wg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var ef=null;function nw(i,r,l){if(ef===null){var h=new Map,g=ef=new Map;g.set(l,h)}else g=ef,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[tr]||v[sn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(r)||"";S=i+S;var R=h.get(S);R?R.push(v):h.set(S,[v])}}return h}function iw(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function AI(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function sw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Yu=null;function II(){}function CI(i,r,l){if(Yu===null)throw Error(s(475));var h=Yu;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Pc(l.href),v=i.querySelector(Ku(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=tf.bind(h),i.then(h,h)),r.state.loading|=4,r.instance=v,Zt(v);return}v=i.ownerDocument||i,l=ew(l),(g=gs.get(g))&&bg(l,g),v=v.createElement("link"),Zt(v);var S=v;S._p=new Promise(function(R,G){S.onload=R,S.onerror=G}),Vn(v,"link",l),r.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=tf.bind(h),i.addEventListener("load",r),i.addEventListener("error",r))}}function RI(){if(Yu===null)throw Error(s(475));var i=Yu;return i.stylesheets&&i.count===0&&Tg(i,i.stylesheets),0<i.count?function(r){var l=setTimeout(function(){if(i.stylesheets&&Tg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(l)}}:null}function tf(){if(this.count--,this.count===0){if(this.stylesheets)Tg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var nf=null;function Tg(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,nf=new Map,r.forEach(kI,i),nf=null,tf.call(i))}function kI(i,r){if(!(r.state.loading&4)){var l=nf.get(i);if(l)var h=l.get(null);else{l=new Map,nf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var S=g[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),h=S)}h&&l.set(null,h)}g=r.instance,S=g.getAttribute("data-precedence"),v=l.get(S)||h,v===h&&l.set(null,g),l.set(S,g),this.count++,h=tf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Qu={$$typeof:te,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function PI(i,r,l,h,g,v,S,R){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function rw(i,r,l,h,g,v,S,R,G,ie,ue,me){return i=new PI(i,r,l,S,R,G,ie,me),r=1,v===!0&&(r|=24),v=ui(3,null,null,r),i.current=v,v.stateNode=i,r=sp(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:l,cache:r},lp(v),i}function aw(i){return i?(i=$r,i):$r}function ow(i,r,l,h,g,v){g=aw(g),h.context===null?h.context=g:h.pendingContext=g,h=Ka(r),h.payload={element:l},v=v===void 0?null:v,v!==null&&(h.callback=v),l=Wa(i,h,r),l!==null&&(Gi(l,i,r),Au(l,i,r))}function lw(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function Eg(i,r){lw(i,r),(i=i.alternate)&&lw(i,r)}function cw(i){if(i.tag===13){var r=qa(i,67108864);r!==null&&Gi(r,i,67108864),Eg(i,67108864)}}var sf=!0;function jI(i,r,l,h){var g=ee.T;ee.T=null;var v=Y.p;try{Y.p=2,Ng(i,r,l,h)}finally{Y.p=v,ee.T=g}}function MI(i,r,l,h){var g=ee.T;ee.T=null;var v=Y.p;try{Y.p=8,Ng(i,r,l,h)}finally{Y.p=v,ee.T=g}}function Ng(i,r,l,h){if(sf){var g=Sg(h);if(g===null)dg(i,r,h,rf,l),hw(i,h);else if(LI(g,i,r,l,h))h.stopPropagation();else if(hw(i,h),r&4&&-1<DI.indexOf(i)){for(;g!==null;){var v=Ci(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=pi(v.pendingLanes);if(S!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var G=1<<31-Tn(S);R.entanglements[1]|=G,S&=~G}gr(v),(Nt&6)===0&&(Bd=qn()+500,Hu(0))}}break;case 13:R=qa(v,2),R!==null&&Gi(R,v,2),qd(),Eg(v,2)}if(v=Sg(h),v===null&&dg(i,r,h,rf,l),v===g)break;g=v}g!==null&&h.stopPropagation()}else dg(i,r,h,null,l)}}function Sg(i){return i=Dn(i),Ag(i)}var rf=null;function Ag(i){if(rf=null,i=Ii(i),i!==null){var r=c(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=f(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return rf=i,null}function uw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xa()){case Go:return 2;case kr:return 8;case As:case Kl:return 32;case Pr:return 268435456;default:return 32}default:return 32}}var Ig=!1,lo=null,co=null,uo=null,Xu=new Map,Ju=new Map,ho=[],DI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hw(i,r){switch(i){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Xu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(r.pointerId)}}function eh(i,r,l,h,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},r!==null&&(r=Ci(r),r!==null&&cw(r)),i):(i.eventSystemFlags|=h,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function LI(i,r,l,h,g){switch(r){case"focusin":return lo=eh(lo,i,r,l,h,g),!0;case"dragenter":return co=eh(co,i,r,l,h,g),!0;case"mouseover":return uo=eh(uo,i,r,l,h,g),!0;case"pointerover":var v=g.pointerId;return Xu.set(v,eh(Xu.get(v)||null,i,r,l,h,g)),!0;case"gotpointercapture":return v=g.pointerId,Ju.set(v,eh(Ju.get(v)||null,i,r,l,h,g)),!0}return!1}function dw(i){var r=Ii(i.target);if(r!==null){var l=c(r);if(l!==null){if(r=l.tag,r===13){if(r=f(l),r!==null){i.blockedOn=r,Ea(i.priority,function(){if(l.tag===13){var h=Hi();h=Js(h);var g=qa(l,h);g!==null&&Gi(g,l,h),Eg(l,h)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function af(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=Sg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);ji=h,l.target.dispatchEvent(h),ji=null}else return r=Ci(l),r!==null&&cw(r),i.blockedOn=l,!1;r.shift()}return!0}function fw(i,r,l){af(i)&&l.delete(r)}function OI(){Ig=!1,lo!==null&&af(lo)&&(lo=null),co!==null&&af(co)&&(co=null),uo!==null&&af(uo)&&(uo=null),Xu.forEach(fw),Ju.forEach(fw)}function of(i,r){i.blockedOn===r&&(i.blockedOn=null,Ig||(Ig=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,OI)))}var lf=null;function mw(i){lf!==i&&(lf=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){lf===i&&(lf=null);for(var r=0;r<i.length;r+=3){var l=i[r],h=i[r+1],g=i[r+2];if(typeof h!="function"){if(Ag(h||l)===null)continue;break}var v=Ci(l);v!==null&&(i.splice(r,3),r-=3,Ap(v,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function th(i){function r(G){return of(G,i)}lo!==null&&of(lo,i),co!==null&&of(co,i),uo!==null&&of(uo,i),Xu.forEach(r),Ju.forEach(r);for(var l=0;l<ho.length;l++){var h=ho[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<ho.length&&(l=ho[0],l.blockedOn===null);)dw(l),l.blockedOn===null&&ho.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],v=l[h+1],S=g[Qt]||null;if(typeof v=="function")S||mw(l);else if(S){var R=null;if(v&&v.hasAttribute("formAction")){if(g=v,S=v[Qt]||null)R=S.formAction;else if(Ag(g)!==null)continue}else R=S.action;typeof R=="function"?l[h+1]=R:(l.splice(h,3),h-=3),mw(l)}}}function Cg(i){this._internalRoot=i}cf.prototype.render=Cg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,h=Hi();ow(l,h,i,r,null,null)},cf.prototype.unmount=Cg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;ow(i.current,2,null,i,null,null),qd(),r[gi]=null}};function cf(i){this._internalRoot=i}cf.prototype.unstable_scheduleHydration=function(i){if(i){var r=er();i={blockedOn:null,target:i,priority:r};for(var l=0;l<ho.length&&r!==0&&r<ho[l].priority;l++);ho.splice(l,0,i),l===0&&dw(i)}};var pw=e.version;if(pw!=="19.1.1")throw Error(s(527,pw,"19.1.1"));Y.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=y(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var VI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uf.isDisabled&&uf.supportsFiber)try{Mt=uf.inject(VI),_t=uf}catch{}}return ih.createRoot=function(i,r){if(!o(i))throw Error(s(299));var l=!1,h="",g=kx,v=Px,S=jx,R=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks)),r=rw(i,1,!1,null,null,l,h,g,v,S,R,null),i[gi]=r.current,hg(i),new Cg(r)},ih.hydrateRoot=function(i,r,l){if(!o(i))throw Error(s(299));var h=!1,g="",v=kx,S=Px,R=jx,G=null,ie=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(G=l.unstable_transitionCallbacks),l.formState!==void 0&&(ie=l.formState)),r=rw(i,1,!0,r,l??null,h,g,v,S,R,G,ie),r.context=aw(null),l=r.current,h=Hi(),h=Js(h),g=Ka(h),g.callback=null,Wa(l,g,h),l=h,r.current.lanes=l,Ji(r,l),gr(r),i[gi]=r.current,hg(i),new cf(r)},ih.version="19.1.1",ih}var Aw;function yC(){if(Aw)return Pg.exports;Aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Pg.exports=vC(),Pg.exports}var xC=yC();const bC=eE(xC);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Iw="popstate";function wC(n={}){function e(s,o){let{pathname:c,search:f,hash:_}=s.location;return h_("",{pathname:c,search:f,hash:_},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ch(o)}return EC(e,t,null,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ks(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function TC(){return Math.random().toString(36).substring(2,10)}function Cw(n,e){return{usr:n.state,key:n.key,idx:e}}function h_(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?iu(e):e,state:t,key:e&&e.key||s||TC()}}function Ch({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function iu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function EC(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,f=o.history,_="POP",y=null,b=E();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function E(){return(f.state||{idx:null}).idx}function A(){_="POP";let z=E(),W=z==null?null:z-b;b=z,y&&y({action:_,location:M.location,delta:W})}function I(z,W){_="PUSH";let $=h_(M.location,z,W);b=E()+1;let te=Cw($,b),_e=M.createHref($);try{f.pushState(te,"",_e)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(_e)}c&&y&&y({action:_,location:M.location,delta:1})}function F(z,W){_="REPLACE";let $=h_(M.location,z,W);b=E();let te=Cw($,b),_e=M.createHref($);f.replaceState(te,"",_e),c&&y&&y({action:_,location:M.location,delta:0})}function D(z){return NC(z)}let M={get action(){return _},get location(){return n(o,f)},listen(z){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(Iw,A),y=z,()=>{o.removeEventListener(Iw,A),y=null}},createHref(z){return e(o,z)},createURL:D,encodeLocation(z){let W=D(z);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:F,go(z){return f.go(z)}};return M}function NC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Ch(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function tE(n,e,t="/"){return SC(n,e,t,!1)}function SC(n,e,t,s){let o=typeof e=="string"?iu(e):e,c=ca(o.pathname||"/",t);if(c==null)return null;let f=nE(n);AC(f);let _=null;for(let y=0;_==null&&y<f.length;++y){let b=VC(c);_=LC(f[y],b,s)}return _}function nE(n,e=[],t=[],s=""){let o=(c,f,_)=>{let y={relativePath:_===void 0?c.path||"":_,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};y.relativePath.startsWith("/")&&(Wt(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let b=oa([s,y.relativePath]),E=t.concat(y);c.children&&c.children.length>0&&(Wt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),nE(c.children,e,E,b)),!(c.path==null&&!c.index)&&e.push({path:b,score:MC(b,c.index),routesMeta:E})};return n.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))o(c,f);else for(let _ of iE(c.path))o(c,f,_)}),e}function iE(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),c=t.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let f=iE(s.join("/")),_=[];return _.push(...f.map(y=>y===""?c:[c,y].join("/"))),o&&_.push(...f),_.map(y=>n.startsWith("/")&&y===""?"/":y)}function AC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:DC(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var IC=/^:[\w-]+$/,CC=3,RC=2,kC=1,PC=10,jC=-2,Rw=n=>n==="*";function MC(n,e){let t=n.split("/"),s=t.length;return t.some(Rw)&&(s+=jC),e&&(s+=RC),t.filter(o=>!Rw(o)).reduce((o,c)=>o+(IC.test(c)?CC:c===""?kC:PC),s)}function DC(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function LC(n,e,t=!1){let{routesMeta:s}=n,o={},c="/",f=[];for(let _=0;_<s.length;++_){let y=s[_],b=_===s.length-1,E=c==="/"?e:e.slice(c.length)||"/",A=Zf({path:y.relativePath,caseSensitive:y.caseSensitive,end:b},E),I=y.route;if(!A&&b&&t&&!s[s.length-1].route.index&&(A=Zf({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!A)return null;Object.assign(o,A.params),f.push({params:o,pathname:oa([c,A.pathname]),pathnameBase:FC(oa([c,A.pathnameBase])),route:I}),A.pathnameBase!=="/"&&(c=oa([c,A.pathnameBase]))}return f}function Zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=OC(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),_=o.slice(1);return{params:s.reduce((b,{paramName:E,isOptional:A},I)=>{if(E==="*"){let D=_[I]||"";f=c.slice(0,c.length-D.length).replace(/(.)\/+$/,"$1")}const F=_[I];return A&&!F?b[E]=void 0:b[E]=(F||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:f,pattern:n}}function OC(n,e=!1,t=!0){Ks(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,y)=>(s.push({paramName:_,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function VC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ks(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ca(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function UC(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?iu(n):n;return{pathname:t?t.startsWith("/")?t:zC(t,e):e,search:qC(s),hash:HC(o)}}function zC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Dg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sE(n){let e=BC(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function rE(n,e,t,s=!1){let o;typeof n=="string"?o=iu(n):(o={...n},Wt(!o.pathname||!o.pathname.includes("?"),Dg("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),Dg("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),Dg("#","search","hash",o)));let c=n===""||o.pathname==="",f=c?"/":o.pathname,_;if(f==null)_=t;else{let A=e.length-1;if(!s&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),A-=1;o.pathname=I.join("/")}_=A>=0?e[A]:"/"}let y=UC(o,_),b=f&&f!=="/"&&f.endsWith("/"),E=(c||f===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(b||E)&&(y.pathname+="/"),y}var oa=n=>n.join("/").replace(/\/\/+/g,"/"),FC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),qC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function GC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var aE=["POST","PUT","PATCH","DELETE"];new Set(aE);var ZC=["GET",...aE];new Set(ZC);var su=V.createContext(null);su.displayName="DataRouter";var _m=V.createContext(null);_m.displayName="DataRouterState";V.createContext(!1);var oE=V.createContext({isTransitioning:!1});oE.displayName="ViewTransition";var $C=V.createContext(new Map);$C.displayName="Fetchers";var KC=V.createContext(null);KC.displayName="Await";var Ar=V.createContext(null);Ar.displayName="Navigation";var qh=V.createContext(null);qh.displayName="Location";var Ir=V.createContext({outlet:null,matches:[],isDataRoute:!1});Ir.displayName="Route";var iv=V.createContext(null);iv.displayName="RouteError";function WC(n,{relative:e}={}){Wt(Hh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=V.useContext(Ar),{hash:o,pathname:c,search:f}=Zh(n,{relative:e}),_=c;return t!=="/"&&(_=c==="/"?t:oa([t,c])),s.createHref({pathname:_,search:f,hash:o})}function Hh(){return V.useContext(qh)!=null}function Es(){return Wt(Hh(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(qh).location}var lE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cE(n){V.useContext(Ar).static||V.useLayoutEffect(n)}function Qi(){let{isDataRoute:n}=V.useContext(Ir);return n?lR():YC()}function YC(){Wt(Hh(),"useNavigate() may be used only in the context of a <Router> component.");let n=V.useContext(su),{basename:e,navigator:t}=V.useContext(Ar),{matches:s}=V.useContext(Ir),{pathname:o}=Es(),c=JSON.stringify(sE(s)),f=V.useRef(!1);return cE(()=>{f.current=!0}),V.useCallback((y,b={})=>{if(Ks(f.current,lE),!f.current)return;if(typeof y=="number"){t.go(y);return}let E=rE(y,JSON.parse(c),o,b.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:oa([e,E.pathname])),(b.replace?t.replace:t.push)(E,b.state,b)},[e,t,c,o,n])}V.createContext(null);function Gh(){let{matches:n}=V.useContext(Ir),e=n[n.length-1];return e?e.params:{}}function Zh(n,{relative:e}={}){let{matches:t}=V.useContext(Ir),{pathname:s}=Es(),o=JSON.stringify(sE(t));return V.useMemo(()=>rE(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function QC(n,e){return uE(n,e)}function uE(n,e,t,s){Wt(Hh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=V.useContext(Ar),{matches:c}=V.useContext(Ir),f=c[c.length-1],_=f?f.params:{},y=f?f.pathname:"/",b=f?f.pathnameBase:"/",E=f&&f.route;{let W=E&&E.path||"";hE(y,!E||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let A=Es(),I;if(e){let W=typeof e=="string"?iu(e):e;Wt(b==="/"||W.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${W.pathname}" was given in the \`location\` prop.`),I=W}else I=A;let F=I.pathname||"/",D=F;if(b!=="/"){let W=b.replace(/^\//,"").split("/");D="/"+F.replace(/^\//,"").split("/").slice(W.length).join("/")}let M=tE(n,{pathname:D});Ks(E||M!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Ks(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=nR(M&&M.map(W=>Object.assign({},W,{params:Object.assign({},_,W.params),pathname:oa([b,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?b:oa([b,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),c,t,s);return e&&z?V.createElement(qh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},z):z}function XC(){let n=oR(),e=GC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",n),f=V.createElement(V.Fragment,null,V.createElement("p",null,"💿 Hey developer 👋"),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:c},"ErrorBoundary")," or"," ",V.createElement("code",{style:c},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:o},t):null,f)}var JC=V.createElement(XC,null),eR=class extends V.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?V.createElement(Ir.Provider,{value:this.props.routeContext},V.createElement(iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tR({routeContext:n,match:e,children:t}){let s=V.useContext(su);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(Ir.Provider,{value:n},t)}function nR(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,c=t?.errors;if(c!=null){let y=o.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Wt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let f=!1,_=-1;if(t)for(let y=0;y<o.length;y++){let b=o[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=y),b.route.id){let{loaderData:E,errors:A}=t,I=b.route.loader&&!E.hasOwnProperty(b.route.id)&&(!A||A[b.route.id]===void 0);if(b.route.lazy||I){f=!0,_>=0?o=o.slice(0,_+1):o=[o[0]];break}}}return o.reduceRight((y,b,E)=>{let A,I=!1,F=null,D=null;t&&(A=c&&b.route.id?c[b.route.id]:void 0,F=b.route.errorElement||JC,f&&(_<0&&E===0?(hE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,D=null):_===E&&(I=!0,D=b.route.hydrateFallbackElement||null)));let M=e.concat(o.slice(0,E+1)),z=()=>{let W;return A?W=F:I?W=D:b.route.Component?W=V.createElement(b.route.Component,null):b.route.element?W=b.route.element:W=y,V.createElement(tR,{match:b,routeContext:{outlet:y,matches:M,isDataRoute:t!=null},children:W})};return t&&(b.route.ErrorBoundary||b.route.errorElement||E===0)?V.createElement(eR,{location:t.location,revalidation:t.revalidation,component:F,error:A,children:z(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):z()},null)}function sv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iR(n){let e=V.useContext(su);return Wt(e,sv(n)),e}function sR(n){let e=V.useContext(_m);return Wt(e,sv(n)),e}function rR(n){let e=V.useContext(Ir);return Wt(e,sv(n)),e}function rv(n){let e=rR(n),t=e.matches[e.matches.length-1];return Wt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function aR(){return rv("useRouteId")}function oR(){let n=V.useContext(iv),e=sR("useRouteError"),t=rv("useRouteError");return n!==void 0?n:e.errors?.[t]}function lR(){let{router:n}=iR("useNavigate"),e=rv("useNavigate"),t=V.useRef(!1);return cE(()=>{t.current=!0}),V.useCallback(async(o,c={})=>{Ks(t.current,lE),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...c}))},[n,e])}var kw={};function hE(n,e,t){!e&&!kw[n]&&(kw[n]=!0,Ks(!1,t))}V.memo(cR);function cR({routes:n,future:e,state:t}){return uE(n,void 0,t,e)}function di(n){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uR({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:c=!1}){Wt(!Hh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),_=V.useMemo(()=>({basename:f,navigator:o,static:c,future:{}}),[f,o,c]);typeof t=="string"&&(t=iu(t));let{pathname:y="/",search:b="",hash:E="",state:A=null,key:I="default"}=t,F=V.useMemo(()=>{let D=ca(y,f);return D==null?null:{location:{pathname:D,search:b,hash:E,state:A,key:I},navigationType:s}},[f,y,b,E,A,I,s]);return Ks(F!=null,`<Router basename="${f}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:V.createElement(Ar.Provider,{value:_},V.createElement(qh.Provider,{children:e,value:F}))}function hR({children:n,location:e}){return QC(d_(n),e)}function d_(n,e=[]){let t=[];return V.Children.forEach(n,(s,o)=>{if(!V.isValidElement(s))return;let c=[...e,o];if(s.type===V.Fragment){t.push.apply(t,d_(s.props.children,c));return}Wt(s.type===di,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=d_(s.props.children,c)),t.push(f)}),t}var Tf="get",Ef="application/x-www-form-urlencoded";function vm(n){return n!=null&&typeof n.tagName=="string"}function dR(n){return vm(n)&&n.tagName.toLowerCase()==="button"}function fR(n){return vm(n)&&n.tagName.toLowerCase()==="form"}function mR(n){return vm(n)&&n.tagName.toLowerCase()==="input"}function pR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function gR(n,e){return n.button===0&&(!e||e==="_self")&&!pR(n)}function f_(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function _R(n,e){let t=f_(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(c=>{t.append(o,c)})}),t}var hf=null;function vR(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch{hf=!0}return hf}var yR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lg(n){return n!=null&&!yR.has(n)?(Ks(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ef}"`),null):n}function xR(n,e){let t,s,o,c,f;if(fR(n)){let _=n.getAttribute("action");s=_?ca(_,e):null,t=n.getAttribute("method")||Tf,o=Lg(n.getAttribute("enctype"))||Ef,c=new FormData(n)}else if(dR(n)||mR(n)&&(n.type==="submit"||n.type==="image")){let _=n.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||_.getAttribute("action");if(s=y?ca(y,e):null,t=n.getAttribute("formmethod")||_.getAttribute("method")||Tf,o=Lg(n.getAttribute("formenctype"))||Lg(_.getAttribute("enctype"))||Ef,c=new FormData(_,n),!vR()){let{name:b,type:E,value:A}=n;if(E==="image"){let I=b?`${b}.`:"";c.append(`${I}x`,"0"),c.append(`${I}y`,"0")}else b&&c.append(b,A)}}else{if(vm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Tf,s=null,o=Ef,f=n}return c&&o==="text/plain"&&(f=c,c=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:c,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function av(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bR(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&ca(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function wR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function TR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ER(n,e,t){let s=await Promise.all(n.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await wR(c,t);return f.links?f.links():[]}return[]}));return IR(s.flat(1).filter(TR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Pw(n,e,t,s,o,c){let f=(y,b)=>t[b]?y.route.id!==t[b].route.id:!0,_=(y,b)=>t[b].pathname!==y.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==y.params["*"];return c==="assets"?e.filter((y,b)=>f(y,b)||_(y,b)):c==="data"?e.filter((y,b)=>{let E=s.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(f(y,b)||_(y,b))return!0;if(y.route.shouldRevalidate){let A=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function NR(n,e,{includeHydrateFallback:t}={}){return SR(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function SR(n){return[...new Set(n)]}function AR(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function IR(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let c=JSON.stringify(AR(o));return t.has(c)||(t.add(c),s.push({key:c,link:o})),s},[])}function dE(){let n=V.useContext(su);return av(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function CR(){let n=V.useContext(_m);return av(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ov=V.createContext(void 0);ov.displayName="FrameworkContext";function fE(){let n=V.useContext(ov);return av(n,"You must render this element inside a <HydratedRouter> element"),n}function RR(n,e){let t=V.useContext(ov),[s,o]=V.useState(!1),[c,f]=V.useState(!1),{onFocus:_,onBlur:y,onMouseEnter:b,onMouseLeave:E,onTouchStart:A}=e,I=V.useRef(null);V.useEffect(()=>{if(n==="render"&&f(!0),n==="viewport"){let M=W=>{W.forEach($=>{f($.isIntersecting)})},z=new IntersectionObserver(M,{threshold:.5});return I.current&&z.observe(I.current),()=>{z.disconnect()}}},[n]),V.useEffect(()=>{if(s){let M=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(M)}}},[s]);let F=()=>{o(!0)},D=()=>{o(!1),f(!1)};return t?n!=="intent"?[c,I,{}]:[c,I,{onFocus:sh(_,F),onBlur:sh(y,D),onMouseEnter:sh(b,F),onMouseLeave:sh(E,D),onTouchStart:sh(A,F)}]:[!1,I,{}]}function sh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function kR({page:n,...e}){let{router:t}=dE(),s=V.useMemo(()=>tE(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?V.createElement(jR,{page:n,matches:s,...e}):null}function PR(n){let{manifest:e,routeModules:t}=fE(),[s,o]=V.useState([]);return V.useEffect(()=>{let c=!1;return ER(n,e,t).then(f=>{c||o(f)}),()=>{c=!0}},[n,e,t]),s}function jR({page:n,matches:e,...t}){let s=Es(),{manifest:o,routeModules:c}=fE(),{basename:f}=dE(),{loaderData:_,matches:y}=CR(),b=V.useMemo(()=>Pw(n,e,y,o,s,"data"),[n,e,y,o,s]),E=V.useMemo(()=>Pw(n,e,y,o,s,"assets"),[n,e,y,o,s]),A=V.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let D=new Set,M=!1;if(e.forEach(W=>{let $=o.routes[W.route.id];!$||!$.hasLoader||(!b.some(te=>te.route.id===W.route.id)&&W.route.id in _&&c[W.route.id]?.shouldRevalidate||$.hasClientLoader?M=!0:D.add(W.route.id))}),D.size===0)return[];let z=bR(n,f,"data");return M&&D.size>0&&z.searchParams.set("_routes",e.filter(W=>D.has(W.route.id)).map(W=>W.route.id).join(",")),[z.pathname+z.search]},[f,_,s,o,b,e,n,c]),I=V.useMemo(()=>NR(E,o),[E,o]),F=PR(E);return V.createElement(V.Fragment,null,A.map(D=>V.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...t})),I.map(D=>V.createElement("link",{key:D,rel:"modulepreload",href:D,...t})),F.map(({key:D,link:M})=>V.createElement("link",{key:D,nonce:t.nonce,...M})))}function MR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mE&&(window.__reactRouterVersion="7.8.0")}catch{}function DR({basename:n,children:e,window:t}){let s=V.useRef();s.current==null&&(s.current=wC({window:t,v5Compat:!0}));let o=s.current,[c,f]=V.useState({action:o.action,location:o.location}),_=V.useCallback(y=>{V.startTransition(()=>f(y))},[f]);return V.useLayoutEffect(()=>o.listen(_),[o,_]),V.createElement(uR,{basename:n,children:e,location:c.location,navigationType:c.action,navigator:o})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eo=V.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:c,replace:f,state:_,target:y,to:b,preventScrollReset:E,viewTransition:A,...I},F){let{basename:D}=V.useContext(Ar),M=typeof b=="string"&&pE.test(b),z,W=!1;if(typeof b=="string"&&M&&(z=b,mE))try{let j=new URL(window.location.href),U=b.startsWith("//")?new URL(j.protocol+b):new URL(b),q=ca(U.pathname,D);U.origin===j.origin&&q!=null?b=q+U.search+U.hash:W=!0}catch{Ks(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let $=WC(b,{relative:o}),[te,_e,ge]=RR(s,I),xe=UR(b,{replace:f,state:_,target:y,preventScrollReset:E,relative:o,viewTransition:A});function B(j){e&&e(j),j.defaultPrevented||xe(j)}let k=V.createElement("a",{...I,...ge,href:z||$,onClick:W||c?e:B,ref:MR(F,_e),target:y,"data-discover":!M&&t==="render"?"true":void 0});return te&&!M?V.createElement(V.Fragment,null,k,V.createElement(kR,{page:$})):k});Eo.displayName="Link";var LR=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:c,to:f,viewTransition:_,children:y,...b},E){let A=Zh(f,{relative:b.relative}),I=Es(),F=V.useContext(_m),{navigator:D,basename:M}=V.useContext(Ar),z=F!=null&&HR(A)&&_===!0,W=D.encodeLocation?D.encodeLocation(A).pathname:A.pathname,$=I.pathname,te=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;t||($=$.toLowerCase(),te=te?te.toLowerCase():null,W=W.toLowerCase()),te&&M&&(te=ca(te,M)||te);const _e=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let ge=$===W||!o&&$.startsWith(W)&&$.charAt(_e)==="/",xe=te!=null&&(te===W||!o&&te.startsWith(W)&&te.charAt(W.length)==="/"),B={isActive:ge,isPending:xe,isTransitioning:z},k=ge?e:void 0,j;typeof s=="function"?j=s(B):j=[s,ge?"active":null,xe?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let U=typeof c=="function"?c(B):c;return V.createElement(Eo,{...b,"aria-current":k,className:j,ref:E,style:U,to:f,viewTransition:_},typeof y=="function"?y(B):y)});LR.displayName="NavLink";var OR=V.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:c,method:f=Tf,action:_,onSubmit:y,relative:b,preventScrollReset:E,viewTransition:A,...I},F)=>{let D=FR(),M=qR(_,{relative:b}),z=f.toLowerCase()==="get"?"get":"post",W=typeof _=="string"&&pE.test(_),$=te=>{if(y&&y(te),te.defaultPrevented)return;te.preventDefault();let _e=te.nativeEvent.submitter,ge=_e?.getAttribute("formmethod")||f;D(_e||te.currentTarget,{fetcherKey:e,method:ge,navigate:t,replace:o,state:c,relative:b,preventScrollReset:E,viewTransition:A})};return V.createElement("form",{ref:F,method:z,action:M,onSubmit:s?y:$,...I,"data-discover":!W&&n==="render"?"true":void 0})});OR.displayName="Form";function VR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gE(n){let e=V.useContext(su);return Wt(e,VR(n)),e}function UR(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:c,viewTransition:f}={}){let _=Qi(),y=Es(),b=Zh(n,{relative:c});return V.useCallback(E=>{if(gR(E,e)){E.preventDefault();let A=t!==void 0?t:Ch(y)===Ch(b);_(n,{replace:A,state:s,preventScrollReset:o,relative:c,viewTransition:f})}},[y,_,b,t,s,e,n,o,c,f])}function ym(n){Ks(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=V.useRef(f_(n)),t=V.useRef(!1),s=Es(),o=V.useMemo(()=>_R(s.search,t.current?null:e.current),[s.search]),c=Qi(),f=V.useCallback((_,y)=>{const b=f_(typeof _=="function"?_(new URLSearchParams(o)):_);t.current=!0,c("?"+b,y)},[c,o]);return[o,f]}var zR=0,BR=()=>`__${String(++zR)}__`;function FR(){let{router:n}=gE("useSubmit"),{basename:e}=V.useContext(Ar),t=aR();return V.useCallback(async(s,o={})=>{let{action:c,method:f,encType:_,formData:y,body:b}=xR(s,e);if(o.navigate===!1){let E=o.fetcherKey||BR();await n.fetch(E,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:b,formMethod:o.method||f,formEncType:o.encType||_,flushSync:o.flushSync})}else await n.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:y,body:b,formMethod:o.method||f,formEncType:o.encType||_,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function qR(n,{relative:e}={}){let{basename:t}=V.useContext(Ar),s=V.useContext(Ir);Wt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Zh(n||".",{relative:e})},f=Es();if(n==null){c.search=f.search;let _=new URLSearchParams(c.search),y=_.getAll("index");if(y.some(E=>E==="")){_.delete("index"),y.filter(A=>A).forEach(A=>_.append("index",A));let E=_.toString();c.search=E?`?${E}`:""}}return(!n||n===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(c.pathname=c.pathname==="/"?t:oa([t,c.pathname])),Ch(c)}function HR(n,{relative:e}={}){let t=V.useContext(oE);Wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=gE("useViewTransitionState"),o=Zh(n,{relative:e});if(!t.isTransitioning)return!1;let c=ca(t.currentLocation.pathname,s)||t.currentLocation.pathname,f=ca(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Zf(o.pathname,f)!=null||Zf(o.pathname,c)!=null}var _E=JT();const GR=()=>{};var jw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ZR=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=n[t++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=n[t++],f=n[t++],_=n[t++],y=((o&7)<<18|(c&63)<<12|(f&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=n[t++],f=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const c=n[o],f=o+1<n.length,_=f?n[o+1]:0,y=o+2<n.length,b=y?n[o+2]:0,E=c>>2,A=(c&3)<<4|_>>4;let I=(_&15)<<2|b>>6,F=b&63;y||(F=64,f||(I=64)),s.push(t[E],t[A],t[I],t[F])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZR(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const c=t[n.charAt(o++)],_=o<n.length?t[n.charAt(o)]:0;++o;const b=o<n.length?t[n.charAt(o)]:64;++o;const A=o<n.length?t[n.charAt(o)]:64;if(++o,c==null||_==null||b==null||A==null)throw new $R;const I=c<<2|_>>4;if(s.push(I),b!==64){const F=_<<4&240|b>>2;if(s.push(F),A!==64){const D=b<<6&192|A;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KR=function(n){const e=vE(n);return yE.encodeByteArray(e,!0)},$f=function(n){return KR(n).replace(/\./g,"")},xE=function(n){try{return yE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=()=>WR().__FIREBASE_DEFAULTS__,QR=()=>{if(typeof process>"u"||typeof jw>"u")return;const n=jw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XR=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xE(n[1]);return e&&JSON.parse(e)},xm=()=>{try{return GR()||YR()||QR()||XR()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bE=n=>xm()?.emulatorHosts?.[n],wE=n=>{const e=bE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},TE=()=>xm()?.config,EE=n=>xm()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[$f(JSON.stringify(t)),$f(JSON.stringify(f)),""].join(".")}const ph={};function ek(){const n={prod:[],emulator:[]};for(const e of Object.keys(ph))ph[e]?n.emulator.push(e):n.prod.push(e);return n}function tk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Mw=!1;function cv(n,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||ph[n]===e||ph[n]||Mw)return;ph[n]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=ek().prod.length>0;function f(){const I=document.getElementById(s);I&&I.remove()}function _(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,F){I.setAttribute("width","24"),I.setAttribute("id",F),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function b(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Mw=!0,f()},I}function E(I,F){I.setAttribute("id",F),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function A(){const I=tk(s),F=t("text"),D=document.getElementById(F)||document.createElement("span"),M=t("learnmore"),z=document.getElementById(M)||document.createElement("a"),W=t("preprendIcon"),$=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const te=I.element;_(te),E(z,M);const _e=b();y($,W),te.append($,D,z,_e),document.body.appendChild(te)}c?(D.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ni())}function ik(){const n=xm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ak(){const n=ni();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ok(){return!ik()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uv(){try{return typeof indexedDB=="object"}catch{return!1}}function hv(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function AE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="FirebaseError";class Ns extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=lk,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bo.prototype.create)}}class Bo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?ck(c,s):"Error",_=`${this.serviceName}: ${f} (${o}).`;return new Ns(o,_,s)}}function ck(n,e){return n.replace(uk,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const uk=/\{\$([^}]+)}/g;function hk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const c=n[o],f=e[o];if(Dw(c)&&Dw(f)){if(!Ro(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Dw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function ch(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dk(n,e){const t=new fk(n,e);return t.subscribe.bind(t)}class fk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");mk(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Og),o.error===void 0&&(o.error=Og),o.complete===void 0&&(o.complete=Og);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Og(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=1e3,gk=2,_k=14400*1e3,vk=.5;function Lw(n,e=pk,t=gk){const s=e*Math.pow(t,n),o=Math.round(vk*s*(Math.random()-.5)*2);return Math.min(_k,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(n){return n&&n._delegate?n._delegate:n}class Yi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new JR;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bk(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[c,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(c);s===_&&f.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:xk(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xk(n){return n===Cl?void 0:n}function bk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(lt||(lt={}));const Tk={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},Ek=lt.INFO,Nk={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},Sk=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=Nk[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kh{constructor(e){this.name=e,this._logLevel=Ek,this._logHandler=Sk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const Ak=(n,e)=>e.some(t=>n instanceof t);let Ow,Vw;function Ik(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ck(){return Vw||(Vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,m_=new WeakMap,CE=new WeakMap,Vg=new WeakMap,dv=new WeakMap;function Rk(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",c),n.removeEventListener("error",f)},c=()=>{t(No(n.result)),o()},f=()=>{s(n.error),o()};n.addEventListener("success",c),n.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&IE.set(t,n)}).catch(()=>{}),dv.set(e,n),e}function kk(n){if(m_.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",f),n.removeEventListener("abort",f)},c=()=>{t(),o()},f=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",c),n.addEventListener("error",f),n.addEventListener("abort",f)});m_.set(n,e)}let p_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return m_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||CE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return No(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Pk(n){p_=n(p_)}function jk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ug(this),e,...t);return CE.set(s,e.sort?e.sort():[e]),No(s)}:Ck().includes(n)?function(...e){return n.apply(Ug(this),e),No(IE.get(this))}:function(...e){return No(n.apply(Ug(this),e))}}function Mk(n){return typeof n=="function"?jk(n):(n instanceof IDBTransaction&&kk(n),Ak(n,Ik())?new Proxy(n,p_):n)}function No(n){if(n instanceof IDBRequest)return Rk(n);if(Vg.has(n))return Vg.get(n);const e=Mk(n);return e!==n&&(Vg.set(n,e),dv.set(e,n)),e}const Ug=n=>dv.get(n);function RE(n,e,{blocked:t,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(n,e),_=No(f);return s&&f.addEventListener("upgradeneeded",y=>{s(No(f.result),y.oldVersion,y.newVersion,No(f.transaction),y)}),t&&f.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),_.then(y=>{c&&y.addEventListener("close",()=>c()),o&&y.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),_}const Dk=["get","getKey","getAll","getAllKeys","count"],Lk=["put","add","delete","clear"],zg=new Map;function Uw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Lk.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Dk.includes(t)))return;const c=async function(f,..._){const y=this.transaction(f,o?"readwrite":"readonly");let b=y.store;return s&&(b=b.index(_.shift())),(await Promise.all([b[t](..._),o&&y.done]))[0]};return zg.set(e,c),c}Pk(n=>({...n,get:(e,t,s)=>Uw(e,t)||n.get(e,t,s),has:(e,t)=>!!Uw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vk(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Vk(n){return n.getComponent()?.type==="VERSION"}const g_="@firebase/app",zw="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Kh("@firebase/app"),Uk="@firebase/app-compat",zk="@firebase/analytics-compat",Bk="@firebase/analytics",Fk="@firebase/app-check-compat",qk="@firebase/app-check",Hk="@firebase/auth",Gk="@firebase/auth-compat",Zk="@firebase/database",$k="@firebase/data-connect",Kk="@firebase/database-compat",Wk="@firebase/functions",Yk="@firebase/functions-compat",Qk="@firebase/installations",Xk="@firebase/installations-compat",Jk="@firebase/messaging",e2="@firebase/messaging-compat",t2="@firebase/performance",n2="@firebase/performance-compat",i2="@firebase/remote-config",s2="@firebase/remote-config-compat",r2="@firebase/storage",a2="@firebase/storage-compat",o2="@firebase/firestore",l2="@firebase/ai",c2="@firebase/firestore-compat",u2="firebase",h2="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="[DEFAULT]",d2={[g_]:"fire-core",[Uk]:"fire-core-compat",[Bk]:"fire-analytics",[zk]:"fire-analytics-compat",[qk]:"fire-app-check",[Fk]:"fire-app-check-compat",[Hk]:"fire-auth",[Gk]:"fire-auth-compat",[Zk]:"fire-rtdb",[$k]:"fire-data-connect",[Kk]:"fire-rtdb-compat",[Wk]:"fire-fn",[Yk]:"fire-fn-compat",[Qk]:"fire-iid",[Xk]:"fire-iid-compat",[Jk]:"fire-fcm",[e2]:"fire-fcm-compat",[t2]:"fire-perf",[n2]:"fire-perf-compat",[i2]:"fire-rc",[s2]:"fire-rc-compat",[r2]:"fire-gcs",[a2]:"fire-gcs-compat",[o2]:"fire-fst",[c2]:"fire-fst-compat",[l2]:"fire-vertex","fire-js":"fire-js",[u2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf=new Map,f2=new Map,v_=new Map;function Bw(n,e){try{n.container.addComponent(e)}catch(t){ua.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ws(n){const e=n.name;if(v_.has(e))return ua.debug(`There were multiple attempts to register component ${e}.`),!1;v_.set(e,n);for(const t of Kf.values())Bw(t,n);for(const t of f2.values())Bw(t,n);return!0}function _a(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},So=new Bo("app","Firebase",m2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw So.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=h2;function kE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:__,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw So.create("bad-app-name",{appName:String(o)});if(t||(t=TE()),!t)throw So.create("no-options");const c=Kf.get(o);if(c){if(Ro(t,c.options)&&Ro(s,c.config))return c;throw So.create("duplicate-app",{appName:o})}const f=new wk(o);for(const y of v_.values())f.addComponent(y);const _=new p2(t,s,f);return Kf.set(o,_),_}function Wh(n=__){const e=Kf.get(n);if(!e&&n===__&&TE())return kE();if(!e)throw So.create("no-app",{appName:n});return e}function ti(n,e,t){let s=d2[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ua.warn(f.join(" "));return}ws(new Yi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebase-heartbeat-database",_2=1,Rh="firebase-heartbeat-store";let Bg=null;function PE(){return Bg||(Bg=RE(g2,_2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Rh)}catch(t){console.warn(t)}}}}).catch(n=>{throw So.create("idb-open",{originalErrorMessage:n.message})})),Bg}async function v2(n){try{const t=(await PE()).transaction(Rh),s=await t.objectStore(Rh).get(jE(n));return await t.done,s}catch(e){if(e instanceof Ns)ua.warn(e.message);else{const t=So.create("idb-get",{originalErrorMessage:e?.message});ua.warn(t.message)}}}async function Fw(n,e){try{const s=(await PE()).transaction(Rh,"readwrite");await s.objectStore(Rh).put(e,jE(n)),await s.done}catch(t){if(t instanceof Ns)ua.warn(t.message);else{const s=So.create("idb-set",{originalErrorMessage:t?.message});ua.warn(s.message)}}}function jE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=1024,x2=30;class b2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>x2){const o=E2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ua.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qw(),{heartbeatsToSend:t,unsentEntries:s}=w2(this._heartbeatsCache.heartbeats),o=$f(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ua.warn(e),""}}}function qw(){return new Date().toISOString().substring(0,10)}function w2(n,e=y2){const t=[];let s=n.slice();for(const o of n){const c=t.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Hw(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Hw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class T2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uv()?hv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await v2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Fw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Hw(n){return $f(JSON.stringify({version:2,heartbeats:n})).length}function E2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(n){ws(new Yi("platform-logger",e=>new Ok(e),"PRIVATE")),ws(new Yi("heartbeat",e=>new b2(e),"PRIVATE")),ti(g_,zw,n),ti(g_,zw,"esm2020"),ti("fire-js","")}N2("");function ME(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const S2=ME,DE=new Bo("auth","Firebase",ME());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=new Kh("@firebase/auth");function A2(n,...e){Wf.logLevel<=lt.WARN&&Wf.warn(`Auth (${Hl}): ${n}`,...e)}function Nf(n,...e){Wf.logLevel<=lt.ERROR&&Wf.error(`Auth (${Hl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,...e){throw mv(n,...e)}function $s(n,...e){return mv(n,...e)}function fv(n,e,t){const s={...S2(),[e]:t};return new Bo("auth","Firebase",s).create(e,{appName:n.name})}function yr(n){return fv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I2(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Ts(n,"argument-error"),fv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return DE.create(n,...e)}function Ge(n,e,...t){if(!n)throw mv(e,...t)}function ra(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Nf(e),new Error(e)}function ha(n,e){n||ra(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){return typeof self<"u"&&self.location?.href||""}function C2(){return Gw()==="http:"||Gw()==="https:"}function Gw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(C2()||SE()||"connection"in navigator)?navigator.onLine:!0}function k2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.shortDelay=e,this.longDelay=t,ha(t>e,"Short delay should be less than long delay!"),this.isMobile=nk()||rk()}get(){return R2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,e){ha(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M2=new Yh(3e4,6e4);function va(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Cr(n,e,t,s,o={}){return OE(n,o,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const _=$h({key:n.config.apiKey,...f}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const b={method:e,headers:y,...c};return sk()||(b.referrerPolicy="no-referrer"),n.emulatorConfig&&zo(n.emulatorConfig.host)&&(b.credentials="include"),LE.fetch()(await VE(n,n.config.apiHost,t,_),b)})}async function OE(n,e,t){n._canInitEmulator=!1;const s={...P2,...e};try{const o=new L2(n),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw df(n,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const _=c.ok?f.errorMessage:f.error.message,[y,b]=_.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(n,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw df(n,"email-already-in-use",f);if(y==="USER_DISABLED")throw df(n,"user-disabled",f);const E=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw fv(n,E,b);Ts(n,E)}}catch(o){if(o instanceof Ns)throw o;Ts(n,"network-request-failed",{message:String(o)})}}async function Qh(n,e,t,s,o={}){const c=await Cr(n,e,t,s,o);return"mfaPendingCredential"in c&&Ts(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function VE(n,e,t,s){const o=`${e}${t}?${s}`,c=n,f=c.config.emulator?pv(n.config,o):`${n.config.apiScheme}://${o}`;return j2.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function D2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class L2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s($s(this.auth,"network-request-failed")),M2.get())})}}function df(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=$s(n,e,s);return o.customData._tokenResponse=t,o}function Zw(n){return n!==void 0&&n.enterprise!==void 0}class O2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V2(n,e){return Cr(n,"GET","/v2/recaptchaConfig",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U2(n,e){return Cr(n,"POST","/v1/accounts:delete",e)}async function Yf(n,e){return Cr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z2(n,e=!1){const t=jt(n),s=await t.getIdToken(e),o=gv(s);Ge(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:s,authTime:gh(Fg(o.auth_time)),issuedAtTime:gh(Fg(o.iat)),expirationTime:gh(Fg(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Fg(n){return Number(n)*1e3}function gv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Nf("JWT malformed, contained fewer than 3 sections"),null;try{const o=xE(t);return o?JSON.parse(o):(Nf("Failed to decode base64 JWT payload"),null)}catch(o){return Nf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function $w(n){const e=gv(n);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ns&&B2(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function B2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gh(this.lastLoginAt),this.creationTime=gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(n){const e=n.auth,t=await n.getIdToken(),s=await Yc(n,Yf(e,{idToken:t}));Ge(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const c=o.providerUserInfo?.length?UE(o.providerUserInfo):[],f=H2(n.providerData,c),_=n.isAnonymous,y=!(n.email&&o.passwordHash)&&!f?.length,b=_?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new x_(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(n,E)}async function q2(n){const e=jt(n);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function H2(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function UE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(n,e){const t=await OE(n,{},async()=>{const s=$h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=n.config,f=await VE(n,o,"/v1/token",`key=${c}`),_=await n._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:_,body:s};return n.emulatorConfig&&zo(n.emulatorConfig.host)&&(y.credentials="include"),LE.fetch()(f,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Z2(n,e){return Cr(n,"POST","/v2/accounts:revokeToken",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$w(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const t=$w(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:c}=await G2(e,t);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:c}=t,f=new Bc;return s&&(Ge(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Ge(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Ge(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bc,this.toJSON())}_performRefresh(){return ra("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(n,e){Ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zs{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new F2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new x_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Yc(this,this.stsTokenManager.getToken(this.auth,e));return Ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z2(this,e)}reload(){return q2(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(yr(this.auth));const e=await this.getIdToken();return await Yc(this,U2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,f=t.photoURL??void 0,_=t.tenantId??void 0,y=t._redirectEventId??void 0,b=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:A,emailVerified:I,isAnonymous:F,providerData:D,stsTokenManager:M}=t;Ge(A&&M,e,"internal-error");const z=Bc.fromJSON(this.name,M);Ge(typeof A=="string",e,"internal-error"),mo(s,e.name),mo(o,e.name),Ge(typeof I=="boolean",e,"internal-error"),Ge(typeof F=="boolean",e,"internal-error"),mo(c,e.name),mo(f,e.name),mo(_,e.name),mo(y,e.name),mo(b,e.name),mo(E,e.name);const W=new Zs({uid:A,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:F,photoURL:f,phoneNumber:c,tenantId:_,stsTokenManager:z,createdAt:b,lastLoginAt:E});return D&&Array.isArray(D)&&(W.providerData=D.map($=>({...$}))),y&&(W._redirectEventId=y),W}static async _fromIdTokenResponse(e,t,s=!1){const o=new Bc;o.updateFromServerResponse(t);const c=new Zs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Qf(c),c}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ge(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?UE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,_=new Bc;_.updateFromIdToken(s);const y=new Zs({uid:o.localId,auth:e,stsTokenManager:_,isAnonymous:f}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new x_(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(y,b),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=new Map;function aa(n){ha(n instanceof Function,"Expected a class definition");let e=Kw.get(n);return e?(ha(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zE.type="NONE";const Ww=zE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class Fc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Sf(this.userKey,o.apiKey,c),this.fullPersistenceKey=Sf("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Yf(this.auth,{idToken:e}).catch(()=>{});return t?Zs._fromGetAccountInfoResponse(this.auth,t,e):null}return Zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Fc(aa(Ww),e,s);const o=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=o[0]||aa(Ww);const f=Sf(s,e.config.apiKey,e.name);let _=null;for(const b of t)try{const E=await b._get(f);if(E){let A;if(typeof E=="string"){const I=await Yf(e,{idToken:E}).catch(()=>{});if(!I)break;A=await Zs._fromGetAccountInfoResponse(e,I,E)}else A=Zs._fromJSON(e,E);b!==c&&(_=A),c=b;break}}catch{}const y=o.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Fc(c,e,s):(c=y[0],_&&await c._set(f,_.toJSON()),await Promise.all(t.map(async b=>{if(b!==c)try{await b._remove(f)}catch{}})),new Fc(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZE(e))return"Blackberry";if($E(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||qE(e))&&!e.includes("edge/"))return"Chrome";if(GE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function BE(n=ni()){return/firefox\//i.test(n)}function FE(n=ni()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qE(n=ni()){return/crios\//i.test(n)}function HE(n=ni()){return/iemobile/i.test(n)}function GE(n=ni()){return/android/i.test(n)}function ZE(n=ni()){return/blackberry/i.test(n)}function $E(n=ni()){return/webos/i.test(n)}function _v(n=ni()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $2(n=ni()){return _v(n)&&!!window.navigator?.standalone}function K2(){return ak()&&document.documentMode===10}function KE(n=ni()){return _v(n)||GE(n)||$E(n)||ZE(n)||/windows phone/i.test(n)||HE(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n,e=[]){let t;switch(n){case"Browser":t=Yw(ni());break;case"Worker":t=`${Yw(ni())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=c=>new Promise((f,_)=>{try{const y=e(c);f(y)}catch(y){_(y)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(n,e={}){return Cr(n,"GET","/v2/passwordPolicy",va(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=6;class X2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Q2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qw(this),this.idTokenSubscription=new Qw(this),this.beforeStateQueue=new W2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=aa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Yf(this,{idToken:e}),s=await Zs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(fi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,_=await this.tryRedirectSignIn(e);(!c||c===f)&&_?.user&&(s=_.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=k2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(yr(this));const t=e?jt(e):null;return t&&Ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(yr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(yr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(aa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Y2(this),t=new X2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await Z2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&aa(e)||this._popupRedirectResolver;Ge(t,this,"argument-error"),this.redirectPersistenceManager=await Fc.create(this,[aa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(_,this,"internal-error"),_.then(()=>{f||c(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,o);return()=>{f=!0,y()}}else{const y=e.addObserver(t);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&A2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Rr(n){return jt(n)}class Qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=dk(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eP(n){bm=n}function YE(n){return bm.loadJS(n)}function tP(){return bm.recaptchaEnterpriseScript}function nP(){return bm.gapiScript}function iP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sP{constructor(){this.enterprise=new rP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aP="recaptcha-enterprise",QE="NO_RECAPTCHA";class oP{constructor(e){this.type=aP,this.auth=Rr(e)}async verify(e="verify",t=!1){async function s(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,_)=>{V2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const b=new O2(y);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,f(b.siteKey)}}).catch(y=>{_(y)})})}function o(c,f,_){const y=window.grecaptcha;Zw(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(b=>{f(b)}).catch(()=>{f(QE)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sP().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(_=>{if(!t&&Zw(window.grecaptcha))o(_,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=tP();y.length!==0&&(y+=_),YE(y).then(()=>{o(_,c,f)}).catch(b=>{f(b)})}}).catch(_=>{f(_)})})}}async function Xw(n,e,t,s=!1,o=!1){const c=new oP(n);let f;if(o)f=QE;else try{f=await c.verify(t)}catch{f=await c.verify(t,!0)}const _={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const y=_.phoneEnrollmentInfo.phoneNumber,b=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const y=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return s?Object.assign(_,{captchaResp:f}):Object.assign(_,{captchaResponse:f}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function Xf(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xw(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Xw(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n,e){const t=_a(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(Ro(c,e??{}))return o;Ts(o,"already-initialized")}return t.initialize({options:e})}function cP(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(aa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function uP(n,e,t){const s=Rr(n);Ge(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=XE(e),{host:f,port:_}=hP(e),y=_===null?"":`:${_}`,b={url:`${c}//${f}${y}/`},E=Object.freeze({host:f,port:_,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ge(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ge(Ro(b,s.config.emulator)&&Ro(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,zo(f)?(lv(`${c}//${f}${y}`),cv("Auth",!0)):dP()}function XE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function hP(n){const e=XE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Jw(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Jw(f)}}}function Jw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function dP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ra("not implemented")}_getIdTokenResponse(e){return ra("not implemented")}_linkToIdToken(e,t){return ra("not implemented")}_getReauthenticationResolver(e){return ra("not implemented")}}async function fP(n,e){return Cr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mP(n,e){return Qh(n,"POST","/v1/accounts:signInWithPassword",va(n,e))}async function pP(n,e){return Cr(n,"POST","/v1/accounts:sendOobCode",va(n,e))}async function gP(n,e){return pP(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e){return Qh(n,"POST","/v1/accounts:signInWithEmailLink",va(n,e))}async function vP(n,e){return Qh(n,"POST","/v1/accounts:signInWithEmailLink",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends vv{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new kh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new kh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,t,"signInWithPassword",mP);case"emailLink":return _P(e,{email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xf(e,s,"signUpPassword",fP);case"emailLink":return vP(e,{idToken:t,email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(n,e){return Qh(n,"POST","/v1/accounts:signInWithIdp",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="http://localhost";class Vl extends vv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=t;if(!s||!o)return null;const f=new Vl(s,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return qc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,qc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qc(e,t)}buildRequest(){const e={requestUri:yP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$h(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bP(n){const e=lh(ch(n)).link,t=e?lh(ch(e)).deep_link_id:null,s=lh(ch(n)).deep_link_id;return(s?lh(ch(s)).link:null)||s||t||e||n}class yv{constructor(e){const t=lh(ch(e)),s=t.apiKey??null,o=t.oobCode??null,c=xP(t.mode??null);Ge(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=bP(e);try{return new yv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.providerId=ru.PROVIDER_ID}static credential(e,t){return kh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=yv.parseLink(t);return Ge(s,"argument-error"),kh._fromEmailAndCode(e,s.code,s.tenantId)}}ru.PROVIDER_ID="password";ru.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ru.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends xv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends Xh{constructor(){super("facebook.com")}static credential(e){return Vl._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.FACEBOOK_SIGN_IN_METHOD="facebook.com";_o.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Xh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vl._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return sa.credential(t,s)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo extends Xh{constructor(){super("github.com")}static credential(e){return Vl._fromParams({providerId:vo.PROVIDER_ID,signInMethod:vo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vo.credentialFromTaggedObject(e)}static credentialFromError(e){return vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vo.credential(e.oauthAccessToken)}catch{return null}}}vo.GITHUB_SIGN_IN_METHOD="github.com";vo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Xh{constructor(){super("twitter.com")}static credential(e,t){return Vl._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return yo.credential(t,s)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(n,e){return Qh(n,"POST","/v1/accounts:signUp",va(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const c=await Zs._fromIdTokenResponse(e,s,o),f=e0(s);return new da({user:c,providerId:f,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=e0(s);return new da({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function e0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n){if(fi(n.app))return Promise.reject(yr(n));const e=Rr(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new da({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await JE(e,{returnSecureToken:!0}),s=await da._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Ns{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Jf(e,t,s,o)}}function eN(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Jf._fromErrorAndOperation(n,c,e,s):c})}async function TP(n,e,t=!1){const s=await Yc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return da._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EP(n,e,t=!1){const{auth:s}=n;if(fi(s.app))return Promise.reject(yr(s));const o="reauthenticate";try{const c=await Yc(n,eN(s,o,e,n),t);Ge(c.idToken,s,"internal-error");const f=gv(c.idToken);Ge(f,s,"internal-error");const{sub:_}=f;return Ge(n.uid===_,s,"user-mismatch"),da._forOperation(n,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ts(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(n,e,t=!1){if(fi(n.app))return Promise.reject(yr(n));const s="signIn",o=await eN(n,s,e),c=await da._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(c.user),c}async function NP(n,e){return tN(Rr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(n){const e=Rr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SP(n,e,t){const s=Rr(n);await Xf(s,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gP)}async function AP(n,e,t){if(fi(n.app))return Promise.reject(yr(n));const s=Rr(n),f=await Xf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JE).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&nN(n),y}),_=await da._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(_.user),_}function IP(n,e,t){return fi(n.app)?Promise.reject(yr(n)):NP(jt(n),ru.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&nN(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e){return Cr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RP(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=jt(n),c={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},f=await Yc(s,CP(s.auth,c));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const _=s.providerData.find(({providerId:y})=>y==="password");_&&(_.displayName=s.displayName,_.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function kP(n,e,t,s){return jt(n).onIdTokenChanged(e,t,s)}function PP(n,e,t){return jt(n).beforeAuthStateChanged(e,t)}function jP(n,e,t,s){return jt(n).onAuthStateChanged(e,t,s)}function MP(n){return jt(n).signOut()}const em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(em,"1"),this.storage.removeItem(em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=1e3,LP=10;class sN extends iN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,_,y)=>{this.notifyListeners(f,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!t&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);K2()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LP):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},DP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sN.type="LOCAL";const OP=sN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN extends iN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}rN.type="SESSION";const aN=rN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new wm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:c}=t.data,f=this.handlersMap[o];if(!f?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const _=Array.from(f).map(async b=>b(t.origin,c)),y=await VP(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((_,y)=>{const b=bv("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(A){const I=A;if(I.data.eventId===b)switch(I.data.status){case"ack":clearTimeout(E),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),_(I.data.response);break;default:clearTimeout(E),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function zP(n){xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function BP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FP(){return navigator?.serviceWorker?.controller||null}function qP(){return oN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebaseLocalStorageDb",HP=1,tm="firebaseLocalStorage",cN="fbase_key";class Jh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tm(n,e){return n.transaction([tm],e?"readwrite":"readonly").objectStore(tm)}function GP(){const n=indexedDB.deleteDatabase(lN);return new Jh(n).toPromise()}function b_(){const n=indexedDB.open(lN,HP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(tm,{keyPath:cN})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(tm)?e(s):(s.close(),await GP(),e(await b_()))})})}async function t0(n,e,t){const s=Tm(n,!0).put({[cN]:e,value:t});return new Jh(s).toPromise()}async function ZP(n,e){const t=Tm(n,!1).get(e),s=await new Jh(t).toPromise();return s===void 0?null:s.value}function n0(n,e){const t=Tm(n,!0).delete(e);return new Jh(t).toPromise()}const $P=800,KP=3;class uN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await b_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>KP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wm._getInstance(qP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await BP(),!this.activeServiceWorker)return;this.sender=new UP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await b_();return await t0(e,em,"1"),await n0(e,em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>t0(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>ZP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>n0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Tm(o,!1).getAll();return new Jh(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uN.type="LOCAL";const WP=uN;new Yh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(n,e){return e?aa(e):(Ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends vv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function YP(n){return tN(n.auth,new wv(n),n.bypassAuthState)}function QP(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),EP(t,new wv(n),n.bypassAuthState)}async function XP(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),TP(t,new wv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:c,error:f,type:_}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(y))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YP;case"linkViaPopup":case"linkViaRedirect":return XP;case"reauthViaPopup":case"reauthViaRedirect":return QP;default:Ts(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new Yh(2e3,1e4);async function ej(n,e,t){if(fi(n.app))return Promise.reject($s(n,"operation-not-supported-in-this-environment"));const s=Rr(n);I2(n,e,xv);const o=hN(s,t);return new Rl(s,"signInViaPopup",e,o).executeNotNull()}class Rl extends dN{constructor(e,t,s,o,c){super(e,t,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Rl.currentPopupAction&&Rl.currentPopupAction.cancel(),Rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=bv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($s(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($s(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($s(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JP.get())};e()}}Rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="pendingRedirect",Af=new Map;class nj extends dN{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const s=await ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ij(n,e){const t=aj(e),s=rj(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function sj(n,e){Af.set(n._key(),e)}function rj(n){return aa(n._redirectPersistence)}function aj(n){return Sf(tj,n.config.apiKey,n.name)}async function oj(n,e,t=!1){if(fi(n.app))return Promise.reject(yr(n));const s=Rr(n),o=hN(s,e),f=await new nj(s,o,t).execute();return f&&!t&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=600*1e3;class cj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fN(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError($s(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lj&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0(e))}saveEventToCache(e){this.cachedEventUids.add(i0(e)),this.lastProcessedEventTime=Date.now()}}function i0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function fN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(n,e={}){return Cr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fj=/^https?/;async function mj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hj(n);for(const t of e)try{if(pj(t))return}catch{}Ts(n,"unauthorized-domain")}function pj(n){const e=y_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const f=new URL(n);return f.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===s}if(!fj.test(t))return!1;if(dj.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Yh(3e4,6e4);function s0(){const n=xr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _j(n){return new Promise((e,t)=>{function s(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),t($s(n,"network-request-failed"))},timeout:gj.get()})}if(xr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(xr().gapi?.load)s();else{const o=iP("iframefcb");return xr()[o]=()=>{gapi.load?s():t($s(n,"network-request-failed"))},YE(`${nP()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw If=null,e})}let If=null;function vj(n){return If=If||_j(n),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Yh(5e3,15e3),xj="__/auth/iframe",bj="emulator/auth/iframe",wj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ej(n){const e=n.config;Ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?pv(e,bj):`https://${n.config.authDomain}/${xj}`,s={apiKey:e.apiKey,appName:n.name,v:Hl},o=Tj.get(n.config.apiHost);o&&(s.eid=o);const c=n._getFrameworks();return c.length&&(s.fw=c.join(",")),`${t}?${$h(s).slice(1)}`}async function Nj(n){const e=await vj(n),t=xr().gapi;return Ge(t,n,"internal-error"),e.open({where:document.body,url:Ej(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wj,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const f=$s(n,"network-request-failed"),_=xr().setTimeout(()=>{c(f)},yj.get());function y(){xr().clearTimeout(_),o(s)}s.ping(y).then(y,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Aj=500,Ij=600,Cj="_blank",Rj="http://localhost";class r0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kj(n,e,t,s=Aj,o=Ij){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const y={...Sj,width:s.toString(),height:o.toString(),top:c,left:f},b=ni().toLowerCase();t&&(_=qE(b)?Cj:t),BE(b)&&(e=e||Rj,y.scrollbars="yes");const E=Object.entries(y).reduce((I,[F,D])=>`${I}${F}=${D},`,"");if($2(b)&&_!=="_self")return Pj(e||"",_),new r0(null);const A=window.open(e||"",_,E);Ge(A,n,"popup-blocked");try{A.focus()}catch{}return new r0(A)}function Pj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="__/auth/handler",Mj="emulator/auth/handler",Dj=encodeURIComponent("fac");async function a0(n,e,t,s,o,c){Ge(n.config.authDomain,n,"auth-domain-config-required"),Ge(n.config.apiKey,n,"invalid-api-key");const f={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Hl,eventId:o};if(e instanceof xv){e.setDefaultLanguage(n.languageCode),f.providerId=e.providerId||"",hk(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,A]of Object.entries({}))f[E]=A}if(e instanceof Xh){const E=e.getScopes().filter(A=>A!=="");E.length>0&&(f.scopes=E.join(","))}n.tenantId&&(f.tid=n.tenantId);const _=f;for(const E of Object.keys(_))_[E]===void 0&&delete _[E];const y=await n._getAppCheckToken(),b=y?`#${Dj}=${encodeURIComponent(y)}`:"";return`${Lj(n)}?${$h(_).slice(1)}${b}`}function Lj({config:n}){return n.emulator?pv(n,Mj):`https://${n.authDomain}/${jj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="webStorageSupport";class Oj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aN,this._completeRedirectFn=oj,this._overrideRedirectResult=sj}async _openPopup(e,t,s,o){ha(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await a0(e,t,s,y_(),o);return kj(e,c,bv())}async _openRedirect(e,t,s,o){await this._originValidation(e);const c=await a0(e,t,s,y_(),o);return zP(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(ha(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Nj(e),s=new cj(e);return t.register("authEvent",o=>(Ge(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qg,{type:qg},o=>{const c=o?.[0]?.[qg];c!==void 0&&t(!!c),Ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return KE()||FE()||_v()}}const Vj=Oj;var o0="@firebase/auth",l0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bj(n){ws(new Yi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=s.options;Ge(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:_,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WE(n)},b=new J2(s,o,c,y);return cP(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ws(new Yi("auth-internal",e=>{const t=Rr(e.getProvider("auth").getImmediate());return(s=>new Uj(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ti(o0,l0,zj(n)),ti(o0,l0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=300,qj=EE("authIdTokenMaxAge")||Fj;let c0=null;const Hj=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>qj)return;const o=t?.token;c0!==o&&(c0=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Gj(n=Wh()){const e=_a(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lP(n,{popupRedirectResolver:Vj,persistence:[WP,OP,aN]}),s=EE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=Hj(c.toString());PP(t,f,()=>f(t.currentUser)),kP(t,_=>f(_))}}const o=bE("auth");return o&&uP(t,`http://${o}`),t}function Zj(){return document.getElementsByTagName("head")?.[0]??document}eP({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const c=$s("internal-error");c.customData=o,t(c)},s.type="text/javascript",s.charset="UTF-8",Zj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bj("Browser");var $j="firebase",Kj="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti($j,Kj,"app");var u0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,mN;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(B,k){function j(){}j.prototype=k.prototype,B.D=k.prototype,B.prototype=new j,B.prototype.constructor=B,B.C=function(U,q,Z){for(var O=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)O[Ce-2]=arguments[Ce];return k.prototype[q].apply(U,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(B,k,j){j||(j=0);var U=Array(16);if(typeof k=="string")for(var q=0;16>q;++q)U[q]=k.charCodeAt(j++)|k.charCodeAt(j++)<<8|k.charCodeAt(j++)<<16|k.charCodeAt(j++)<<24;else for(q=0;16>q;++q)U[q]=k[j++]|k[j++]<<8|k[j++]<<16|k[j++]<<24;k=B.g[0],j=B.g[1],q=B.g[2];var Z=B.g[3],O=k+(Z^j&(q^Z))+U[0]+3614090360&4294967295;k=j+(O<<7&4294967295|O>>>25),O=Z+(q^k&(j^q))+U[1]+3905402710&4294967295,Z=k+(O<<12&4294967295|O>>>20),O=q+(j^Z&(k^j))+U[2]+606105819&4294967295,q=Z+(O<<17&4294967295|O>>>15),O=j+(k^q&(Z^k))+U[3]+3250441966&4294967295,j=q+(O<<22&4294967295|O>>>10),O=k+(Z^j&(q^Z))+U[4]+4118548399&4294967295,k=j+(O<<7&4294967295|O>>>25),O=Z+(q^k&(j^q))+U[5]+1200080426&4294967295,Z=k+(O<<12&4294967295|O>>>20),O=q+(j^Z&(k^j))+U[6]+2821735955&4294967295,q=Z+(O<<17&4294967295|O>>>15),O=j+(k^q&(Z^k))+U[7]+4249261313&4294967295,j=q+(O<<22&4294967295|O>>>10),O=k+(Z^j&(q^Z))+U[8]+1770035416&4294967295,k=j+(O<<7&4294967295|O>>>25),O=Z+(q^k&(j^q))+U[9]+2336552879&4294967295,Z=k+(O<<12&4294967295|O>>>20),O=q+(j^Z&(k^j))+U[10]+4294925233&4294967295,q=Z+(O<<17&4294967295|O>>>15),O=j+(k^q&(Z^k))+U[11]+2304563134&4294967295,j=q+(O<<22&4294967295|O>>>10),O=k+(Z^j&(q^Z))+U[12]+1804603682&4294967295,k=j+(O<<7&4294967295|O>>>25),O=Z+(q^k&(j^q))+U[13]+4254626195&4294967295,Z=k+(O<<12&4294967295|O>>>20),O=q+(j^Z&(k^j))+U[14]+2792965006&4294967295,q=Z+(O<<17&4294967295|O>>>15),O=j+(k^q&(Z^k))+U[15]+1236535329&4294967295,j=q+(O<<22&4294967295|O>>>10),O=k+(q^Z&(j^q))+U[1]+4129170786&4294967295,k=j+(O<<5&4294967295|O>>>27),O=Z+(j^q&(k^j))+U[6]+3225465664&4294967295,Z=k+(O<<9&4294967295|O>>>23),O=q+(k^j&(Z^k))+U[11]+643717713&4294967295,q=Z+(O<<14&4294967295|O>>>18),O=j+(Z^k&(q^Z))+U[0]+3921069994&4294967295,j=q+(O<<20&4294967295|O>>>12),O=k+(q^Z&(j^q))+U[5]+3593408605&4294967295,k=j+(O<<5&4294967295|O>>>27),O=Z+(j^q&(k^j))+U[10]+38016083&4294967295,Z=k+(O<<9&4294967295|O>>>23),O=q+(k^j&(Z^k))+U[15]+3634488961&4294967295,q=Z+(O<<14&4294967295|O>>>18),O=j+(Z^k&(q^Z))+U[4]+3889429448&4294967295,j=q+(O<<20&4294967295|O>>>12),O=k+(q^Z&(j^q))+U[9]+568446438&4294967295,k=j+(O<<5&4294967295|O>>>27),O=Z+(j^q&(k^j))+U[14]+3275163606&4294967295,Z=k+(O<<9&4294967295|O>>>23),O=q+(k^j&(Z^k))+U[3]+4107603335&4294967295,q=Z+(O<<14&4294967295|O>>>18),O=j+(Z^k&(q^Z))+U[8]+1163531501&4294967295,j=q+(O<<20&4294967295|O>>>12),O=k+(q^Z&(j^q))+U[13]+2850285829&4294967295,k=j+(O<<5&4294967295|O>>>27),O=Z+(j^q&(k^j))+U[2]+4243563512&4294967295,Z=k+(O<<9&4294967295|O>>>23),O=q+(k^j&(Z^k))+U[7]+1735328473&4294967295,q=Z+(O<<14&4294967295|O>>>18),O=j+(Z^k&(q^Z))+U[12]+2368359562&4294967295,j=q+(O<<20&4294967295|O>>>12),O=k+(j^q^Z)+U[5]+4294588738&4294967295,k=j+(O<<4&4294967295|O>>>28),O=Z+(k^j^q)+U[8]+2272392833&4294967295,Z=k+(O<<11&4294967295|O>>>21),O=q+(Z^k^j)+U[11]+1839030562&4294967295,q=Z+(O<<16&4294967295|O>>>16),O=j+(q^Z^k)+U[14]+4259657740&4294967295,j=q+(O<<23&4294967295|O>>>9),O=k+(j^q^Z)+U[1]+2763975236&4294967295,k=j+(O<<4&4294967295|O>>>28),O=Z+(k^j^q)+U[4]+1272893353&4294967295,Z=k+(O<<11&4294967295|O>>>21),O=q+(Z^k^j)+U[7]+4139469664&4294967295,q=Z+(O<<16&4294967295|O>>>16),O=j+(q^Z^k)+U[10]+3200236656&4294967295,j=q+(O<<23&4294967295|O>>>9),O=k+(j^q^Z)+U[13]+681279174&4294967295,k=j+(O<<4&4294967295|O>>>28),O=Z+(k^j^q)+U[0]+3936430074&4294967295,Z=k+(O<<11&4294967295|O>>>21),O=q+(Z^k^j)+U[3]+3572445317&4294967295,q=Z+(O<<16&4294967295|O>>>16),O=j+(q^Z^k)+U[6]+76029189&4294967295,j=q+(O<<23&4294967295|O>>>9),O=k+(j^q^Z)+U[9]+3654602809&4294967295,k=j+(O<<4&4294967295|O>>>28),O=Z+(k^j^q)+U[12]+3873151461&4294967295,Z=k+(O<<11&4294967295|O>>>21),O=q+(Z^k^j)+U[15]+530742520&4294967295,q=Z+(O<<16&4294967295|O>>>16),O=j+(q^Z^k)+U[2]+3299628645&4294967295,j=q+(O<<23&4294967295|O>>>9),O=k+(q^(j|~Z))+U[0]+4096336452&4294967295,k=j+(O<<6&4294967295|O>>>26),O=Z+(j^(k|~q))+U[7]+1126891415&4294967295,Z=k+(O<<10&4294967295|O>>>22),O=q+(k^(Z|~j))+U[14]+2878612391&4294967295,q=Z+(O<<15&4294967295|O>>>17),O=j+(Z^(q|~k))+U[5]+4237533241&4294967295,j=q+(O<<21&4294967295|O>>>11),O=k+(q^(j|~Z))+U[12]+1700485571&4294967295,k=j+(O<<6&4294967295|O>>>26),O=Z+(j^(k|~q))+U[3]+2399980690&4294967295,Z=k+(O<<10&4294967295|O>>>22),O=q+(k^(Z|~j))+U[10]+4293915773&4294967295,q=Z+(O<<15&4294967295|O>>>17),O=j+(Z^(q|~k))+U[1]+2240044497&4294967295,j=q+(O<<21&4294967295|O>>>11),O=k+(q^(j|~Z))+U[8]+1873313359&4294967295,k=j+(O<<6&4294967295|O>>>26),O=Z+(j^(k|~q))+U[15]+4264355552&4294967295,Z=k+(O<<10&4294967295|O>>>22),O=q+(k^(Z|~j))+U[6]+2734768916&4294967295,q=Z+(O<<15&4294967295|O>>>17),O=j+(Z^(q|~k))+U[13]+1309151649&4294967295,j=q+(O<<21&4294967295|O>>>11),O=k+(q^(j|~Z))+U[4]+4149444226&4294967295,k=j+(O<<6&4294967295|O>>>26),O=Z+(j^(k|~q))+U[11]+3174756917&4294967295,Z=k+(O<<10&4294967295|O>>>22),O=q+(k^(Z|~j))+U[2]+718787259&4294967295,q=Z+(O<<15&4294967295|O>>>17),O=j+(Z^(q|~k))+U[9]+3951481745&4294967295,B.g[0]=B.g[0]+k&4294967295,B.g[1]=B.g[1]+(q+(O<<21&4294967295|O>>>11))&4294967295,B.g[2]=B.g[2]+q&4294967295,B.g[3]=B.g[3]+Z&4294967295}s.prototype.u=function(B,k){k===void 0&&(k=B.length);for(var j=k-this.blockSize,U=this.B,q=this.h,Z=0;Z<k;){if(q==0)for(;Z<=j;)o(this,B,Z),Z+=this.blockSize;if(typeof B=="string"){for(;Z<k;)if(U[q++]=B.charCodeAt(Z++),q==this.blockSize){o(this,U),q=0;break}}else for(;Z<k;)if(U[q++]=B[Z++],q==this.blockSize){o(this,U),q=0;break}}this.h=q,this.o+=k},s.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var k=1;k<B.length-8;++k)B[k]=0;var j=8*this.o;for(k=B.length-8;k<B.length;++k)B[k]=j&255,j/=256;for(this.u(B),B=Array(16),k=j=0;4>k;++k)for(var U=0;32>U;U+=8)B[j++]=this.g[k]>>>U&255;return B};function c(B,k){var j=_;return Object.prototype.hasOwnProperty.call(j,B)?j[B]:j[B]=k(B)}function f(B,k){this.h=k;for(var j=[],U=!0,q=B.length-1;0<=q;q--){var Z=B[q]|0;U&&Z==k||(j[q]=Z,U=!1)}this.g=j}var _={};function y(B){return-128<=B&&128>B?c(B,function(k){return new f([k|0],0>k?-1:0)}):new f([B|0],0>B?-1:0)}function b(B){if(isNaN(B)||!isFinite(B))return A;if(0>B)return z(b(-B));for(var k=[],j=1,U=0;B>=j;U++)k[U]=B/j|0,j*=4294967296;return new f(k,0)}function E(B,k){if(B.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(B.charAt(0)=="-")return z(E(B.substring(1),k));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=b(Math.pow(k,8)),U=A,q=0;q<B.length;q+=8){var Z=Math.min(8,B.length-q),O=parseInt(B.substring(q,q+Z),k);8>Z?(Z=b(Math.pow(k,Z)),U=U.j(Z).add(b(O))):(U=U.j(j),U=U.add(b(O)))}return U}var A=y(0),I=y(1),F=y(16777216);n=f.prototype,n.m=function(){if(M(this))return-z(this).m();for(var B=0,k=1,j=0;j<this.g.length;j++){var U=this.i(j);B+=(0<=U?U:4294967296+U)*k,k*=4294967296}return B},n.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(D(this))return"0";if(M(this))return"-"+z(this).toString(B);for(var k=b(Math.pow(B,6)),j=this,U="";;){var q=_e(j,k).g;j=W(j,q.j(k));var Z=((0<j.g.length?j.g[0]:j.h)>>>0).toString(B);if(j=q,D(j))return Z+U;for(;6>Z.length;)Z="0"+Z;U=Z+U}},n.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function D(B){if(B.h!=0)return!1;for(var k=0;k<B.g.length;k++)if(B.g[k]!=0)return!1;return!0}function M(B){return B.h==-1}n.l=function(B){return B=W(this,B),M(B)?-1:D(B)?0:1};function z(B){for(var k=B.g.length,j=[],U=0;U<k;U++)j[U]=~B.g[U];return new f(j,~B.h).add(I)}n.abs=function(){return M(this)?z(this):this},n.add=function(B){for(var k=Math.max(this.g.length,B.g.length),j=[],U=0,q=0;q<=k;q++){var Z=U+(this.i(q)&65535)+(B.i(q)&65535),O=(Z>>>16)+(this.i(q)>>>16)+(B.i(q)>>>16);U=O>>>16,Z&=65535,O&=65535,j[q]=O<<16|Z}return new f(j,j[j.length-1]&-2147483648?-1:0)};function W(B,k){return B.add(z(k))}n.j=function(B){if(D(this)||D(B))return A;if(M(this))return M(B)?z(this).j(z(B)):z(z(this).j(B));if(M(B))return z(this.j(z(B)));if(0>this.l(F)&&0>B.l(F))return b(this.m()*B.m());for(var k=this.g.length+B.g.length,j=[],U=0;U<2*k;U++)j[U]=0;for(U=0;U<this.g.length;U++)for(var q=0;q<B.g.length;q++){var Z=this.i(U)>>>16,O=this.i(U)&65535,Ce=B.i(q)>>>16,Je=B.i(q)&65535;j[2*U+2*q]+=O*Je,$(j,2*U+2*q),j[2*U+2*q+1]+=Z*Je,$(j,2*U+2*q+1),j[2*U+2*q+1]+=O*Ce,$(j,2*U+2*q+1),j[2*U+2*q+2]+=Z*Ce,$(j,2*U+2*q+2)}for(U=0;U<k;U++)j[U]=j[2*U+1]<<16|j[2*U];for(U=k;U<2*k;U++)j[U]=0;return new f(j,0)};function $(B,k){for(;(B[k]&65535)!=B[k];)B[k+1]+=B[k]>>>16,B[k]&=65535,k++}function te(B,k){this.g=B,this.h=k}function _e(B,k){if(D(k))throw Error("division by zero");if(D(B))return new te(A,A);if(M(B))return k=_e(z(B),k),new te(z(k.g),z(k.h));if(M(k))return k=_e(B,z(k)),new te(z(k.g),k.h);if(30<B.g.length){if(M(B)||M(k))throw Error("slowDivide_ only works with positive integers.");for(var j=I,U=k;0>=U.l(B);)j=ge(j),U=ge(U);var q=xe(j,1),Z=xe(U,1);for(U=xe(U,2),j=xe(j,2);!D(U);){var O=Z.add(U);0>=O.l(B)&&(q=q.add(j),Z=O),U=xe(U,1),j=xe(j,1)}return k=W(B,q.j(k)),new te(q,k)}for(q=A;0<=B.l(k);){for(j=Math.max(1,Math.floor(B.m()/k.m())),U=Math.ceil(Math.log(j)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),Z=b(j),O=Z.j(k);M(O)||0<O.l(B);)j-=U,Z=b(j),O=Z.j(k);D(Z)&&(Z=I),q=q.add(Z),B=W(B,O)}return new te(q,B)}n.A=function(B){return _e(this,B).h},n.and=function(B){for(var k=Math.max(this.g.length,B.g.length),j=[],U=0;U<k;U++)j[U]=this.i(U)&B.i(U);return new f(j,this.h&B.h)},n.or=function(B){for(var k=Math.max(this.g.length,B.g.length),j=[],U=0;U<k;U++)j[U]=this.i(U)|B.i(U);return new f(j,this.h|B.h)},n.xor=function(B){for(var k=Math.max(this.g.length,B.g.length),j=[],U=0;U<k;U++)j[U]=this.i(U)^B.i(U);return new f(j,this.h^B.h)};function ge(B){for(var k=B.g.length+1,j=[],U=0;U<k;U++)j[U]=B.i(U)<<1|B.i(U-1)>>>31;return new f(j,B.h)}function xe(B,k){var j=k>>5;k%=32;for(var U=B.g.length-j,q=[],Z=0;Z<U;Z++)q[Z]=0<k?B.i(Z+j)>>>k|B.i(Z+j+1)<<32-k:B.i(Z+j);return new f(q,B.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,mN=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=E,Ao=f}).apply(typeof u0<"u"?u0:typeof self<"u"?self:typeof window<"u"?window:{});var ff=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pN,uh,gN,Cf,w_,_N,vN,yN;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,w,N){return m==Array.prototype||m==Object.prototype||(m[w]=N.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof ff=="object"&&ff];for(var w=0;w<m.length;++w){var N=m[w];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function o(m,w){if(w)e:{var N=s;m=m.split(".");for(var P=0;P<m.length-1;P++){var X=m[P];if(!(X in N))break e;N=N[X]}m=m[m.length-1],P=N[m],w=w(P),w!=P&&w!=null&&e(N,m,{configurable:!0,writable:!0,value:w})}}function c(m,w){m instanceof String&&(m+="");var N=0,P=!1,X={next:function(){if(!P&&N<m.length){var le=N++;return{value:w(le,m[le]),done:!1}}return P=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}o("Array.prototype.values",function(m){return m||function(){return c(this,function(w,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},_=this||self;function y(m){var w=typeof m;return w=w!="object"?w:m?Array.isArray(m)?"array":w:"null",w=="array"||w=="object"&&typeof m.length=="number"}function b(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function E(m,w,N){return m.call.apply(m.bind,arguments)}function A(m,w,N){if(!m)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,P),m.apply(w,X)}}return function(){return m.apply(w,arguments)}}function I(m,w,N){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,I.apply(null,arguments)}function F(m,w){var N=Array.prototype.slice.call(arguments,1);return function(){var P=N.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function D(m,w){function N(){}N.prototype=w.prototype,m.aa=w.prototype,m.prototype=new N,m.prototype.constructor=m,m.Qb=function(P,X,le){for(var be=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)be[ct-2]=arguments[ct];return w.prototype[X].apply(P,be)}}function M(m){const w=m.length;if(0<w){const N=Array(w);for(let P=0;P<w;P++)N[P]=m[P];return N}return[]}function z(m,w){for(let N=1;N<arguments.length;N++){const P=arguments[N];if(y(P)){const X=m.length||0,le=P.length||0;m.length=X+le;for(let be=0;be<le;be++)m[X+be]=P[be]}else m.push(P)}}class W{constructor(w,N){this.i=w,this.j=N,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function $(m){return/^[\s\xa0]*$/.test(m)}function te(){var m=_.navigator;return m&&(m=m.userAgent)?m:""}function _e(m){return _e[" "](m),m}_e[" "]=function(){};var ge=te().indexOf("Gecko")!=-1&&!(te().toLowerCase().indexOf("webkit")!=-1&&te().indexOf("Edge")==-1)&&!(te().indexOf("Trident")!=-1||te().indexOf("MSIE")!=-1)&&te().indexOf("Edge")==-1;function xe(m,w,N){for(const P in m)w.call(N,m[P],P,m)}function B(m,w){for(const N in m)w.call(void 0,m[N],N,m)}function k(m){const w={};for(const N in m)w[N]=m[N];return w}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(m,w){let N,P;for(let X=1;X<arguments.length;X++){P=arguments[X];for(N in P)m[N]=P[N];for(let le=0;le<j.length;le++)N=j[le],Object.prototype.hasOwnProperty.call(P,N)&&(m[N]=P[N])}}function q(m){var w=1;m=m.split(":");const N=[];for(;0<w&&m.length;)N.push(m.shift()),w--;return m.length&&N.push(m.join(":")),N}function Z(m){_.setTimeout(()=>{throw m},0)}function O(){var m=ce;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class Ce{constructor(){this.h=this.g=null}add(w,N){const P=Je.get();P.set(w,N),this.h?this.h.next=P:this.g=P,this.h=P}}var Je=new W(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(w,N){this.h=w,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,se=!1,ce=new Ce,ve=()=>{const m=_.Promise.resolve(void 0);Y=()=>{m.then(Te)}};var Te=()=>{for(var m;m=O();){try{m.h.call(m.g)}catch(N){Z(N)}var w=Je;w.j(m),100>w.h&&(w.h++,m.next=w.g,w.g=m)}se=!1};function Me(){this.s=this.s,this.C=this.C}Me.prototype.s=!1,Me.prototype.ma=function(){this.s||(this.s=!0,this.N())},Me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const N=()=>{};_.addEventListener("test",N,w),_.removeEventListener("test",N,w)}catch{}return m}();function Ve(m,w){if(we.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var N=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget){if(ge){e:{try{_e(w.nodeName);var X=!0;break e}catch{}X=!1}X||(w=null)}}else N=="mouseover"?w=m.fromElement:N=="mouseout"&&(w=m.toElement);this.relatedTarget=w,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:de[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ve.aa.h.call(this)}}D(Ve,we);var de={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Re="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Ye(m,w,N,P,X){this.listener=m,this.proxy=null,this.src=w,this.type=N,this.capture=!!P,this.ha=X,this.key=++Ke,this.da=this.fa=!1}function Be(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Tt(m){this.src=m,this.g={},this.h=0}Tt.prototype.add=function(m,w,N,P,X){var le=m.toString();m=this.g[le],m||(m=this.g[le]=[],this.h++);var be=ii(m,w,P,X);return-1<be?(w=m[be],N||(w.fa=!1)):(w=new Ye(w,this.src,le,!!P,X),w.fa=N,m.push(w)),w};function Bt(m,w){var N=w.type;if(N in m.g){var P=m.g[N],X=Array.prototype.indexOf.call(P,w,void 0),le;(le=0<=X)&&Array.prototype.splice.call(P,X,1),le&&(Be(w),m.g[N].length==0&&(delete m.g[N],m.h--))}}function ii(m,w,N,P){for(var X=0;X<m.length;++X){var le=m[X];if(!le.da&&le.listener==w&&le.capture==!!N&&le.ha==P)return X}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),ya={};function Ho(m,w,N,P,X){if(Array.isArray(w)){for(var le=0;le<w.length;le++)Ho(m,w[le],N,P,X);return null}return N=Wl(N),m&&m[Re]?m.K(w,N,b(P)?!!P.capture:!1,X):qn(m,w,N,!1,P,X)}function qn(m,w,N,P,X,le){if(!w)throw Error("Invalid event type");var be=b(X)?!!X.capture:!!X,ct=Pr(m);if(ct||(m[Ss]=ct=new Tt(m)),N=ct.add(w,N,P,be,le),N.proxy)return N;if(P=xa(),N.proxy=P,P.src=m,P.listener=N,m.addEventListener)Ue||(X=be),X===void 0&&(X=!1),m.addEventListener(w.toString(),P,X);else if(m.attachEvent)m.attachEvent(As(w.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return N}function xa(){function m(N){return w.call(m.src,m.listener,N)}const w=Kl;return m}function Go(m,w,N,P,X){if(Array.isArray(w))for(var le=0;le<w.length;le++)Go(m,w[le],N,P,X);else P=b(P)?!!P.capture:!!P,N=Wl(N),m&&m[Re]?(m=m.i,w=String(w).toString(),w in m.g&&(le=m.g[w],N=ii(le,N,P,X),-1<N&&(Be(le[N]),Array.prototype.splice.call(le,N,1),le.length==0&&(delete m.g[w],m.h--)))):m&&(m=Pr(m))&&(w=m.g[w.toString()],m=-1,w&&(m=ii(w,N,P,X)),(N=-1<m?w[m]:null)&&kr(N))}function kr(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[Re])Bt(w.i,m);else{var N=m.type,P=m.proxy;w.removeEventListener?w.removeEventListener(N,P,m.capture):w.detachEvent?w.detachEvent(As(N),P):w.addListener&&w.removeListener&&w.removeListener(P),(N=Pr(w))?(Bt(N,m),N.h==0&&(N.src=null,w[Ss]=null)):Be(m)}}}function As(m){return m in ya?ya[m]:ya[m]="on"+m}function Kl(m,w){if(m.da)m=!0;else{w=new Ve(w,this);var N=m.listener,P=m.ha||m.src;m.fa&&kr(m),m=N.call(P,w)}return m}function Pr(m){return m=m[Ss],m instanceof Tt?m:null}var Zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(m){return typeof m=="function"?m:(m[Zo]||(m[Zo]=function(w){return m.handleEvent(w)}),m[Zo])}function Mt(){Me.call(this),this.i=new Tt(this),this.M=this,this.F=null}D(Mt,Me),Mt.prototype[Re]=!0,Mt.prototype.removeEventListener=function(m,w,N,P){Go(this,m,w,N,P)};function _t(m,w){var N,P=m.F;if(P)for(N=[];P;P=P.F)N.push(P);if(m=m.M,P=w.type||w,typeof w=="string")w=new we(w,m);else if(w instanceof we)w.target=w.target||m;else{var X=w;w=new we(P,m),U(w,X)}if(X=!0,N)for(var le=N.length-1;0<=le;le--){var be=w.g=N[le];X=Hn(be,P,!0,w)&&X}if(be=w.g=m,X=Hn(be,P,!0,w)&&X,X=Hn(be,P,!1,w)&&X,N)for(le=0;le<N.length;le++)be=w.g=N[le],X=Hn(be,P,!1,w)&&X}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var m=this.i,w;for(w in m.g){for(var N=m.g[w],P=0;P<N.length;P++)Be(N[P]);delete m.g[w],m.h--}}this.F=null},Mt.prototype.K=function(m,w,N,P){return this.i.add(String(m),w,!1,N,P)},Mt.prototype.L=function(m,w,N,P){return this.i.add(String(m),w,!0,N,P)};function Hn(m,w,N,P){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();for(var X=!0,le=0;le<w.length;++le){var be=w[le];if(be&&!be.da&&be.capture==N){var ct=be.listener,Xt=be.ha||be.src;be.fa&&Bt(m.i,be),X=ct.call(Xt,P)!==!1&&X}}return X&&!P.defaultPrevented}function Tn(m,w,N){if(typeof m=="function")N&&(m=I(m,N));else if(m&&typeof m.handleEvent=="function")m=I(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:_.setTimeout(m,w||0)}function $o(m){m.g=Tn(()=>{m.g=null,m.i&&(m.i=!1,$o(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Yl extends Me{constructor(w,N){super(),this.m=w,this.l=N,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(m){Me.call(this),this.h=m,this.g={}}D(jr,Me);var Xs=[];function Is(m){xe(m.g,function(w,N){this.g.hasOwnProperty(N)&&kr(w)},m),m.g={}}jr.prototype.N=function(){jr.aa.N.call(this),Is(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pi=_.JSON.stringify,ba=_.JSON.parse,Ai=class{stringify(m){return _.JSON.stringify(m,void 0)}parse(m){return _.JSON.parse(m,void 0)}};function Ko(){}Ko.prototype.h=null;function Wo(m){return m.h||(m.h=m.i())}function wa(){}var Xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ji(){we.call(this,"d")}D(Ji,we);function Yo(){we.call(this,"c")}D(Yo,we);var es={},Qo=null;function Js(){return Qo=Qo||new Mt}es.La="serverreachability";function Ta(m){we.call(this,es.La,m)}D(Ta,we);function er(m){const w=Js();_t(w,new Ta(w))}es.STAT_EVENT="statevent";function Ea(m,w){we.call(this,es.STAT_EVENT,m),this.stat=w}D(Ea,we);function Dt(m){const w=Js();_t(w,new Ea(w,m))}es.Ma="timingevent";function sn(m,w){we.call(this,es.Ma,m),this.size=w}D(sn,we);function Qt(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){m()},w)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function Gn(m,w,N,P,X,le){m.info(function(){if(m.g)if(le)for(var be="",ct=le.split("&"),Xt=0;Xt<ct.length;Xt++){var ut=ct[Xt].split("=");if(1<ut.length){var bt=ut[0];ut=ut[1];var Ot=bt.split("_");be=2<=Ot.length&&Ot[1]=="type"?be+(bt+"="+ut+"&"):be+(bt+"=redacted&")}}else be=null;else be=le;return"XMLHTTP REQ ("+P+") [attempt "+X+"]: "+w+`
`+N+`
`+be})}function Pe(m,w,N,P,X,le,be){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+X+"]: "+w+`
`+N+`
`+le+" "+be})}function Cs(m,w,N,P){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+tr(m,N)+(P?" "+P:"")})}function Xo(m,w){m.info(function(){return"TIMEOUT: "+w})}gi.prototype.info=function(){};function tr(m,w){if(!m.g)return w;if(!w)return null;try{var N=JSON.parse(w);if(N){for(m=0;m<N.length;m++)if(Array.isArray(N[m])){var P=N[m];if(!(2>P.length)){var X=P[1];if(Array.isArray(X)&&!(1>X.length)){var le=X[0];if(le!="noop"&&le!="stop"&&le!="close")for(var be=1;be<X.length;be++)X[be]=""}}}}return pi(N)}catch{return w}}var Rs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ii={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function jn(){}D(jn,Ko),jn.prototype.g=function(){return new XMLHttpRequest},jn.prototype.i=function(){return{}},Ci=new jn;function En(m,w,N,P){this.j=m,this.i=w,this.l=N,this.R=P||1,this.U=new jr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zt}function Zt(){this.i=null,this.g="",this.h=!1}var Jo={},Na={};function Ri(m,w,N){m.L=1,m.v=si(Lt(w)),m.m=N,m.P=!0,ts(m,null)}function ts(m,w){m.F=Date.now(),Dr(m),m.A=Lt(m.v);var N=m.A,P=m.R;Array.isArray(P)||(P=[String(P)]),nl(N.i,"t",P),m.C=0,N=m.j.J,m.h=new Zt,m.g=nc(m.j,N?w:null,!m.m),0<m.O&&(m.M=new Yl(I(m.Y,m,m.g),m.O)),w=m.U,N=m.g,P=m.ca;var X="readystatechange";Array.isArray(X)||(X&&(Xs[0]=X.toString()),X=Xs);for(var le=0;le<X.length;le++){var be=Ho(N,X[le],P||w.handleEvent,!1,w.h||w);if(!be)break;w.g[be.key]=be}w=m.H?k(m.H):{},m.m?(m.u||(m.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,w)):(m.u="GET",m.g.ea(m.A,m.u,null,w)),er(),Gn(m.i,m.u,m.A,m.l,m.R,m.m)}En.prototype.ca=function(m){m=m.target;const w=this.M;w&&An(m)==3?w.j():this.Y(m)},En.prototype.Y=function(m){try{if(m==this.g)e:{const Ot=An(this.g);var w=this.g.Ba();const Vs=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||il(this.g)))){this.J||Ot!=4||w==7||(w==8||0>=Vs?er(3):er(2)),nr(this);var N=this.g.Z();this.X=N;t:if(Ql(this)){var P=il(this.g);m="";var X=P.length,le=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),ns(this);var be="";break t}this.h.i=new _.TextDecoder}for(w=0;w<X;w++)this.h.h=!0,m+=this.h.i.decode(P[w],{stream:!(le&&w==X-1)});P.length=0,this.h.g+=m,this.C=0,be=this.h.g}else be=this.g.oa();if(this.o=N==200,Pe(this.i,this.u,this.A,this.l,this.R,Ot,N),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,Xt=this.g;if((ct=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(ct)){var ut=ct;break t}}ut=null}if(N=ut)Cs(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ks(this,N);else{this.o=!1,this.s=3,Dt(12),_n(this),ns(this);break e}}if(this.P){N=!0;let kt;for(;!this.J&&this.C<be.length;)if(kt=Mr(this,be),kt==Na){Ot==4&&(this.s=4,Dt(14),N=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Jo){this.s=4,Dt(15),Cs(this.i,this.l,be,"[Invalid Chunk]"),N=!1;break}else Cs(this.i,this.l,kt,null),ks(this,kt);if(Ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||be.length!=0||this.h.h||(this.s=1,Dt(16),N=!1),this.o=this.o&&N,!N)Cs(this.i,this.l,be,"[Invalid Chunked Response]"),_n(this),ns(this);else if(0<be.length&&!this.W){this.W=!0;var bt=this.j;bt.g==this&&bt.ba&&!bt.M&&(bt.j.info("Great, no buffering proxy detected. Bytes received: "+be.length),lr(bt),bt.M=!0,Dt(11))}}else Cs(this.i,this.l,be,null),ks(this,be);Ot==4&&_n(this),this.o&&!this.J&&(Ot==4?rl(this.j,this):(this.o=!1,Dr(this)))}else mu(this.g),N==400&&0<be.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),_n(this),ns(this)}}}catch{}finally{}};function Ql(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Mr(m,w){var N=m.C,P=w.indexOf(`
`,N);return P==-1?Na:(N=Number(w.substring(N,P)),isNaN(N)?Jo:(P+=1,P+N>w.length?Na:(w=w.slice(P,P+N),m.C=P+N,w)))}En.prototype.cancel=function(){this.J=!0,_n(this)};function Dr(m){m.S=Date.now()+m.I,Xl(m,m.I)}function Xl(m,w){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Qt(I(m.ba,m),w)}function nr(m){m.B&&(_.clearTimeout(m.B),m.B=null)}En.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Xo(this.i,this.A),this.L!=2&&(er(),Dt(17)),_n(this),this.s=2,ns(this)):Xl(this,this.S-m)};function ns(m){m.j.G==0||m.J||rl(m.j,m)}function _n(m){nr(m);var w=m.M;w&&typeof w.ma=="function"&&w.ma(),m.M=null,Is(m.U),m.g&&(w=m.g,m.g=null,w.abort(),w.ma())}function ks(m,w){try{var N=m.j;if(N.G!=0&&(N.g==m||st(N.h,m))){if(!m.K&&st(N.h,m)&&N.G==3){try{var P=N.Da.g.parse(w)}catch{P=null}if(Array.isArray(P)&&P.length==3){var X=P;if(X[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<m.F)Ma(N),ka(N);else break e;Pa(N),Dt(18)}}else N.za=X[1],0<N.za-N.T&&37500>X[2]&&N.F&&N.v==0&&!N.C&&(N.C=Qt(I(N.Za,N),6e3));if(1>=ss(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else Os(N,11)}else if((m.K||N.g==m)&&Ma(N),!$(w))for(X=N.Da.g.parse(w),w=0;w<X.length;w++){let ut=X[w];if(N.T=ut[0],ut=ut[1],N.G==2)if(ut[0]=="c"){N.K=ut[1],N.ia=ut[2];const bt=ut[3];bt!=null&&(N.la=bt,N.j.info("VER="+N.la));const Ot=ut[4];Ot!=null&&(N.Aa=Ot,N.j.info("SVER="+N.Aa));const Vs=ut[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(P=1.5*Vs,N.L=P,N.j.info("backChannelRequestTimeoutMs_="+P)),P=N;const kt=m.g;if(kt){const cs=kt.g?kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var le=P.h;le.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(xt(le,le.h),le.h=null))}if(P.D){const us=kt.g?kt.g.getResponseHeader("X-HTTP-Session-Id"):null;us&&(P.ya=us,He(P.I,P.D,us))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-m.F,N.j.info("Handshake RTT: "+N.R+"ms")),P=N;var be=m;if(P.qa=La(P,P.J?P.ia:null,P.W),be.K){un(P.h,be);var ct=be,Xt=P.L;Xt&&(ct.I=Xt),ct.B&&(nr(ct),Dr(ct)),P.g=be}else Li(P);0<N.i.length&&or(N)}else ut[0]!="stop"&&ut[0]!="close"||Os(N,7);else N.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Os(N,7):Ra(N):ut[0]!="noop"&&N.l&&N.l.ta(ut),N.v=0)}}er(4)}catch{}}var ir=class{constructor(m,w){this.g=m,this.map=w}};function is(m){this.l=m||10,_.PerformanceNavigationTiming?(m=_.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ss(m){return m.h?1:m.g?m.g.size:0}function st(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function xt(m,w){m.g?m.g.add(w):m.h=w}function un(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}is.prototype.cancel=function(){if(this.i=rs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function rs(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const N of m.g.values())w=w.concat(N.D);return w}return M(m.i)}function sr(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(y(m)){for(var w=[],N=m.length,P=0;P<N;P++)w.push(m[P]);return w}w=[],N=0;for(P in m)w[N++]=m[P];return w}function rr(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(y(m)||typeof m=="string"){var w=[];m=m.length;for(var N=0;N<m;N++)w.push(N);return w}w=[],N=0;for(const P in m)w[N++]=P;return w}}}function Qe(m,w){if(m.forEach&&typeof m.forEach=="function")m.forEach(w,void 0);else if(y(m)||typeof m=="string")Array.prototype.forEach.call(m,w,void 0);else for(var N=rr(m),P=sr(m),X=P.length,le=0;le<X;le++)w.call(void 0,P[le],N&&N[le],m)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function el(m,w){if(m){m=m.split("&");for(var N=0;N<m.length;N++){var P=m[N].indexOf("="),X=null;if(0<=P){var le=m[N].substring(0,P);X=m[N].substring(P+1)}else le=m[N];w(le,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Ft(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Ft){this.h=m.h,Or(this,m.j),this.o=m.o,this.g=m.g,ki(this,m.s),this.l=m.l;var w=m.i,N=new ji;N.i=w.i,w.g&&(N.g=new Map(w.g),N.h=w.h),Mn(this,N),this.m=m.m}else m&&(w=String(m).match(Et))?(this.h=!1,Or(this,w[1]||"",!0),this.o=Nn(w[2]||""),this.g=Nn(w[3]||"",!0),ki(this,w[4]),this.l=Nn(w[5]||"",!0),Mn(this,w[6]||"",!0),this.m=Nn(w[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}Ft.prototype.toString=function(){var m=[],w=this.j;w&&m.push(Pi(w,Ps,!0),":");var N=this.g;return(N||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Pi(w,Ps,!0),"@"),m.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&m.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&m.push("/"),m.push(Pi(N,N.charAt(0)=="/"?tl:Vr,!0))),(N=this.i.toString())&&m.push("?",N),(N=this.m)&&m.push("#",Pi(N,ar)),m.join("")};function Lt(m){return new Ft(m)}function Or(m,w,N){m.j=N?Nn(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function ki(m,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);m.s=w}else m.s=null}function Mn(m,w,N){w instanceof ji?(m.i=w,ri(m.i,m.h)):(N||(w=Pi(w,Aa)),m.i=new ji(w,m.h))}function He(m,w,N){m.i.set(w,N)}function si(m){return He(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function Nn(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Pi(m,w,N){return typeof m=="string"?(m=encodeURI(m).replace(w,Sa),N&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Sa(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Ps=/[#\/\?@]/g,Vr=/[#\?:]/g,tl=/[#\?]/g,Aa=/[#\?@]/g,ar=/#/g;function ji(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function Dn(m){m.g||(m.g=new Map,m.h=0,m.i&&el(m.i,function(w,N){m.add(decodeURIComponent(w.replace(/\+/g," ")),N)}))}n=ji.prototype,n.add=function(m,w){Dn(this),this.i=null,m=ze(this,m);var N=this.g.get(m);return N||this.g.set(m,N=[]),N.push(w),this.h+=1,this};function as(m,w){Dn(m),w=ze(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Mi(m,w){return Dn(m),w=ze(m,w),m.g.has(w)}n.forEach=function(m,w){Dn(this),this.g.forEach(function(N,P){N.forEach(function(X){m.call(w,X,P,this)},this)},this)},n.na=function(){Dn(this);const m=Array.from(this.g.values()),w=Array.from(this.g.keys()),N=[];for(let P=0;P<w.length;P++){const X=m[P];for(let le=0;le<X.length;le++)N.push(w[P])}return N},n.V=function(m){Dn(this);let w=[];if(typeof m=="string")Mi(this,m)&&(w=w.concat(this.g.get(ze(this,m))));else{m=Array.from(this.g.values());for(let N=0;N<m.length;N++)w=w.concat(m[N])}return w},n.set=function(m,w){return Dn(this),this.i=null,m=ze(this,m),Mi(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=this.V(m),0<m.length?String(m[0]):w):w};function nl(m,w,N){as(m,w),0<N.length&&(m.i=null,m.g.set(ze(m,w),M(N)),m.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(var N=0;N<w.length;N++){var P=w[N];const le=encodeURIComponent(String(P)),be=this.V(P);for(P=0;P<be.length;P++){var X=le;be[P]!==""&&(X+="="+encodeURIComponent(String(be[P]))),m.push(X)}}return this.i=m.join("&")};function ze(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function ri(m,w){w&&!m.j&&(Dn(m),m.i=null,m.g.forEach(function(N,P){var X=P.toLowerCase();P!=X&&(as(this,P),nl(this,X,N))},m)),m.j=w}function mt(m,w){const N=new gi;if(_.Image){const P=new Image;P.onload=F(Zn,N,"TestLoadImage: loaded",!0,w,P),P.onerror=F(Zn,N,"TestLoadImage: error",!1,w,P),P.onabort=F(Zn,N,"TestLoadImage: abort",!1,w,P),P.ontimeout=F(Zn,N,"TestLoadImage: timeout",!1,w,P),_.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else w(!1)}function _i(m,w){const N=new gi,P=new AbortController,X=setTimeout(()=>{P.abort(),Zn(N,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:P.signal}).then(le=>{clearTimeout(X),le.ok?Zn(N,"TestPingServer: ok",!0,w):Zn(N,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),Zn(N,"TestPingServer: error",!1,w)})}function Zn(m,w,N,P,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),P(N)}catch{}}function js(){this.g=new Ai}function vi(m,w,N){const P=N||"";try{Qe(m,function(X,le){let be=X;b(X)&&(be=pi(X)),w.push(P+le+"="+encodeURIComponent(be))})}catch(X){throw w.push(P+"type="+encodeURIComponent("_badmap")),X}}function $n(m){this.l=m.Ub||null,this.j=m.eb||!1}D($n,Ko),$n.prototype.g=function(){return new Di(this.l,this.j)},$n.prototype.i=function(m){return function(){return m}}({});function Di(m,w){Mt.call(this),this.D=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Di,Mt),n=Di.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=w,this.readyState=1,Sn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(w.body=m),(this.D||_).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,At(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ms(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ms(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?At(this):Sn(this),this.readyState==3&&Ms(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,At(this))},n.Qa=function(m){this.g&&(this.response=m,At(this))},n.ga=function(){this.g&&At(this)};function At(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Sn(m)}n.setRequestHeader=function(m,w){this.u.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var N=w.next();!N.done;)N=N.value,m.push(N[0]+": "+N[1]),N=w.next();return m.join(`\r
`)};function Sn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ia(m){let w="";return xe(m,function(N,P){w+=P,w+=":",w+=N,w+=`\r
`}),w}function rn(m,w,N){e:{for(P in N){var P=!1;break e}P=!0}P||(N=Ia(N),typeof m=="string"?N!=null&&encodeURIComponent(String(N)):He(m,w,N))}function vt(m){Mt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(vt,Mt);var Ur=/^https?$/i,Ds=["POST","PUT"];n=vt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,w,N,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?Wo(this.o):Wo(Ci),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(le){Jl(this,le);return}if(m=N||"",N=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var X in P)N.set(X,P[X]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const le of P.keys())N.set(le,P.get(le));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(N.keys()).find(le=>le.toLowerCase()=="content-type"),X=_.FormData&&m instanceof _.FormData,!(0<=Array.prototype.indexOf.call(Ds,w,void 0))||P||X||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,be]of N)this.g.setRequestHeader(le,be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vn(this),this.u=!0,this.g.send(m),this.u=!1}catch(le){Jl(this,le)}};function Jl(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.m=5,zr(m),os(m)}function zr(m){m.A||(m.A=!0,_t(m,"complete"),_t(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,_t(this,"complete"),_t(this,"abort"),os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),os(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?tt(this):this.bb())},n.bb=function(){tt(this)};function tt(m){if(m.h&&typeof f<"u"&&(!m.v[1]||An(m)!=4||m.Z()!=2)){if(m.u&&An(m)==4)Tn(m.Ea,0,m);else if(_t(m,"readystatechange"),An(m)==4){m.h=!1;try{const be=m.Z();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var N;if(!(N=w)){var P;if(P=be===0){var X=String(m.D).match(Et)[1]||null;!X&&_.self&&_.self.location&&(X=_.self.location.protocol.slice(0,-1)),P=!Ur.test(X?X.toLowerCase():"")}N=P}if(N)_t(m,"complete"),_t(m,"success");else{m.m=6;try{var le=2<An(m)?m.g.statusText:""}catch{le=""}m.l=le+" ["+m.Z()+"]",zr(m)}}finally{os(m)}}}}function os(m,w){if(m.g){vn(m);const N=m.g,P=m.v[0]?()=>{}:null;m.g=null,m.v=null,w||_t(m,"ready");try{N.onreadystatechange=P}catch{}}}function vn(m){m.I&&(_.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function An(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),ba(w)}};function il(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function mu(m){const w={};m=(m.g&&2<=An(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if($(m[P]))continue;var N=q(m[P]);const X=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const le=w[X]||[];w[X]=le,le.push(N)}B(w,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(m,w,N){return N&&N.internalChannelParams&&N.internalChannelParams[m]||w}function Ca(m){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ls("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ls("baseRetryDelayMs",5e3,m),this.cb=Ls("retryDelaySeedMs",1e4,m),this.Wa=Ls("forwardChannelMaxRetries",2,m),this.wa=Ls("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new is(m&&m.concurrentRequestLimit),this.Da=new js,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ca.prototype,n.la=8,n.G=1,n.connect=function(m,w,N,P){Dt(0),this.W=m,this.H=w||{},N&&P!==void 0&&(this.H.OSID=N,this.H.OAID=P),this.F=this.X,this.I=La(this,null,this.W),or(this)};function Ra(m){if(ec(m),m.G==3){var w=m.U++,N=Lt(m.I);if(He(N,"SID",m.K),He(N,"RID",w),He(N,"TYPE","terminate"),Br(m,N),w=new En(m,m.j,w),w.L=2,w.v=si(Lt(N)),N=!1,_.navigator&&_.navigator.sendBeacon)try{N=_.navigator.sendBeacon(w.v.toString(),"")}catch{}!N&&_.Image&&(new Image().src=w.v,N=!0),N||(w.g=nc(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Dr(w)}tc(m)}function ka(m){m.g&&(lr(m),m.g.cancel(),m.g=null)}function ec(m){ka(m),m.u&&(_.clearTimeout(m.u),m.u=null),Ma(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&_.clearTimeout(m.s),m.s=null)}function or(m){if(!Lr(m.h)&&!m.s){m.s=!0;var w=m.Ga;Y||ve(),se||(Y(),se=!0),ce.add(w,m),m.B=0}}function pu(m,w){return ss(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=w.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Qt(I(m.Ga,m,w),Da(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const X=new En(this,this.j,m);let le=this.o;if(this.S&&(le?(le=k(le),U(le,this.S)):le=this.S),this.m!==null||this.O||(X.H=le,le=null),this.P)e:{for(var w=0,N=0;N<this.i.length;N++){t:{var P=this.i[N];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(w+=P,4096<w){w=N;break e}if(w===4096||N===this.i.length-1){w=N+1;break e}}w=1e3}else w=1e3;w=sl(this,X,w),N=Lt(this.I),He(N,"RID",m),He(N,"CVER",22),this.D&&He(N,"X-HTTP-Session-Id",this.D),Br(this,N),le&&(this.O?w="headers="+encodeURIComponent(String(Ia(le)))+"&"+w:this.m&&rn(N,this.m,le)),xt(this.h,X),this.Ua&&He(N,"TYPE","init"),this.P?(He(N,"$req",w),He(N,"SID","null"),X.T=!0,Ri(X,N,null)):Ri(X,N,w),this.G=2}}else this.G==3&&(m?Kn(this,m):this.i.length==0||Lr(this.h)||Kn(this))};function Kn(m,w){var N;w?N=w.l:N=m.U++;const P=Lt(m.I);He(P,"SID",m.K),He(P,"RID",N),He(P,"AID",m.T),Br(m,P),m.m&&m.o&&rn(P,m.m,m.o),N=new En(m,m.j,N,m.B+1),m.m===null&&(N.H=m.o),w&&(m.i=w.D.concat(m.i)),w=sl(m,N,1e3),N.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),xt(m.h,N),Ri(N,P,w)}function Br(m,w){m.H&&xe(m.H,function(N,P){He(w,P,N)}),m.l&&Qe({},function(N,P){He(w,P,N)})}function sl(m,w,N){N=Math.min(m.i.length,N);var P=m.l?I(m.l.Na,m.l,m):null;e:{var X=m.i;let le=-1;for(;;){const be=["count="+N];le==-1?0<N?(le=X[0].g,be.push("ofs="+le)):le=0:be.push("ofs="+le);let ct=!0;for(let Xt=0;Xt<N;Xt++){let ut=X[Xt].g;const bt=X[Xt].map;if(ut-=le,0>ut)le=Math.max(0,X[Xt].g-100),ct=!1;else try{vi(bt,be,"req"+ut+"_")}catch{P&&P(bt)}}if(ct){P=be.join("&");break e}}}return m=m.i.splice(0,N),w.D=m,P}function Li(m){if(!m.g&&!m.u){m.Y=1;var w=m.Fa;Y||ve(),se||(Y(),se=!0),ce.add(w,m),m.v=0}}function Pa(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Qt(I(m.Fa,m),Da(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Qt(I(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),ka(this),ja(this))};function lr(m){m.A!=null&&(_.clearTimeout(m.A),m.A=null)}function ja(m){m.g=new En(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var w=Lt(m.qa);He(w,"RID","rpc"),He(w,"SID",m.K),He(w,"AID",m.T),He(w,"CI",m.F?"0":"1"),!m.F&&m.ja&&He(w,"TO",m.ja),He(w,"TYPE","xmlhttp"),Br(m,w),m.m&&m.o&&rn(w,m.m,m.o),m.L&&(m.g.I=m.L);var N=m.g;m=m.ia,N.L=1,N.v=si(Lt(w)),N.m=null,N.P=!0,ts(N,m)}n.Za=function(){this.C!=null&&(this.C=null,ka(this),Pa(this),Dt(19))};function Ma(m){m.C!=null&&(_.clearTimeout(m.C),m.C=null)}function rl(m,w){var N=null;if(m.g==w){Ma(m),lr(m),m.g=null;var P=2}else if(st(m.h,w))N=w.D,un(m.h,w),P=1;else return;if(m.G!=0){if(w.o)if(P==1){N=w.m?w.m.length:0,w=Date.now()-w.F;var X=m.B;P=Js(),_t(P,new sn(P,N)),or(m)}else Li(m);else if(X=w.s,X==3||X==0&&0<w.X||!(P==1&&pu(m,w)||P==2&&Pa(m)))switch(N&&0<N.length&&(w=m.h,w.i=w.i.concat(N)),X){case 1:Os(m,5);break;case 4:Os(m,10);break;case 3:Os(m,6);break;default:Os(m,2)}}}function Da(m,w){let N=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(N*=2),N*w}function Os(m,w){if(m.j.info("Error code "+w),w==2){var N=I(m.fb,m),P=m.Xa;const X=!P;P=new Ft(P||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Or(P,"https"),si(P),X?mt(P.toString(),N):_i(P.toString(),N)}else Dt(2);m.G=0,m.l&&m.l.sa(w),tc(m),ec(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function tc(m){if(m.G=0,m.ka=[],m.l){const w=rs(m.h);(w.length!=0||m.i.length!=0)&&(z(m.ka,w),z(m.ka,m.i),m.h.i.length=0,M(m.i),m.i.length=0),m.l.ra()}}function La(m,w,N){var P=N instanceof Ft?Lt(N):new Ft(N);if(P.g!="")w&&(P.g=w+"."+P.g),ki(P,P.s);else{var X=_.location;P=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;var le=new Ft(null);P&&Or(le,P),w&&(le.g=w),X&&ki(le,X),N&&(le.l=N),P=le}return N=m.D,w=m.ya,N&&w&&He(P,N,w),He(P,"VER",m.la),Br(m,P),P}function nc(m,w,N){if(w&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Ca&&!m.pa?new vt(new $n({eb:N})):new vt(m.pa),w.Ha(m.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function al(){}n=al.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fr(){}Fr.prototype.g=function(m,w){return new hn(m,w)};function hn(m,w){Mt.call(this),this.g=new Ca(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(m?m["X-WebChannel-Client-Profile"]=w.va:m={"X-WebChannel-Client-Profile":w.va}),this.g.S=m,(m=w&&w.Sb)&&!$(m)&&(this.g.m=m),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!$(w)&&(this.g.D=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Wn(this)}D(hn,Mt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ra(this.g)},hn.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var N={};N.__data__=m,m=N}else this.u&&(N={},N.__data__=pi(m),m=N);w.i.push(new ir(w.Ya++,m)),w.G==3&&or(w)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ra(this.g),delete this.g,hn.aa.N.call(this)};function ls(m){Ji.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const N in w){m=N;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}D(ls,Ji);function ic(){Yo.call(this),this.status=1}D(ic,Yo);function Wn(m){this.g=m}D(Wn,al),Wn.prototype.ua=function(){_t(this.g,"a")},Wn.prototype.ta=function(m){_t(this.g,new ls(m))},Wn.prototype.sa=function(m){_t(this.g,new ic)},Wn.prototype.ra=function(){_t(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,yN=function(){return new Fr},vN=function(){return Js()},_N=es,w_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,Cf=Rs,Ii.COMPLETE="complete",gN=Ii,wa.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,uh=wa,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,pN=vt}).apply(typeof ff<"u"?ff:typeof self<"u"?self:typeof window<"u"?window:{});const h0="@firebase/firestore",d0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new Kh("@firebase/firestore");function Mc(){return Ul.logLevel}function Se(n,...e){if(Ul.logLevel<=lt.DEBUG){const t=e.map(Tv);Ul.debug(`Firestore (${au}): ${n}`,...t)}}function fa(n,...e){if(Ul.logLevel<=lt.ERROR){const t=e.map(Tv);Ul.error(`Firestore (${au}): ${n}`,...t)}}function Qc(n,...e){if(Ul.logLevel<=lt.WARN){const t=e.map(Tv);Ul.warn(`Firestore (${au}): ${n}`,...t)}}function Tv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xN(n,s,t)}function xN(n,e,t){let s=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw fa(s),new Error(s)}function wt(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||xN(e,o,s)}function et(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Wj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xn.UNAUTHENTICATED))}shutdown(){}}class Yj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qj{constructor(e){this.t=e,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let c=new Io;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Io,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},_=y=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>_(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?_(y):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Io)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wt(typeof s.accessToken=="string",31837,{l:s}),new bN(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Xn(e)}}class Xj{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jj{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Xj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const s=c=>{c.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,Se("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const o=c=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new f0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new f0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=tM(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<t&&(s+=e.charAt(o[c]%62))}return s}}function ht(n,e){return n<e?-1:n>e?1:0}function T_(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),c=e.charAt(s);if(o!==c)return Hg(o)===Hg(c)?ht(o,c):Hg(o)?1:-1}return ht(n.length,e.length)}const nM=55296,iM=57343;function Hg(n){const e=n.charCodeAt(0);return e>=nM&&e<=iM}function Xc(n,e,t){return n.length===e.length&&n.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="__name__";class _r{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ze(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ze(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return _r.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _r?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const c=_r.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return ht(e.length,t.length)}static compareSegments(e,t){const s=_r.isNumericId(e),o=_r.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?_r.extractNumericId(e).compare(_r.extractNumericId(t)):T_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class zt extends _r{construct(e,t,s){return new zt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new zt(t)}static emptyPath(){return new zt([])}}const sM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends _r{construct(e,t,s){return new zn(e,t,s)}static isValidIdentifier(e){return sM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m0}static keyField(){return new zn([m0])}static fromServerFormat(e){const t=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;o<e.length;){const _=e[o];if(_==="\\"){if(o+1===e.length)throw new Ne(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new Ne(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else _==="`"?(f=!f,o++):_!=="."||f?(s+=_,o++):(c(),o++)}if(c(),f)throw new Ne(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(zt.fromString(e))}static fromName(e){return new Oe(zt.fromString(e).popFirst(5))}static empty(){return new Oe(zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new zt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(n,e,t){if(!t)throw new Ne(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rM(n,e,t,s){if(e===!0&&s===!0)throw new Ne(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function p0(n){if(!Oe.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g0(n){if(Oe.isDocumentKey(n))throw new Ne(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ze(12329,{type:typeof n})}function xs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Em(n);throw new Ne(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(n,e){const t={typeString:n};return e&&(t.value=e),t}function ed(n,e){if(!TN(n))throw new Ne(fe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const f=n[s];if(o&&typeof f!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){t=`Expected '${s}' field to equal '${c.value}'`;break}}if(t)throw new Ne(fe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,v0=1e6;class ft{static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*v0);return new ft(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_0)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v0}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ed(e,ft._jsonSchema))return new ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ft._jsonSchemaVersion="firestore/timestamp/1.0",ft._jsonSchema={type:gn("string",ft._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new ft(0,0))}static max(){return new Xe(new ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=-1;function aM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Xe.fromTimestamp(s===1e9?new ft(t+1,0):new ft(t,s));return new ko(o,Oe.empty(),e)}function oM(n){return new ko(n.readTime,n.key,Ph)}class ko{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ko(Xe.min(),Oe.empty(),Ph)}static max(){return new ko(Xe.max(),Oe.empty(),Ph)}}function lM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Oe.comparator(n.documentKey,e.documentKey),t!==0?t:ht(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==cM)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ze(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new pe((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof pe?t:pe.resolve(t)}catch(t){return pe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):pe.reject(t)}static resolve(e){return new pe((t,s)=>{t(e)})}static reject(e){return new pe((t,s)=>{s(e)})}static waitFor(e){return new pe((t,s)=>{let o=0,c=0,f=!1;e.forEach(_=>{++o,_.next(()=>{++c,f&&c===o&&t()},y=>s(y))}),f=!0,c===o&&t()})}static or(e){let t=pe.resolve(!1);for(const s of e)t=t.next(o=>o?pe.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,c)=>{s.push(t.call(this,o,c))}),this.waitFor(s)}static mapArray(e,t){return new pe((s,o)=>{const c=e.length,f=new Array(c);let _=0;for(let y=0;y<c;y++){const b=y;t(e[b]).next(E=>{f[b]=E,++_,_===c&&s(f)},E=>o(E))}})}static doWhile(e,t){return new pe((s,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):s()};c()})}}function hM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function lu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-1;function Sm(n){return n==null}function nm(n){return n===0&&1/n==-1/0}function dM(n){return typeof n=="number"&&Number.isInteger(n)&&!nm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="";function fM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y0(e)),e=mM(n.get(t),e);return y0(e)}function mM(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const c=n.charAt(o);switch(c){case"\0":t+="";break;case EN:t+="";break;default:t+=c}}return t}function y0(n){return n+EN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t){this.comparator=e,this.root=t||Un.EMPTY}insert(e,t){return new Yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Un.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mf(this.root,e,this.comparator,!1)}getReverseIterator(){return new mf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mf(this.root,e,this.comparator,!0)}}class mf{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?s(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Un{constructor(e,t,s,o,c){this.key=e,this.value=t,this.color=s??Un.RED,this.left=o??Un.EMPTY,this.right=c??Un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,c){return new Un(e??this.key,t??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,s),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ze(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ze(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ze(27949);return e+(this.isRed()?0:1)}}Un.EMPTY=null,Un.RED=!0,Un.BLACK=!1;Un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ze(57766)}get value(){throw Ze(16141)}get color(){throw Ze(16727)}get left(){throw Ze(29726)}get right(){throw Ze(36894)}copy(e,t,s,o,c){return this}insert(e,t,s){return new Un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new $i([])}unionWith(e){let t=new bn(zn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xc(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new SN("Invalid base64 string: "+c):c}}(e);return new Fn(t)}static fromUint8Array(e){const t=function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c}(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const pM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=pM.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ln(n.seconds),nanos:ln(n.nanos)}}function ln(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jo(n){return typeof n=="string"?Fn.fromBase64String(n):Fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="server_timestamp",IN="__type__",CN="__previous_value__",RN="__local_write_time__";function Sv(n){return(n?.mapValue?.fields||{})[IN]?.stringValue===AN}function Am(n){const e=n.mapValue.fields[CN];return Sv(e)?Am(e):e}function jh(n){const e=Po(n.mapValue.fields[RN].timestampValue);return new ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,t,s,o,c,f,_,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.longPollingOptions=y,this.useFetchStreams=b,this.isUsingEmulator=E}}const im="(default)";class Mh{constructor(e,t){this.projectId=e,this.database=t||im}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===im}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="__type__",_M="__max__",pf={mapValue:{}},PN="__vector__",sm="value";function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sv(n)?4:yM(n)?9007199254740991:vM(n)?10:11:Ze(28295,{value:n})}function Sr(n,e){if(n===e)return!0;const t=Mo(n);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jh(n).isEqual(jh(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Po(o.timestampValue),_=Po(c.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,c){return jo(o.bytesValue).isEqual(jo(c.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,c){return ln(o.geoPointValue.latitude)===ln(c.geoPointValue.latitude)&&ln(o.geoPointValue.longitude)===ln(c.geoPointValue.longitude)}(n,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return ln(o.integerValue)===ln(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=ln(o.doubleValue),_=ln(c.doubleValue);return f===_?nm(f)===nm(_):isNaN(f)&&isNaN(_)}return!1}(n,e);case 9:return Xc(n.arrayValue.values||[],e.arrayValue.values||[],Sr);case 10:case 11:return function(o,c){const f=o.mapValue.fields||{},_=c.mapValue.fields||{};if(x0(f)!==x0(_))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(_[y]===void 0||!Sr(f[y],_[y])))return!1;return!0}(n,e);default:return Ze(52216,{left:n})}}function Dh(n,e){return(n.values||[]).find(t=>Sr(t,e))!==void 0}function Jc(n,e){if(n===e)return 0;const t=Mo(n),s=Mo(e);if(t!==s)return ht(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(c,f){const _=ln(c.integerValue||c.doubleValue),y=ln(f.integerValue||f.doubleValue);return _<y?-1:_>y?1:_===y?0:isNaN(_)?isNaN(y)?0:-1:1}(n,e);case 3:return w0(n.timestampValue,e.timestampValue);case 4:return w0(jh(n),jh(e));case 5:return T_(n.stringValue,e.stringValue);case 6:return function(c,f){const _=jo(c),y=jo(f);return _.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(c,f){const _=c.split("/"),y=f.split("/");for(let b=0;b<_.length&&b<y.length;b++){const E=ht(_[b],y[b]);if(E!==0)return E}return ht(_.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(c,f){const _=ht(ln(c.latitude),ln(f.latitude));return _!==0?_:ht(ln(c.longitude),ln(f.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return T0(n.arrayValue,e.arrayValue);case 10:return function(c,f){const _=c.fields||{},y=f.fields||{},b=_[sm]?.arrayValue,E=y[sm]?.arrayValue,A=ht(b?.values?.length||0,E?.values?.length||0);return A!==0?A:T0(b,E)}(n.mapValue,e.mapValue);case 11:return function(c,f){if(c===pf.mapValue&&f===pf.mapValue)return 0;if(c===pf.mapValue)return 1;if(f===pf.mapValue)return-1;const _=c.fields||{},y=Object.keys(_),b=f.fields||{},E=Object.keys(b);y.sort(),E.sort();for(let A=0;A<y.length&&A<E.length;++A){const I=T_(y[A],E[A]);if(I!==0)return I;const F=Jc(_[y[A]],b[E[A]]);if(F!==0)return F}return ht(y.length,E.length)}(n.mapValue,e.mapValue);default:throw Ze(23264,{he:t})}}function w0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ht(n,e);const t=Po(n),s=Po(e),o=ht(t.seconds,s.seconds);return o!==0?o:ht(t.nanos,s.nanos)}function T0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const c=Jc(t[o],s[o]);if(c)return c}return ht(t.length,s.length)}function eu(n){return E_(n)}function E_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Po(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return jo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Oe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",o=!0;for(const c of t.values||[])o?o=!1:s+=",",s+=E_(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${E_(t.fields[f])}`;return o+"}"}(n.mapValue):Ze(61005,{value:n})}function Rf(n){switch(Mo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Am(n);return e?16+Rf(e):16;case 5:return 2*n.stringValue.length;case 6:return jo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,c)=>o+Rf(c),0)}(n.arrayValue);case 10:case 11:return function(s){let o=0;return Fo(s.fields,(c,f)=>{o+=c.length+Rf(f)}),o}(n.mapValue);default:throw Ze(13486,{value:n})}}function E0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function N_(n){return!!n&&"integerValue"in n}function Av(n){return!!n&&"arrayValue"in n}function N0(n){return!!n&&"nullValue"in n}function S0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function kf(n){return!!n&&"mapValue"in n}function vM(n){return(n?.mapValue?.fields||{})[kN]?.stringValue===PN}function _h(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fo(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=_h(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_h(n.arrayValue.values[t]);return e}return{...n}}function yM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_h(t)}setAll(e){let t=zn.emptyPath(),s={},o=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=_.popLast()}f?s[_.lastSegment()]=_h(f):o.push(_.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,s,o)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];kf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Fo(t,(o,c)=>e[o]=c);for(const o of s)delete e[o]}clone(){return new Ei(_h(this.value))}}function jN(n){const e=[];return Fo(n.fields,(t,s)=>{const o=new zn([t]);if(kf(s)){const c=jN(s.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)}),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,s,o,c,f,_){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=_}static newInvalidDocument(e){return new ei(e,0,Xe.min(),Xe.min(),Xe.min(),Ei.empty(),0)}static newFoundDocument(e,t,s,o){return new ei(e,1,t,Xe.min(),s,o,0)}static newNoDocument(e,t){return new ei(e,2,t,Xe.min(),Xe.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new ei(e,3,t,Xe.min(),Xe.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ei&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ei(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this.position=e,this.inclusive=t}}function A0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const c=e[o],f=n.position[o];if(c.field.isKeyField()?s=Oe.comparator(Oe.fromName(f.referenceValue),t.key):s=Jc(f,t.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function I0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class pn extends MN{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new wM(e,t,s):t==="array-contains"?new NM(e,s):t==="in"?new SM(e,s):t==="not-in"?new AM(e,s):t==="array-contains-any"?new IM(e,s):new pn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new TM(e,s):new EM(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jc(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(Jc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ze(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends MN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ws(e,t)}matches(e){return DN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DN(n){return n.op==="and"}function LN(n){return bM(n)&&DN(n)}function bM(n){for(const e of n.filters)if(e instanceof Ws)return!1;return!0}function S_(n){if(n instanceof pn)return n.field.canonicalString()+n.op.toString()+eu(n.value);if(LN(n))return n.filters.map(e=>S_(e)).join(",");{const e=n.filters.map(t=>S_(t)).join(",");return`${n.op}(${e})`}}function ON(n,e){return n instanceof pn?function(s,o){return o instanceof pn&&s.op===o.op&&s.field.isEqual(o.field)&&Sr(s.value,o.value)}(n,e):n instanceof Ws?function(s,o){return o instanceof Ws&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((c,f,_)=>c&&ON(f,o.filters[_]),!0):!1}(n,e):void Ze(19439)}function VN(n){return n instanceof pn?function(t){return`${t.field.canonicalString()} ${t.op} ${eu(t.value)}`}(n):n instanceof Ws?function(t){return t.op.toString()+" {"+t.getFilters().map(VN).join(" ,")+"}"}(n):"Filter"}class wM extends pn{constructor(e,t,s){super(e,t,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const t=Oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class TM extends pn{constructor(e,t){super(e,"in",t),this.keys=UN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class EM extends pn{constructor(e,t){super(e,"not-in",t),this.keys=UN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UN(n,e){return(e.arrayValue?.values||[]).map(t=>Oe.fromName(t.referenceValue))}class NM extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Av(t)&&Dh(t.arrayValue,this.value)}}class SM extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dh(this.value.arrayValue,t)}}class AM extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dh(this.value.arrayValue,t)}}class IM extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Av(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Dh(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t=null,s=[],o=[],c=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=_,this.Te=null}}function C0(n,e=null,t=[],s=[],o=null,c=null,f=null){return new CM(n,e,t,s,o,c,f)}function Iv(n){const e=et(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>S_(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),Sm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>eu(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>eu(s)).join(",")),e.Te=t}return e.Te}function Cv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ON(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!I0(n.startAt,e.startAt)&&I0(n.endAt,e.endAt)}function A_(n){return Oe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t=null,s=[],o=[],c=null,f="F",_=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=_,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RM(n,e,t,s,o,c,f,_){return new cu(n,e,t,s,o,c,f,_)}function Im(n){return new cu(n)}function R0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zN(n){return n.collectionGroup!==null}function vh(n){const e=et(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let _=new bn(zn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(b=>{b.isInequality()&&(_=_.add(b.field))})}),_})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Lh(c,s))}),t.has(zn.keyField().canonicalString())||e.Ie.push(new Lh(zn.keyField(),s))}return e.Ie}function br(n){const e=et(n);return e.Ee||(e.Ee=kM(e,vh(n))),e.Ee}function kM(n,e){if(n.limitType==="F")return C0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Lh(o.field,c)});const t=n.endAt?new rm(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new rm(n.startAt.position,n.startAt.inclusive):null;return C0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function I_(n,e){const t=n.filters.concat([e]);return new cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function C_(n,e,t){return new cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cm(n,e){return Cv(br(n),br(e))&&n.limitType===e.limitType}function BN(n){return`${Iv(br(n))}|lt:${n.limitType}`}function Dc(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>VN(o)).join(", ")}]`),Sm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>eu(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>eu(o)).join(",")),`Target(${s})`}(br(n))}; limitType=${n.limitType})`}function Rm(n,e){return e.isFoundDocument()&&function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Oe.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(n,e)&&function(s,o){for(const c of vh(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(n,e)&&function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0}(n,e)&&function(s,o){return!(s.startAt&&!function(f,_,y){const b=A0(f,_,y);return f.inclusive?b<=0:b<0}(s.startAt,vh(s),o)||s.endAt&&!function(f,_,y){const b=A0(f,_,y);return f.inclusive?b>=0:b>0}(s.endAt,vh(s),o))}(n,e)}function PM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FN(n){return(e,t)=>{let s=!1;for(const o of vh(n)){const c=jM(o,e,t);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function jM(n,e,t){const s=n.field.isKeyField()?Oe.comparator(e.key,t.key):function(c,f,_){const y=f.data.field(c),b=_.data.field(c);return y!==null&&b!==null?Jc(y,b):Ze(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ze(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,(t,s)=>{for(const[o,c]of s)e(o,c)})}isEmpty(){return NN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new Yt(Oe.comparator);function ma(){return MM}const qN=new Yt(Oe.comparator);function hh(...n){let e=qN;for(const t of n)e=e.insert(t.key,t);return e}function HN(n){let e=qN;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function kl(){return yh()}function GN(){return yh()}function yh(){return new Gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const DM=new Yt(Oe.comparator),LM=new bn(Oe.comparator);function dt(...n){let e=LM;for(const t of n)e=e.add(t);return e}const OM=new bn(ht);function VM(){return OM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nm(e)?"-0":e}}function ZN(n){return{integerValue:""+n}}function $N(n,e){return dM(e)?ZN(e):Rv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(){this._=void 0}}function UM(n,e,t){return n instanceof am?function(o,c){const f={fields:{[IN]:{stringValue:AN},[RN]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Sv(c)&&(c=Am(c)),c&&(f.fields[CN]=c),{mapValue:f}}(t,e):n instanceof Oh?WN(n,e):n instanceof Vh?YN(n,e):function(o,c){const f=KN(o,c),_=k0(f)+k0(o.Ae);return N_(f)&&N_(o.Ae)?ZN(_):Rv(o.serializer,_)}(n,e)}function zM(n,e,t){return n instanceof Oh?WN(n,e):n instanceof Vh?YN(n,e):t}function KN(n,e){return n instanceof Uh?function(s){return N_(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class am extends km{}class Oh extends km{constructor(e){super(),this.elements=e}}function WN(n,e){const t=QN(e);for(const s of n.elements)t.some(o=>Sr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Vh extends km{constructor(e){super(),this.elements=e}}function YN(n,e){let t=QN(e);for(const s of n.elements)t=t.filter(o=>!Sr(o,s));return{arrayValue:{values:t}}}class Uh extends km{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function k0(n){return ln(n.integerValue||n.doubleValue)}function QN(n){return Av(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.field=e,this.transform=t}}function FM(n,e){return n.field.isEqual(e.field)&&function(s,o){return s instanceof Oh&&o instanceof Oh||s instanceof Vh&&o instanceof Vh?Xc(s.elements,o.elements,Sr):s instanceof Uh&&o instanceof Uh?Sr(s.Ae,o.Ae):s instanceof am&&o instanceof am}(n.transform,e.transform)}class qM{constructor(e,t){this.version=e,this.transformResults=t}}class bs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bs}static exists(e){return new bs(void 0,e)}static updateTime(e){return new bs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pm{}function XN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new kv(n.key,bs.none()):new td(n.key,n.data,bs.none());{const t=n.data,s=Ei.empty();let o=new bn(zn.comparator);for(let c of e.fields)if(!o.has(c)){let f=t.field(c);f===null&&c.length>1&&(c=c.popLast(),f=t.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new qo(n.key,s,new $i(o.toArray()),bs.none())}}function HM(n,e,t){n instanceof td?function(o,c,f){const _=o.value.clone(),y=j0(o.fieldTransforms,c,f.transformResults);_.setAll(y),c.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(n,e,t):n instanceof qo?function(o,c,f){if(!Pf(o.precondition,c))return void c.convertToUnknownDocument(f.version);const _=j0(o.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(JN(o)),y.setAll(_),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(n,e,t):function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,t)}function xh(n,e,t,s){return n instanceof td?function(c,f,_,y){if(!Pf(c.precondition,f))return _;const b=c.value.clone(),E=M0(c.fieldTransforms,y,f);return b.setAll(E),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null}(n,e,t,s):n instanceof qo?function(c,f,_,y){if(!Pf(c.precondition,f))return _;const b=M0(c.fieldTransforms,y,f),E=f.data;return E.setAll(JN(c)),E.setAll(b),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),_===null?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(n,e,t,s):function(c,f,_){return Pf(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_}(n,e,t)}function GM(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),c=KN(s.transform,o||null);c!=null&&(t===null&&(t=Ei.empty()),t.set(s.field,c))}return t||null}function P0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Xc(s,o,(c,f)=>FM(c,f))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class td extends Pm{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qo extends Pm{constructor(e,t,s,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function JN(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function j0(n,e,t){const s=new Map;wt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const c=n[o],f=c.transform,_=e.data.field(c.field);s.set(c.field,zM(f,_,t[o]))}return s}function M0(n,e,t){const s=new Map;for(const o of n){const c=o.transform,f=t.data.field(o.field);s.set(o.field,UM(c,f,e))}return s}class kv extends Pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM extends Pm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&HM(c,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=xh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=xh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=GN();return this.mutations.forEach(o=>{const c=e.get(o.key),f=c.overlayedDocument;let _=this.applyToLocalView(f,c.mutatedFields);_=t.has(o.key)?null:_;const y=XN(f,_);y!==null&&s.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Xe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dt())}isEqual(e){return this.batchId===e.batchId&&Xc(this.mutations,e.mutations,(t,s)=>P0(t,s))&&Xc(this.baseMutations,e.baseMutations,(t,s)=>P0(t,s))}}class Pv{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){wt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return DM}();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new Pv(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,gt;function YM(n){switch(n){case fe.OK:return Ze(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return Ze(15467,{code:n})}}function eS(n){if(n===void 0)return fa("GRPC error has no .code"),fe.UNKNOWN;switch(n){case mn.OK:return fe.OK;case mn.CANCELLED:return fe.CANCELLED;case mn.UNKNOWN:return fe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return fe.INTERNAL;case mn.UNAVAILABLE:return fe.UNAVAILABLE;case mn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case mn.NOT_FOUND:return fe.NOT_FOUND;case mn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case mn.ABORTED:return fe.ABORTED;case mn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case mn.DATA_LOSS:return fe.DATA_LOSS;default:return Ze(39323,{code:n})}}(gt=mn||(mn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Ao([4294967295,4294967295],0);function D0(n){const e=QM().encode(n),t=new mN;return t.update(e),new Uint8Array(t.digest())}function L0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ao([t,s],0),new Ao([o,c],0)]}class jv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new dh(`Invalid padding: ${t}`);if(s<0)throw new dh(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new dh(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new dh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ao.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ao.fromNumber(s)));return o.compare(XM)===1&&(o=new Ao([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=D0(e),[s,o]=L0(t);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new jv(c,o,t);return s.forEach(_=>f.insert(_)),f}insert(e){if(this.ge===0)return;const t=D0(e),[s,o]=L0(t);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.Se(f)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class dh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,s,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jm(Xe.min(),o,new Yt(ht),ma(),dt())}}class nd{constructor(e,t,s,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new nd(s,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class tS{constructor(e,t){this.targetId=e,this.Ce=t}}class nS{constructor(e,t,s=Fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class O0{constructor(){this.ve=0,this.Fe=V0(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),t=dt(),s=dt();return this.Fe.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ze(38017,{changeType:c})}}),new nd(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=V0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JM{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.Je=gf(),this.He=gf(),this.Ye=new Yt(ht)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ze(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,o)=>{this.rt(o)&&t(o)})}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const c=o.target;if(A_(c))if(s===0){const f=new Oe(c.path);this.et(t,f,ei.newNoDocument(f,Xe.min()))}else wt(s===1,20013,{expectedCount:s});else{const f=this._t(t);if(f!==s){const _=this.ut(e),y=_?this.ct(_,e,f):1;if(y!==0){this.it(t);const b=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=t;let f,_;try{f=jo(s).toUint8Array()}catch(y){if(y instanceof SN)return Qc("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{_=new jv(f,o,c)}catch(y){return Qc(y instanceof dh?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return _.ge===0?null:_}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach(c=>{const f=this.Ge.ht(),_=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(_)||(this.et(t,c,null),o++)}),o}Tt(e){const t=new Map;this.ze.forEach((c,f)=>{const _=this.ot(f);if(_){if(c.current&&A_(_.target)){const y=new Oe(_.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,ei.newNoDocument(y,e))}c.Be&&(t.set(f,c.ke()),c.qe())}});let s=dt();this.He.forEach((c,f)=>{let _=!0;f.forEachWhile(y=>{const b=this.ot(y);return!b||b.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)}),_&&(s=s.add(c))}),this.je.forEach((c,f)=>f.setReadTime(e));const o=new jm(e,t,this.Ye,this.je,s);return this.je=ma(),this.Je=gf(),this.He=gf(),this.Ye=new Yt(ht),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new O0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bn(ht),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bn(ht),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new O0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gf(){return new Yt(Oe.comparator)}function V0(){return new Yt(Oe.comparator)}const eD={asc:"ASCENDING",desc:"DESCENDING"},tD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nD={and:"AND",or:"OR"};class iD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function R_(n,e){return n.useProto3Json||Sm(e)?e:{value:e}}function om(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sD(n,e){return om(n,e.toTimestamp())}function wr(n){return wt(!!n,49232),Xe.fromTimestamp(function(t){const s=Po(t);return new ft(s.seconds,s.nanos)}(n))}function Mv(n,e){return k_(n,e).canonicalString()}function k_(n,e){const t=function(o){return new zt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function sS(n){const e=zt.fromString(n);return wt(cS(e),10190,{key:e.toString()}),e}function P_(n,e){return Mv(n.databaseId,e.path)}function Gg(n,e){const t=sS(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Oe(aS(t))}function rS(n,e){return Mv(n.databaseId,e)}function rD(n){const e=sS(n);return e.length===4?zt.emptyPath():aS(e)}function j_(n){return new zt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aS(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function U0(n,e,t){return{name:P_(n,e),fields:t.value.mapValue.fields}}function aD(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Ze(39313,{state:b})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(b,E){return b.useProto3Json?(wt(E===void 0||typeof E=="string",58123),Fn.fromBase64String(E||"")):(wt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Fn.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(b){const E=b.code===void 0?fe.UNKNOWN:eS(b.code);return new Ne(E,b.message||"")}(f);t=new nS(s,o,c,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Gg(n,s.document.name),c=wr(s.document.updateTime),f=s.document.createTime?wr(s.document.createTime):Xe.min(),_=new Ei({mapValue:{fields:s.document.fields}}),y=ei.newFoundDocument(o,c,f,_),b=s.targetIds||[],E=s.removedTargetIds||[];t=new jf(b,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Gg(n,s.document),c=s.readTime?wr(s.readTime):Xe.min(),f=ei.newNoDocument(o,c),_=s.removedTargetIds||[];t=new jf([],_,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Gg(n,s.document),c=s.removedTargetIds||[];t=new jf([],c,o,null)}else{if(!("filter"in e))return Ze(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new WM(o,c),_=s.targetId;t=new tS(_,f)}}return t}function oD(n,e){let t;if(e instanceof td)t={update:U0(n,e.key,e.value)};else if(e instanceof kv)t={delete:P_(n,e.key)};else if(e instanceof qo)t={update:U0(n,e.key,e.data),updateMask:gD(e.fieldMask)};else{if(!(e instanceof ZM))return Ze(16599,{Vt:e.type});t={verify:P_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const _=f.transform;if(_ instanceof am)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Oh)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Vh)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Uh)return{fieldPath:f.field.canonicalString(),increment:_.Ae};throw Ze(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:sD(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ze(27497)}(n,e.precondition)),t}function lD(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map(t=>function(o,c){let f=o.updateTime?wr(o.updateTime):wr(c);return f.isEqual(Xe.min())&&(f=wr(c)),new qM(f,o.transformResults||[])}(t,e))):[]}function cD(n,e){return{documents:[rS(n,e.path)]}}function uD(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=rS(n,o);const c=function(b){if(b.length!==0)return lS(Ws.create(b,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const f=function(b){if(b.length!==0)return b.map(E=>function(I){return{field:Lc(I.field),direction:fD(I.dir)}}(E))}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=R_(n,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=function(b){return{before:b.inclusive,values:b.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(b){return{before:!b.inclusive,values:b.position}}(e.endAt)),{ft:t,parent:o}}function hD(n){let e=rD(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){wt(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let c=[];t.where&&(c=function(A){const I=oS(A);return I instanceof Ws&&LN(I)?I.getFilters():[I]}(t.where));let f=[];t.orderBy&&(f=function(A){return A.map(I=>function(D){return new Lh(Oc(D.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(I))}(t.orderBy));let _=null;t.limit&&(_=function(A){let I;return I=typeof A=="object"?A.value:A,Sm(I)?null:I}(t.limit));let y=null;t.startAt&&(y=function(A){const I=!!A.before,F=A.values||[];return new rm(F,I)}(t.startAt));let b=null;return t.endAt&&(b=function(A){const I=!A.before,F=A.values||[];return new rm(F,I)}(t.endAt)),RM(e,o,f,c,_,"F",y,b)}function dD(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ze(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Oc(t.unaryFilter.field);return pn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Oc(t.unaryFilter.field);return pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Oc(t.unaryFilter.field);return pn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Oc(t.unaryFilter.field);return pn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ze(61313);default:return Ze(60726)}}(n):n.fieldFilter!==void 0?function(t){return pn.create(Oc(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ze(58110);default:return Ze(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ws.create(t.compositeFilter.filters.map(s=>oS(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ze(1026)}}(t.compositeFilter.op))}(n):Ze(30097,{filter:n})}function fD(n){return eD[n]}function mD(n){return tD[n]}function pD(n){return nD[n]}function Lc(n){return{fieldPath:n.canonicalString()}}function Oc(n){return zn.fromServerFormat(n.fieldPath)}function lS(n){return n instanceof pn?function(t){if(t.op==="=="){if(S0(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NAN"}};if(N0(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(S0(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NAN"}};if(N0(t.value))return{unaryFilter:{field:Lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lc(t.field),op:mD(t.op),value:t.value}}}(n):n instanceof Ws?function(t){const s=t.getFilters().map(o=>lS(o));return s.length===1?s[0]:{compositeFilter:{op:pD(t.op),filters:s}}}(n):Ze(54877,{filter:n})}function gD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t,s,o,c=Xe.min(),f=Xe.min(),_=Fn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_,this.expectedCount=y}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.yt=e}}function vD(n){const e=hD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?C_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.Cn=new xD}addToCollectionParentIndex(e,t){return this.Cn.add(t),pe.resolve()}getCollectionParents(e,t){return pe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return pe.resolve()}deleteFieldIndex(e,t){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,t){return pe.resolve()}getDocumentsMatchingTarget(e,t){return pe.resolve(null)}getIndexType(e,t){return pe.resolve(0)}getFieldIndexes(e,t){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,t){return pe.resolve(ko.min())}getMinOffsetFromCollectionGroup(e,t){return pe.resolve(ko.min())}updateCollectionGroup(e,t,s){return pe.resolve()}updateIndexEntries(e,t){return pe.resolve()}}class xD{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new bn(zt.comparator),c=!o.has(s);return this.index[t]=o.add(s),c}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new bn(zt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},uS=41943040;class Ti{static withCacheSize(e){return new Ti(e,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.DEFAULT_COLLECTION_PERCENTILE=10,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ti.DEFAULT=new Ti(uS,Ti.DEFAULT_COLLECTION_PERCENTILE,Ti.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ti.DISABLED=new Ti(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tu(0)}static cr(){return new tu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="LruGarbageCollector",bD=1048576;function F0([n,e],[t,s]){const o=ht(n,t);return o===0?ht(e,s):o}class wD{constructor(e){this.Ir=e,this.buffer=new bn(F0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();F0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class TD{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Se(B0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){lu(t)?Se(B0,"Ignoring IndexedDB error during garbage collection: ",t):await ou(t)}await this.Vr(3e5)})}}class ED{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return pe.resolve(Nm.ce);const s=new wD(t);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(z0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,c,f,_,y,b;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,_=Date.now(),this.removeTargets(e,s,t))).next(A=>(c=A,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(b=Date.now(),Mc()<=lt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(_-f)+`ms
	Removed ${c} targets in `+(y-_)+`ms
	Removed ${A} documents in `+(b-y)+`ms
Total Duration: ${b-E}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function ND(n,e){return new ED(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this.changes=new Gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ei.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?pe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&xh(s.mutation,o,$i.empty(),ft.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,dt()).next(()=>s))}getLocalViewOfDocuments(e,t,s=dt()){const o=kl();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(c=>{let f=hh();return c.forEach((_,y)=>{f=f.insert(_,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=kl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,dt()))}populateOverlays(e,t,s){const o=[];return s.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((f,_)=>{t.set(f,_)})})}computeViews(e,t,s,o){let c=ma();const f=yh(),_=function(){return yh()}();return t.forEach((y,b)=>{const E=s.get(b.key);o.has(b.key)&&(E===void 0||E.mutation instanceof qo)?c=c.insert(b.key,b):E!==void 0?(f.set(b.key,E.mutation.getFieldMask()),xh(E.mutation,b,E.mutation.getFieldMask(),ft.now())):f.set(b.key,$i.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((b,E)=>f.set(b,E)),t.forEach((b,E)=>_.set(b,new AD(E,f.get(b)??null))),_))}recalculateAndSaveOverlays(e,t){const s=yh();let o=new Yt((f,_)=>f-_),c=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const _ of f)_.keys().forEach(y=>{const b=t.get(y);if(b===null)return;let E=s.get(y)||$i.empty();E=_.applyToLocalView(b,E),s.set(y,E);const A=(o.get(_.batchId)||dt()).add(y);o=o.insert(_.batchId,A)})}).next(()=>{const f=[],_=o.getReverseIterator();for(;_.hasNext();){const y=_.getNext(),b=y.key,E=y.value,A=GN();E.forEach(I=>{if(!c.has(I)){const F=XN(t.get(I),s.get(I));F!==null&&A.set(I,F),c=c.add(I)}}),f.push(this.documentOverlayCache.saveOverlays(e,b,A))}return pe.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(f){return Oe.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-c.size):pe.resolve(kl());let _=Ph,y=c;return f.next(b=>pe.forEach(b,(E,A)=>(_<A.largestBatchId&&(_=A.largestBatchId),c.get(E)?pe.resolve():this.remoteDocumentCache.getEntry(e,E).next(I=>{y=y.insert(E,I)}))).next(()=>this.populateOverlays(e,b,c)).next(()=>this.computeViews(e,y,b,dt())).next(E=>({batchId:_,changes:HN(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Oe(t)).next(s=>{let o=hh();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const c=t.collectionGroup;let f=hh();return this.indexManager.getCollectionParents(e,c).next(_=>pe.forEach(_,y=>{const b=function(A,I){return new cu(I,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next(E=>{E.forEach((A,I)=>{f=f.insert(A,I)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,c,o))).next(f=>{c.forEach((y,b)=>{const E=b.getKey();f.get(E)===null&&(f=f.insert(E,ei.newInvalidDocument(E)))});let _=hh();return f.forEach((y,b)=>{const E=c.get(y);E!==void 0&&xh(E.mutation,b,$i.empty(),ft.now()),Rm(t,b)&&(_=_.insert(y,b))}),_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return pe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:wr(o.createTime)}}(t)),pe.resolve()}getNamedQuery(e,t){return pe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(o){return{name:o.name,query:vD(o.bundledQuery),readTime:wr(o.readTime)}}(t)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.overlays=new Yt(Oe.comparator),this.qr=new Map}getOverlay(e,t){return pe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=kl();return pe.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&s.set(o,c)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,c)=>{this.St(e,t,c)}),pe.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(s)),pe.resolve()}getOverlaysForCollection(e,t,s){const o=kl(),c=t.length+1,f=new Oe(t.child("")),_=this.overlays.getIteratorFrom(f);for(;_.hasNext();){const y=_.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===c&&y.largestBatchId>s&&o.set(y.getKey(),y)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let c=new Yt((b,E)=>b-E);const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>s){let E=c.get(b.largestBatchId);E===null&&(E=kl(),c=c.insert(b.largestBatchId,E)),E.set(b.getKey(),b)}}const _=kl(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,E)=>_.set(b,E)),!(_.size()>=o)););return pe.resolve(_)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new KM(t,s));let c=this.qr.get(t);c===void 0&&(c=dt(),this.qr.set(t,c)),this.qr.set(t,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.Qr=new bn(Pn.$r),this.Ur=new bn(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Pn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new Oe(new zt([])),s=new Pn(t,e),o=new Pn(t,e+1),c=[];return this.Ur.forEachInRange([s,o],f=>{this.Gr(f),c.push(f.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Oe(new zt([])),s=new Pn(t,e),o=new Pn(t,e+1);let c=dt();return this.Ur.forEachInRange([s,o],f=>{c=c.add(f.key)}),c}containsKey(e){const t=new Pn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Oe.comparator(e.key,t.key)||ht(e.Yr,t.Yr)}static Kr(e,t){return ht(e.Yr,t.Yr)||Oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bn(Pn.$r)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new $M(c,t,s,o);this.mutationQueue.push(f);for(const _ of o)this.Zr=this.Zr.add(new Pn(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return pe.resolve(f)}lookupMutationBatch(e,t){return pe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),c=o<0?0:o;return pe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Nv:this.tr-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Pn(t,0),o=new Pn(t,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],f=>{const _=this.Xr(f.Yr);c.push(_)}),pe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new bn(ht);return t.forEach(o=>{const c=new Pn(o,0),f=new Pn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],_=>{s=s.add(_.Yr)})}),pe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let c=s;Oe.isDocumentKey(c)||(c=c.child(""));const f=new Pn(new Oe(c),0);let _=new bn(ht);return this.Zr.forEachWhile(y=>{const b=y.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(_=_.add(y.Yr)),!0)},f),pe.resolve(this.ti(_))}ti(e){const t=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){wt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return pe.forEach(t.mutations,o=>{const c=new Pn(o.key,t.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new Pn(t,0),o=this.Zr.firstAfterOrEqual(s);return pe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.ri=e,this.docs=function(){return new Yt(Oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),c=o?o.size:0,f=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return pe.resolve(s?s.document.mutableCopy():ei.newInvalidDocument(t))}getEntries(e,t){let s=ma();return t.forEach(o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():ei.newInvalidDocument(o))}),pe.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let c=ma();const f=t.path,_=new Oe(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(_);for(;y.hasNext();){const{key:b,value:{document:E}}=y.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||lM(oM(E),s)<=0||(o.has(E.key)||Rm(t,E))&&(c=c.insert(E.key,E.mutableCopy()))}return pe.resolve(c)}getAllFromCollectionGroup(e,t,s,o){Ze(9500)}ii(e,t){return pe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new MD(this)}getSize(e){return pe.resolve(this.size)}}class MD extends SD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),pe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.persistence=e,this.si=new Gl(t=>Iv(t),Cv),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Dv,this.targetCount=0,this.ai=tu.ur()}forEachTarget(e,t){return this.si.forEach((s,o)=>t(o)),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),pe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,pe.resolve()}updateTargetData(e,t){return this.Pr(t),pe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,t,s){let o=0;const c=[];return this.si.forEach((f,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),o++)}),pe.waitFor(c).next(()=>o)}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return pe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),pe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(f=>{c.push(o.markPotentiallyOrphaned(e,f))}),pe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),pe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return pe.resolve(s)}containsKey(e,t){return pe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Nm(0),this.li=!1,this.li=!0,this.hi=new kD,this.referenceDelegate=e(this),this.Pi=new DD(this),this.indexManager=new yD,this.remoteDocumentCache=function(o){return new jD(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new _D(t),this.Ii=new CD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new PD(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Se("MemoryPersistence","Starting transaction:",e);const o=new LD(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(c=>this.referenceDelegate.di(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ai(e,t){return pe.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class LD extends uM{constructor(e){super(),this.currentSequenceNumber=e}}class Lv{constructor(e){this.persistence=e,this.Ri=new Dv,this.Vi=null}static mi(e){return new Lv(e)}get fi(){if(this.Vi)return this.Vi;throw Ze(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),pe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),pe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.fi.add(c.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.fi,s=>{const o=Oe.fromPath(s);return this.gi(e,o).next(c=>{c||t.removeEntry(o,Xe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return pe.or([()=>pe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class lm{constructor(e,t){this.persistence=e,this.pi=new Gl(s=>fM(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=ND(this,t)}static mi(e,t){return new lm(e,t)}Ei(){}di(e){return pe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return pe.forEach(this.pi,(s,o)=>this.br(e,s,o).next(c=>c?pe.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,t).next(_=>{_||(s++,c.removeEntry(f,Xe.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),pe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rf(e.data.value)),t}br(e,t,s){return pe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return pe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=dt(),o=dt();for(const c of t.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ov(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return ok()?8:hM(ni())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const c={result:null};return this.ys(e,t).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ws(e,t,o,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new OD;return this.Ss(e,t,f).next(_=>{if(c.result=_,this.Vs)return this.bs(e,t,f,_.size)})}).next(()=>c.result)}bs(e,t,s,o){return s.documentReadCount<this.fs?(Mc()<=lt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",Dc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),pe.resolve()):(Mc()<=lt.DEBUG&&Se("QueryEngine","Query:",Dc(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Mc()<=lt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",Dc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):pe.resolve())}ys(e,t){if(R0(t))return pe.resolve(null);let s=br(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=C_(t,null,"F"),s=br(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=dt(...c);return this.ps.getDocuments(e,f).next(_=>this.indexManager.getMinOffset(e,s).next(y=>{const b=this.Ds(t,_);return this.Cs(t,b,f,y.readTime)?this.ys(e,C_(t,null,"F")):this.vs(e,b,t,y)}))})))}ws(e,t,s,o){return R0(t)||o.isEqual(Xe.min())?pe.resolve(null):this.ps.getDocuments(e,s).next(c=>{const f=this.Ds(t,c);return this.Cs(t,f,s,o)?pe.resolve(null):(Mc()<=lt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Dc(t)),this.vs(e,f,t,aM(o,Ph)).next(_=>_))})}Ds(e,t){let s=new bn(FN(e));return t.forEach((o,c)=>{Rm(e,c)&&(s=s.add(c))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,s){return Mc()<=lt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",Dc(t)),this.ps.getDocumentsMatchingQuery(e,t,ko.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(c=>(t.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="LocalStore",UD=3e8;class zD{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Yt(ht),this.xs=new Gl(c=>Iv(c),Cv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ID(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function BD(n,e,t,s){return new zD(n,e,t,s)}async function dS(n,e){const t=et(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(c=>(o=c,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],_=[];let y=dt();for(const b of o){f.push(b.batchId);for(const E of b.mutations)y=y.add(E.key)}for(const b of c){_.push(b.batchId);for(const E of b.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(s,y).next(b=>({Ls:b,removedBatchIds:f,addedBatchIds:_}))})})}function FD(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),c=t.Ns.newChangeBuffer({trackRemovals:!0});return function(_,y,b,E){const A=b.batch,I=A.keys();let F=pe.resolve();return I.forEach(D=>{F=F.next(()=>E.getEntry(y,D)).next(M=>{const z=b.docVersions.get(D);wt(z!==null,48541),M.version.compareTo(z)<0&&(A.applyToRemoteDocument(M,b),M.isValidDocument()&&(M.setReadTime(b.commitVersion),E.addEntry(M)))})}),F.next(()=>_.mutationQueue.removeMutationBatch(y,A))}(t,s,e,c).next(()=>c.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let y=dt();for(let b=0;b<_.mutationResults.length;++b)_.mutationResults[b].transformResults.length>0&&(y=y.add(_.batch.mutations[b].key));return y}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function fS(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function qD(n,e){const t=et(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const _=[];e.targetChanges.forEach((E,A)=>{const I=o.get(A);if(!I)return;_.push(t.Pi.removeMatchingKeys(c,E.removedDocuments,A).next(()=>t.Pi.addMatchingKeys(c,E.addedDocuments,A)));let F=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?F=F.withResumeToken(Fn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,s)),o=o.insert(A,F),function(M,z,W){return M.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=UD?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(I,F,E)&&_.push(t.Pi.updateTargetData(c,F))});let y=ma(),b=dt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,E))}),_.push(HD(c,f,e.documentUpdates).next(E=>{y=E.ks,b=E.qs})),!s.isEqual(Xe.min())){const E=t.Pi.getLastRemoteSnapshotVersion(c).next(A=>t.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s));_.push(E)}return pe.waitFor(_).next(()=>f.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,y,b)).next(()=>y)}).then(c=>(t.Ms=o,c))}function HD(n,e,t){let s=dt(),o=dt();return t.forEach(c=>s=s.add(c)),e.getEntries(n,s).next(c=>{let f=ma();return t.forEach((_,y)=>{const b=c.get(_);y.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(_)),y.isNoDocument()&&y.version.isEqual(Xe.min())?(e.removeEntry(_,y.readTime),f=f.insert(_,y)):!b.isValidDocument()||y.version.compareTo(b.version)>0||y.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(y),f=f.insert(_,y)):Se(Vv,"Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",y.version)}),{ks:f,qs:o}})}function GD(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Nv),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ZD(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Pi.getTargetData(s,e).next(c=>c?(o=c,pe.resolve(o)):t.Pi.allocateTargetId(s).next(f=>(o=new wo(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function M_(n,e,t){const s=et(n),o=s.Ms.get(e),c=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!lu(f))throw f;Se(Vv,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function q0(n,e,t){const s=et(n);let o=Xe.min(),c=dt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,b,E){const A=et(y),I=A.xs.get(E);return I!==void 0?pe.resolve(A.Ms.get(I)):A.Pi.getTargetData(b,E)}(s,f,br(e)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,_.targetId).next(y=>{c=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,e,t?o:Xe.min(),t?c:dt())).next(_=>($D(s,PM(e),_),{documents:_,Qs:c})))}function $D(n,e,t){let s=n.Os.get(e)||Xe.min();t.forEach((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),n.Os.set(e,s)}class H0{constructor(){this.activeTargetIds=VM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KD{constructor(){this.Mo=new H0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new H0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="ConnectivityMonitor";class Z0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Se(G0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Se(G0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f=null;function D_(){return _f===null?_f=function(){return 268435456+Math.round(2147483648*Math.random())}():_f++,"0x"+_f.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="RestConnection",YD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===im?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,c){const f=D_(),_=this.zo(e,t.toUriEncodedString());Se(Zg,`Sending RPC '${e}' ${f}:`,_,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,c);const{host:b}=new URL(_),E=zo(b);return this.Jo(e,_,y,s,E).then(A=>(Se(Zg,`Received RPC '${e}' ${f}: `,A),A),A=>{throw Qc(Zg,`RPC '${e}' ${f} failed with error: `,A,"url: ",_,"request:",s),A})}Ho(e,t,s,o,c,f){return this.Go(e,t,s,o,c)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),s&&s.headers.forEach((o,c)=>e[c]=o)}zo(e,t){const s=YD[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class JD extends QD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,c){const f=D_();return new Promise((_,y)=>{const b=new pN;b.setWithCredentials(!0),b.listenOnce(gN.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Cf.NO_ERROR:const A=b.getResponseJson();Se(Qn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),_(A);break;case Cf.TIMEOUT:Se(Qn,`RPC '${e}' ${f} timed out`),y(new Ne(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Cf.HTTP_ERROR:const I=b.getStatus();if(Se(Qn,`RPC '${e}' ${f} failed with status:`,I,"response text:",b.getResponseText()),I>0){let F=b.getResponseJson();Array.isArray(F)&&(F=F[0]);const D=F?.error;if(D&&D.status&&D.message){const M=function(W){const $=W.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf($)>=0?$:fe.UNKNOWN}(D.status);y(new Ne(M,D.message))}else y(new Ne(fe.UNKNOWN,"Server responded with status "+b.getStatus()))}else y(new Ne(fe.UNAVAILABLE,"Connection failed."));break;default:Ze(9055,{l_:e,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Se(Qn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);Se(Qn,`RPC '${e}' ${f} sending request:`,o),b.send(t,"POST",E,s,15)})}T_(e,t,s){const o=D_(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=yN(),_=vN(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(y.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const E=c.join("");Se(Qn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const A=f.createWebChannel(E,y);this.I_(A);let I=!1,F=!1;const D=new XD({Yo:z=>{F?Se(Qn,`Not sending because RPC '${e}' stream ${o} is closed:`,z):(I||(Se(Qn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),I=!0),Se(Qn,`RPC '${e}' stream ${o} sending:`,z),A.send(z))},Zo:()=>A.close()}),M=(z,W,$)=>{z.listen(W,te=>{try{$(te)}catch(_e){setTimeout(()=>{throw _e},0)}})};return M(A,uh.EventType.OPEN,()=>{F||(Se(Qn,`RPC '${e}' stream ${o} transport opened.`),D.o_())}),M(A,uh.EventType.CLOSE,()=>{F||(F=!0,Se(Qn,`RPC '${e}' stream ${o} transport closed`),D.a_(),this.E_(A))}),M(A,uh.EventType.ERROR,z=>{F||(F=!0,Qc(Qn,`RPC '${e}' stream ${o} transport errored. Name:`,z.name,"Message:",z.message),D.a_(new Ne(fe.UNAVAILABLE,"The operation could not be completed")))}),M(A,uh.EventType.MESSAGE,z=>{if(!F){const W=z.data[0];wt(!!W,16349);const $=W,te=$?.error||$[0]?.error;if(te){Se(Qn,`RPC '${e}' stream ${o} received error:`,te);const _e=te.status;let ge=function(k){const j=mn[k];if(j!==void 0)return eS(j)}(_e),xe=te.message;ge===void 0&&(ge=fe.INTERNAL,xe="Unknown error status: "+_e+" with message "+te.message),F=!0,D.a_(new Ne(ge,xe)),A.close()}else Se(Qn,`RPC '${e}' stream ${o} received:`,W),D.u_(W)}}),M(_,_N.STAT_EVENT,z=>{z.stat===w_.PROXY?Se(Qn,`RPC '${e}' stream ${o} detected buffering proxy`):z.stat===w_.NOPROXY&&Se(Qn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function $g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n){return new iD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="PersistentStream";class pS{constructor(e,t,s,o,c,f,_,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(fa(t.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===t&&this.G_(s,o)},s=>{e(()=>{const o=new Ne(fe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Se($0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Se($0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eL extends pS{constructor(e,t,s,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,f),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=aD(this.serializer,e),s=function(c){if(!("targetChange"in c))return Xe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Xe.min():f.readTime?wr(f.readTime):Xe.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=j_(this.serializer),t.addTarget=function(c,f){let _;const y=f.target;if(_=A_(y)?{documents:cD(c,y)}:{query:uD(c,y).ft},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=iS(c,f.resumeToken);const b=R_(c,f.expectedCount);b!==null&&(_.expectedCount=b)}else if(f.snapshotVersion.compareTo(Xe.min())>0){_.readTime=om(c,f.snapshotVersion.toTimestamp());const b=R_(c,f.expectedCount);b!==null&&(_.expectedCount=b)}return _}(this.serializer,e);const s=dD(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=j_(this.serializer),t.removeTarget=e,this.q_(t)}}class tL extends pS{constructor(e,t,s,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=lD(e.writeResults,e.commitTime),s=wr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=j_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>oD(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{}class iL extends nL{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Go(e,k_(t,s),o,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(fe.UNKNOWN,c.toString())})}Ho(e,t,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.Ho(e,k_(t,s),o,f,_,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ne(fe.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class sL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fa(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="RemoteStore";class rL{constructor(e,t,s,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{Zl(this)&&(Se(zl,"Restarting streams for network reachability change."),await async function(y){const b=et(y);b.Ea.add(4),await id(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Dm(b)}(this))})}),this.Ra=new sL(s,o)}}async function Dm(n){if(Zl(n))for(const e of n.da)await e(!0)}async function id(n){for(const e of n.da)await e(!1)}function gS(n,e){const t=et(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fv(t)?Bv(t):uu(t).O_()&&zv(t,e))}function Uv(n,e){const t=et(n),s=uu(t);t.Ia.delete(e),s.O_()&&_S(t,e),t.Ia.size===0&&(s.O_()?s.L_():Zl(t)&&t.Ra.set("Unknown"))}function zv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}uu(n).Y_(e)}function _S(n,e){n.Va.Ue(e),uu(n).Z_(e)}function Bv(n){n.Va=new JM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),uu(n).start(),n.Ra.ua()}function Fv(n){return Zl(n)&&!uu(n).x_()&&n.Ia.size>0}function Zl(n){return et(n).Ea.size===0}function vS(n){n.Va=void 0}async function aL(n){n.Ra.set("Online")}async function oL(n){n.Ia.forEach((e,t)=>{zv(n,e)})}async function lL(n,e){vS(n),Fv(n)?(n.Ra.ha(e),Bv(n)):n.Ra.set("Unknown")}async function cL(n,e,t){if(n.Ra.set("Online"),e instanceof nS&&e.state===2&&e.cause)try{await async function(o,c){const f=c.cause;for(const _ of c.targetIds)o.Ia.has(_)&&(await o.remoteSyncer.rejectListen(_,f),o.Ia.delete(_),o.Va.removeTarget(_))}(n,e)}catch(s){Se(zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await cm(n,s)}else if(e instanceof jf?n.Va.Ze(e):e instanceof tS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Xe.min()))try{const s=await fS(n.localStore);t.compareTo(s)>=0&&await function(c,f){const _=c.Va.Tt(f);return _.targetChanges.forEach((y,b)=>{if(y.resumeToken.approximateByteSize()>0){const E=c.Ia.get(b);E&&c.Ia.set(b,E.withResumeToken(y.resumeToken,f))}}),_.targetMismatches.forEach((y,b)=>{const E=c.Ia.get(y);if(!E)return;c.Ia.set(y,E.withResumeToken(Fn.EMPTY_BYTE_STRING,E.snapshotVersion)),_S(c,y);const A=new wo(E.target,y,b,E.sequenceNumber);zv(c,A)}),c.remoteSyncer.applyRemoteEvent(_)}(n,t)}catch(s){Se(zl,"Failed to raise snapshot:",s),await cm(n,s)}}async function cm(n,e,t){if(!lu(e))throw e;n.Ea.add(1),await id(n),n.Ra.set("Offline"),t||(t=()=>fS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Se(zl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Dm(n)})}function yS(n,e){return e().catch(t=>cm(n,t,e))}async function Lm(n){const e=et(n),t=Do(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Nv;for(;uL(e);)try{const o=await GD(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,hL(e,o)}catch(o){await cm(e,o)}xS(e)&&bS(e)}function uL(n){return Zl(n)&&n.Ta.length<10}function hL(n,e){n.Ta.push(e);const t=Do(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xS(n){return Zl(n)&&!Do(n).x_()&&n.Ta.length>0}function bS(n){Do(n).start()}async function dL(n){Do(n).ra()}async function fL(n){const e=Do(n);for(const t of n.Ta)e.ea(t.mutations)}async function mL(n,e,t){const s=n.Ta.shift(),o=Pv.from(s,e,t);await yS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Lm(n)}async function pL(n,e){e&&Do(n).X_&&await async function(s,o){if(function(f){return YM(f)&&f!==fe.ABORTED}(o.code)){const c=s.Ta.shift();Do(s).B_(),await yS(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o)),await Lm(s)}}(n,e),xS(n)&&bS(n)}async function K0(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),Se(zl,"RemoteStore received new credentials");const s=Zl(t);t.Ea.add(3),await id(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dm(t)}async function gL(n,e){const t=et(n);e?(t.Ea.delete(2),await Dm(t)):e||(t.Ea.add(2),await id(t),t.Ra.set("Unknown"))}function uu(n){return n.ma||(n.ma=function(t,s,o){const c=et(t);return c.sa(),new eL(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(n.datastore,n.asyncQueue,{Xo:aL.bind(null,n),t_:oL.bind(null,n),r_:lL.bind(null,n),H_:cL.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Fv(n)?Bv(n):n.Ra.set("Unknown")):(await n.ma.stop(),vS(n))})),n.ma}function Do(n){return n.fa||(n.fa=function(t,s,o){const c=et(t);return c.sa(),new tL(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:dL.bind(null,n),r_:pL.bind(null,n),ta:fL.bind(null,n),na:mL.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Lm(n)):(await n.fa.stop(),n.Ta.length>0&&(Se(zl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t,s,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Io,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,c){const f=Date.now()+s,_=new qv(e,t,f,o,c);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hv(n,e){if(fa("AsyncQueue",`${e}: ${n}`),lu(n))return new Ne(fe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{static emptySet(e){return new Hc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Oe.comparator(t.key,s.key):(t,s)=>Oe.comparator(t.key,s.key),this.keyedMap=hh(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Hc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new Yt(Oe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ze(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class nu{constructor(e,t,s,o,c,f,_,y,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=y,this.hasCachedResults=b}static fromInitialDocuments(e,t,s,o,c){const f=[];return t.forEach(_=>{f.push({type:0,doc:_})}),new nu(e,t,Hc.emptySet(t),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vL{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=et(t),c=o.queries;o.queries=Y0(),c.forEach((f,_)=>{for(const y of _.Sa)y.onError(s)})})(this,new Ne(fe.ABORTED,"Firestore shutting down"))}}function Y0(){return new Gl(n=>BN(n),Cm)}async function wS(n,e){const t=et(n);let s=3;const o=e.query;let c=t.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new _L,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await t.onListen(o,!0);break;case 1:c.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(f){const _=Hv(f,`Initialization of query '${Dc(e.query)}' failed`);return void e.onError(_)}t.queries.set(o,c),c.Sa.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Gv(t)}async function TS(n,e){const t=et(n),s=e.query;let o=3;const c=t.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function yL(n,e){const t=et(n);let s=!1;for(const o of e){const c=o.query,f=t.queries.get(c);if(f){for(const _ of f.Sa)_.Fa(o)&&(s=!0);f.wa=o}}s&&Gv(t)}function xL(n,e,t){const s=et(n),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);s.queries.delete(e)}function Gv(n){n.Ca.forEach(e=>{e.next()})}var L_,Q0;(Q0=L_||(L_={})).Ma="default",Q0.Cache="cache";class ES{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new nu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==L_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.key=e}}class SS{constructor(e){this.key=e}}class bL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=FN(e),this.tu=new Hc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new W0,o=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,f=o,_=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const I=o.get(E),F=Rm(this.query,A)?A:null,D=!!I&&this.mutatedKeys.has(I.key),M=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let z=!1;I&&F?I.data.isEqual(F.data)?D!==M&&(s.track({type:3,doc:F}),z=!0):this.su(I,F)||(s.track({type:2,doc:F}),z=!0,(y&&this.eu(F,y)>0||b&&this.eu(F,b)<0)&&(_=!0)):!I&&F?(s.track({type:0,doc:F}),z=!0):I&&!F&&(s.track({type:1,doc:I}),z=!0,(y||b)&&(_=!0)),z&&(F?(f=f.add(F),c=M?c.add(E):c.delete(E)):(f=f.delete(E),c=c.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),c=c.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:_,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((E,A)=>function(F,D){const M=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ze(20277,{Rt:z})}};return M(F)-M(D)}(E.type,A.type)||this.eu(E.doc,A.doc)),this.ou(s),o=o??!1;const _=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,b=y!==this.Za;return this.Za=y,f.length!==0||b?{snapshot:new nu(this.query,e.tu,c,f,e.mutatedKeys,y===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new SS(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new NS(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=dt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Zv="SyncEngine";class wL{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class TL{constructor(e){this.key=e,this.hu=!1}}class EL{constructor(e,t,s,o,c,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Gl(_=>BN(_),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new Yt(Oe.comparator),this.Au=new Map,this.Ru=new Dv,this.Vu={},this.mu=new Map,this.fu=tu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NL(n,e,t=!0){const s=PS(n);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await AS(s,e,t,!0),o}async function SL(n,e){const t=PS(n);await AS(t,e,!0,!1)}async function AS(n,e,t,s){const o=await ZD(n.localStore,br(e)),c=o.targetId,f=n.sharedClientState.addLocalQueryTarget(c,t);let _;return s&&(_=await AL(n,e,c,f==="current",o.resumeToken)),n.isPrimaryClient&&t&&gS(n.remoteStore,o),_}async function AL(n,e,t,s,o){n.pu=(A,I,F)=>async function(M,z,W,$){let te=z.view.ru(W);te.Cs&&(te=await q0(M.localStore,z.query,!1).then(({documents:B})=>z.view.ru(B,te)));const _e=$&&$.targetChanges.get(z.targetId),ge=$&&$.targetMismatches.get(z.targetId)!=null,xe=z.view.applyChanges(te,M.isPrimaryClient,_e,ge);return J0(M,z.targetId,xe.au),xe.snapshot}(n,A,I,F);const c=await q0(n.localStore,e,!0),f=new bL(e,c.Qs),_=f.ru(c.documents),y=nd.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),b=f.applyChanges(_,n.isPrimaryClient,y);J0(n,t,b.au);const E=new wL(e,t,f);return n.Tu.set(e,E),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),b.snapshot}async function IL(n,e,t){const s=et(n),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter(f=>!Cm(f,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await M_(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Uv(s.remoteStore,o.targetId),O_(s,o.targetId)}).catch(ou)):(O_(s,o.targetId),await M_(s.localStore,o.targetId,!0))}async function CL(n,e){const t=et(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Uv(t.remoteStore,s.targetId))}async function RL(n,e,t){const s=OL(n);try{const o=await function(f,_){const y=et(f),b=ft.now(),E=_.reduce((F,D)=>F.add(D.key),dt());let A,I;return y.persistence.runTransaction("Locally write mutations","readwrite",F=>{let D=ma(),M=dt();return y.Ns.getEntries(F,E).next(z=>{D=z,D.forEach((W,$)=>{$.isValidDocument()||(M=M.add(W))})}).next(()=>y.localDocuments.getOverlayedDocuments(F,D)).next(z=>{A=z;const W=[];for(const $ of _){const te=GM($,A.get($.key).overlayedDocument);te!=null&&W.push(new qo($.key,te,jN(te.value.mapValue),bs.exists(!0)))}return y.mutationQueue.addMutationBatch(F,b,W,_)}).next(z=>{I=z;const W=z.applyToLocalDocumentSet(A,M);return y.documentOverlayCache.saveOverlays(F,z.batchId,W)})}).then(()=>({batchId:I.batchId,changes:HN(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,_,y){let b=f.Vu[f.currentUser.toKey()];b||(b=new Yt(ht)),b=b.insert(_,y),f.Vu[f.currentUser.toKey()]=b}(s,o.batchId,t),await sd(s,o.changes),await Lm(s.remoteStore)}catch(o){const c=Hv(o,"Failed to persist write");t.reject(c)}}async function IS(n,e){const t=et(n);try{const s=await qD(t.localStore,e);e.targetChanges.forEach((o,c)=>{const f=t.Au.get(c);f&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?wt(f.hu,14607):o.removedDocuments.size>0&&(wt(f.hu,42227),f.hu=!1))}),await sd(t,s,e)}catch(s){await ou(s)}}function X0(n,e,t){const s=et(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach((c,f)=>{const _=f.view.va(e);_.snapshot&&o.push(_.snapshot)}),function(f,_){const y=et(f);y.onlineState=_;let b=!1;y.queries.forEach((E,A)=>{for(const I of A.Sa)I.va(_)&&(b=!0)}),b&&Gv(y)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kL(n,e,t){const s=et(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),c=o&&o.key;if(c){let f=new Yt(Oe.comparator);f=f.insert(c,ei.newNoDocument(c,Xe.min()));const _=dt().add(c),y=new jm(Xe.min(),new Map,new Yt(ht),f,_);await IS(s,y),s.du=s.du.remove(c),s.Au.delete(e),$v(s)}else await M_(s.localStore,e,!1).then(()=>O_(s,e,t)).catch(ou)}async function PL(n,e){const t=et(n),s=e.batch.batchId;try{const o=await FD(t.localStore,e);RS(t,s,null),CS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await sd(t,o)}catch(o){await ou(o)}}async function jL(n,e,t){const s=et(n);try{const o=await function(f,_){const y=et(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let E;return y.mutationQueue.lookupMutationBatch(b,_).next(A=>(wt(A!==null,37113),E=A.keys(),y.mutationQueue.removeMutationBatch(b,A))).next(()=>y.mutationQueue.performConsistencyCheck(b)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(b,E,_)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,E)).next(()=>y.localDocuments.getDocuments(b,E))})}(s.localStore,e);RS(s,e,t),CS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await sd(s,o)}catch(o){await ou(o)}}function CS(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function RS(n,e,t){const s=et(n);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function O_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(s=>{n.Ru.containsKey(s)||kS(n,s)})}function kS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Uv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),$v(n))}function J0(n,e,t){for(const s of t)s instanceof NS?(n.Ru.addReference(s.key,e),ML(n,s)):s instanceof SS?(Se(Zv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||kS(n,s.key)):Ze(19791,{wu:s})}function ML(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Se(Zv,"New document in limbo: "+t),n.Eu.add(s),$v(n))}function $v(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Oe(zt.fromString(e)),s=n.fu.next();n.Au.set(s,new TL(t)),n.du=n.du.insert(t,s),gS(n.remoteStore,new wo(br(Im(t.path)),s,"TargetPurposeLimboResolution",Nm.ce))}}async function sd(n,e,t){const s=et(n),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((_,y)=>{f.push(s.pu(y,e,t).then(b=>{if((b||t)&&s.isPrimaryClient){const E=b?!b.fromCache:t?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(b){o.push(b);const E=Ov.As(y.targetId,b);c.push(E)}}))}),await Promise.all(f),s.Pu.H_(o),await async function(y,b){const E=et(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>pe.forEach(b,I=>pe.forEach(I.Es,F=>E.persistence.referenceDelegate.addReference(A,I.targetId,F)).next(()=>pe.forEach(I.ds,F=>E.persistence.referenceDelegate.removeReference(A,I.targetId,F)))))}catch(A){if(!lu(A))throw A;Se(Vv,"Failed to update sequence numbers: "+A)}for(const A of b){const I=A.targetId;if(!A.fromCache){const F=E.Ms.get(I),D=F.snapshotVersion,M=F.withLastLimboFreeSnapshotVersion(D);E.Ms=E.Ms.insert(I,M)}}}(s.localStore,c))}async function DL(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){Se(Zv,"User change. New user:",e.toKey());const s=await dS(t.localStore,e);t.currentUser=e,function(c,f){c.mu.forEach(_=>{_.forEach(y=>{y.reject(new Ne(fe.CANCELLED,f))})}),c.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await sd(t,s.Ls)}}function LL(n,e){const t=et(n),s=t.Au.get(e);if(s&&s.hu)return dt().add(s.key);{let o=dt();const c=t.Iu.get(e);if(!c)return o;for(const f of c){const _=t.Tu.get(f);o=o.unionWith(_.view.nu)}return o}}function PS(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kL.bind(null,e),e.Pu.H_=yL.bind(null,e.eventManager),e.Pu.yu=xL.bind(null,e.eventManager),e}function OL(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jL.bind(null,e),e}class um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return BD(this.persistence,new VD,e.initialUser,this.serializer)}Cu(e){return new hS(Lv.mi,this.serializer)}Du(e){return new KD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}um.provider={build:()=>new um};class VL extends um{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof lm,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new TD(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ti.withCacheSize(this.cacheSizeBytes):Ti.DEFAULT;return new hS(s=>lm.mi(s,t),this.serializer)}}class V_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>X0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=DL.bind(null,this.syncEngine),await gL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vL}()}createDatastore(e){const t=Mm(e.databaseInfo.databaseId),s=function(c){return new JD(c)}(e.databaseInfo);return function(c,f,_,y){return new iL(c,f,_,y)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,c,f,_){return new rL(s,o,c,f,_)}(this.localStore,this.datastore,e.asyncQueue,t=>X0(this.syncEngine,t,0),function(){return Z0.v()?new Z0:new WD}())}createSyncEngine(e,t){return function(o,c,f,_,y,b,E){const A=new EL(o,c,f,_,y,b);return E&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const s=et(t);Se(zl,"RemoteStore shutting down."),s.Ea.add(5),await id(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}V_.provider={build:()=>new V_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="FirestoreClient";class UL{constructor(e,t,s,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Xn.UNAUTHENTICATED,this.clientId=Ev.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{Se(Lo,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(Se(Lo,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Io;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Hv(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Kg(n,e){n.asyncQueue.verifyOperationInProgress(),Se(Lo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async o=>{s.isEqual(o)||(await dS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function eT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zL(n);Se(Lo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>K0(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,o)=>K0(e.remoteStore,o)),n._onlineComponents=e}async function zL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se(Lo,"Using user provided OfflineComponentProvider");try{await Kg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===fe.FAILED_PRECONDITION||o.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Qc("Error using user provided cache. Falling back to memory cache: "+t),await Kg(n,new um)}}else Se(Lo,"Using default OfflineComponentProvider"),await Kg(n,new VL(void 0));return n._offlineComponents}async function MS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se(Lo,"Using user provided OnlineComponentProvider"),await eT(n,n._uninitializedComponentsProvider._online)):(Se(Lo,"Using default OnlineComponentProvider"),await eT(n,new V_))),n._onlineComponents}function BL(n){return MS(n).then(e=>e.syncEngine)}async function U_(n){const e=await MS(n),t=e.eventManager;return t.onListen=NL.bind(null,e.syncEngine),t.onUnlisten=IL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=SL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CL.bind(null,e.syncEngine),t}function FL(n,e,t={}){const s=new Io;return n.asyncQueue.enqueueAndForget(async()=>function(c,f,_,y,b){const E=new jS({next:I=>{E.Nu(),f.enqueueAndForget(()=>TS(c,A));const F=I.docs.has(_);!F&&I.fromCache?b.reject(new Ne(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&I.fromCache&&y&&y.source==="server"?b.reject(new Ne(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(I)},error:I=>b.reject(I)}),A=new ES(Im(_.path),E,{includeMetadataChanges:!0,qa:!0});return wS(c,A)}(await U_(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firestore.googleapis.com",nT=!0;class iT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LS,this.ssl=nT}else this.host=e.host,this.ssl=e.ssl??nT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bD)throw new Ne(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ne(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Om{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Wj;switch(s.type){case"firstParty":return new Jj(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=tT.get(t);s&&(Se("ComponentProvider","Removing Datastore"),tT.delete(t),s.terminate())}(this),Promise.resolve()}}function qL(n,e,t,s={}){n=xs(n,Om);const o=zo(e),c=n._getSettings(),f={...c,emulatorOptions:n._getEmulatorOptions()},_=`${e}:${t}`;o&&(lv(`https://${_}`),cv("Firestore",!0)),c.host!==LS&&c.host!==_&&Qc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:_,ssl:o,emulatorOptions:s};if(!Ro(y,f)&&(n._setSettings(y),s.mockUserToken)){let b,E;if(typeof s.mockUserToken=="string")b=s.mockUserToken,E=Xn.MOCK_USER;else{b=NE(s.mockUserToken,n._app?.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new Ne(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Xn(A)}n._authCredentials=new Yj(new bN(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $l(this.firestore,e,this._query)}}class en{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(ed(t,en._jsonSchema))return new en(e,s||null,new Oe(zt.fromString(t.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:gn("string",en._jsonSchemaVersion),referencePath:gn("string")};class Co extends $l{constructor(e,t,s){super(e,t,Im(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Oe(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function la(n,e,...t){if(n=jt(n),wN("collection","path",e),n instanceof Om){const s=zt.fromString(e,...t);return g0(s),new Co(n,null,s)}{if(!(n instanceof en||n instanceof Co))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(zt.fromString(e,...t));return g0(s),new Co(n.firestore,null,s)}}function Ni(n,e,...t){if(n=jt(n),arguments.length===1&&(e=Ev.newId()),wN("doc","path",e),n instanceof Om){const s=zt.fromString(e,...t);return p0(s),new en(n,null,new Oe(s))}{if(!(n instanceof en||n instanceof Co))throw new Ne(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(zt.fromString(e,...t));return p0(s),new en(n.firestore,n instanceof Co?n.converter:null,new Oe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="AsyncQueue";class rT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mS(this,"async_queue_retry"),this._c=()=>{const s=$g();s&&Se(sT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=$g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Io;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lu(e))throw e;Se(sT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,fa("INTERNAL UNHANDLED ERROR: ",aT(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qv.createAndSchedule(this,e,t,s,c=>this.hc(c));return this.tc.push(o),o}uc(){this.nc&&Ze(47125,{Pc:aT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function aT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1}(n,["next","error","complete"])}class Oo extends Om{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new rT,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rT(e),this._firestoreClient=void 0,await e}}}function HL(n,e){const t=typeof n=="object"?n:Wh(),s=typeof n=="string"?n:im,o=_a(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=wE("firestore");c&&qL(o,...c)}return o}function Kv(n){if(n._terminated)throw new Ne(fe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GL(n),n._firestoreClient}function GL(n){const e=n._freezeSettings(),t=function(o,c,f,_){return new gM(o,c,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,DS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new UL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vs(Fn.fromBase64String(e))}catch(t){throw new Ne(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vs(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ed(e,vs._jsonSchema))return vs.fromBase64String(e.bytes)}}vs._jsonSchemaVersion="firestore/bytes/1.0",vs._jsonSchema={type:gn("string",vs._jsonSchemaVersion),bytes:gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ne(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(ed(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:gn("string",Tr._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ed(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Er(e.vectorValues);throw new Ne(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:gn("string",Er._jsonSchemaVersion),vectorValues:gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZL=/^__.*__$/;class $L{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new td(e,this.data,t,this.fieldTransforms)}}class OS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new qo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ze(40011,{Ac:n})}}class Wv{constructor(e,t,s,o,c,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Wv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return hm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(VS(this.Ac)&&ZL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KL{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mm(e)}Cc(e,t,s,o=!1){return new Wv({Ac:e,methodName:t,Dc:s,path:zn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zm(n){const e=n._freezeSettings(),t=Mm(n._databaseId);return new KL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function US(n,e,t,s,o,c={}){const f=n.Cc(c.merge||c.mergeFields?2:0,e,t,o);Qv("Data must be an object, but it was:",f,s);const _=zS(s,f);let y,b;if(c.merge)y=new $i(f.fieldMask),b=f.fieldTransforms;else if(c.mergeFields){const E=[];for(const A of c.mergeFields){const I=z_(e,A,t);if(!f.contains(I))throw new Ne(fe.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);FS(E,I)||E.push(I)}y=new $i(E),b=f.fieldTransforms.filter(A=>y.covers(A.field))}else y=null,b=f.fieldTransforms;return new $L(new Ei(_),y,b)}class rd extends Um{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}class Yv extends Um{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Uh(e.serializer,$N(e.serializer,this.Fc));return new BM(e.path,t)}isEqual(e){return e instanceof Yv&&this.Fc===e.Fc}}function WL(n,e,t,s){const o=n.Cc(1,e,t);Qv("Data must be an object, but it was:",o,s);const c=[],f=Ei.empty();Fo(s,(y,b)=>{const E=Xv(e,y,t);b=jt(b);const A=o.yc(E);if(b instanceof rd)c.push(E);else{const I=ad(b,A);I!=null&&(c.push(E),f.set(E,I))}});const _=new $i(c);return new OS(f,_,o.fieldTransforms)}function YL(n,e,t,s,o,c){const f=n.Cc(1,e,t),_=[z_(e,s,t)],y=[o];if(c.length%2!=0)throw new Ne(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)_.push(z_(e,c[I])),y.push(c[I+1]);const b=[],E=Ei.empty();for(let I=_.length-1;I>=0;--I)if(!FS(b,_[I])){const F=_[I];let D=y[I];D=jt(D);const M=f.yc(F);if(D instanceof rd)b.push(F);else{const z=ad(D,M);z!=null&&(b.push(F),E.set(F,z))}}const A=new $i(b);return new OS(E,A,f.fieldTransforms)}function QL(n,e,t,s=!1){return ad(t,n.Cc(s?4:3,e))}function ad(n,e){if(BS(n=jt(n)))return Qv("Unsupported field value:",e,n),zS(n,e);if(n instanceof Um)return function(s,o){if(!VS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const c=[];let f=0;for(const _ of s){let y=ad(_,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}}(n,e)}return function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return $N(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ft.fromDate(s);return{timestampValue:om(o.serializer,c)}}if(s instanceof ft){const c=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:om(o.serializer,c)}}if(s instanceof Tr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vs)return{bytesValue:iS(o.serializer,s._byteString)};if(s instanceof en){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Mv(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Er)return function(f,_){return{mapValue:{fields:{[kN]:{stringValue:PN},[sm]:{arrayValue:{values:f.toArray().map(b=>{if(typeof b!="number")throw _.Sc("VectorValues must only contain numeric values.");return Rv(_.serializer,b)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${Em(s)}`)}(n,e)}function zS(n,e){const t={};return NN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(n,(s,o)=>{const c=ad(o,e.mc(s));c!=null&&(t[s]=c)}),{mapValue:{fields:t}}}function BS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Tr||n instanceof vs||n instanceof en||n instanceof Um||n instanceof Er)}function Qv(n,e,t){if(!BS(t)||!TN(t)){const s=Em(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function z_(n,e,t){if((e=jt(e))instanceof Vm)return e._internalPath;if(typeof e=="string")return Xv(n,e);throw hm("Field path arguments must be of type string or ",n,!1,void 0,t)}const XL=new RegExp("[~\\*/\\[\\]]");function Xv(n,e,t){if(e.search(XL)>=0)throw hm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vm(...e.split("."))._internalPath}catch{throw hm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hm(n,e,t,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${o}`),y+=")"),new Ne(fe.INVALID_ARGUMENT,_+n+y)}function FS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,s,o,c){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JL extends qS{data(){return super.data()}}function Bm(n,e){return typeof e=="string"?Xv(n,e):e instanceof Vm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ne(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jv{}class HS extends Jv{}function Gc(n,e,...t){let s=[];e instanceof Jv&&s.push(e),s=s.concat(t),function(c){const f=c.filter(y=>y instanceof ey).length,_=c.filter(y=>y instanceof Fm).length;if(f>1||f>0&&_>0)throw new Ne(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)n=o._apply(n);return n}class Fm extends HS{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Fm(e,t,s)}_apply(e){const t=this._parse(e);return GS(e._query,t),new $l(e.firestore,e.converter,I_(e._query,t))}_parse(e){const t=zm(e.firestore);return function(c,f,_,y,b,E,A){let I;if(b.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){cT(A,E);const D=[];for(const M of A)D.push(lT(y,c,M));I={arrayValue:{values:D}}}else I=lT(y,c,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||cT(A,E),I=QL(_,f,A,E==="in"||E==="not-in");return pn.create(b,E,I)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function dm(n,e,t){const s=e,o=Bm("where",n);return Fm._create(o,s,t)}class ey extends Jv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ey(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ws.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let f=o;const _=c.getFlattenedFilters();for(const y of _)GS(f,y),f=I_(f,y)}(e._query,t),new $l(e.firestore,e.converter,I_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends HS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ty(e,t)}_apply(e){const t=function(o,c,f){if(o.startAt!==null)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lh(c,f)}(e._query,this._field,this._direction);return new $l(e.firestore,e.converter,function(o,c){const f=o.explicitOrderBy.concat([c]);return new cu(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Vc(n,e="asc"){const t=e,s=Bm("orderBy",n);return ty._create(s,t)}function lT(n,e,t){if(typeof(t=jt(t))=="string"){if(t==="")throw new Ne(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zN(e)&&t.indexOf("/")!==-1)throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(zt.fromString(t));if(!Oe.isDocumentKey(s))throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return E0(n,new Oe(s))}if(t instanceof en)return E0(n,t._key);throw new Ne(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function cT(n,e){if(!Array.isArray(n)||n.length===0)throw new Ne(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GS(n,e){const t=function(o,c){for(const f of o)for(const _ of f.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tO{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ze(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Fo(e,(o,c)=>{s[o]=this.convertValue(c,t)}),s}convertVectorValue(e){const t=e.fields?.[sm].arrayValue?.values?.map(s=>ln(s.doubleValue));return new Er(t)}convertGeoPoint(e){return new Tr(ln(e.latitude),ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Am(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(jh(e));default:return null}}convertTimestamp(e){const t=Po(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=zt.fromString(e);wt(cS(s),9688,{name:e});const o=new Mh(s.get(1),s.get(3)),c=new Oe(s.popFirst(5));return o.isEqual(t)||fa(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class fh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends qS{constructor(e,t,s,o,c,f){super(e,t,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Bm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Dl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Dl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dl._jsonSchema={type:gn("string",Dl._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class Mf extends Dl{data(e={}){return super.data(e)}}class Zc{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new fh(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Mf(this._firestore,this._userDataWriter,s.key,s,new fh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(_=>{const y=new Mf(o._firestore,o._userDataWriter,_.doc.key,_.doc,new fh(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter);return _.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(_=>c||_.type!==3).map(_=>{const y=new Mf(o._firestore,o._userDataWriter,_.doc.key,_.doc,new fh(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,E=-1;return _.type!==0&&(b=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),_.type!==1&&(f=f.add(_.doc),E=f.indexOf(_.doc.key)),{type:nO(_.type),doc:y,oldIndex:b,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ev.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ze(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n){n=xs(n,en);const e=xs(n.firestore,Oo);return FL(Kv(e),n._key).then(t=>YS(e,n,t))}Zc._jsonSchemaVersion="firestore/querySnapshot/1.0",Zc._jsonSchema={type:gn("string",Zc._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};class $S extends tO{constructor(e){super(),this.firestore=e}convertBytes(e){return new vs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,t)}}function uT(n,e,t){n=xs(n,en);const s=xs(n.firestore,Oo),o=ZS(n.converter,e);return qm(s,[US(zm(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,bs.none())])}function fm(n,e,t,...s){n=xs(n,en);const o=xs(n.firestore,Oo),c=zm(o);let f;return f=typeof(e=jt(e))=="string"||e instanceof Vm?YL(c,"updateDoc",n._key,e,t,s):WL(c,"updateDoc",n._key,e),qm(o,[f.toMutation(n._key,bs.exists(!0))])}function KS(n){return qm(xs(n.firestore,Oo),[new kv(n._key,bs.none())])}function WS(n,e){const t=xs(n.firestore,Oo),s=Ni(n),o=ZS(n.converter,e);return qm(t,[US(zm(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,bs.exists(!1))]).then(()=>s)}function To(n,...e){n=jt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||oT(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(oT(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,f,_;if(n instanceof en)f=xs(n.firestore,Oo),_=Im(n._key.path),c={next:y=>{e[s]&&e[s](YS(f,n,y))},error:e[s+1],complete:e[s+2]};else{const y=xs(n,$l);f=xs(y.firestore,Oo),_=y._query;const b=new $S(f);c={next:E=>{e[s]&&e[s](new Zc(f,b,y,E))},error:e[s+1],complete:e[s+2]},eO(n._query)}return function(b,E,A,I){const F=new jS(I),D=new ES(E,F,A);return b.asyncQueue.enqueueAndForget(async()=>wS(await U_(b),D)),()=>{F.Nu(),b.asyncQueue.enqueueAndForget(async()=>TS(await U_(b),D))}}(Kv(f),_,o,c)}function qm(n,e){return function(s,o){const c=new Io;return s.asyncQueue.enqueueAndForget(async()=>RL(await BL(s),o,c)),c.promise}(Kv(n),e)}function YS(n,e,t){const s=t.docs.get(e._key),o=new $S(n);return new Dl(n,o,e._key,s,new fh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){return new rd("deleteField")}function sO(n){return new Yv("increment",n)}(function(e,t=!0){(function(o){au=o})(Hl),ws(new Yi("firestore",(s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),_=new Oo(new Qj(s.getProvider("auth-internal")),new eM(f,s.getProvider("app-check-internal")),function(b,E){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new Ne(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(b.options.projectId,E)}(f,o),f);return c={useFetchStreams:t,...c},_._setSettings(c),_},"PUBLIC").setMultipleInstances(!0)),ti(h0,d0,e),ti(h0,d0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",XS="storageBucket",rO=120*1e3,aO=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Ns{constructor(e,t,s=0){super(Wg(e),`Firebase Storage: ${t} (${Wg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tn||(tn={}));function Wg(n){return"storage/"+n}function ny(){const n="An unknown error occurred, please check the error payload for server response.";return new nn(tn.UNKNOWN,n)}function oO(n){return new nn(tn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function lO(n){return new nn(tn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cO(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(tn.UNAUTHENTICATED,n)}function uO(){return new nn(tn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function hO(n){return new nn(tn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function dO(){return new nn(tn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fO(){return new nn(tn.CANCELED,"User canceled the upload/download.")}function mO(n){return new nn(tn.INVALID_URL,"Invalid URL '"+n+"'.")}function pO(n){return new nn(tn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function gO(){return new nn(tn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+XS+"' property when initializing the app?")}function _O(){return new nn(tn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vO(){return new nn(tn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yO(n){return new nn(tn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function F_(n){return new nn(tn.INVALID_ARGUMENT,n)}function JS(){return new nn(tn.APP_DELETED,"The Firebase app was deleted.")}function xO(n){return new nn(tn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bh(n,e){return new nn(tn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function rh(n){throw new nn(tn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Ki.makeFromUrl(e,t)}catch{return new Ki(e,"")}if(s.path==="")return s;throw pO(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(_e){_e.path.charAt(_e.path.length-1)==="/"&&(_e.path_=_e.path_.slice(0,-1))}const f="(/(.*))?$",_=new RegExp("^gs://"+o+f,"i"),y={bucket:1,path:3};function b(_e){_e.path_=decodeURIComponent(_e.path)}const E="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),I="(/([^?#]*).*)?$",F=new RegExp(`^https?://${A}/${E}/b/${o}/o${I}`,"i"),D={bucket:1,path:3},M=t===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,z="([^?#]*)",W=new RegExp(`^https?://${M}/${o}/${z}`,"i"),te=[{regex:_,indices:y,postModify:c},{regex:F,indices:D,postModify:b},{regex:W,indices:{bucket:1,path:2},postModify:b}];for(let _e=0;_e<te.length;_e++){const ge=te[_e],xe=ge.regex.exec(e);if(xe){const B=xe[ge.indices.bucket];let k=xe[ge.indices.path];k||(k=""),s=new Ki(B,k),ge.postModify(s);break}}if(s==null)throw mO(e);return s}}class bO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(n,e,t){let s=1,o=null,c=null,f=!1,_=0;function y(){return _===2}let b=!1;function E(...z){b||(b=!0,e.apply(null,z))}function A(z){o=setTimeout(()=>{o=null,n(F,y())},z)}function I(){c&&clearTimeout(c)}function F(z,...W){if(b){I();return}if(z){I(),E.call(null,z,...W);return}if(y()||f){I(),E.call(null,z,...W);return}s<64&&(s*=2);let te;_===1?(_=2,te=0):te=(s+Math.random())*1e3,A(te)}let D=!1;function M(z){D||(D=!0,I(),!b&&(o!==null?(z||(_=2),clearTimeout(o),A(0)):z||(_=1)))}return A(0),c=setTimeout(()=>{f=!0,M(!0)},t),M}function TO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){return n!==void 0}function NO(n){return typeof n=="object"&&!Array.isArray(n)}function iy(n){return typeof n=="string"||n instanceof String}function hT(n){return sy()&&n instanceof Blob}function sy(){return typeof Blob<"u"}function dT(n,e,t,s){if(s<e)throw F_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw F_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function e1(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ll;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ll||(Ll={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,c=e.indexOf(n)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,s,o,c,f,_,y,b,E,A,I=!0,F=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=_,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=E,this.connectionFactory_=A,this.retry=I,this.isUsingEmulator=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,M)=>{this.resolve_=D,this.reject_=M,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new vf(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=_=>{const y=_.loaded,b=_.lengthComputable?_.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,b)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const _=c.getErrorCode()===Ll.NO_ERROR,y=c.getStatus();if(!_||SO(y,this.additionalRetryCodes_)&&this.retry){const E=c.getErrorCode()===Ll.ABORT;s(!1,new vf(!1,null,E));return}const b=this.successCodes_.indexOf(y)!==-1;s(!0,new vf(b,c))})},t=(s,o)=>{const c=this.resolve_,f=this.reject_,_=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(_,_.getResponse());EO(y)?c(y):c()}catch(y){f(y)}else if(_!==null){const y=ny();y.serverResponse=_.getErrorText(),this.errorCallback_?f(this.errorCallback_(_,y)):f(y)}else if(o.canceled){const y=this.appDelete_?JS():fO();f(y)}else{const y=dO();f(y)}};this.canceled_?t(!1,new vf(!1,null,!0)):this.backoffId_=wO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&TO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vf{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function IO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function CO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function kO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function PO(n,e,t,s,o,c,f=!0,_=!1){const y=e1(n.urlParams),b=n.url+y,E=Object.assign({},n.headers);return RO(E,e),IO(E,t),CO(E,c),kO(E,s),new AO(b,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,f,_)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MO(...n){const e=jO();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(sy())return new Blob(n);throw new nn(tn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DO(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n){if(typeof atob>"u")throw yO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yg{constructor(e,t){this.data=e,this.contentType=t||null}}function OO(n,e){switch(n){case vr.RAW:return new Yg(t1(e));case vr.BASE64:case vr.BASE64URL:return new Yg(n1(n,e));case vr.DATA_URL:return new Yg(UO(e),zO(e))}throw ny()}function t1(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const c=s,f=n.charCodeAt(++t);s=65536|(c&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function VO(n){let e;try{e=decodeURIComponent(n)}catch{throw bh(vr.DATA_URL,"Malformed data URL.")}return t1(e)}function n1(n,e){switch(n){case vr.BASE64:{const o=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(o||c)throw bh(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const o=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(o||c)throw bh(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=LO(e)}catch(o){throw o.message.includes("polyfill")?o:bh(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class i1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw bh(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=BO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function UO(n){const e=new i1(n);return e.base64?n1(vr.BASE64,e.rest):VO(e.rest)}function zO(n){return new i1(n).contentType}function BO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){let s=0,o="";hT(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(hT(this.data_)){const s=this.data_,o=DO(s,e,t);return o===null?null:new xo(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new xo(s,!0)}}static getBlob(...e){if(sy()){const t=e.map(s=>s instanceof xo?s.data_:s);return new xo(MO.apply(null,t))}else{const t=e.map(f=>iy(f)?OO(vr.RAW,f).data:f.data_);let s=0;t.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let c=0;return t.forEach(f=>{for(let _=0;_<f.length;_++)o[c++]=f[_]}),new xo(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){let e;try{e=JSON.parse(n)}catch{return null}return NO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function qO(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function r1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(n,e){return e}class hi{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||HO}}let yf=null;function GO(n){return!iy(n)||n.length<2?n:r1(n)}function a1(){if(yf)return yf;const n=[];n.push(new hi("bucket")),n.push(new hi("generation")),n.push(new hi("metageneration")),n.push(new hi("name","fullPath",!0));function e(c,f){return GO(f)}const t=new hi("name");t.xform=e,n.push(t);function s(c,f){return f!==void 0?Number(f):f}const o=new hi("size");return o.xform=s,n.push(o),n.push(new hi("timeCreated")),n.push(new hi("updated")),n.push(new hi("md5Hash",null,!0)),n.push(new hi("cacheControl",null,!0)),n.push(new hi("contentDisposition",null,!0)),n.push(new hi("contentEncoding",null,!0)),n.push(new hi("contentLanguage",null,!0)),n.push(new hi("contentType",null,!0)),n.push(new hi("metadata","customMetadata",!0)),yf=n,yf}function ZO(n,e){function t(){const s=n.bucket,o=n.fullPath,c=new Ki(s,o);return e._makeStorageReference(c)}Object.defineProperty(n,"ref",{get:t})}function $O(n,e,t){const s={};s.type="file";const o=t.length;for(let c=0;c<o;c++){const f=t[c];s[f.local]=f.xform(s,e[f.server])}return ZO(s,n),s}function o1(n,e,t){const s=s1(e);return s===null?null:$O(n,s,t)}function KO(n,e,t,s){const o=s1(e);if(o===null||!iy(o.downloadTokens))return null;const c=o.downloadTokens;if(c.length===0)return null;const f=encodeURIComponent;return c.split(",").map(b=>{const E=n.bucket,A=n.fullPath,I="/b/"+f(E)+"/o/"+f(A),F=ry(I,t,s),D=e1({alt:"media",token:b});return F+D})[0]}function WO(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const c=e[o];c.writable&&(t[c.server]=n[c.local])}return JSON.stringify(t)}class l1{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){if(!n)throw ny()}function YO(n,e){function t(s,o){const c=o1(n,o,e);return c1(c!==null),c}return t}function QO(n,e){function t(s,o){const c=o1(n,o,e);return c1(c!==null),KO(c,o,n.host,n._protocol)}return t}function u1(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=uO():o=cO():t.getStatus()===402?o=lO(n.bucket):t.getStatus()===403?o=hO(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function XO(n){const e=u1(n);function t(s,o){let c=e(s,o);return s.getStatus()===404&&(c=oO(n.path)),c.serverResponse=o.serverResponse,c}return t}function JO(n,e,t){const s=e.fullServerUrl(),o=ry(s,n.host,n._protocol),c="GET",f=n.maxOperationRetryTime,_=new l1(o,c,QO(n,t),f);return _.errorHandler=XO(e),_}function e4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function t4(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=e4(null,e)),s}function n4(n,e,t,s,o){const c=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function _(){let te="";for(let _e=0;_e<2;_e++)te=te+Math.random().toString().slice(2);return te}const y=_();f["Content-Type"]="multipart/related; boundary="+y;const b=t4(e,s,o),E=WO(b,t),A="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+y+`\r
Content-Type: `+b.contentType+`\r
\r
`,I=`\r
--`+y+"--",F=xo.getBlob(A,s,I);if(F===null)throw _O();const D={name:b.fullPath},M=ry(c,n.host,n._protocol),z="POST",W=n.maxUploadRetryTime,$=new l1(M,z,YO(n,t),W);return $.urlParams=D,$.headers=f,$.body=F.uploadData(),$.errorHandler=u1(e),$}class i4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,c){if(this.sent_)throw rh("cannot .send() more than once");if(zo(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),c!==void 0)for(const f in c)c.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,c[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw rh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw rh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw rh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw rh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class s4 extends i4{initXhr(){this.xhr_.responseType="text"}}function h1(){return new s4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){this._service=e,t instanceof Ki?this._location=t:this._location=Ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Bl(e,t)}get root(){const e=new Ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r1(this._location.path)}get storage(){return this._service}get parent(){const e=FO(this._location.path);if(e===null)return null;const t=new Ki(this._location.bucket,e);return new Bl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw xO(e)}}function r4(n,e,t){n._throwIfRoot("uploadBytes");const s=n4(n.storage,n._location,a1(),new xo(e,!0),t);return n.storage.makeRequestWithTokens(s,h1).then(o=>({metadata:o,ref:n}))}function a4(n){n._throwIfRoot("getDownloadURL");const e=JO(n.storage,n._location,a1());return n.storage.makeRequestWithTokens(e,h1).then(t=>{if(t===null)throw vO();return t})}function o4(n,e){const t=qO(n._location.path,e),s=new Ki(n._location.bucket,t);return new Bl(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(n){return/^[A-Za-z]+:\/\//.test(n)}function c4(n,e){return new Bl(n,e)}function d1(n,e){if(n instanceof ay){const t=n;if(t._bucket==null)throw gO();const s=new Bl(t,t._bucket);return e!=null?d1(s,e):s}else return e!==void 0?o4(n,e):n}function u4(n,e){if(e&&l4(e)){if(n instanceof ay)return c4(n,e);throw F_("To use ref(service, url), the first argument must be a Storage instance.")}else return d1(n,e)}function fT(n,e){const t=e?.[XS];return t==null?null:Ki.makeFromBucketSpec(t,n)}function h4(n,e,t,s={}){n.host=`${e}:${t}`;const o=zo(e);o&&(lv(`https://${n.host}/b`),cv("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(n._overrideAuthToken=typeof c=="string"?c:NE(c,n.app.options.projectId))}class ay{constructor(e,t,s,o,c,f=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rO,this._maxUploadRetryTime=aO,this._requests=new Set,o!=null?this._bucket=Ki.makeFromBucketSpec(o,this._host):this._bucket=fT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ki.makeFromBucketSpec(this._url,e):this._bucket=fT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bl(this,e)}_makeRequest(e,t,s,o,c=!0){if(this._deleted)return new bO(JS());{const f=PO(e,this._appId,s,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const mT="@firebase/storage",pT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="storage";function oy(n,e,t){return n=jt(n),r4(n,e,t)}function ly(n){return n=jt(n),a4(n)}function cy(n,e){return n=jt(n),u4(n,e)}function d4(n=Wh(),e){n=jt(n);const s=_a(n,f1).getImmediate({identifier:e}),o=wE("storage");return o&&f4(s,...o),s}function f4(n,e,t,s={}){h4(n,e,t,s)}function m4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new ay(t,s,o,e,Hl)}function p4(){ws(new Yi(f1,m4,"PUBLIC").setMultipleInstances(!0)),ti(mT,pT,""),ti(mT,pT,"esm2020")}p4();const m1="@firebase/installations",uy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=1e4,g1=`w:${uy}`,_1="FIS_v2",g4="https://firebaseinstallations.googleapis.com/v1",_4=3600*1e3,v4="installations",y4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fl=new Bo(v4,y4,x4);function v1(n){return n instanceof Ns&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1({projectId:n}){return`${g4}/projects/${n}/installations`}function x1(n){return{token:n.token,requestStatus:2,expiresIn:w4(n.expiresIn),creationTime:Date.now()}}async function b1(n,e){const s=(await e.json()).error;return Fl.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function w1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function b4(n,{refreshToken:e}){const t=w1(n);return t.append("Authorization",T4(e)),t}async function T1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function w4(n){return Number(n.replace("s","000"))}function T4(n){return`${_1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=y1(n),o=w1(n),c=e.getImmediate({optional:!0});if(c){const b=await c.getHeartbeatsHeader();b&&o.append("x-firebase-client",b)}const f={fid:t,authVersion:_1,appId:n.appId,sdkVersion:g1},_={method:"POST",headers:o,body:JSON.stringify(f)},y=await T1(()=>fetch(s,_));if(y.ok){const b=await y.json();return{fid:b.fid||t,registrationStatus:2,refreshToken:b.refreshToken,authToken:x1(b.authToken)}}else throw await b1("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^[cdef][\w-]{21}$/,q_="";function A4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=I4(n);return S4.test(t)?t:q_}catch{return q_}}function I4(n){return N4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=new Map;function S1(n,e){const t=Hm(n);A1(t,e),C4(t,e)}function A1(n,e){const t=N1.get(n);if(t)for(const s of t)s(e)}function C4(n,e){const t=R4();t&&t.postMessage({key:n,fid:e}),k4()}let Pl=null;function R4(){return!Pl&&"BroadcastChannel"in self&&(Pl=new BroadcastChannel("[Firebase] FID Change"),Pl.onmessage=n=>{A1(n.data.key,n.data.fid)}),Pl}function k4(){N1.size===0&&Pl&&(Pl.close(),Pl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="firebase-installations-database",j4=1,ql="firebase-installations-store";let Qg=null;function hy(){return Qg||(Qg=RE(P4,j4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ql)}}})),Qg}async function mm(n,e){const t=Hm(n),o=(await hy()).transaction(ql,"readwrite"),c=o.objectStore(ql),f=await c.get(t);return await c.put(e,t),await o.done,(!f||f.fid!==e.fid)&&S1(n,e.fid),e}async function I1(n){const e=Hm(n),s=(await hy()).transaction(ql,"readwrite");await s.objectStore(ql).delete(e),await s.done}async function Gm(n,e){const t=Hm(n),o=(await hy()).transaction(ql,"readwrite"),c=o.objectStore(ql),f=await c.get(t),_=e(f);return _===void 0?await c.delete(t):await c.put(_,t),await o.done,_&&(!f||f.fid!==_.fid)&&S1(n,_.fid),_}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dy(n){let e;const t=await Gm(n.appConfig,s=>{const o=M4(s),c=D4(n,o);return e=c.registrationPromise,c.installationEntry});return t.fid===q_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function M4(n){const e=n||{fid:A4(),registrationStatus:0};return C1(e)}function D4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Fl.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=L4(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:O4(n)}:{installationEntry:e}}async function L4(n,e){try{const t=await E4(n,e);return mm(n.appConfig,t)}catch(t){throw v1(t)&&t.customData.serverCode===409?await I1(n.appConfig):await mm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function O4(n){let e=await gT(n.appConfig);for(;e.registrationStatus===1;)await E1(100),e=await gT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await dy(n);return s||t}return e}function gT(n){return Gm(n,e=>{if(!e)throw Fl.create("installation-not-found");return C1(e)})}function C1(n){return V4(n)?{fid:n.fid,registrationStatus:0}:n}function V4(n){return n.registrationStatus===1&&n.registrationTime+p1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U4({appConfig:n,heartbeatServiceProvider:e},t){const s=z4(n,t),o=b4(n,t),c=e.getImmediate({optional:!0});if(c){const b=await c.getHeartbeatsHeader();b&&o.append("x-firebase-client",b)}const f={installation:{sdkVersion:g1,appId:n.appId}},_={method:"POST",headers:o,body:JSON.stringify(f)},y=await T1(()=>fetch(s,_));if(y.ok){const b=await y.json();return x1(b)}else throw await b1("Generate Auth Token",y)}function z4(n,{fid:e}){return`${y1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fy(n,e=!1){let t;const s=await Gm(n.appConfig,c=>{if(!R1(c))throw Fl.create("not-registered");const f=c.authToken;if(!e&&q4(f))return c;if(f.requestStatus===1)return t=B4(n,e),c;{if(!navigator.onLine)throw Fl.create("app-offline");const _=G4(c);return t=F4(n,_),_}});return t?await t:s.authToken}async function B4(n,e){let t=await _T(n.appConfig);for(;t.authToken.requestStatus===1;)await E1(100),t=await _T(n.appConfig);const s=t.authToken;return s.requestStatus===0?fy(n,e):s}function _T(n){return Gm(n,e=>{if(!R1(e))throw Fl.create("not-registered");const t=e.authToken;return Z4(t)?{...e,authToken:{requestStatus:0}}:e})}async function F4(n,e){try{const t=await U4(n,e),s={...e,authToken:t};return await mm(n.appConfig,s),t}catch(t){if(v1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await I1(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await mm(n.appConfig,s)}throw t}}function R1(n){return n!==void 0&&n.registrationStatus===2}function q4(n){return n.requestStatus===2&&!H4(n)}function H4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+_4}function G4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function Z4(n){return n.requestStatus===1&&n.requestTime+p1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(n){const e=n,{installationEntry:t,registrationPromise:s}=await dy(e);return s?s.catch(console.error):fy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K4(n,e=!1){const t=n;return await W4(t),(await fy(t,e)).token}async function W4(n){const{registrationPromise:e}=await dy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(n){if(!n||!n.options)throw Xg("App Configuration");if(!n.name)throw Xg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Xg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xg(n){return Fl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="installations",Q4="installations-internal",X4=n=>{const e=n.getProvider("app").getImmediate(),t=Y4(e),s=_a(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},J4=n=>{const e=n.getProvider("app").getImmediate(),t=_a(e,k1).getImmediate();return{getId:()=>$4(t),getToken:o=>K4(t,o)}};function e3(){ws(new Yi(k1,X4,"PUBLIC")),ws(new Yi(Q4,J4,"PRIVATE"))}e3();ti(m1,uy);ti(m1,uy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="analytics",t3="firebase_id",n3="origin",i3=60*1e3,s3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",my="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new Kh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wi=new Bo("analytics","Analytics",r3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(n){if(!n.startsWith(my)){const e=Wi.create("invalid-gtag-resource",{gtagURL:n});return Si.warn(e.message),""}return n}function P1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function o3(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function l3(n,e){const t=o3("firebase-js-sdk-policy",{createScriptURL:a3}),s=document.createElement("script"),o=`${my}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function c3(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function u3(n,e,t,s,o,c){const f=s[o];try{if(f)await e[f];else{const y=(await P1(t)).find(b=>b.measurementId===o);y&&await e[y.appId]}}catch(_){Si.error(_)}n("config",o,c)}async function h3(n,e,t,s,o){try{let c=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const _=await P1(t);for(const y of f){const b=_.find(A=>A.measurementId===y),E=b&&e[b.appId];if(E)c.push(E);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),n("event",s,o||{})}catch(c){Si.error(c)}}function d3(n,e,t,s){async function o(c,...f){try{if(c==="event"){const[_,y]=f;await h3(n,e,t,_,y)}else if(c==="config"){const[_,y]=f;await u3(n,e,t,s,_,y)}else if(c==="consent"){const[_,y]=f;n("consent",_,y)}else if(c==="get"){const[_,y,b]=f;n("get",_,y,b)}else if(c==="set"){const[_]=f;n("set",_)}else n(c,...f)}catch(_){Si.error(_)}}return o}function f3(n,e,t,s,o){let c=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=d3(c,n,e,t),{gtagCore:c,wrappedGtag:window[o]}}function m3(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(my)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=30,g3=1e3;class _3{constructor(e={},t=g3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const j1=new _3;function v3(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function y3(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:v3(t)},o=s3.replace("{app-id}",e),c=await fetch(o,s);if(c.status!==200&&c.status!==304){let f="";try{const _=await c.json();_.error?.message&&(f=_.error.message)}catch{}throw Wi.create("config-fetch-failed",{httpStatus:c.status,responseMessage:f})}return c.json()}async function x3(n,e=j1,t){const{appId:s,apiKey:o,measurementId:c}=n.options;if(!s)throw Wi.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:s};throw Wi.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_=new T3;return setTimeout(async()=>{_.abort()},i3),M1({appId:s,apiKey:o,measurementId:c},f,_,e)}async function M1(n,{throttleEndTimeMillis:e,backoffCount:t},s,o=j1){const{appId:c,measurementId:f}=n;try{await b3(s,e)}catch(_){if(f)return Si.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:c,measurementId:f};throw _}try{const _=await y3(n);return o.deleteThrottleMetadata(c),_}catch(_){const y=_;if(!w3(y)){if(o.deleteThrottleMetadata(c),f)return Si.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:c,measurementId:f};throw _}const b=Number(y?.customData?.httpStatus)===503?Lw(t,o.intervalMillis,p3):Lw(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return o.setThrottleMetadata(c,E),Si.debug(`Calling attemptFetch again in ${b} millis`),M1(n,E,s,o)}}function b3(n,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(c),s(Wi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function w3(n){if(!(n instanceof Ns)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class T3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function E3(n,e,t,s,o){if(o&&o.global){n("event",t,s);return}else{const c=await e,f={...s,send_to:c};n("event",t,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N3(){if(uv())try{await hv()}catch(n){return Si.warn(Wi.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Si.warn(Wi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function S3(n,e,t,s,o,c,f){const _=x3(n);_.then(I=>{t[I.measurementId]=I.appId,n.options.measurementId&&I.measurementId!==n.options.measurementId&&Si.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Si.error(I)),e.push(_);const y=N3().then(I=>{if(I)return s.getId()}),[b,E]=await Promise.all([_,y]);m3(c)||l3(c,b.measurementId),o("js",new Date);const A=f?.config??{};return A[n3]="firebase",A.update=!0,E!=null&&(A[t3]=E),o("config",b.measurementId,A),b.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.app=e}_delete(){return delete wh[this.app.options.appId],Promise.resolve()}}let wh={},vT=[];const yT={};let Jg="dataLayer",I3="gtag",xT,D1,bT=!1;function C3(){const n=[];if(SE()&&n.push("This is a browser extension environment."),AE()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=Wi.create("invalid-analytics-context",{errorInfo:e});Si.warn(t.message)}}function R3(n,e,t){C3();const s=n.options.appId;if(!s)throw Wi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Si.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wi.create("no-api-key");if(wh[s]!=null)throw Wi.create("already-exists",{id:s});if(!bT){c3(Jg);const{wrappedGtag:c,gtagCore:f}=f3(wh,vT,yT,Jg,I3);D1=c,xT=f,bT=!0}return wh[s]=S3(n,vT,yT,e,xT,Jg,t),new A3(n)}function k3(n=Wh()){n=jt(n);const e=_a(n,pm);return e.isInitialized()?e.getImmediate():P3(n)}function P3(n,e={}){const t=_a(n,pm);if(t.isInitialized()){const o=t.getImmediate();if(Ro(e,t.getOptions()))return o;throw Wi.create("already-initialized")}return t.initialize({options:e})}function j3(n,e,t,s){n=jt(n),E3(D1,wh[n.app.options.appId],e,t,s).catch(o=>Si.error(o))}const wT="@firebase/analytics",TT="0.10.18";function M3(){ws(new Yi(pm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return R3(s,o,t)},"PUBLIC")),ws(new Yi("analytics-internal",n,"PRIVATE")),ti(wT,TT),ti(wT,TT,"esm2020");function n(e){try{const t=e.getProvider(pm).getImmediate();return{logEvent:(s,o,c)=>j3(t,s,o,c)}}catch(t){throw Wi.create("interop-component-reg-failed",{reason:t})}}}M3();var H_,ET,Zm=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},L1=function(n){if(document.readyState==="loading")return"loading";var e=Zm();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},D3=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},py=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var s=n,o=s.id?"#"+s.id:D3(s)+(s.classList&&s.classList.value&&s.classList.value.trim()&&s.classList.value.trim().length?"."+s.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,s.id)break;n=s.parentNode}}catch{}return t},O1=-1,L3=function(){return O1},od=function(n){addEventListener("pageshow",function(e){e.persisted&&(O1=e.timeStamp,n(e))},!0)},gy=function(){var n=Zm();return n&&n.activationStart||0},Vo=function(n,e){var t=Zm(),s="navigate";return L3()>=0?s="back-forward-cache":t&&(document.prerendering||gy()>0?s="prerender":document.wasDiscarded?s="restore":t.type&&(s=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:s}},hu=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var s=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return s.observe(Object.assign({type:n,buffered:!0},t||{})),s}}catch{}},Uo=function(n,e,t,s){var o,c;return function(f){e.value>=0&&(f||s)&&((c=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=c,e.rating=function(_,y){return _>y[1]?"poor":_>y[0]?"needs-improvement":"good"}(e.value,t),n(e))}},_y=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},$m=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},vy=function(n){var e=!1;return function(){e||(n(),e=!0)}},Uc=-1,NT=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},gm=function(n){document.visibilityState==="hidden"&&Uc>-1&&(Uc=n.type==="visibilitychange"?n.timeStamp:0,O3())},ST=function(){addEventListener("visibilitychange",gm,!0),addEventListener("prerenderingchange",gm,!0)},O3=function(){removeEventListener("visibilitychange",gm,!0),removeEventListener("prerenderingchange",gm,!0)},V1=function(){return Uc<0&&(Uc=NT(),ST(),od(function(){setTimeout(function(){Uc=NT(),ST()},0)})),{get firstHiddenTime(){return Uc}}},yy=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},AT=[1800,3e3],V3=function(n,e){e=e||{},yy(function(){var t,s=V1(),o=Vo("FCP"),c=hu("paint",function(f){f.forEach(function(_){_.name==="first-contentful-paint"&&(c.disconnect(),_.startTime<s.firstHiddenTime&&(o.value=Math.max(_.startTime-gy(),0),o.entries.push(_),t(!0)))})});c&&(t=Uo(n,o,AT,e.reportAllChanges),od(function(f){o=Vo("FCP"),t=Uo(n,o,AT,e.reportAllChanges),_y(function(){o.value=performance.now()-f.timeStamp,t(!0)})}))})},IT=[.1,.25],U3=function(n,e){(function(t,s){s=s||{},V3(vy(function(){var o,c=Vo("CLS",0),f=0,_=[],y=function(E){E.forEach(function(A){if(!A.hadRecentInput){var I=_[0],F=_[_.length-1];f&&A.startTime-F.startTime<1e3&&A.startTime-I.startTime<5e3?(f+=A.value,_.push(A)):(f=A.value,_=[A])}}),f>c.value&&(c.value=f,c.entries=_,o())},b=hu("layout-shift",y);b&&(o=Uo(t,c,IT,s.reportAllChanges),$m(function(){y(b.takeRecords()),o(!0)}),od(function(){f=0,c=Vo("CLS",0),o=Uo(t,c,IT,s.reportAllChanges),_y(function(){return o()})}),setTimeout(o,0))}))})(function(t){var s=function(o){var c,f={};if(o.entries.length){var _=o.entries.reduce(function(b,E){return b&&b.value>E.value?b:E});if(_&&_.sources&&_.sources.length){var y=(c=_.sources).find(function(b){return b.node&&b.node.nodeType===1})||c[0];y&&(f={largestShiftTarget:py(y.node),largestShiftTime:_.startTime,largestShiftValue:_.value,largestShiftSource:y,largestShiftEntry:_,loadState:L1(_.startTime)})}}return Object.assign(o,{attribution:f})}(t);n(s)},e)},U1=0,e_=1/0,xf=0,z3=function(n){n.forEach(function(e){e.interactionId&&(e_=Math.min(e_,e.interactionId),xf=Math.max(xf,e.interactionId),U1=xf?(xf-e_)/7+1:0)})},z1=function(){return H_?U1:performance.interactionCount||0},B3=function(){"interactionCount"in performance||H_||(H_=hu("event",z3,{type:"event",buffered:!0,durationThreshold:0}))},Gs=[],Th=new Map,B1=0,F3=function(){var n=Math.min(Gs.length-1,Math.floor((z1()-B1)/50));return Gs[n]},F1=[],q3=function(n){if(F1.forEach(function(o){return o(n)}),n.interactionId||n.entryType==="first-input"){var e=Gs[Gs.length-1],t=Th.get(n.interactionId);if(t||Gs.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var s={id:n.interactionId,latency:n.duration,entries:[n]};Th.set(s.id,s),Gs.push(s)}Gs.sort(function(o,c){return c.latency-o.latency}),Gs.length>10&&Gs.splice(10).forEach(function(o){return Th.delete(o.id)})}}},xy=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=vy(n),document.visibilityState==="hidden"?n():(t=e(n),$m(n)),t},CT=[200,500],H3=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},yy(function(){var t;B3();var s,o=Vo("INP"),c=function(_){xy(function(){_.forEach(q3);var y=F3();y&&y.latency!==o.value&&(o.value=y.latency,o.entries=y.entries,s())})},f=hu("event",c,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});s=Uo(n,o,CT,e.reportAllChanges),f&&(f.observe({type:"first-input",buffered:!0}),$m(function(){c(f.takeRecords()),s(!0)}),od(function(){B1=z1(),Gs.length=0,Th.clear(),o=Vo("INP"),s=Uo(n,o,CT,e.reportAllChanges)}))}))},$c=[],bo=[],G_=0,by=new WeakMap,Kc=new Map,Z_=-1,G3=function(n){$c=$c.concat(n),q1()},q1=function(){Z_<0&&(Z_=xy(Z3))},Z3=function(){Kc.size>10&&Kc.forEach(function(f,_){Th.has(_)||Kc.delete(_)});var n=Gs.map(function(f){return by.get(f.entries[0])}),e=bo.length-50;bo=bo.filter(function(f,_){return _>=e||n.includes(f)});for(var t=new Set,s=0;s<bo.length;s++){var o=bo[s];H1(o.startTime,o.processingEnd).forEach(function(f){t.add(f)})}var c=$c.length-1-50;$c=$c.filter(function(f,_){return f.startTime>G_&&_>c||t.has(f)}),Z_=-1};F1.push(function(n){n.interactionId&&n.target&&!Kc.has(n.interactionId)&&Kc.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;G_=Math.max(G_,n.processingEnd);for(var s=bo.length-1;s>=0;s--){var o=bo[s];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},bo.push(e)),(n.interactionId||n.entryType==="first-input")&&by.set(n,e),q1()});var H1=function(n,e){for(var t,s=[],o=0;t=$c[o];o++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;s.push(t)}return s},$3=function(n,e){ET||(ET=hu("long-animation-frame",G3)),H3(function(t){var s=function(o){var c=o.entries[0],f=by.get(c),_=c.processingStart,y=f.processingEnd,b=f.entries.sort(function(z,W){return z.processingStart-W.processingStart}),E=H1(c.startTime,y),A=o.entries.find(function(z){return z.target}),I=A&&A.target||Kc.get(c.interactionId),F=[c.startTime+c.duration,y].concat(E.map(function(z){return z.startTime+z.duration})),D=Math.max.apply(Math,F),M={interactionTarget:py(I),interactionTargetElement:I,interactionType:c.name.startsWith("key")?"keyboard":"pointer",interactionTime:c.startTime,nextPaintTime:D,processedEventEntries:b,longAnimationFrameEntries:E,inputDelay:_-c.startTime,processingDuration:y-_,presentationDelay:Math.max(D-y,0),loadState:L1(c.startTime)};return Object.assign(o,{attribution:M})}(t);n(s)},e)},RT=[2500,4e3],t_={},K3=function(n,e){(function(t,s){s=s||{},yy(function(){var o,c=V1(),f=Vo("LCP"),_=function(E){s.reportAllChanges||(E=E.slice(-1)),E.forEach(function(A){A.startTime<c.firstHiddenTime&&(f.value=Math.max(A.startTime-gy(),0),f.entries=[A],o())})},y=hu("largest-contentful-paint",_);if(y){o=Uo(t,f,RT,s.reportAllChanges);var b=vy(function(){t_[f.id]||(_(y.takeRecords()),y.disconnect(),t_[f.id]=!0,o(!0))});["keydown","click"].forEach(function(E){addEventListener(E,function(){return xy(b)},{once:!0,capture:!0})}),$m(b),od(function(E){f=Vo("LCP"),o=Uo(t,f,RT,s.reportAllChanges),_y(function(){f.value=performance.now()-E.timeStamp,t_[f.id]=!0,o(!0)})})}})})(function(t){var s=function(o){var c={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var f=Zm();if(f){var _=f.activationStart||0,y=o.entries[o.entries.length-1],b=y.url&&performance.getEntriesByType("resource").filter(function(D){return D.name===y.url})[0],E=Math.max(0,f.responseStart-_),A=Math.max(E,b?(b.requestStart||b.startTime)-_:0),I=Math.max(A,b?b.responseEnd-_:0),F=Math.max(I,y.startTime-_);c={element:py(y.element),timeToFirstByte:E,resourceLoadDelay:A-E,resourceLoadDuration:I-A,elementRenderDelay:F-I,navigationEntry:f,lcpEntry:y},y.url&&(c.url=y.url),b&&(c.lcpResourceEntry=b)}}return Object.assign(o,{attribution:c})}(t);n(s)},e)};const kT="@firebase/performance",$_="0.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=$_,W3="FB-PERF-TRACE-START",Y3="FB-PERF-TRACE-STOP",K_="FB-PERF-TRACE-MEASURE",Z1="_wt_",$1="_fp",K1="_fcp",W1="_fid",Y1="_lcp",Q3="lcp_element",Q1="_inp",X3="inp_interactionTarget",X1="_cls",J3="cls_largestShiftTarget",J1="@firebase/performance/config",eA="@firebase/performance/configexpire",e6="performance",tA="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Jn=new Bo(e6,tA,t6);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Kh(tA);pa.logLevel=lt.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_,nA;class wn{constructor(e){if(this.window=e,!e)throw Jn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=K3,this.onINP=$3,this.onCLS=U3}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,s){!this.performance||!this.performance.measure||this.performance.measure(e,t,s)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!AE()?(pa.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):uv()?!0:(pa.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const c of o.getEntries())t(c)}).observe({entryTypes:[e]})}static getInstance(){return n_===void 0&&(n_=new wn(nA)),n_}}function n6(n){nA=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iA;function i6(n){const e=n.getId();return e.then(t=>{iA=t}),e}function wy(){return iA}function s6(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(n,e){const t=n.length-e.length;if(t<0||t>1)throw Jn.create("invalid String merger input");const s=[];for(let o=0;o<n.length;o++)s.push(n.charAt(o)),e.length>o&&s.push(e.charAt(o));return s.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i_;class mi{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=PT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=PT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12,this.logMaxFlushSize=40}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return i_===void 0&&(i_=new mi),i_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eh;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(Eh||(Eh={}));const r6=["firebase_","google_","ga_"],a6=new RegExp("^[a-zA-Z]\\w*$"),o6=40,W_=100;function l6(){const n=wn.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function c6(){switch(wn.getInstance().document.visibilityState){case"visible":return Eh.VISIBLE;case"hidden":return Eh.HIDDEN;default:return Eh.UNKNOWN}}function u6(){const e=wn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function h6(n){return n.length===0||n.length>o6?!1:!r6.some(t=>n.startsWith(t))&&!!n.match(a6)}function d6(n){return n.length!==0&&n.length<=W_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n){const e=n.options?.appId;if(!e)throw Jn.create("no app id");return e}function f6(n){const e=n.options?.projectId;if(!e)throw Jn.create("no project id");return e}function m6(n){const e=n.options?.apiKey;if(!e)throw Jn.create("no api key");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6="0.0.1",Zi={loggingEnabled:!0},g6="FIREBASE_INSTALLATIONS_AUTH";function _6(n,e){const t=v6();return t?(jT(t),Promise.resolve()):b6(n,e).then(jT).then(s=>y6(s),()=>{})}function v6(){const n=wn.getInstance().localStorage;if(!n)return;const e=n.getItem(eA);if(!e||!w6(e))return;const t=n.getItem(J1);if(t)try{return JSON.parse(t)}catch{return}}function y6(n){const e=wn.getInstance().localStorage;!n||!e||(e.setItem(J1,JSON.stringify(n)),e.setItem(eA,String(Date.now()+mi.getInstance().configTimeToLive*60*60*1e3)))}const x6="Could not fetch config, will use default configs";function b6(n,e){return s6(n.installations).then(t=>{const s=f6(n.app),o=m6(n.app),c=`https://firebaseremoteconfig.googleapis.com/v1/projects/${s}/namespaces/fireperf:fetch?key=${o}`,f=new Request(c,{method:"POST",headers:{Authorization:`${g6} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:sA(n.app),app_version:G1,sdk_version:p6})});return fetch(f).then(_=>{if(_.ok)return _.json();throw Jn.create("RC response not ok")})}).catch(()=>{pa.info(x6)})}function jT(n){if(!n)return n;const e=mi.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Zi.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Zi.logSource&&(e.logSource=Zi.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Zi.logEndPointUrl&&(e.logEndPointUrl=Zi.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Zi.transportKey&&(e.transportKey=Zi.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):Zi.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Zi.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):Zi.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Zi.tracesSamplingRate),t.fpr_log_max_flush_size?e.logMaxFlushSize=Number(t.fpr_log_max_flush_size):Zi.logMaxFlushSize&&(e.logMaxFlushSize=Zi.logMaxFlushSize),e.logTraceAfterSampling=MT(e.tracesSamplingRate),e.logNetworkAfterSampling=MT(e.networkRequestsSamplingRate),n}function w6(n){return Number(n)>Date.now()}function MT(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ty=1,s_;function rA(n){return Ty=2,s_=s_||E6(n),s_}function T6(){return Ty===3}function E6(n){return N6().then(()=>i6(n.installations)).then(e=>_6(n,e)).then(()=>DT(),()=>DT())}function N6(){const n=wn.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function DT(){Ty=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=10*1e3,S6=5.5*1e3,A6=1e3,oA=3,I6=65536,C6=new TextEncoder;let Df=oA,_s=[],LT=!1;function R6(){LT||(Ey(S6),LT=!0)}function Ey(n){setTimeout(()=>{Df<=0||(_s.length>0&&k6(),Ey(aA))},n)}function k6(){const n=_s.splice(0,A6),e=Y_(n);P6(e).then(()=>{Df=oA}).catch(()=>{_s=[...n,..._s],Df--,pa.info(`Tries left: ${Df}.`),Ey(aA)})}function Y_(n){const e=n.map(s=>({source_extension_json_proto3:s.message,event_time_ms:String(s.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:mi.getInstance().logSource,log_event:e};return JSON.stringify(t)}function P6(n){const e=mi.getInstance().getFlTransportFullUrl();return C6.encode(n).length<=I6&&navigator.sendBeacon&&navigator.sendBeacon(e,n)?Promise.resolve():fetch(e,{method:"POST",body:n})}function j6(n){if(!n.eventTime||!n.message)throw Jn.create("invalid cc log");_s=[..._s,n]}function M6(n){return(...e)=>{const t=n(...e);j6({message:t,eventTime:Date.now()})}}function D6(){const n=mi.getInstance().getFlTransportFullUrl();for(;_s.length>0;){const e=_s.splice(-mi.getInstance().logMaxFlushSize),t=Y_(e);if(!(navigator.sendBeacon&&navigator.sendBeacon(n,t))){_s=[..._s,...e];break}}if(_s.length>0){const e=Y_(_s);fetch(n,{method:"POST",body:e}).catch(()=>{pa.info("Failed flushing queued events.")})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;function lA(n,e){Nh||(Nh={send:M6(V6),flush:D6}),Nh.send(n,e)}function bf(n){const e=mi.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||wn.getInstance().requiredApisAvailable()&&(T6()?r_(n):rA(n.performanceController).then(()=>r_(n),()=>r_(n)))}function L6(){Nh&&Nh.flush()}function r_(n){if(!wy())return;const e=mi.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||lA(n,1)}function O6(n){const e=mi.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,s=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===s||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||lA(n,0)}function V6(n,e){return e===0?U6(n):z6(n)}function U6(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:cA(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function z6(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const s={application_info:cA(n.performanceController.app),trace_metric:e};return JSON.stringify(s)}function cA(n){return{google_app_id:sA(n),app_instance_id:wy(),web_app_info:{sdk_version:G1,page_url:wn.getInstance().getUrl(),service_worker_status:l6(),visibility_state:c6(),effective_connection_type:u6()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n,e){const t=e;if(!t||t.responseStart===void 0)return;const s=wn.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+s)*1e3),c=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,f=Math.floor((t.responseEnd-t.startTime)*1e3),_=t.name&&t.name.split("?")[0],y={performanceController:n,url:_,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:c,timeToResponseCompletedUs:f};O6(y)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6=100,F6="_",q6=[$1,K1,W1,Y1,X1,Q1];function H6(n,e){return n.length===0||n.length>B6?!1:e&&e.startsWith(Z1)&&q6.indexOf(n)>-1||!n.startsWith(F6)}function G6(n){const e=Math.floor(n);return e<n&&pa.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t,s=!1,o){this.performanceController=e,this.name=t,this.isAuto=s,this.state=1,this.customAttributes={},this.counters={},this.api=wn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${W3}-${this.randomId}-${this.name}`,this.traceStopMark=`${Y3}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${K_}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Jn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Jn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),bf(this)}record(e,t,s){if(e<=0)throw Jn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Jn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),s&&s.attributes&&(this.customAttributes={...s.attributes}),s&&s.metrics)for(const o of Object.keys(s.metrics))isNaN(Number(s.metrics[o]))||(this.counters[o]=Math.floor(Number(s.metrics[o])));bf(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(H6(e,this.name))this.counters[e]=G6(t??0);else throw Jn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const s=h6(e),o=d6(t);if(s&&o){this.customAttributes[e]=t;return}if(!s)throw Jn.create("invalid attribute name",{attributeName:e});if(!o)throw Jn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return{...this.customAttributes}}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,s,o,c){const f=wn.getInstance().getUrl();if(!f)return;const _=new zh(e,Z1+f,!0),y=Math.floor(wn.getInstance().getTimeOrigin()*1e3);_.setStartTime(y),t&&t[0]&&(_.setDuration(Math.floor(t[0].duration*1e3)),_.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),_.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),_.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const b="first-paint",E="first-contentful-paint";if(s){const A=s.find(F=>F.name===b);A&&A.startTime&&_.putMetric($1,Math.floor(A.startTime*1e3));const I=s.find(F=>F.name===E);I&&I.startTime&&_.putMetric(K1,Math.floor(I.startTime*1e3)),c&&_.putMetric(W1,Math.floor(c*1e3))}this.addWebVitalMetric(_,Y1,Q3,o.lcp),this.addWebVitalMetric(_,X1,J3,o.cls),this.addWebVitalMetric(_,Q1,X3,o.inp),bf(_),L6()}static addWebVitalMetric(e,t,s,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&(o.elementAttribution.length>W_?e.putAttribute(s,o.elementAttribution.substring(0,W_)):e.putAttribute(s,o.elementAttribution)))}static createUserTimingTrace(e,t){const s=new zh(e,t,!1,t);bf(s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf={},VT=!1,uA;function UT(n){wy()&&(setTimeout(()=>$6(n),0),setTimeout(()=>Z6(n),0),setTimeout(()=>K6(n),0))}function Z6(n){const e=wn.getInstance(),t=e.getEntriesByType("resource");for(const s of t)OT(n,s);e.setupObserver("resource",s=>OT(n,s))}function $6(n){const e=wn.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>a_(n)):e.document.addEventListener("unload",()=>a_(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&a_(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{uA=t}),e.onLCP(t=>{Lf.lcp={value:t.value,elementAttribution:t.attribution?.element}}),e.onCLS(t=>{Lf.cls={value:t.value,elementAttribution:t.attribution?.largestShiftTarget}}),e.onINP(t=>{Lf.inp={value:t.value,elementAttribution:t.attribution?.interactionTarget}})}function K6(n){const e=wn.getInstance(),t=e.getEntriesByType("measure");for(const s of t)zT(n,s);e.setupObserver("measure",s=>zT(n,s))}function zT(n,e){const t=e.name;t.substring(0,K_.length)!==K_&&zh.createUserTimingTrace(n,t)}function a_(n){if(!VT){VT=!0;const e=wn.getInstance(),t=e.getEntriesByType("navigation"),s=e.getEntriesByType("paint");setTimeout(()=>{zh.createOobTrace(n,t,s,Lf,uA)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),wn.getInstance().requiredApisAvailable()?hv().then(t=>{t&&(R6(),rA(this).then(()=>UT(this),()=>UT(this)),this.initialized=!0)}).catch(t=>{pa.info(`Environment doesn't support IndexedDB: ${t}`)}):pa.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){mi.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return mi.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){mi.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return mi.getInstance().dataCollectionEnabled}}const Y6="[DEFAULT]";function Q6(n=Wh()){return n=jt(n),_a(n,"performance").getImmediate()}const X6=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),s=n.getProvider("installations-internal").getImmediate();if(t.name!==Y6)throw Jn.create("FB not default");if(typeof window>"u")throw Jn.create("no window");n6(window);const o=new W6(t,s);return o._init(e),o};function J6(){ws(new Yi("performance",X6,"PUBLIC")),ti(kT,$_),ti(kT,$_,"esm2020")}J6();function eV(){const n=[];if(n.length>0)throw new Error(`Missing Firebase environment variables: ${n.join(", ")}. Create a .env.local with VITE_ variables as documented in README.`)}eV();const tV={apiKey:"AIzaSyC7FbIWC863CPOLAgHBSjh63lcZtmbftxc",authDomain:"travel-v2-e5507.firebaseapp.com",projectId:"travel-v2-e5507",storageBucket:"travel-v2-e5507.firebasestorage.app",messagingSenderId:"355011873482",appId:"1:355011873482:web:28e2975436f93b85a60233",measurementId:"G-VVVXYDFB1B"},Bh=kE(tV),Sl=Gj(Bh),cn=HL(Bh),Ny=d4(Bh);let nV=null,iV=null;if(typeof window<"u")try{nV=k3(Bh),iV=Q6(Bh),console.log("📊 Firebase Analytics & Performance 초기화됨")}catch(n){console.warn("⚠️ Analytics/Performance 초기화 실패:",n)}const hA=V.createContext(void 0);function Qs(){const n=V.useContext(hA);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function sV({children:n}){const[e,t]=V.useState(null),[s,o]=V.useState(!0),[c,f]=V.useState(null);V.useEffect(()=>jP(Sl,M=>{t(M),o(!1)}),[]);const F={user:e,loading:s,error:c,signInAnonymously:async()=>{try{f(null),o(!0),await wP(Sl)}catch(D){f(D instanceof Error?D.message:"익명 로그인에 실패했습니다.")}finally{o(!1)}},signInWithEmailAndPassword:async(D,M)=>{try{f(null),o(!0),await IP(Sl,D,M)}catch(z){throw f(z instanceof Error?z.message:"이메일 로그인에 실패했습니다."),z}finally{o(!1)}},signUpWithEmailAndPassword:async(D,M,z)=>{try{f(null),o(!0);const W=await AP(Sl,D,M);return z&&W.user&&await RP(W.user,{displayName:z}),W}catch(W){throw f(W instanceof Error?W.message:"회원가입에 실패했습니다."),W}finally{o(!1)}},signInWithGoogle:async()=>{try{f(null),o(!0);const D=new sa;await ej(Sl,D)}catch(D){throw f(D instanceof Error?D.message:"Google 로그인에 실패했습니다."),D}finally{o(!1)}},resetPassword:async D=>{try{f(null),await SP(Sl,D)}catch(M){throw f(M instanceof Error?M.message:"비밀번호 재설정에 실패했습니다."),M}},signOut:async()=>{try{return f(null),await MP(Sl),{success:!0}}catch(D){const M=D instanceof Error?D.message:"로그아웃에 실패했습니다.";return f(M),{success:!1,error:M}}}};return d.jsx(hA.Provider,{value:F,children:n})}V.createContext(void 0);function dA(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=dA(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function rV(){for(var n,e,t=0,s="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=dA(n))&&(s&&(s+=" "),s+=e);return s}const Sy="-",aV=n=>{const e=lV(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:f=>{const _=f.split(Sy);return _[0]===""&&_.length!==1&&_.shift(),fA(_,e)||oV(f)},getConflictingClassGroupIds:(f,_)=>{const y=t[f]||[];return _&&s[f]?[...y,...s[f]]:y}}},fA=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),o=s?fA(n.slice(1),s):void 0;if(o)return o;if(e.validators.length===0)return;const c=n.join(Sy);return e.validators.find(({validator:f})=>f(c))?.classGroupId},BT=/^\[(.+)\]$/,oV=n=>{if(BT.test(n)){const e=BT.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},lV=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return uV(Object.entries(n.classGroups),t).forEach(([c,f])=>{Q_(f,s,c,e)}),s},Q_=(n,e,t,s)=>{n.forEach(o=>{if(typeof o=="string"){const c=o===""?e:FT(e,o);c.classGroupId=t;return}if(typeof o=="function"){if(cV(o)){Q_(o(s),e,t,s);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([c,f])=>{Q_(f,FT(e,c),t,s)})})},FT=(n,e)=>{let t=n;return e.split(Sy).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},cV=n=>n.isThemeGetter,uV=(n,e)=>e?n.map(([t,s])=>{const o=s.map(c=>typeof c=="string"?e+c:typeof c=="object"?Object.fromEntries(Object.entries(c).map(([f,_])=>[e+f,_])):c);return[t,o]}):n,hV=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const o=(c,f)=>{t.set(c,f),e++,e>n&&(e=0,s=t,t=new Map)};return{get(c){let f=t.get(c);if(f!==void 0)return f;if((f=s.get(c))!==void 0)return o(c,f),f},set(c,f){t.has(c)?t.set(c,f):o(c,f)}}},mA="!",dV=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,o=e[0],c=e.length,f=_=>{const y=[];let b=0,E=0,A;for(let z=0;z<_.length;z++){let W=_[z];if(b===0){if(W===o&&(s||_.slice(z,z+c)===e)){y.push(_.slice(E,z)),E=z+c;continue}if(W==="/"){A=z;continue}}W==="["?b++:W==="]"&&b--}const I=y.length===0?_:_.substring(E),F=I.startsWith(mA),D=F?I.substring(1):I,M=A&&A>E?A-E:void 0;return{modifiers:y,hasImportantModifier:F,baseClassName:D,maybePostfixModifierPosition:M}};return t?_=>t({className:_,parseClassName:f}):f},fV=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},mV=n=>({cache:hV(n.cacheSize),parseClassName:dV(n),...aV(n)}),pV=/\s+/,gV=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:o}=e,c=[],f=n.trim().split(pV);let _="";for(let y=f.length-1;y>=0;y-=1){const b=f[y],{modifiers:E,hasImportantModifier:A,baseClassName:I,maybePostfixModifierPosition:F}=t(b);let D=!!F,M=s(D?I.substring(0,F):I);if(!M){if(!D){_=b+(_.length>0?" "+_:_);continue}if(M=s(I),!M){_=b+(_.length>0?" "+_:_);continue}D=!1}const z=fV(E).join(":"),W=A?z+mA:z,$=W+M;if(c.includes($))continue;c.push($);const te=o(M,D);for(let _e=0;_e<te.length;++_e){const ge=te[_e];c.push(W+ge)}_=b+(_.length>0?" "+_:_)}return _};function _V(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=pA(e))&&(s&&(s+=" "),s+=t);return s}const pA=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=pA(n[s]))&&(t&&(t+=" "),t+=e);return t};function vV(n,...e){let t,s,o,c=f;function f(y){const b=e.reduce((E,A)=>A(E),n());return t=mV(b),s=t.cache.get,o=t.cache.set,c=_,_(y)}function _(y){const b=s(y);if(b)return b;const E=gV(y,t);return o(y,E),E}return function(){return c(_V.apply(null,arguments))}}const qt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},gA=/^\[(?:([a-z-]+):)?(.+)\]$/i,yV=/^\d+\/\d+$/,xV=new Set(["px","full","screen"]),bV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,TV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ia=n=>Wc(n)||xV.has(n)||yV.test(n),po=n=>du(n,"length",jV),Wc=n=>!!n&&!Number.isNaN(Number(n)),o_=n=>du(n,"number",Wc),ah=n=>!!n&&Number.isInteger(Number(n)),SV=n=>n.endsWith("%")&&Wc(n.slice(0,-1)),nt=n=>gA.test(n),go=n=>bV.test(n),AV=new Set(["length","size","percentage"]),IV=n=>du(n,AV,_A),CV=n=>du(n,"position",_A),RV=new Set(["image","url"]),kV=n=>du(n,RV,DV),PV=n=>du(n,"",MV),oh=()=>!0,du=(n,e,t)=>{const s=gA.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},jV=n=>wV.test(n)&&!TV.test(n),_A=()=>!1,MV=n=>EV.test(n),DV=n=>NV.test(n),LV=()=>{const n=qt("colors"),e=qt("spacing"),t=qt("blur"),s=qt("brightness"),o=qt("borderColor"),c=qt("borderRadius"),f=qt("borderSpacing"),_=qt("borderWidth"),y=qt("contrast"),b=qt("grayscale"),E=qt("hueRotate"),A=qt("invert"),I=qt("gap"),F=qt("gradientColorStops"),D=qt("gradientColorStopPositions"),M=qt("inset"),z=qt("margin"),W=qt("opacity"),$=qt("padding"),te=qt("saturate"),_e=qt("scale"),ge=qt("sepia"),xe=qt("skew"),B=qt("space"),k=qt("translate"),j=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",nt,e],Z=()=>[nt,e],O=()=>["",ia,po],Ce=()=>["auto",Wc,nt],Je=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],se=()=>["start","end","center","between","around","evenly","stretch"],ce=()=>["","0",nt],ve=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Te=()=>[Wc,nt];return{cacheSize:500,separator:":",theme:{colors:[oh],spacing:[ia,po],blur:["none","",go,nt],brightness:Te(),borderColor:[n],borderRadius:["none","","full",go,nt],borderSpacing:Z(),borderWidth:O(),contrast:Te(),grayscale:ce(),hueRotate:Te(),invert:ce(),gap:Z(),gradientColorStops:[n],gradientColorStopPositions:[SV,po],inset:q(),margin:q(),opacity:Te(),padding:Z(),saturate:Te(),scale:Te(),sepia:ce(),skew:Te(),space:Z(),translate:Z()},classGroups:{aspect:[{aspect:["auto","square","video",nt]}],container:["container"],columns:[{columns:[go]}],"break-after":[{"break-after":ve()}],"break-before":[{"break-before":ve()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Je(),nt]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[M]}],"inset-x":[{"inset-x":[M]}],"inset-y":[{"inset-y":[M]}],start:[{start:[M]}],end:[{end:[M]}],top:[{top:[M]}],right:[{right:[M]}],bottom:[{bottom:[M]}],left:[{left:[M]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ah,nt]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",nt]}],grow:[{grow:ce()}],shrink:[{shrink:ce()}],order:[{order:["first","last","none",ah,nt]}],"grid-cols":[{"grid-cols":[oh]}],"col-start-end":[{col:["auto",{span:["full",ah,nt]},nt]}],"col-start":[{"col-start":Ce()}],"col-end":[{"col-end":Ce()}],"grid-rows":[{"grid-rows":[oh]}],"row-start-end":[{row:["auto",{span:[ah,nt]},nt]}],"row-start":[{"row-start":Ce()}],"row-end":[{"row-end":Ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",nt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",nt]}],gap:[{gap:[I]}],"gap-x":[{"gap-x":[I]}],"gap-y":[{"gap-y":[I]}],"justify-content":[{justify:["normal",...se()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...se(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...se(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[$]}],px:[{px:[$]}],py:[{py:[$]}],ps:[{ps:[$]}],pe:[{pe:[$]}],pt:[{pt:[$]}],pr:[{pr:[$]}],pb:[{pb:[$]}],pl:[{pl:[$]}],m:[{m:[z]}],mx:[{mx:[z]}],my:[{my:[z]}],ms:[{ms:[z]}],me:[{me:[z]}],mt:[{mt:[z]}],mr:[{mr:[z]}],mb:[{mb:[z]}],ml:[{ml:[z]}],"space-x":[{"space-x":[B]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[B]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",nt,e]}],"min-w":[{"min-w":[nt,e,"min","max","fit"]}],"max-w":[{"max-w":[nt,e,"none","full","min","max","fit","prose",{screen:[go]},go]}],h:[{h:[nt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[nt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[nt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",go,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",o_]}],"font-family":[{font:[oh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",nt]}],"line-clamp":[{"line-clamp":["none",Wc,o_]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ia,nt]}],"list-image":[{"list-image":["none",nt]}],"list-style-type":[{list:["none","disc","decimal",nt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[W]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ia,po]}],"underline-offset":[{"underline-offset":["auto",ia,nt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[W]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Je(),CV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",IV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kV]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[D]}],"gradient-via-pos":[{via:[D]}],"gradient-to-pos":[{to:[D]}],"gradient-from":[{from:[F]}],"gradient-via":[{via:[F]}],"gradient-to":[{to:[F]}],rounded:[{rounded:[c]}],"rounded-s":[{"rounded-s":[c]}],"rounded-e":[{"rounded-e":[c]}],"rounded-t":[{"rounded-t":[c]}],"rounded-r":[{"rounded-r":[c]}],"rounded-b":[{"rounded-b":[c]}],"rounded-l":[{"rounded-l":[c]}],"rounded-ss":[{"rounded-ss":[c]}],"rounded-se":[{"rounded-se":[c]}],"rounded-ee":[{"rounded-ee":[c]}],"rounded-es":[{"rounded-es":[c]}],"rounded-tl":[{"rounded-tl":[c]}],"rounded-tr":[{"rounded-tr":[c]}],"rounded-br":[{"rounded-br":[c]}],"rounded-bl":[{"rounded-bl":[c]}],"border-w":[{border:[_]}],"border-w-x":[{"border-x":[_]}],"border-w-y":[{"border-y":[_]}],"border-w-s":[{"border-s":[_]}],"border-w-e":[{"border-e":[_]}],"border-w-t":[{"border-t":[_]}],"border-w-r":[{"border-r":[_]}],"border-w-b":[{"border-b":[_]}],"border-w-l":[{"border-l":[_]}],"border-opacity":[{"border-opacity":[W]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[_]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[_]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[W]}],"divide-style":[{divide:ee()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[ia,nt]}],"outline-w":[{outline:[ia,po]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:O()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[W]}],"ring-offset-w":[{"ring-offset":[ia,po]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",go,PV]}],"shadow-color":[{shadow:[oh]}],opacity:[{opacity:[W]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[y]}],"drop-shadow":[{"drop-shadow":["","none",go,nt]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[A]}],saturate:[{saturate:[te]}],sepia:[{sepia:[ge]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[y]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[A]}],"backdrop-opacity":[{"backdrop-opacity":[W]}],"backdrop-saturate":[{"backdrop-saturate":[te]}],"backdrop-sepia":[{"backdrop-sepia":[ge]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",nt]}],duration:[{duration:Te()}],ease:[{ease:["linear","in","out","in-out",nt]}],delay:[{delay:Te()}],animate:[{animate:["none","spin","ping","pulse","bounce",nt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_e]}],"scale-x":[{"scale-x":[_e]}],"scale-y":[{"scale-y":[_e]}],rotate:[{rotate:[ah,nt]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[xe]}],"skew-y":[{"skew-y":[xe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",nt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Z()}],"scroll-mx":[{"scroll-mx":Z()}],"scroll-my":[{"scroll-my":Z()}],"scroll-ms":[{"scroll-ms":Z()}],"scroll-me":[{"scroll-me":Z()}],"scroll-mt":[{"scroll-mt":Z()}],"scroll-mr":[{"scroll-mr":Z()}],"scroll-mb":[{"scroll-mb":Z()}],"scroll-ml":[{"scroll-ml":Z()}],"scroll-p":[{"scroll-p":Z()}],"scroll-px":[{"scroll-px":Z()}],"scroll-py":[{"scroll-py":Z()}],"scroll-ps":[{"scroll-ps":Z()}],"scroll-pe":[{"scroll-pe":Z()}],"scroll-pt":[{"scroll-pt":Z()}],"scroll-pr":[{"scroll-pr":Z()}],"scroll-pb":[{"scroll-pb":Z()}],"scroll-pl":[{"scroll-pl":Z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ia,po,o_]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},OV=vV(LV);function Nr(...n){return OV(rV(n))}const je=({children:n,className:e,variant:t="default",withWaveEffect:s=!1,hoverable:o=!0,onClick:c,onKeyDown:f,..._})=>{const y={default:"bg-glass-light backdrop-blur-md border border-white/20",strong:"bg-glass-strong backdrop-blur-xl border border-white/30",light:"bg-glass-light backdrop-blur-sm border border-white/10",travel:"bg-gradient-to-br from-primary-500/10 via-glass-medium to-travel-blue/10 backdrop-blur-lg border border-primary-300/20"},b=E=>{c&&(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),c(E)),f?.(E)};return d.jsxs("div",{className:Nr(y[t],"rounded-2xl p-6 shadow-lg",o&&"transition-all duration-300 hover:bg-white/15 hover:border-white/30 hover:translate-y-[-2px] hover:shadow-xl",s&&"relative overflow-hidden","transform-gpu will-change-transform",e),onClick:c,onKeyDown:b,role:c?"button":void 0,tabIndex:c?0:void 0,..._,children:[s&&d.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent wave-animation"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-full h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent wave-animation",style:{animationDelay:"1s"}})]}),d.jsx("div",{className:Nr("relative z-10",s&&"relative"),children:n})]})},Le=({children:n,onClick:e,variant:t="primary",size:s="md",className:o,ariaLabel:c,disabled:f=!1,..._})=>{const[y,b]=V.useState(!1),E=()=>{f||(b(!0),setTimeout(()=>b(!1),600),e?.())},A={primary:"bg-primary-500/20 backdrop-blur-xl border border-primary-300/30 text-white hover:bg-primary-400/30",secondary:"bg-glass-medium backdrop-blur-md border border-white/20 text-white/90 hover:bg-glass-strong",ghost:"bg-glass-light backdrop-blur-sm border border-white/10 text-white/80 hover:bg-glass-medium",travel:"bg-gradient-to-r from-travel-blue/20 to-travel-purple/20 backdrop-blur-lg border border-travel-blue/30 text-white hover:from-travel-blue/30 hover:to-travel-purple/30"},I={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return d.jsxs("button",{onClick:E,"aria-label":c,disabled:f,className:Nr("relative overflow-hidden rounded-xl font-semibold transition-all duration-300","active:scale-95 transform focus:outline-none focus:ring-2 focus:ring-white/50","touch-manipulation transform-gpu will-change-transform","flex items-center justify-center",A[t],I[s],f&&"opacity-50 cursor-not-allowed",o),..._,children:[d.jsx("div",{className:Nr("absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent","wave-animation",f&&"hidden")}),y&&d.jsx("div",{className:"absolute inset-0 bg-white/20 wave-ripple rounded-xl"}),d.jsx("span",{className:"relative z-10 break-keep-ko flex items-center justify-center w-full h-full",children:n})]})},VV=({trip:n,onClick:e,onEdit:t,onDelete:s,className:o,showActions:c=!1,...f})=>{const _=E=>new Date(E).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),y=()=>{const E=new Date(n.start_date),A=new Date(n.end_date),I=Math.abs(A.getTime()-E.getTime());return`${Math.ceil(I/(1e3*60*60*24))+1}일`},b=E=>{E.target.closest(".action-button")||e?.()};return d.jsxs(je,{variant:"travel",hoverable:!!e,withWaveEffect:!0,className:Nr("cursor-pointer group transition-all duration-300","hover:scale-105 hover:shadow-2xl",o),onClick:b,...f,children:[d.jsxs("div",{className:"relative w-full h-32 sm:h-36 md:h-40 mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-travel-blue/20 to-travel-purple/20",children:[n.cover_image?d.jsx("img",{src:n.cover_image,alt:n.title,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(KT,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-white/60"})}),d.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-black/30 backdrop-blur-sm rounded-full px-2 py-1 sm:px-3 sm:py-1",children:d.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold",children:y()})}),c&&(t||s)&&d.jsxs("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3 flex items-center space-x-1 opacity-80 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[t&&d.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),t()},className:"action-button p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/40 transition-colors backdrop-blur-sm","aria-label":"여행 편집",children:d.jsx(Of,{className:"w-3 h-3 text-blue-300"})}),s&&d.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),window.confirm("이 여행을 삭제하시겠습니까?")&&s()},className:"action-button p-2 rounded-lg bg-red-500/20 hover:bg-red-500/40 transition-colors backdrop-blur-sm","aria-label":"여행 삭제",children:d.jsx(Vf,{className:"w-3 h-3 text-red-300"})})]})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white group-hover:text-travel-blue transition-colors line-clamp-2",children:n.title}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(Bn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"text-xs sm:text-sm",children:n.country})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(ys,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsxs("span",{className:"text-xs sm:text-sm",children:[_(n.start_date)," ~ ",_(n.end_date)]})]}),n.plans_count!==void 0&&d.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[d.jsx("span",{className:"text-white/60 text-xs sm:text-sm",children:"일정"}),d.jsxs("span",{className:"text-travel-orange font-semibold text-xs sm:text-sm",children:[n.plans_count,"개"]})]})]})]})};function Ys(){const n=Es(),e=n.pathname==="/",t=n.pathname==="/settings",s=n.pathname==="/trip-map";return d.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",role:"banner","aria-label":"페이지 상단 네비게이션",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(Eo,{to:"/",children:d.jsx(Le,{variant:e?"primary":"ghost",size:"sm",ariaLabel:"홈으로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(zI,{size:20,className:"icon-enhanced"})})})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Eo,{to:"/trip-map",children:d.jsx(Le,{variant:s?"primary":"ghost",size:"sm",ariaLabel:"지도로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(WT,{size:20,className:"icon-enhanced"})})}),d.jsx(Eo,{to:"/settings",children:d.jsx(Le,{variant:t?"primary":"ghost",size:"sm",ariaLabel:"설정으로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(Uf,{size:20,className:"icon-enhanced"})})})]})]})})})}function ga(){const{user:n}=Qs();return d.jsx("footer",{className:"px-4 pb-6 mb-[15vh]",role:"contentinfo","aria-label":"페이지 하단 정보",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs(je,{variant:"light",className:"p-6 relative overflow-hidden group",children:[d.jsxs("div",{className:"absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity duration-500",children:[d.jsx("div",{className:"absolute top-2 left-4 w-2 h-2 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-full animate-pulse"}),d.jsx("div",{className:"absolute bottom-4 right-6 w-1 h-1 bg-gradient-to-r from-warning-400 to-error-400 rounded-full animate-bounce"}),d.jsx("div",{className:"absolute top-1/2 left-1/4 w-1 h-1 bg-gradient-to-r from-success-400 to-info-400 rounded-full animate-ping"})]}),d.jsx("div",{className:"relative z-10",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shadow-lg",children:d.jsx(BI,{size:14,className:"text-white icon-enhanced",strokeWidth:2})}),d.jsx("span",{className:"text-white font-medium text-sm tracking-normal",children:"Moonwave Travel"})]}),d.jsx("div",{className:"text-center",children:d.jsxs("p",{className:"text-white/80 text-sm break-keep-ko leading-relaxed tracking-normal",children:["© 2025 Moonwave Travel •"," ",d.jsx("span",{className:"text-white font-medium",children:n?.displayName||n?.email?.split("@")[0]||"사용자"}),"님의 여행 공간"]})}),d.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[d.jsx(Eo,{to:"/about",className:"text-white/80 text-sm hover:text-primary-400 transition-colors duration-300 tracking-normal underline decoration-primary-400/50 hover:decoration-primary-400",children:"About Moonwave Travel"}),d.jsx("span",{className:"text-white/80 text-sm",children:"•"}),d.jsx(Eo,{to:"/terms",className:"text-white/80 text-sm hover:text-primary-400 transition-colors duration-300 tracking-normal underline decoration-primary-400/50 hover:decoration-primary-400",children:"Terms of Service"})]}),d.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/60",children:[d.jsx(zf,{size:12,className:"animate-pulse icon-enhanced",strokeWidth:1.5}),d.jsx("span",{className:"tracking-normal",children:"Made with"})]}),d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/60",children:[d.jsx(FI,{size:12,className:"animate-spin icon-enhanced",strokeWidth:1.5}),d.jsx("span",{className:"tracking-normal",children:"Tailwind CSS"})]})]})]})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700 transform -skew-x-12"})]})})})}const UV=()=>{const{user:n,loading:e}=Qs(),t=Qi(),[s,o]=V.useState([]),[c,f]=V.useState(!1);V.useEffect(()=>{!e&&!n&&t("/login")},[e,n,t]),V.useEffect(()=>{if(!n)return;const I=(async()=>{f(!0);try{const F=Gc(la(cn,"trips"),dm("user_id","==",n.uid),Vc("created_at","desc"));return To(F,M=>{const z=M.docs.map(W=>({id:W.id,...W.data()}));o(z),f(!1)})}catch(F){console.error("여행 데이터 로드 실패:",F),f(!1)}})();return()=>{I instanceof Function&&I()}},[n]);const _=()=>{t("/trips/new")},y=A=>{t(`/trips/${A.id}`)},b=A=>{t(`/trips/${A.id}/edit`)},E=async A=>{if(A.id)try{await KS(Ni(cn,"trips",A.id))}catch(I){console.error("여행 삭제 실패:",I),alert("여행 삭제에 실패했습니다.")}};return e?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})}):n?d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-24",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs(je,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(Bn,{className:"w-8 h-8 text-travel-green mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.length}),d.jsx("div",{className:"text-white/60 text-sm",children:"여행"})]}),d.jsxs(je,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(ys,{className:"w-8 h-8 text-travel-orange mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.reduce((A,I)=>A+(I.plans_count||0),0)}),d.jsx("div",{className:"text-white/60 text-sm",children:"일정"})]}),d.jsxs(je,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(Sh,{className:"w-8 h-8 text-travel-purple mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(A=>new Date(A.end_date)<new Date).length}),d.jsx("div",{className:"text-white/60 text-sm",children:"완료"})]})]})}),d.jsx("div",{className:"mb-6",children:d.jsxs(Le,{variant:"travel",size:"lg",onClick:_,className:"w-full",children:[d.jsx(zc,{className:"w-5 h-5 mr-2"}),"새 여행 만들기"]})}),d.jsxs("div",{className:"pb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"내 여행"}),c?d.jsx("div",{className:"text-center text-white/60 py-8",children:"여행 목록을 불러오는 중..."}):s.length===0?d.jsxs(je,{variant:"light",className:"text-center py-8 animate-fade-in",children:[d.jsx(Sh,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-4",children:"아직 여행이 없어요"}),d.jsx(Le,{variant:"ghost",onClick:_,children:"첫 번째 여행 만들기"})]}):d.jsx("div",{className:"space-y-4",children:s.map((A,I)=>d.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${I*.1}s`},children:d.jsx(VV,{trip:A,onClick:()=>y(A),onEdit:()=>b(A),onDelete:()=>E(A),showActions:!0})},A.id))})]})]})}),d.jsx(ga,{})]}):null},zV=()=>{const{user:n}=Qs(),e=Qi(),[t,s]=V.useState({title:"",country:"",start_date:"",end_date:""}),[o,c]=V.useState(null),[f,_]=V.useState(null),[y,b]=V.useState(!1),[E,A]=V.useState(null),I=te=>{if(!te)return"";const[_e,ge,xe]=te.split("-"),B=new Date(Number(_e),Number(ge)-1,Number(xe)),j=["일","월","화","수","목","금","토"][B.getDay()],U=ge.padStart(2,"0"),q=xe.padStart(2,"0");return`${_e}.${U}.${q}.${j}`},F=["대한민국","일본","중국","미국","영국","프랑스","독일","이탈리아","스페인","캐나다","호주","태국","베트남","싱가포르","말레이시아","인도네시아","필리핀","인도","브라질","아르헨티나","기타"],D=te=>{const _e=te.target.files?.[0];if(_e){if(_e.size>5*1024*1024){A("이미지 크기는 5MB를 초과할 수 없습니다.");return}c(_e);const ge=new FileReader;ge.onload=xe=>{_(xe.target?.result)},ge.readAsDataURL(_e),A(null)}},M=()=>{c(null),_(null)},z=()=>{if(t.start_date&&t.end_date){const te=new Date(t.start_date),_e=new Date(t.end_date),ge=Math.abs(_e.getTime()-te.getTime());return Math.ceil(ge/(1e3*60*60*24))+1}return 0},W=()=>t.title.trim()?t.title.length<2||t.title.length>60?(A("여행 제목은 2-60자 사이여야 합니다."),!1):t.country?!t.start_date||!t.end_date?(A("여행 날짜를 선택해주세요."),!1):new Date(t.start_date)>new Date(t.end_date)?(A("시작 날짜가 종료 날짜보다 늦을 수 없습니다."),!1):!0:(A("국가를 선택해주세요."),!1):(A("여행 제목을 입력해주세요."),!1),$=async te=>{if(te.preventDefault(),!(!n||!W())){b(!0),A(null);try{let _e="";if(o){const B=cy(Ny,`trip-covers/${n.uid}/${Date.now()}_${o.name}`),k=await oy(B,o);_e=await ly(k.ref)}const ge={user_id:n.uid,title:t.title.trim(),country:t.country,start_date:t.start_date,end_date:t.end_date,plans_count:0,created_at:ft.now(),updated_at:ft.now()};_e&&(ge.cover_image=_e);const xe=await WS(la(cn,"trips"),ge);e(`/trips/${xe.id}`)}catch(_e){console.error("여행 생성 실패:",_e),A("여행 생성에 실패했습니다. 다시 시도해주세요.")}finally{b(!1)}}};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-6 animate-fade-in",children:[d.jsx("h1",{className:"text-2xl-ko md:text-3xl-ko lg:text-4xl-ko xl:text-5xl-ko font-bold text-white moonwave-glow break-keep-ko",children:"새 여행 만들기"}),d.jsx("p",{className:"text-sm-ko md:text-base-ko lg:text-lg-ko xl:text-xl-ko text-white/60 mt-2 tracking-ko-normal",children:"특별한 여행의 시작을 계획해보세요"})]}),d.jsxs("form",{onSubmit:$,className:"w-full space-y-6",children:[d.jsxs(je,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg-ko font-semibold text-white mb-4 tracking-ko-normal",children:"커버 이미지"}),f?d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:f,alt:"커버 이미지 미리보기",className:"w-full h-40 md:h-48 lg:h-56 object-cover rounded-xl"}),d.jsx(Le,{type:"button",onClick:M,variant:"secondary",size:"sm",className:"absolute top-2 right-2 !p-2 !px-2 !py-2 rounded-full",ariaLabel:"이미지 삭제",children:d.jsx(Ol,{className:"w-4 h-4"})})]}):d.jsxs("label",{className:"block w-full h-40 md:h-48 lg:h-56 border-2 border-dashed border-white/30 rounded-xl cursor-pointer hover:border-white/50 transition-colors touch-optimized wave-float",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(J_,{className:"w-8 h-8 mb-2 wave-pulse"}),d.jsx("span",{className:"text-sm-ko tracking-ko-normal",children:"이미지 업로드"}),d.jsx("span",{className:"text-xs-ko mt-1 text-white/40",children:"최대 5MB"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:D,className:"hidden"})]})]}),d.jsx(je,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"여행 제목 *"}),d.jsx("input",{type:"text",value:t.title,onChange:te=>s({...t,title:te.target.value}),placeholder:"예: 도쿄 벚꽃 여행",maxLength:60,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all"}),d.jsxs("div",{className:"text-xs-ko text-white/60 mt-1 text-numeric",children:[t.title.length,"/60자"]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(Bn,{className:"w-4 h-4 inline mr-1"}),"국가 *"]}),d.jsxs("select",{value:t.country,onChange:te=>s({...t,country:te.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all",children:[d.jsx("option",{value:"",disabled:!0,children:"국가를 선택해주세요"}),F.map(te=>d.jsx("option",{value:te,className:"bg-primary-800 text-base-ko",children:te},te))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(ys,{className:"w-4 h-4 inline mr-1"}),"시작일 *"]}),d.jsx("input",{type:"date",value:t.start_date,onChange:te=>s({...t,start_date:te.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.start_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:I(t.start_date)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"종료일 *"}),d.jsx("input",{type:"date",value:t.end_date,onChange:te=>s({...t,end_date:te.target.value}),min:t.start_date,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.end_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:I(t.end_date)})]})]}),t.start_date&&t.end_date&&d.jsx(je,{variant:"light",className:"animate-fade-in moonwave-glow",children:d.jsxs("p",{className:"text-white text-sm-ko text-center tracking-ko-normal",children:[d.jsx(ys,{className:"w-4 h-4 inline mr-1"}),"총 ",d.jsxs("span",{className:"font-bold text-travel-blue text-numeric",children:[z(),"일"]})," 여행"]})})]})}),E&&d.jsx(je,{variant:"strong",className:"animate-fade-in wave-pulse",children:d.jsx("p",{className:"text-error-foreground text-sm-ko text-center tracking-ko-normal break-keep-ko",children:E})}),d.jsx(Le,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in touch-optimized wave-optimized group relative overflow-hidden",style:{animationDelay:"0.3s"},disabled:y,ariaLabel:y?"여행 생성 중":"여행 만들기",children:y?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{className:"text-base-ko tracking-ko-normal",children:"여행 생성 중..."})]}):d.jsxs("span",{className:"text-base-ko tracking-ko-normal flex items-center justify-center space-x-2 group-hover:scale-105 transition-transform",children:[d.jsx("span",{children:"여행 만들기"}),d.jsx(ys,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"})]})})]})]})}),d.jsx(ga,{})]})};class jl{static encodeCallback(e,t,s){const o=new URL(e,window.location.origin);return o.searchParams.set("returnPath",t),s?.query&&o.searchParams.set("returnQuery",JSON.stringify(s.query)),s?.fragment&&o.searchParams.set("returnFragment",s.fragment),s?.contextData&&o.searchParams.set("contextData",JSON.stringify(s.contextData)),o.pathname+o.search}static decodeCallback(e){const t=e.get("returnPath");if(!t)return null;const s={returnPath:t},o=e.get("returnQuery");if(o)try{s.returnQuery=JSON.parse(o)}catch(_){console.warn("Failed to parse returnQuery:",_)}const c=e.get("returnFragment");c&&(s.returnFragment=c);const f=e.get("contextData");if(f)try{s.contextData=JSON.parse(f)}catch(_){console.warn("Failed to parse contextData:",_)}return s}static executeCallback(e,t,s){let o=t.returnPath;if(t.returnQuery){const c=new URL(o,window.location.origin);Object.entries(t.returnQuery).forEach(([f,_])=>{c.searchParams.set(f,_)}),o=c.pathname+c.search}t.returnFragment&&(o+="#"+t.returnFragment),e(o),s?.cleanupHistory&&setTimeout(()=>{if(t.returnFragment){const c=o.split("#")[0];window.history.replaceState(null,"",c)}if(s?.scrollToElement){const c=document.getElementById(s.scrollToElement);c&&c.scrollIntoView({behavior:"smooth",block:"start"})}},100)}static createCallbackFromCurrent(e,t){const s=window.location.pathname,o=new URLSearchParams(window.location.search),c=window.location.hash.substring(1),f={};if(t?.preserveQuery&&o.toString()){const _={};o.forEach((y,b)=>{!b.startsWith("return")&&b!=="contextData"&&(_[b]=y)}),Object.keys(_).length>0&&(f.query=_)}return t?.preserveFragment&&c&&(f.fragment=c),t?.contextData&&(f.contextData=t.contextData),this.encodeCallback(e,s,f)}static smartGoBack(e,t,s="/"){const o=this.decodeCallback(t);o?this.executeCallback(e,o,{cleanupHistory:!0}):window.history.length>1?window.history.back():e(s)}static handleErrorWithCallback(e,t,s){const o=s?.delay??3e3,c=s?.fallbackPath??"/";setTimeout(()=>{if(s?.preserveErrorState){const f=this.decodeCallback(t);f&&f.returnQuery&&(f.returnQuery.error="operation_failed"),f?this.executeCallback(e,f,{cleanupHistory:!0}):e(c+"?error=operation_failed")}else this.smartGoBack(e,t,c)},o)}}const Km=n=>{const e=jl.decodeCallback(n);return{hasCallback:!!e,callbackState:e,executeCallback:t=>{e&&jl.executeCallback(t,e,{cleanupHistory:!0})},smartGoBack:(t,s)=>{jl.smartGoBack(t,n,s)},handleErrorWithCallback:(t,s)=>{jl.handleErrorWithCallback(t,n,s)}}};class l_ extends jl{static createDayCallback(e,t,s){const o=`/trips/${t}`;return this.encodeCallback(e,o,{fragment:`day-${s}`,contextData:{selectedDay:s,tripId:t}})}static executeDayCallback(e,t){this.executeCallback(e,t,{cleanupHistory:!0,scrollToElement:t.contextData?.selectedDay?`day-tab-${t.contextData.selectedDay}`:void 0})}}const BV=()=>{const{user:n}=Qs(),e=Qi(),{id:t}=Gh(),[s]=ym(),{hasCallback:o,executeCallback:c,smartGoBack:f}=Km(s),[_,y]=V.useState({title:"",country:"",start_date:"",end_date:""}),[b,E]=V.useState(null),[A,I]=V.useState(null),[F,D]=V.useState(null),[M,z]=V.useState(!1),[W,$]=V.useState(!1),[te,_e]=V.useState(!0),[ge,xe]=V.useState(null),B=["대한민국","일본","중국","미국","영국","프랑스","독일","이탈리아","스페인","캐나다","호주","태국","베트남","싱가포르","말레이시아","인도네시아","필리핀","인도","브라질","아르헨티나","기타"],k=ee=>{if(!ee)return"";const[Y,se,ce]=ee.split("-"),ve=new Date(Number(Y),Number(se)-1,Number(ce)),Me=["일","월","화","수","목","금","토"][ve.getDay()],we=se.padStart(2,"0"),Ue=ce.padStart(2,"0");return`${Y}.${we}.${Ue}.${Me}`};V.useEffect(()=>{(async()=>{if(!(!t||!n))try{const Y=await B_(Ni(cn,"trips",t));if(Y.exists()){const se={id:Y.id,...Y.data()};if(se.user_id!==n.uid){xe("접근 권한이 없습니다."),_e(!1);return}E(se),y({title:se.title,country:se.country,start_date:se.start_date,end_date:se.end_date}),se.cover_image&&D(se.cover_image)}else xe("여행을 찾을 수 없습니다.")}catch(Y){console.error("여행 로드 실패:",Y),xe("여행 데이터를 불러오는데 실패했습니다.")}finally{_e(!1)}})()},[t,n]);const j=ee=>{const Y=ee.target.files?.[0];if(Y){if(Y.size>5*1024*1024){xe("이미지 크기는 5MB를 초과할 수 없습니다.");return}I(Y);const se=new FileReader;se.onload=ce=>{D(ce.target?.result)},se.readAsDataURL(Y),z(!1),xe(null)}},U=()=>{I(null),D(b?.cover_image||null),z(!1)},q=()=>{I(null),D(null),z(!0)},Z=()=>{I(null),D(b?.cover_image||null),z(!1)},O=()=>{if(_.start_date&&_.end_date){const ee=new Date(_.start_date),Y=new Date(_.end_date),se=Math.abs(Y.getTime()-ee.getTime());return Math.ceil(se/(1e3*60*60*24))+1}return 0},Ce=()=>_.title.trim()?_.title.length<2||_.title.length>60?(xe("여행 제목은 2-60자 사이여야 합니다."),!1):_.country?!_.start_date||!_.end_date?(xe("여행 날짜를 선택해주세요."),!1):new Date(_.start_date)>new Date(_.end_date)?(xe("시작 날짜가 종료 날짜보다 늦을 수 없습니다."),!1):!0:(xe("국가를 선택해주세요."),!1):(xe("여행 제목을 입력해주세요."),!1),Je=async ee=>{if(ee.preventDefault(),!(!n||!b||!Ce())){$(!0),xe(null);try{let Y=b.cover_image||"";if(A){const ce=cy(Ny,`trip-covers/${n.uid}/${Date.now()}_${A.name}`),ve=await oy(ce,A);Y=await ly(ve.ref)}const se={title:_.title.trim(),country:_.country,start_date:_.start_date,end_date:_.end_date,updated_at:ft.now()};M?se.cover_image=iO():A&&(se.cover_image=Y),await fm(Ni(cn,"trips",b.id),se),o?c(e):e(`/trips/${b.id}`)}catch(Y){console.error("여행 수정 실패:",Y),xe("여행 수정에 실패했습니다. 다시 시도해주세요.")}finally{$(!1)}}};return te?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"여행 정보 로딩 중..."})}):ge&&!b?d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(je,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:ge}),d.jsx(Le,{onClick:()=>e("/"),children:"홈으로 돌아가기"})]})}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-6 animate-fade-in",children:[d.jsx("h1",{className:"text-2xl-ko md:text-3xl-ko lg:text-4xl-ko xl:text-5xl-ko font-bold text-white moonwave-glow break-keep-ko",children:"여행 수정하기"}),d.jsx("p",{className:"text-sm-ko md:text-base-ko lg:text-lg-ko xl:text-xl-ko text-white/60 mt-2 tracking-ko-normal",children:"여행 정보를 업데이트하세요"})]}),d.jsxs("form",{onSubmit:Je,className:"w-full space-y-6",children:[d.jsxs(je,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg-ko font-semibold text-white mb-4 tracking-ko-normal",children:"커버 이미지"}),F?d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:F,alt:"커버 이미지 미리보기",className:"w-full h-40 md:h-48 lg:h-56 object-cover rounded-xl"}),d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsxs("label",{className:"cursor-pointer",children:[d.jsx("div",{className:"inline-flex items-center justify-center p-2 rounded-full bg-blue-500/20 hover:bg-blue-500/40 backdrop-blur-sm transition-all duration-300 wave-float",children:d.jsx(qI,{className:"w-4 h-4 text-blue-300"})}),d.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"})]}),d.jsx(Le,{type:"button",onClick:q,variant:"secondary",size:"sm",className:"!p-2 !px-2 !py-2 rounded-full bg-red-500/20 hover:bg-red-500/40 backdrop-blur-sm",ariaLabel:"이미지 삭제",children:d.jsx(Vf,{className:"w-4 h-4 text-red-300"})}),(A||M)&&d.jsx(Le,{type:"button",onClick:A?U:Z,variant:"secondary",size:"sm",className:"!p-2 !px-2 !py-2 rounded-full bg-white/20 hover:bg-white/40 backdrop-blur-sm",ariaLabel:A?"새 이미지 취소":"원본으로 복원",children:d.jsx(Ol,{className:"w-4 h-4 text-white"})})]}),d.jsxs("div",{className:"absolute bottom-2 left-2",children:[A&&d.jsx("div",{className:"bg-green-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-green-300",children:"새 이미지"}),M&&!A&&d.jsx("div",{className:"bg-red-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-red-300",children:"삭제 예정"}),!A&&!M&&b?.cover_image&&d.jsx("div",{className:"bg-blue-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-blue-300",children:"기존 이미지"})]})]}):d.jsxs("div",{className:"space-y-4",children:[M&&d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 text-center",children:[d.jsx(Vf,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),d.jsx("p",{className:"text-red-300 text-sm",children:"커버 이미지가 삭제됩니다"}),d.jsx(Le,{type:"button",onClick:Z,variant:"ghost",size:"sm",className:"mt-2 text-red-300 hover:text-red-200",children:"삭제 취소"})]}),d.jsxs("label",{className:"block w-full h-40 md:h-48 lg:h-56 border-2 border-dashed border-white/30 rounded-xl cursor-pointer hover:border-white/50 transition-colors touch-optimized wave-float",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(J_,{className:"w-8 h-8 mb-2 wave-pulse"}),d.jsx("span",{className:"text-sm-ko tracking-ko-normal",children:M?"새 이미지 업로드":"이미지 업로드"}),d.jsx("span",{className:"text-xs-ko mt-1 text-white/40",children:"최대 5MB"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:j,className:"hidden"})]})]})]}),d.jsx(je,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"여행 제목 *"}),d.jsx("input",{type:"text",value:_.title,onChange:ee=>y({..._,title:ee.target.value}),placeholder:"예: 도쿄 벚꽃 여행",maxLength:60,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all"}),d.jsxs("div",{className:"text-xs-ko text-white/60 mt-1 text-numeric",children:[_.title.length,"/60자"]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(Bn,{className:"w-4 h-4 inline mr-1"}),"국가 *"]}),d.jsxs("select",{value:_.country,onChange:ee=>y({..._,country:ee.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all",children:[d.jsx("option",{value:"",disabled:!0,children:"국가를 선택해주세요"}),B.map(ee=>d.jsx("option",{value:ee,className:"bg-primary-800 text-base-ko",children:ee},ee))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(ys,{className:"w-4 h-4 inline mr-1"}),"시작일 *"]}),d.jsx("input",{type:"date",value:_.start_date,onChange:ee=>y({..._,start_date:ee.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),_.start_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:k(_.start_date)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"종료일 *"}),d.jsx("input",{type:"date",value:_.end_date,onChange:ee=>y({..._,end_date:ee.target.value}),min:_.start_date,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),_.end_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:k(_.end_date)})]})]}),_.start_date&&_.end_date&&d.jsx(je,{variant:"light",className:"animate-fade-in moonwave-glow",children:d.jsxs("p",{className:"text-white text-sm-ko text-center tracking-ko-normal",children:[d.jsx(ys,{className:"w-4 h-4 inline mr-1"}),"총 ",d.jsxs("span",{className:"font-bold text-travel-blue text-numeric",children:[O(),"일"]})," 여행"]})})]})}),ge&&d.jsx(je,{variant:"strong",className:"animate-fade-in wave-pulse",children:d.jsx("p",{className:"text-error-foreground text-sm-ko text-center tracking-ko-normal break-keep-ko",children:ge})}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx(Le,{type:"button",variant:"ghost",size:"lg",onClick:()=>f(e,`/trips/${b?.id}`),className:"flex-1 animate-fade-in touch-optimized",style:{animationDelay:"0.3s"},ariaLabel:"취소",children:"취소"}),d.jsx(Le,{type:"submit",variant:"travel",size:"lg",className:"flex-1 animate-fade-in touch-optimized wave-optimized group relative overflow-hidden",style:{animationDelay:"0.3s"},disabled:W,ariaLabel:W?"여행 수정 중":"여행 수정하기",children:W?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{className:"text-base-ko tracking-ko-normal",children:"수정 중..."})]}):d.jsxs("span",{className:"text-base-ko tracking-ko-normal flex items-center justify-center space-x-2 group-hover:scale-105 transition-transform",children:[d.jsx("span",{children:"수정하기"}),d.jsx(ys,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"})]})})]})]})]})}),d.jsx(ga,{})]})},FV=({photos:n,isOpen:e,onClose:t,initialIndex:s=0,placeName:o=""})=>{const[c,f]=V.useState(s);V.useEffect(()=>{e&&f(s)},[e,s]),V.useEffect(()=>{const b=E=>{if(e)switch(E.key){case"Escape":t();break;case"ArrowLeft":y();break;case"ArrowRight":_();break}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[e,c,n.length]);const _=()=>{f(b=>(b+1)%n.length)},y=()=>{f(b=>(b-1+n.length)%n.length)};return!e||n.length===0?null:d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:[d.jsx(Le,{variant:"ghost",size:"sm",onClick:t,className:"absolute top-4 right-4 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:d.jsx(Ol,{className:"w-6 h-6 text-white"})}),n.length>1&&d.jsxs(d.Fragment,{children:[d.jsx(Le,{variant:"ghost",size:"sm",onClick:y,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"이전 사진",children:d.jsx(HI,{className:"w-6 h-6 text-white"})}),d.jsx(Le,{variant:"ghost",size:"sm",onClick:_,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"다음 사진",children:d.jsx(GI,{className:"w-6 h-6 text-white"})})]}),d.jsxs("div",{className:"flex flex-col items-center justify-center max-w-7xl max-h-full p-4",children:[d.jsx("div",{className:"relative mb-4",children:d.jsx("img",{src:n[c],alt:`${o} 사진 ${c+1}`,className:"max-w-full max-h-[80vh] object-contain rounded-xl shadow-2xl"})}),d.jsx(je,{variant:"light",className:"max-w-md",children:d.jsxs("div",{className:"text-center space-y-2",children:[o&&d.jsx("h3",{className:"text-lg font-semibold text-white",children:o}),d.jsx("div",{className:"flex items-center justify-center space-x-4 text-white/70 text-sm",children:d.jsxs("span",{children:[c+1," / ",n.length]})}),n.length>1&&d.jsx("div",{className:"flex justify-center space-x-2 mt-4 overflow-x-auto max-w-full",children:n.map((b,E)=>d.jsx("button",{onClick:()=>f(E),className:`relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden transition-all ${E===c?"ring-2 ring-primary-400 scale-110":"opacity-60 hover:opacity-100"}`,children:d.jsx("img",{src:b,alt:`썸네일 ${E+1}`,className:"w-full h-full object-cover"})},E))})]})})]}),d.jsx("div",{className:"absolute inset-0 -z-10",onClick:t})]})},vA=n=>{try{const e=new URL(n);let t=null;if(e.hostname==="youtu.be"?t=e.pathname.slice(1):(e.hostname==="www.youtube.com"||e.hostname==="youtube.com")&&(e.pathname==="/watch"?t=e.searchParams.get("v"):e.pathname.startsWith("/embed/")?t=e.pathname.slice(7):e.pathname.startsWith("/v/")&&(t=e.pathname.slice(3))),t){const s=e.searchParams.get("t")||e.searchParams.get("start");let o="";if(s){const c=parseInt(s.replace(/[^\d]/g,""));isNaN(c)||(o=`?start=${c}`)}return`https://www.youtube.com/embed/${t}${o}`}return null}catch(e){return console.error("Invalid YouTube URL:",e),null}},qV=n=>{const e=vA(n);if(e){const t=e.match(/\/embed\/([^?]+)/);return t?t[1]:null}return null},qT=(n,e="medium")=>{const t=qV(n);return t?`https://img.youtube.com/vi/${t}/${e}default.jpg`:null},HV=({url:n,title:e,className:t="",onClose:s})=>{const o=Qi(),{tripId:c}=Gh(),[f,_]=V.useState(!1),[y,b]=V.useState(!1),E=vA(n),A=qT(n,"maxres")||qT(n,"high");if(!E)return d.jsx("div",{className:`text-red-400 text-sm ${t}`,children:"유효하지 않은 유튜브 URL입니다."});const I=M=>{M.stopPropagation(),M.preventDefault(),_(!0)},F=M=>{M.stopPropagation(),M.preventDefault(),b(!0)},D=M=>{M&&(M.stopPropagation(),M.preventDefault()),_(!1),s?s():c&&o(`/trips/${c}`)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`relative group cursor-pointer ${t}`,"data-youtube-embed":!0,children:A?d.jsxs("div",{className:"relative youtube-thumbnail",children:[d.jsx("img",{src:A,alt:e||"유튜브 비디오",className:"w-full aspect-video object-cover rounded-lg transition-transform group-hover:scale-105",onClick:I}),d.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity youtube-play-button",onClick:I,children:d.jsx("div",{className:"bg-red-600 rounded-full p-3",children:d.jsx(c_,{className:"w-6 h-6 text-white ml-1"})})}),d.jsx("div",{className:"absolute top-2 right-2 bg-red-600 rounded px-2 py-1",children:d.jsx(Il,{className:"w-4 h-4 text-white"})})]}):d.jsx("div",{className:"w-full aspect-video bg-gradient-to-br from-red-600/20 to-red-800/20 rounded-lg flex items-center justify-center cursor-pointer hover:from-red-600/30 hover:to-red-800/30 transition-colors youtube-thumbnail",onClick:I,children:d.jsxs("div",{className:"text-center youtube-play-button",children:[d.jsx(Il,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),d.jsx("span",{className:"text-white text-sm",children:"유튜브 비디오"})]})})}),f&&_E.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm p-6 md:p-8 lg:p-12",onClick:M=>{M.target===M.currentTarget&&D(M)},children:[d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>D(),className:"absolute top-6 right-6 md:top-8 md:right-8 lg:top-12 lg:right-12 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:d.jsx(Ol,{className:"w-6 h-6 text-white"})}),d.jsx(je,{variant:"travel",className:"w-full max-w-5xl mx-auto my-8 md:my-12 lg:my-16 mb-12 md:mb-16 lg:mb-20",withWaveEffect:!0,onClick:M=>{M.stopPropagation()},children:d.jsxs("div",{className:"space-y-6 p-2 md:p-4 lg:p-6 pb-4 md:pb-6 lg:pb-8",children:[e&&d.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[d.jsx(Il,{className:"w-5 h-5 text-red-500"}),d.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:e})]}),d.jsx("div",{className:"relative w-full aspect-video bg-black rounded-xl overflow-hidden shadow-2xl",children:y?d.jsx("iframe",{src:`${E}${E.includes("?")?"&":"?"}autoplay=1&rel=0&modestbranding=1&playsinline=1&enablejsapi=1`,title:e||"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"}):d.jsx("div",{className:"relative w-full h-full",children:A?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:A,alt:e||"유튜브 비디오",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer group youtube-play-button",onClick:F,"data-youtube-embed":!0,children:d.jsx("div",{className:"bg-red-600 rounded-full p-6 group-hover:bg-red-700 transition-all transform group-hover:scale-110",children:d.jsx(c_,{className:"w-12 h-12 text-white ml-1"})})}),d.jsx("div",{className:"absolute bottom-4 right-4",children:d.jsxs("div",{className:"bg-red-600 px-2 py-1 rounded flex items-center space-x-1",children:[d.jsx(Il,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"text-white text-sm font-medium",children:"YouTube"})]})})]}):d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsxs("div",{className:"text-center cursor-pointer youtube-play-button",onClick:F,"data-youtube-embed":!0,children:[d.jsx("div",{className:"bg-red-600 rounded-full p-6 hover:bg-red-700 transition-colors",children:d.jsx(Il,{className:"w-12 h-12 text-white"})}),d.jsx("span",{className:"text-white text-sm mt-2 block",children:"비디오 재생"})]})})})}),d.jsxs("div",{className:"flex items-center justify-between text-white/70 text-sm mt-8 pt-6 pb-4 border-t border-white/10",children:[d.jsxs("span",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),d.jsx("span",{children:"YouTube에서 재생 중"})]}),d.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-white transition-colors bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg",onClick:M=>M.stopPropagation(),children:[d.jsx(Il,{className:"w-4 h-4"}),d.jsx("span",{children:"YouTube에서 보기"})]})]})]})})]}),document.body)]})},GV=n=>{switch(n){case"attraction":return d.jsx(Ih,{className:"w-5 h-5"});case"restaurant":return d.jsx(tv,{className:"w-5 h-5"});case"hotel":return d.jsx(ev,{className:"w-5 h-5"});case"transport":return d.jsx(qf,{className:"w-5 h-5"});case"car":return d.jsx(qf,{className:"w-5 h-5"});case"plane":return d.jsx(Sh,{className:"w-5 h-5"});case"airport":return d.jsx(Ml,{className:"w-5 h-5"});case"other":return d.jsx(Bn,{className:"w-5 h-5"});default:return d.jsx(Bn,{className:"w-5 h-5"})}},ZV=n=>{switch(n){case"attraction":return"text-travel-orange";case"restaurant":return"text-travel-green";case"hotel":return"text-travel-purple";case"transport":return"text-travel-blue";case"car":return"text-travel-blue";case"plane":return"text-travel-blue";case"airport":return"text-travel-blue";case"other":return"text-white/80";default:return"text-white/80"}},$V=n=>{switch(n){case"attraction":return"관광지";case"restaurant":return"음식점";case"hotel":return"숙소";case"transport":return"대중교통";case"car":return"자동차";case"plane":return"비행기";case"airport":return"공항";case"other":return"기타";default:return"기타"}},X_=({plan:n,onClick:e,onEdit:t,onDelete:s,className:o,showActions:c=!0,...f})=>{const[_,y]=V.useState(!1),[b,E]=V.useState(0),A=D=>D.slice(0,5),I=D=>{const M=D.target;M.closest(".action-button")||M.closest("[data-youtube-embed]")||M.closest("[data-photo-modal]")||M.closest("iframe")||M.closest(".youtube-thumbnail")||M.closest(".youtube-play-button")||e?.(D)},F=(D,M)=>{D.stopPropagation(),E(M),y(!0)};return d.jsxs(je,{variant:"light",hoverable:!!e,className:Nr("cursor-pointer group transition-all duration-300","hover:border-primary-300/40 hover:shadow-lg hover:shadow-primary-500/10","border border-white/10",o),onClick:I,...f,children:[d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:Nr("flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center","bg-gradient-to-br from-white/10 to-white/5 border border-white/20",ZV(n.type)),children:GV(n.type)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h4",{className:"text-lg font-semibold text-white truncate group-hover:text-primary-300 transition-colors",children:n.place_name}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:Nr("text-xs px-2 py-1 rounded-full border","bg-white/5 border-white/20 text-white/70"),children:$V(n.type)}),c&&(t||s)&&d.jsxs("div",{className:"flex items-center space-x-1 opacity-80 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[t&&d.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),t()},className:"action-button p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/40 transition-colors","aria-label":"일정 편집",children:d.jsx(Of,{className:"w-3 h-3 text-blue-300"})}),s&&d.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),window.confirm("이 일정을 삭제하시겠습니까?")&&s()},className:"action-button p-2 rounded-lg bg-red-500/20 hover:bg-red-500/40 transition-colors","aria-label":"일정 삭제",children:d.jsx(Vf,{className:"w-3 h-3 text-red-300"})})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-3",children:[d.jsx(Ah,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm",children:[A(n.start_time),n.end_time&&` ~ ${A(n.end_time)}`]})]}),n.opening_hours&&d.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-2",children:[d.jsx(Ah,{className:"w-4 h-4 text-travel-green"}),d.jsx("span",{className:"text-sm",children:n.opening_hours})]}),n.photos&&n.photos.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-travel-orange",children:[d.jsx(YT,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm",children:[n.photos.length,"장의 사진"]})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:n.photos.slice(0,4).map((D,M)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:D,alt:`${n.place_name} 사진 ${M+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105 cursor-pointer",onClick:z=>F(z,M)}),M===3&&n.photos&&n.photos.length>4&&d.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-lg flex items-center justify-center cursor-pointer hover:bg-black/70 transition-colors",onClick:z=>F(z,M),children:d.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",n.photos.length-4]})})]},M))})]}),n.youtube_link&&d.jsx("div",{className:"mt-3 mb-4",children:d.jsx(HV,{url:n.youtube_link,title:`${n.place_name} 비디오`,className:"w-full"})}),d.jsxs("div",{className:`flex items-center justify-between ${n.youtube_link?"mt-2":"mt-4"}`,children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[n.latitude&&n.longitude&&d.jsxs("div",{className:"flex items-center space-x-1 text-travel-blue",children:[d.jsx(Bn,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-xs text-white/60",children:[Number(n.latitude).toFixed(4),", ",Number(n.longitude).toFixed(4)]})]}),n.map_url&&!n.latitude&&!n.longitude&&d.jsxs("div",{className:"flex items-center space-x-1 text-yellow-400",children:[d.jsx(Bn,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"지도 링크만 있음"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[n.website&&d.jsxs("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"flex items-center space-x-1 text-travel-purple hover:text-travel-purple/80 transition-colors",children:[d.jsx(Bf,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"홈페이지"})]}),n.youtube_link&&d.jsxs("a",{href:n.youtube_link,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"flex items-center space-x-1 text-travel-orange hover:text-travel-orange/80 transition-colors",children:[d.jsx(Ff,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"유튜브"})]}),n.map_url&&d.jsxs("a",{href:n.map_url,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"flex items-center space-x-1 text-travel-green hover:text-travel-green/80 transition-colors",children:[d.jsx(Ff,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:(()=>{const D=n.map_url.toLowerCase();return D.includes("google.com")||D.includes("goo.gl")?"Google지도":D.includes("naver.com")?"Naver지도":D.includes("kakao.com")?"Kakao지도":D.includes("apple.com")?"Apple지도":"지도"})()})]})]})]})]})]}),n.photos&&n.photos.length>0&&d.jsx(FV,{photos:n.photos,isOpen:_,onClose:()=>y(!1),initialIndex:b,placeName:n.place_name})]})},KV=()=>{const{id:n}=Gh(),{user:e}=Qs(),t=Qi(),s=Es(),[o,c]=V.useState(null),[f,_]=V.useState([]),[y,b]=V.useState(!0),[E,A]=V.useState(null),[I,F]=V.useState(1);if(V.useEffect(()=>{if(!n||!e)return;const k=To(Ni(cn,"trips",n),q=>{if(q.exists()){const Z={id:q.id,...q.data()};if(Z.user_id!==e.uid){A("접근 권한이 없습니다."),b(!1);return}c(Z)}else A("여행을 찾을 수 없습니다.");b(!1)},q=>{console.error("Trip 로딩 실패:",q),A("여행 데이터를 불러오는데 실패했습니다."),b(!1)}),j=Gc(la(cn,"plans"),dm("trip_id","==",n)),U=To(j,q=>{const O=q.docs.map(Ce=>({id:Ce.id,...Ce.data()})).sort((Ce,Je)=>Ce.day!==Je.day?Ce.day-Je.day:Ce.start_time.localeCompare(Je.start_time));_(O)},q=>{console.error("Plans 로딩 실패:",q)});return()=>{k(),U()}},[n,e]),V.useEffect(()=>{if(s.hash&&o){const k=s.hash.match(/^#day-(\d+)$/);if(k){const j=parseInt(k[1]),U=z();j>=1&&j<=U&&(F(j),window.history.replaceState(null,"",s.pathname))}}},[s.hash,o]),y)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})});if(E||!o)return d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(je,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:E||"여행을 찾을 수 없습니다."}),d.jsx(Le,{onClick:()=>t("/"),children:"Back"})]})});const D=k=>new Date(k).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),M=k=>{if(!k)return"";const[j,U,q]=k.split("-"),Z=new Date(Number(j),Number(U)-1,Number(q)),Ce=["일","월","화","수","목","금","토"][Z.getDay()],Je=U.padStart(2,"0"),ee=q.padStart(2,"0");return`${j}.${Je}.${ee}.${Ce}`},z=()=>{const k=new Date(o.start_date),j=new Date(o.end_date),U=Math.abs(j.getTime()-k.getTime());return Math.ceil(U/(1e3*60*60*24))+1},W=k=>{if(!o)return`Day ${k}`;const j=new Date(o.start_date),U=new Date(j);U.setDate(j.getDate()+k-1);const q=U.getFullYear(),Z=String(U.getMonth()+1).padStart(2,"0"),O=String(U.getDate()).padStart(2,"0"),Je=["일","월","화","수","목","금","토"][U.getDay()];return`${q}.${Z}.${O}.${Je}`},$=k=>f.filter(j=>j.day===k),te=Array.from({length:z()},(k,j)=>j+1),_e=()=>{const k=l_.createDayCallback(`/trips/${n}/plans/new?day=${I}`,n,I);t(k)},ge=k=>{const j=l_.createDayCallback(`/trips/${n}/plans/${k.id}`,n,I);t(j)},xe=k=>{const j=l_.createDayCallback(`/trips/${n}/plans/${k.id}`,n,I);t(j)},B=async k=>{if(k.id)try{await KS(Ni(cn,"plans",k.id))}catch(j){console.error("일정 삭제 실패:",j),alert("일정 삭제에 실패했습니다.")}};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"mb-4",children:d.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"flex items-center gap-2",children:[d.jsx(Fh,{className:"w-4 h-4"}),"Back"]})}),d.jsxs(je,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"mb-6 animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-white moonwave-glow break-words",children:o.title}),d.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[M(o.start_date)," ~ ",M(o.end_date)]})]}),d.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>{const k=jl.createCallbackFromCurrent(`/trips/${o.id}/edit`,{preserveQuery:!0,preserveFragment:!0,contextData:{selectedDay:I,tripId:o.id}});t(k)},className:"flex items-center gap-2 hover:bg-white/10",ariaLabel:"여행 수정",children:[d.jsx(Of,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"수정"})]})]}),d.jsxs("div",{className:"relative w-full h-48 md:h-56 lg:h-64 mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-travel-blue/20 to-travel-purple/20",children:[o.cover_image?d.jsx("img",{src:o.cover_image,alt:o.title,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(KT,{className:"w-16 h-16 text-white/60"})}),d.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 opacity-80 sm:opacity-60 hover:opacity-100 transition-opacity",children:d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>{const k=jl.createCallbackFromCurrent(`/trips/${o.id}/edit`,{preserveQuery:!0,preserveFragment:!0,contextData:{selectedDay:I,tripId:o.id}});t(k)},className:"p-2 rounded-lg bg-black/30 hover:bg-black/50 backdrop-blur-sm",ariaLabel:"이미지 수정",children:d.jsx(Of,{className:"w-3 h-3 text-white"})})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(Bn,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm md:text-base",children:o.country})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(ys,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm md:text-base",children:[D(o.start_date)," ~ ",D(o.end_date)]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2 border-t border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white/60 text-sm md:text-base",children:"총 기간"}),d.jsxs("span",{className:"text-travel-blue font-semibold text-sm md:text-base",children:[z(),"일"]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white/60 text-sm md:text-base",children:"일정 개수"}),d.jsxs("span",{className:"text-travel-orange font-semibold text-sm md:text-base",children:[f.length,"개"]})]})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx(je,{variant:"light",withWaveEffect:!0,hoverable:!1,className:"mb-4 animate-fade-in",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"일정"}),d.jsx("p",{className:"text-white/60 text-sm mt-1",children:"일정 카드를 클릭하거나 편집 버튼으로 수정할 수 있습니다"})]}),d.jsxs(Le,{variant:"travel",size:"sm",onClick:_e,className:"wave-optimized",children:[d.jsx(zc,{className:"w-4 h-4 mr-1"}),"추가"]})]})}),d.jsx(je,{variant:"light",className:"animate-fade-in",style:{animationDelay:"0.3s"},children:d.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:te.map(k=>{const j=$(k);return d.jsx("button",{id:`day-tab-${k}`,onClick:()=>F(k),className:`relative flex-shrink-0 px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-medium transition-all wave-float ${I===k?"bg-primary-500 text-white shadow-lg shadow-primary-500/25":"bg-white/10 text-white/70 hover:bg-white/20 hover:scale-105"}`,children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("span",{className:"font-semibold",children:["Day ",k]}),j.length>0&&d.jsx("span",{className:"text-xs bg-white/20 rounded-full px-1.5",children:j.length})]}),d.jsx("span",{className:"text-xs opacity-80",children:W(k)})]})},k)})})})]}),d.jsx("div",{className:"space-y-4",children:$(I).length===0?d.jsxs(je,{variant:"light",withWaveEffect:!0,className:"text-center py-8 animate-fade-in wave-optimized",style:{animationDelay:"0.4s"},children:[d.jsx(ys,{className:"w-16 h-16 text-white/40 mx-auto mb-4 wave-pulse"}),d.jsxs("p",{className:"text-white/60 mb-4",children:["Day ",I," (",W(I),")에 일정이 없어요"]}),d.jsxs(Le,{variant:"travel",onClick:_e,className:"wave-optimized",children:[d.jsx(zc,{className:"w-4 h-4 mr-2"}),"첫 번째 일정 추가"]})]}):$(I).map((k,j)=>d.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${.4+j*.1}s`},children:d.jsx(X_,{plan:k,onClick:()=>ge(k),onEdit:()=>xe(k),onDelete:()=>B(k),showActions:!0,className:"wave-optimized"})},k.id))})]})}),d.jsx(ga,{})]})};class yA{static parseMapUrl(e){if(!e||typeof e!="string")return{success:!1,error:"Invalid URL"};try{const t=e.trim();if(t.includes("maps.apple.com")){const y=this.parseAppleMaps(t);if(y.success)return y}if(t.includes("naver.com")){const y=this.parseNaverMap(t);if(y.success)return y}if(t.includes("kakao.com")){const y=this.parseKakaoMap(t);if(y.success)return y}if(t.includes("google.com")||t.includes("goo.gl")){const y=this.parseGoogleMaps(t);if(y.success)return y}const s=this.parseGoogleMaps(t);if(s.success)return s;const o=this.parseNaverMap(t);if(o.success)return o;const c=this.parseKakaoMap(t);if(c.success)return c;const f=this.parseAppleMaps(t);if(f.success)return f;const _=this.parseGenericCoordinates(t);return _.success?_:{success:!1,error:"Unsupported map URL format"}}catch(t){return{success:!1,error:`Parsing failed: ${t}`}}}static parseGoogleMaps(e){const t=[/@(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]q=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]ll=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]center=(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const s of t){const o=e.match(s);if(o){const c=parseFloat(o[1]),f=parseFloat(o[2]);if(this.isValidCoordinate(c,f))return{success:!0,coordinates:{latitude:c,longitude:f},source:"Google Maps"}}}return{success:!1,error:"Google Maps coordinates not found"}}static parseNaverMap(e){const t=[/[?&]c=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/naver\.com.*?(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const s of t){const o=e.match(s);if(o){const c=parseFloat(o[1]),f=parseFloat(o[2]);if(this.isValidCoordinate(f,c))return{success:!0,coordinates:{latitude:f,longitude:c},source:"Naver Map"}}}return{success:!1,error:"Naver Map coordinates not found"}}static parseKakaoMap(e){const t=[/[?&]urlX=(-?\d+\.?\d*).*?[?&]urlY=(-?\d+\.?\d*)/,/\/map\/[^,]*,(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const s of t){const o=e.match(s);if(o){let c,f;if(s.source.includes("urlX")?(f=parseFloat(o[1]),c=parseFloat(o[2])):(c=parseFloat(o[1]),f=parseFloat(o[2])),this.isValidCoordinate(c,f))return{success:!0,coordinates:{latitude:c,longitude:f},source:"Kakao Map"}}}return{success:!1,error:"Kakao Map coordinates not found"}}static parseAppleMaps(e){const t=[/[?&]ll=(-?\d+\.?\d*),(-?\d+\.?\d*)/,/[?&]q=(-?\d+\.?\d*),(-?\d+\.?\d*)/];for(const s of t){const o=e.match(s);if(o){const c=parseFloat(o[1]),f=parseFloat(o[2]);if(this.isValidCoordinate(c,f))return{success:!0,coordinates:{latitude:c,longitude:f},source:"Apple Maps"}}}return{success:!1,error:"Apple Maps coordinates not found"}}static parseGenericCoordinates(e){const t=[/latitude=(-?\d+\.?\d*).*?longitude=(-?\d+\.?\d*)/,/lat=(-?\d+\.?\d*).*?lng=(-?\d+\.?\d*)/,/(-?\d{1,3}\.\d{4,}),(-?\d{1,3}\.\d{4,})/];for(const s of t){const o=e.match(s);if(o){const c=parseFloat(o[1]),f=parseFloat(o[2]);if(this.isValidCoordinate(c,f))return{success:!0,coordinates:{latitude:c,longitude:f},source:"Generic"}}}return{success:!1,error:"Generic coordinates not found"}}static isValidCoordinate(e,t){return!isNaN(e)&&!isNaN(t)&&e>=-90&&e<=90&&t>=-180&&t<=180}static coordinatesToGoogleMapsUrl(e){const{latitude:t,longitude:s}=e;return`https://maps.google.com/?q=${t},${s}`}static coordinatesToNaverMapUrl(e){const{latitude:t,longitude:s}=e;return`https://map.naver.com/v5/?c=${s},${t},15`}static formatCoordinates(e){return{lat:e.latitude.toFixed(6),lng:e.longitude.toFixed(6)}}static calculateDistance(e,t){const o=this.toRadians(t.latitude-e.latitude),c=this.toRadians(t.longitude-e.longitude),f=this.toRadians(e.latitude),_=this.toRadians(t.latitude),y=Math.sin(o/2)*Math.sin(o/2)+Math.sin(c/2)*Math.sin(c/2)*Math.cos(f)*Math.cos(_);return 6371*(2*Math.atan2(Math.sqrt(y),Math.sqrt(1-y)))}static toRadians(e){return e*(Math.PI/180)}}const HT=n=>yA.parseMapUrl(n),wf=n=>yA.formatCoordinates(n),GT=()=>{const{tripId:n,planId:e}=Gh(),{user:t}=Qs(),s=Qi(),[o]=ym(),{hasCallback:c,executeCallback:f,handleErrorWithCallback:_}=Km(o),[y,b]=V.useState(null),[E,A]=V.useState(!1),[I,F]=V.useState(!0),[D,M]=V.useState(!1),[z,W]=V.useState(null),[$,te]=V.useState({day:parseInt(o.get("day")||"1"),place_name:"",start_time:"09:00",end_time:"10:00",type:"attraction",address:"",website:"",opening_hours:"",memo:"",youtube_link:"",map_url:"",latitude:"",longitude:""}),[_e,ge]=V.useState([]),[xe,B]=V.useState([]),[k,j]=V.useState([]),[U,q]=V.useState(null),[Z,O]=V.useState(!1),Ce=[{value:"attraction",label:"관광지",icon:d.jsx(Ih,{className:"w-4 h-4 inline mr-1 text-travel-orange"})},{value:"restaurant",label:"음식점",icon:d.jsx(tv,{className:"w-4 h-4 inline mr-1 text-travel-green"})},{value:"hotel",label:"숙소",icon:d.jsx(ev,{className:"w-4 h-4 inline mr-1 text-travel-purple"})},{value:"transport",label:"대중교통",icon:d.jsx(Bn,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"car",label:"자동차",icon:d.jsx(qf,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"plane",label:"비행기",icon:d.jsx(Sh,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"airport",label:"공항",icon:d.jsx(Ml,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"other",label:"기타",icon:d.jsx(Bn,{className:"w-4 h-4 inline mr-1 text-white/80"})}];V.useEffect(()=>{if(!n||!t)return;(async()=>{try{const Re=await B_(Ni(cn,"trips",n));if(!Re.exists()){W("여행을 찾을 수 없습니다."),F(!1);return}const Ke={id:Re.id,...Re.data()};if(Ke.user_id!==t.uid){W("접근 권한이 없습니다."),F(!1);return}if(b(Ke),e){A(!0);const Ye=await B_(Ni(cn,"plans",e));if(Ye.exists()){const Be={id:Ye.id,...Ye.data()};te({day:Be.day,place_name:Be.place_name,start_time:Be.start_time,end_time:Be.end_time||"",type:Be.type,address:Be.address||"",website:Be.website||"",opening_hours:Be.opening_hours||"",memo:Be.memo||"",youtube_link:Be.youtube_link||"",map_url:Be.map_url||"",latitude:Be.latitude?.toString()||"",longitude:Be.longitude?.toString()||""}),j(Be.photos||[])}}F(!1)}catch(Re){console.error("데이터 로딩 실패:",Re),W("데이터를 불러오는데 실패했습니다."),F(!1)}})()},[n,e,t]);const Je=de=>{const Re=Array.from(de.target.files||[]);if(_e.length+k.length+Re.length>5){W("사진은 최대 5장까지 업로드할 수 있습니다.");return}Re.forEach(Ye=>{if(Ye.size>5*1024*1024){W("각 이미지는 5MB를 초과할 수 없습니다.");return}}),ge(Ye=>[...Ye,...Re]),Re.forEach(Ye=>{const Be=new FileReader;Be.onload=Tt=>{B(Bt=>[...Bt,Tt.target?.result])},Be.readAsDataURL(Ye)}),W(null)},ee=(de,Re=!1)=>{Re?j(Ke=>Ke.filter((Ye,Be)=>Be!==de)):(ge(Ke=>Ke.filter((Ye,Be)=>Be!==de)),B(Ke=>Ke.filter((Ye,Be)=>Be!==de)))},Y=de=>{if(!de.trim()){q(null),O(!1);return}const Re=HT(de);if(q(Re),O(!0),Re.success&&Re.coordinates){const Ke=wf(Re.coordinates);te(Ye=>({...Ye,latitude:Ke.lat,longitude:Ke.lng}))}setTimeout(()=>{O(!1)},3e3)},se=de=>{te(Re=>({...Re,map_url:de})),window.mapUrlParseTimeout&&clearTimeout(window.mapUrlParseTimeout),window.mapUrlParseTimeout=setTimeout(()=>{de.trim()&&de.includes(".")&&Y(de)},500)},ce=()=>{$.map_url.trim()&&Y($.map_url)},ve=()=>{te(de=>({...de,latitude:"",longitude:""})),q(null),O(!1)},Te=()=>{c?f(s):s(`/trips/${n}`)},Me=()=>{if(!y)return Array.from({length:10},(Tt,Bt)=>Bt+1);const de=new Date(y.start_date),Re=new Date(y.end_date),Ke=Math.abs(Re.getTime()-de.getTime()),Ye=Math.ceil(Ke/(1e3*60*60*24))+1,Be=Math.min(Math.max(1,Ye),30);return Array.from({length:Be},(Tt,Bt)=>Bt+1)},we=de=>{if(!y)return`Day ${de}`;const Re=new Date(y.start_date),Ke=new Date(Re);Ke.setDate(Re.getDate()+de-1);const Ye=Ke.getFullYear(),Be=String(Ke.getMonth()+1).padStart(2,"0"),Tt=String(Ke.getDate()).padStart(2,"0"),ii=["일","월","화","수","목","금","토"][Ke.getDay()];return`Day ${de} (${Ye}.${Be}.${Tt}.${ii})`},Ue=()=>$.place_name.trim()?$.start_time?$.end_time&&$.start_time>=$.end_time?(W("종료 시간은 시작 시간보다 늦어야 합니다."),!1):$.memo.length>1e3?(W("메모는 1000자를 초과할 수 없습니다."),!1):$.latitude&&(isNaN(Number($.latitude))||Number($.latitude)<-90||Number($.latitude)>90)?(W("위도는 -90에서 90 사이의 숫자여야 합니다."),!1):$.longitude&&(isNaN(Number($.longitude))||Number($.longitude)<-180||Number($.longitude)>180)?(W("경도는 -180에서 180 사이의 숫자여야 합니다."),!1):!0:(W("시작 시간을 선택해주세요."),!1):(W("장소명을 입력해주세요."),!1),Ve=async de=>{if(de.preventDefault(),!(!t||!y||!Ue())){M(!0),W(null);try{const Re=[];for(const Tt of _e){const Bt=cy(Ny,`plan-photos/${t.uid}/${Date.now()}_${Tt.name}`),ii=await oy(Bt,Tt),Ss=await ly(ii.ref);Re.push(Ss)}let Ke=$.latitude,Ye=$.longitude;if($.map_url.trim()&&(!$.latitude||!$.longitude)){const Tt=HT($.map_url.trim());if(Tt.success&&Tt.coordinates){const Bt=wf(Tt.coordinates);Ke=Bt.lat,Ye=Bt.lng,console.log(`🗺️ 지도 URL에서 좌표 자동 추출: ${Tt.source} (${Ke}, ${Ye})`)}}const Be={trip_id:n,day:$.day,place_name:$.place_name.trim(),start_time:$.start_time,type:$.type,photos:[...k,...Re],created_at:ft.now(),updated_at:ft.now()};if($.end_time&&(Be.end_time=$.end_time),$.address.trim()&&(Be.address=$.address.trim()),$.website.trim()&&(Be.website=$.website.trim()),$.opening_hours.trim()&&(Be.opening_hours=$.opening_hours.trim()),$.memo.trim()&&(Be.memo=$.memo.trim()),$.youtube_link.trim()&&(Be.youtube_link=$.youtube_link.trim()),$.map_url.trim()&&(Be.map_url=$.map_url.trim()),Ke&&!isNaN(Number(Ke))&&(Be.latitude=Number(Ke)),Ye&&!isNaN(Number(Ye))&&(Be.longitude=Number(Ye)),E&&e)await uT(Ni(cn,"plans",e),{...Be,updated_at:ft.now()});else{const Tt=Ni(la(cn,"plans"));await uT(Tt,Be)}Te()}catch(Re){console.error("일정 저장 실패:",Re),W("일정 저장에 실패했습니다. 다시 시도해주세요."),_(s,{delay:3e3,fallbackPath:`/trips/${n}`,preserveErrorState:!1})}finally{M(!1)}}};return I?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})}):z&&!y?d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(je,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:z}),d.jsx(Le,{onClick:()=>s("/"),children:"Back to Home"})]})}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs(Le,{variant:"ghost",size:"sm",onClick:Te,className:"flex items-center space-x-2",ariaLabel:"Back to trip details",children:[d.jsx(Fh,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white text-glow text-center flex-1",children:E?"일정 편집":"새 일정 추가"}),d.jsx("div",{className:"w-20 sm:w-24"})]}),y&&d.jsxs(je,{variant:"light",className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:y.title}),d.jsxs("p",{className:"text-white/60",children:[we($.day)," 일정"]})]}),d.jsxs("form",{onSubmit:Ve,className:"space-y-6",children:[d.jsxs(je,{variant:"travel",className:"animate-fade-in",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"기본 정보"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Day *"}),d.jsx("select",{value:$.day,onChange:de=>te({...$,day:parseInt(de.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all",children:Me().map(de=>d.jsx("option",{value:de,className:"bg-primary-800",children:we(de)},de))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"유형 *"}),d.jsxs("div",{className:"relative",children:[d.jsx("select",{value:$.type,onChange:de=>te({...$,type:de.target.value}),className:"w-full px-12 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all appearance-none",children:Ce.map(de=>d.jsx("option",{value:de.value,className:"bg-primary-800",children:de.label},de.value))}),d.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:Ce.find(de=>de.value===$.type)?.icon})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"장소명 *"}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[d.jsx("input",{type:"text",value:$.place_name,onChange:de=>te({...$,place_name:de.target.value}),placeholder:"예: 도쿄 스카이트리",className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"}),d.jsxs(Le,{type:"button",variant:"ghost",onClick:()=>s(`/places/search?trip=${n}`),className:"!p-3 sm:!p-3 w-full sm:w-auto",ariaLabel:"장소 검색",children:[d.jsx(u_,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-2 sm:hidden",children:"장소 검색"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"주소"}),d.jsx("input",{type:"text",value:$.address,onChange:de=>te({...$,address:de.target.value}),placeholder:"예: 도쿄도 스미다구 오시아게 1-1-2",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Ah,{className:"w-4 h-4 inline mr-1"}),"시작 시간 *"]}),d.jsx("input",{type:"time",value:$.start_time,onChange:de=>te({...$,start_time:de.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"종료 시간"}),d.jsx("input",{type:"time",value:$.end_time,onChange:de=>te({...$,end_time:de.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]})]})]})]}),d.jsxs(je,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"상세 정보"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Bf,{className:"w-4 h-4 inline mr-2"}),"홈페이지"]}),d.jsx("input",{type:"url",value:$.website,onChange:de=>te({...$,website:de.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Ah,{className:"w-4 h-4 inline mr-2"}),"영업 시간"]}),d.jsx("input",{type:"text",value:$.opening_hours,onChange:de=>te({...$,opening_hours:de.target.value}),placeholder:"예: 월-금 09:00-18:00, 토요일 휴무",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]})]})]}),d.jsxs(je,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[d.jsx(YT,{className:"w-5 h-5 inline mr-2"}),"사진 (",k.length+_e.length,"/5)"]}),k.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:k.map((de,Re)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:de,alt:`사진 ${Re+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),d.jsx(Le,{type:"button",onClick:()=>ee(Re,!0),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:d.jsx(Ol,{className:"w-3 h-3"})})]},Re))}),xe.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:xe.map((de,Re)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:de,alt:`새 사진 ${Re+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),d.jsx(Le,{type:"button",onClick:()=>ee(Re),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:d.jsx(Ol,{className:"w-3 h-3"})})]},Re))}),k.length+_e.length<5&&d.jsxs("label",{className:"block w-full h-20 border-2 border-dashed border-white/30 rounded-lg cursor-pointer hover:border-white/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(J_,{className:"w-6 h-6 mb-1"}),d.jsx("span",{className:"text-sm",children:"사진 추가"})]}),d.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:Je,className:"hidden"})]})]}),d.jsxs(je,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("h3",{className:"text-lg font-semibold text-white",children:[d.jsx(Bn,{className:"w-5 h-5 inline mr-2"}),"위치 정보"]}),($.latitude||$.longitude)&&d.jsx(Le,{type:"button",onClick:ve,variant:"ghost",size:"sm",className:"text-xs text-red-300 hover:text-red-200 hover:bg-red-500/20",ariaLabel:"좌표 초기화",children:"초기화"})]}),U?.success&&d.jsx("div",{className:"mb-4 p-3 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2 text-blue-200 text-sm",children:[d.jsx("span",{className:"text-blue-400",children:"ℹ"}),d.jsx("span",{children:"지도 URL에서 자동 추출된 좌표입니다"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:["위도 (Latitude)",d.jsx("span",{className:"text-xs text-white/60 ml-1",children:"(-90 ~ 90)"})]}),d.jsx("input",{type:"text",value:$.latitude,onChange:de=>te({...$,latitude:de.target.value}),placeholder:"예: 35.710063",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/50 focus:outline-none transition-all ${U?.success&&U.coordinates?"border-blue-400/50 focus:border-blue-300 focus:ring-1 focus:ring-blue-300":"border-white/20 focus:border-primary-300 focus:ring-1 focus:ring-primary-300"}`})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:["경도 (Longitude)",d.jsx("span",{className:"text-xs text-white/60 ml-1",children:"(-180 ~ 180)"})]}),d.jsx("input",{type:"text",value:$.longitude,onChange:de=>te({...$,longitude:de.target.value}),placeholder:"예: 139.810700",className:`w-full px-4 py-3 bg-white/10 border rounded-xl text-white placeholder-white/50 focus:outline-none transition-all ${U?.success&&U.coordinates?"border-blue-400/50 focus:border-blue-300 focus:ring-1 focus:ring-blue-300":"border-white/20 focus:border-primary-300 focus:ring-1 focus:ring-primary-300"}`})]})]}),($.latitude||$.longitude)&&d.jsx("div",{className:"mt-3",children:(()=>{const de=parseFloat($.latitude),Re=parseFloat($.longitude),Ke=!isNaN(de)&&de>=-90&&de<=90,Ye=!isNaN(Re)&&Re>=-180&&Re<=180;return $.latitude&&$.longitude?Ke&&Ye?d.jsxs("div",{className:"flex items-center space-x-2 text-green-200 text-xs",children:[d.jsx("span",{className:"text-green-400",children:"✓"}),d.jsx("span",{children:"유효한 좌표입니다"})]}):d.jsxs("div",{className:"flex items-center space-x-2 text-red-200 text-xs",children:[d.jsx("span",{className:"text-red-400",children:"✗"}),d.jsxs("span",{children:[!Ke&&"위도가 유효하지 않습니다 ",!Ye&&"경도가 유효하지 않습니다"]})]}):null})()})]}),d.jsxs(je,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"링크"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Il,{className:"w-4 h-4 inline mr-1"}),"YouTube 링크"]}),d.jsx("input",{type:"url",value:$.youtube_link,onChange:de=>te({...$,youtube_link:de.target.value}),placeholder:"https://youtube.com/watch?v=...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(WT,{className:"w-4 h-4 inline mr-1"}),"지도 링크",d.jsx("span",{className:"text-xs text-white/60 ml-2",children:"(Google Maps, Naver, Kakao 지원)"})]}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"url",value:$.map_url,onChange:de=>se(de.target.value),placeholder:"https://maps.google.com/... 또는 https://map.naver.com/...",className:"w-full px-4 py-3 pr-24 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"}),$.map_url.trim()&&d.jsx(Le,{type:"button",onClick:ce,variant:"ghost",size:"sm",className:"absolute right-1 top-1 bottom-1 px-2 bg-primary-500/20 hover:bg-primary-500/40 text-xs",ariaLabel:"좌표 추출",children:"파싱"})]}),Z&&U&&d.jsx("div",{className:`mt-2 p-3 rounded-lg text-sm ${U.success?"bg-green-500/20 border border-green-500/30 text-green-200":"bg-red-500/20 border border-red-500/30 text-red-200"}`,children:U.success?d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[d.jsx("span",{className:"text-green-400",children:"✓"}),d.jsx("span",{className:"font-medium",children:"좌표 추출 성공!"}),U.source&&d.jsx("span",{className:"text-xs bg-green-500/30 px-2 py-1 rounded-full",children:U.source})]}),U.coordinates&&d.jsxs("div",{className:"text-xs text-green-300",children:["위도: ",wf(U.coordinates).lat,", 경도: ",wf(U.coordinates).lng]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[d.jsx("span",{className:"text-red-400",children:"✗"}),d.jsx("span",{className:"font-medium",children:"좌표 추출 실패"})]}),d.jsx("div",{className:"text-xs text-red-300",children:U.error})]})})]})]})]}),d.jsxs(je,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"메모"}),d.jsx("textarea",{value:$.memo,onChange:de=>te({...$,memo:de.target.value}),placeholder:"이 장소에 대한 메모를 작성해주세요...",maxLength:1e3,rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 resize-none transition-all"}),d.jsxs("div",{className:"text-xs text-white/60 mt-1 text-right",children:[$.memo.length,"/1000자"]})]}),z&&d.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-xl p-4",children:d.jsx("p",{className:"text-red-200 text-sm text-center",children:z})}),d.jsx("div",{className:"sticky bottom-6 z-10",children:d.jsx(Le,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in shadow-lg",style:{animationDelay:"0.6s"},disabled:D,ariaLabel:D?"저장 중":E?"일정 수정하기":"일정 추가하기",children:D?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{children:"저장 중..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(ZI,{className:"w-5 h-5 mr-2"}),E?"수정하기":"추가하기"]})})})]})]})}),d.jsx(ga,{})]})},WV=({place:n,onSelect:e,onToggleFavorite:t})=>{const s=c=>{switch(c){case"attraction":return d.jsx(Ih,{className:"w-5 h-5 text-travel-orange"});case"restaurant":return d.jsx(tv,{className:"w-5 h-5 text-travel-green"});case"hotel":return d.jsx(ev,{className:"w-5 h-5 text-travel-purple"});case"transport":return d.jsx(qf,{className:"w-5 h-5 text-travel-blue"});default:return d.jsx(Bn,{className:"w-5 h-5 text-white/80"})}},o=c=>{switch(c){case"attraction":return"관광지";case"restaurant":return"음식점";case"hotel":return"숙소";case"transport":return"교통";default:return"기타"}};return d.jsx(je,{variant:"light",hoverable:!0,className:"cursor-pointer",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>e(n),children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s(n.type),d.jsx("span",{className:"text-xs text-white/60 bg-white/10 px-2 py-1 rounded-full",children:o(n.type)}),n.favorite&&d.jsx(zf,{className:"w-4 h-4 text-red-400 fill-current"})]}),d.jsx("h3",{className:"text-lg font-semibold text-white mb-1 truncate",children:n.name}),n.address&&d.jsxs("div",{className:"flex items-center space-x-1 text-white/60 text-sm mb-2",children:[d.jsx(Bn,{className:"w-3 h-3"}),d.jsx("span",{className:"truncate",children:n.address})]}),n.rating&&n.rating>0&&d.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[d.jsx(Ih,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-white/80 text-sm",children:n.rating})]}),n.latitude&&n.longitude&&d.jsxs("div",{className:"flex items-center space-x-1 text-white/50 text-xs mb-2",children:[d.jsx(Ml,{className:"w-3 h-3"}),d.jsxs("span",{children:[n.latitude.toFixed(6),", ",n.longitude.toFixed(6)]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-white/50",children:[d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Ah,{className:"w-3 h-3"}),d.jsxs("span",{children:[n.usage_count||0,"번 사용"]})]}),n.created_at&&d.jsx("span",{children:n.created_at.toDate().toLocaleDateString("ko-KR")})]})]}),d.jsx("button",{onClick:c=>{c.stopPropagation(),t(n)},className:"ml-2 p-2 hover:bg-white/10 rounded-lg transition-colors",children:d.jsx(zf,{className:`w-5 h-5 ${n.favorite?"text-red-400 fill-current":"text-white/40"}`})})]})})},YV=()=>{const{user:n}=Qs(),e=Qi(),[t]=ym(),{smartGoBack:s}=Km(t),o=t.get("trip"),[c,f]=V.useState([]),[_,y]=V.useState(""),[b,E]=V.useState("all"),[A,I]=V.useState("recent"),[F,D]=V.useState(!0),[M,z]=V.useState(!1),[W,$]=V.useState(null),[te,_e]=V.useState(null),[ge,xe]=V.useState(!1),[B,k]=V.useState({name:"",address:"",type:"attraction",rating:0,latitude:"",longitude:""}),j=[{value:"all",label:"전체",icon:"📍"},{value:"attraction",label:"관광지",icon:"🏛️"},{value:"restaurant",label:"음식점",icon:"🍽️"},{value:"hotel",label:"숙소",icon:"🏨"},{value:"transport",label:"교통",icon:"🚗"},{value:"other",label:"기타",icon:"📍"}],U=[{value:"recent",label:"최근 추가순"},{value:"favorite",label:"즐겨찾기"},{value:"usage",label:"자주 사용"}];V.useEffect(()=>{if(!n)return;const Y=Gc(la(cn,"users",n.uid,"places"));return To(Y,ce=>{const ve=ce.docs.map(Te=>({id:Te.id,...Te.data()}));f(ve),D(!1)},ce=>{console.error("Places 로딩 실패:",ce),D(!1)})},[n]);const q=V.useMemo(()=>{let Y=c;if(_.trim()){const se=_.toLowerCase().trim();Y=Y.filter(ce=>ce.name.toLowerCase().includes(se)||ce.address&&ce.address.toLowerCase().includes(se))}return b!=="all"&&(Y=Y.filter(se=>se.type===b)),Y.sort((se,ce)=>{switch(A){case"favorite":return se.favorite&&!ce.favorite?-1:!se.favorite&&ce.favorite?1:(ce.usage_count||0)-(se.usage_count||0);case"usage":return(ce.usage_count||0)-(se.usage_count||0);case"recent":default:return ce.created_at.toMillis()-se.created_at.toMillis()}}),Y},[c,_,b,A]),Z=async Y=>{try{if($(null),await fm(Ni(cn,"users",n.uid,"places",Y.id),{usage_count:sO(1),last_used:ft.now()}),o){const se=new URLSearchParams({place_name:Y.name,address:Y.address||"",type:Y.type,rating:Y.rating?.toString()||"0",latitude:Y.latitude?.toString()||"",longitude:Y.longitude?.toString()||""});e(`/trips/${o}/plans/new?${se.toString()}`)}else s(e,"/")}catch(se){console.error("장소 선택 실패:",se),$("장소 선택 중 오류가 발생했습니다. 다시 시도해주세요."),setTimeout(()=>{o?e(`/trips/${o}/plans/new`):s(e,"/")},2e3)}},O=async Y=>{try{$(null),await fm(Ni(cn,"users",n.uid,"places",Y.id),{favorite:!Y.favorite,updated_at:ft.now()}),_e(Y.favorite?"즐겨찾기에서 제거했습니다.":"즐겨찾기에 추가했습니다."),setTimeout(()=>_e(null),3e3)}catch(se){console.error("즐겨찾기 토글 실패:",se),$("즐겨찾기 설정 중 오류가 발생했습니다."),setTimeout(()=>$(null),5e3)}},Ce=async Y=>{if(Y.preventDefault(),!(!n||!B.name.trim())){xe(!0),$(null);try{const se={name:B.name.trim(),address:B.address.trim()||void 0,type:B.type,rating:B.rating||void 0,latitude:B.latitude?parseFloat(B.latitude):void 0,longitude:B.longitude?parseFloat(B.longitude):void 0,favorite:!1,usage_count:0,created_at:ft.now(),updated_at:ft.now()};await WS(la(cn,"users",n.uid,"places"),se),k({name:"",address:"",type:"attraction",rating:0,latitude:"",longitude:""}),z(!1),_e("새 장소가 성공적으로 추가되었습니다!"),setTimeout(()=>_e(null),3e3)}catch(se){console.error("새 장소 추가 실패:",se),$("장소 추가 중 오류가 발생했습니다. 다시 시도해주세요."),setTimeout(()=>$(null),5e3)}finally{xe(!1)}}},Je=()=>{if(!navigator.geolocation){$("이 브라우저에서는 위치 서비스를 지원하지 않습니다.");return}$(null),navigator.geolocation.getCurrentPosition(Y=>{const{latitude:se,longitude:ce}=Y.coords;k(ve=>({...ve,latitude:se.toString(),longitude:ce.toString()})),_e("현재 위치가 설정되었습니다."),setTimeout(()=>_e(null),3e3)},Y=>{console.error("위치 정보 가져오기 실패:",Y);let se="위치 정보를 가져올 수 없습니다.";switch(Y.code){case Y.PERMISSION_DENIED:se="위치 접근 권한이 거부되었습니다.";break;case Y.POSITION_UNAVAILABLE:se="위치 정보를 사용할 수 없습니다.";break;case Y.TIMEOUT:se="위치 정보 요청이 시간 초과되었습니다.";break}$(se),setTimeout(()=>$(null),5e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},ee=()=>d.jsx(je,{variant:"light",className:"animate-pulse",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx("div",{className:"w-5 h-5 bg-white/20 rounded"}),d.jsx("div",{className:"w-16 h-6 bg-white/20 rounded-full"})]}),d.jsx("div",{className:"w-3/4 h-6 bg-white/20 rounded mb-2"}),d.jsx("div",{className:"w-1/2 h-4 bg-white/20 rounded mb-2"}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"w-20 h-4 bg-white/20 rounded"}),d.jsx("div",{className:"w-24 h-4 bg-white/20 rounded"})]})]}),d.jsx("div",{className:"ml-2 w-9 h-9 bg-white/20 rounded-lg"})]})});return F?d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-white text-center flex-1 text-glow",children:"장소 검색"}),d.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg animate-pulse"})]}),d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"w-full h-12 bg-white/10 rounded-xl animate-pulse"})}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[1,2,3,4,5].map(Y=>d.jsx("div",{className:"flex-shrink-0 w-20 h-10 bg-white/10 rounded-lg animate-pulse"},Y))}),d.jsx("div",{className:"flex space-x-2",children:[1,2,3].map(Y=>d.jsx("div",{className:"w-24 h-10 bg-white/10 rounded-lg animate-pulse"},Y))})]}),d.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(Y=>d.jsx(ee,{},Y))})]})}),d.jsx(ga,{})]}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Ys,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-white text-center flex-1 text-glow",children:"장소 검색"}),d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>z(!M),className:"!p-2",children:d.jsx(zc,{className:"w-5 h-5"})})]}),W&&d.jsx("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-200 text-sm",children:W}),te&&d.jsx("div",{className:"mb-4 p-4 bg-green-500/20 border border-green-500/50 rounded-xl text-green-200 text-sm",children:te}),d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(u_,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),d.jsx("input",{type:"text",value:_,onChange:Y=>y(Y.target.value),placeholder:"장소명이나 주소로 검색...",className:"w-full pl-12 pr-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]})}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(QT,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"유형"})]}),d.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:j.map(Y=>d.jsxs("button",{onClick:()=>E(Y.value),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm transition-all ${b===Y.value?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[Y.icon," ",Y.label]},Y.value))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center space-x-2 mb-2",children:d.jsx("span",{className:"text-white/60 text-sm",children:"정렬"})}),d.jsx("div",{className:"flex space-x-2",children:U.map(Y=>d.jsx("button",{onClick:()=>I(Y.value),className:`px-3 py-2 rounded-lg text-sm transition-all ${A===Y.value?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:Y.label},Y.value))})]})]}),M&&d.jsxs(je,{variant:"travel",className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"새 장소 추가"}),d.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[d.jsx("div",{children:d.jsx("input",{type:"text",value:B.name,onChange:Y=>k({...B,name:Y.target.value}),placeholder:"장소명 *",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300",required:!0})}),d.jsx("div",{children:d.jsx("input",{type:"text",value:B.address,onChange:Y=>k({...B,address:Y.target.value}),placeholder:"주소",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-white/70 text-sm",children:"위치 좌표 (선택사항)"}),d.jsx(Le,{type:"button",variant:"ghost",size:"sm",onClick:Je,className:"!p-2",title:"현재 위치 가져오기",children:d.jsx(Ml,{className:"w-4 h-4"})})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx("div",{children:d.jsx("input",{type:"number",step:"any",value:B.latitude,onChange:Y=>k({...B,latitude:Y.target.value}),placeholder:"위도 (latitude)",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})}),d.jsx("div",{children:d.jsx("input",{type:"number",step:"any",value:B.longitude,onChange:Y=>k({...B,longitude:Y.target.value}),placeholder:"경도 (longitude)",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx("select",{value:B.type,onChange:Y=>k({...B,type:Y.target.value}),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300",children:j.filter(Y=>Y.value!=="all").map(Y=>d.jsx("option",{value:Y.value,className:"bg-primary-800",children:Y.label},Y.value))}),d.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(Y=>d.jsx("button",{type:"button",onClick:()=>k({...B,rating:Y}),className:`w-6 h-6 ${Y<=B.rating?"text-yellow-400":"text-white/30"}`,children:d.jsx(Ih,{className:"w-6 h-6 fill-current"})},Y))})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(Le,{type:"submit",variant:"travel",size:"sm",className:"flex-1",disabled:ge||!B.name.trim(),children:ge?"추가 중...":"추가"}),d.jsx(Le,{type:"button",variant:"ghost",size:"sm",onClick:()=>z(!1),disabled:ge,children:"취소"})]})]})]}),d.jsx("div",{className:"space-y-4",children:q.length===0?d.jsx(je,{variant:"light",className:"text-center py-8",children:_.trim()?d.jsxs(d.Fragment,{children:[d.jsx(u_,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsxs("p",{className:"text-white/60 mb-4",children:["'",_,"'에 대한 검색 결과가 없습니다"]}),d.jsxs(Le,{variant:"travel",onClick:()=>z(!0),children:[d.jsx(zc,{className:"w-4 h-4 mr-2"}),"새 장소 추가"]})]}):d.jsxs(d.Fragment,{children:[d.jsx(Bn,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-4",children:"저장된 장소가 없어요"}),d.jsxs(Le,{variant:"travel",onClick:()=>z(!0),children:[d.jsx(zc,{className:"w-4 h-4 mr-2"}),"첫 번째 장소 추가"]})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-white/60 text-sm mb-2",children:[q.length,"개의 장소"]}),q.map(Y=>d.jsx(WV,{place:Y,onSelect:Z,onToggleFavorite:O},Y.id))]})})]})}),d.jsx(ga,{})]})};function xA(n,e){const t=V.useRef(e);V.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const QV=1;function XV(n){return Object.freeze({__version:QV,map:n})}function bA(n,e){return Object.freeze({...n,...e})}const Ay=V.createContext(null);function Wm(){const n=V.use(Ay);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function wA(n){function e(t,s){const{instance:o,context:c}=n(t).current;V.useImperativeHandle(s,()=>o);const{children:f}=t;return f==null?null:Hf.createElement(Ay,{value:c},f)}return V.forwardRef(e)}function JV(n){function e(t,s){const[o,c]=V.useState(!1),{instance:f}=n(t,c).current;V.useImperativeHandle(s,()=>f),V.useEffect(function(){o&&f.update()},[f,o,t.children]);const _=f._contentNode;return _?_E.createPortal(t.children,_):null}return V.forwardRef(e)}function eU(n){function e(t,s){const{instance:o}=n(t).current;return V.useImperativeHandle(s,()=>o),null}return V.forwardRef(e)}function Iy(n,e){const t=V.useRef(void 0);V.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function Ym(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function tU(n,e){return function(s,o){const c=Wm(),f=n(Ym(s,c),c);return xA(c.map,s.attribution),Iy(f.current,s.eventHandlers),e(f.current,c,s,o),f}}var mh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var nU=mh.exports,ZT;function iU(){return ZT||(ZT=1,function(n,e){(function(t,s){s(e)})(nU,function(t){var s="1.9.4";function o(a){var u,p,x,T;for(p=1,x=arguments.length;p<x;p++){T=arguments[p];for(u in T)a[u]=T[u]}return a}var c=Object.create||function(){function a(){}return function(u){return a.prototype=u,new a}}();function f(a,u){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var x=p.call(arguments,2);return function(){return a.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var _=0;function y(a){return"_leaflet_id"in a||(a._leaflet_id=++_),a._leaflet_id}function b(a,u,p){var x,T,C,H;return H=function(){x=!1,T&&(C.apply(p,T),T=!1)},C=function(){x?T=arguments:(a.apply(p,arguments),setTimeout(H,u),x=!0)},C}function E(a,u,p){var x=u[1],T=u[0],C=x-T;return a===x&&p?a:((a-T)%C+C)%C+T}function A(){return!1}function I(a,u){if(u===!1)return a;var p=Math.pow(10,u===void 0?6:u);return Math.round(a*p)/p}function F(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a){return F(a).split(/\s+/)}function M(a,u){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?c(a.options):{});for(var p in u)a.options[p]=u[p];return a.options}function z(a,u,p){var x=[];for(var T in a)x.push(encodeURIComponent(p?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(!u||u.indexOf("?")===-1?"?":"&")+x.join("&")}var W=/\{ *([\w_ -]+) *\}/g;function $(a,u){return a.replace(W,function(p,x){var T=u[x];if(T===void 0)throw new Error("No value provided for variable "+p);return typeof T=="function"&&(T=T(u)),T})}var te=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function _e(a,u){for(var p=0;p<a.length;p++)if(a[p]===u)return p;return-1}var ge="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function xe(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var B=0;function k(a){var u=+new Date,p=Math.max(0,16-(u-B));return B=u+p,window.setTimeout(a,p)}var j=window.requestAnimationFrame||xe("RequestAnimationFrame")||k,U=window.cancelAnimationFrame||xe("CancelAnimationFrame")||xe("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function q(a,u,p){if(p&&j===k)a.call(u);else return j.call(window,f(a,u))}function Z(a){a&&U.call(window,a)}var O={__proto__:null,extend:o,create:c,bind:f,get lastId(){return _},stamp:y,throttle:b,wrapNum:E,falseFn:A,formatNum:I,trim:F,splitWords:D,setOptions:M,getParamString:z,template:$,isArray:te,indexOf:_e,emptyImageUrl:ge,requestFn:j,cancelFn:U,requestAnimFrame:q,cancelAnimFrame:Z};function Ce(){}Ce.extend=function(a){var u=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=c(p);x.constructor=u,u.prototype=x;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(u[T]=this[T]);return a.statics&&o(u,a.statics),a.includes&&(Je(a.includes),o.apply(null,[x].concat(a.includes))),o(x,a),delete x.statics,delete x.includes,x.options&&(x.options=p.options?c(p.options):{},o(x.options,a.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var C=0,H=x._initHooks.length;C<H;C++)x._initHooks[C].call(this)}},u},Ce.include=function(a){var u=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=u,this.mergeOptions(a.options)),this},Ce.mergeOptions=function(a){return o(this.prototype.options,a),this},Ce.addInitHook=function(a){var u=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Je(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=te(a)?a:[a];for(var u=0;u<a.length;u++)a[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(a,u,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],u);else{a=D(a);for(var T=0,C=a.length;T<C;T++)this._on(a[T],u,p)}return this},off:function(a,u,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var x in a)this._off(x,a[x],u);else{a=D(a);for(var T=arguments.length===1,C=0,H=a.length;C<H;C++)T?this._off(a[C]):this._off(a[C],u,p)}return this},_on:function(a,u,p,x){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(a,u,p)===!1){p===this&&(p=void 0);var T={fn:u,ctx:p};x&&(T.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(T)}},_off:function(a,u,p){var x,T,C;if(this._events&&(x=this._events[a],!!x)){if(arguments.length===1){if(this._firingCount)for(T=0,C=x.length;T<C;T++)x[T].fn=A;delete this._events[a];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var H=this._listens(a,u,p);if(H!==!1){var J=x[H];this._firingCount&&(J.fn=A,this._events[a]=x=x.slice()),x.splice(H,1)}}},fire:function(a,u,p){if(!this.listens(a,p))return this;var x=o({},u,{type:a,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var C=0,H=T.length;C<H;C++){var J=T[C],oe=J.fn;J.once&&this.off(a,oe,J.ctx),oe.call(J.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(a,u,p,x){typeof a!="string"&&console.warn('"string" type argument expected');var T=u;typeof u!="function"&&(x=!!u,T=void 0,p=void 0);var C=this._events&&this._events[a];if(C&&C.length&&this._listens(a,T,p)!==!1)return!0;if(x){for(var H in this._eventParents)if(this._eventParents[H].listens(a,u,p,x))return!0}return!1},_listens:function(a,u,p){if(!this._events)return!1;var x=this._events[a]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var T=0,C=x.length;T<C;T++)if(x[T].fn===u&&x[T].ctx===p)return T;return!1},once:function(a,u,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],u,!0);else{a=D(a);for(var T=0,C=a.length;T<C;T++)this._on(a[T],u,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[y(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[y(a)],this},_propagateEvent:function(a){for(var u in this._eventParents)this._eventParents[u].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var Y=Ce.extend(ee);function se(a,u,p){this.x=p?Math.round(a):a,this.y=p?Math.round(u):u}var ce=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};se.prototype={clone:function(){return new se(this.x,this.y)},add:function(a){return this.clone()._add(ve(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(ve(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new se(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new se(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(a){a=ve(a);var u=a.x-this.x,p=a.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(a){return a=ve(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=ve(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function ve(a,u,p){return a instanceof se?a:te(a)?new se(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new se(a.x,a.y):new se(a,u,p)}function Te(a,u){if(a)for(var p=u?[a,u]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}Te.prototype={extend:function(a){var u,p;if(!a)return this;if(a instanceof se||typeof a[0]=="number"||"x"in a)u=p=ve(a);else if(a=Me(a),u=a.min,p=a.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var u,p;return typeof a[0]=="number"||a instanceof se?a=ve(a):a=Me(a),a instanceof Te?(u=a.min,p=a.max):u=p=a,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=Me(a);var u=this.min,p=this.max,x=a.min,T=a.max,C=T.x>=u.x&&x.x<=p.x,H=T.y>=u.y&&x.y<=p.y;return C&&H},overlaps:function(a){a=Me(a);var u=this.min,p=this.max,x=a.min,T=a.max,C=T.x>u.x&&x.x<p.x,H=T.y>u.y&&x.y<p.y;return C&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*a,T=Math.abs(u.y-p.y)*a;return Me(ve(u.x-x,u.y-T),ve(p.x+x,p.y+T))},equals:function(a){return a?(a=Me(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Me(a,u){return!a||a instanceof Te?a:new Te(a,u)}function we(a,u){if(a)for(var p=u?[a,u]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}we.prototype={extend:function(a){var u=this._southWest,p=this._northEast,x,T;if(a instanceof Ve)x=a,T=a;else if(a instanceof we){if(x=a._southWest,T=a._northEast,!x||!T)return this}else return a?this.extend(de(a)||Ue(a)):this;return!u&&!p?(this._southWest=new Ve(x.lat,x.lng),this._northEast=new Ve(T.lat,T.lng)):(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(T.lat,p.lat),p.lng=Math.max(T.lng,p.lng)),this},pad:function(a){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*a,T=Math.abs(u.lng-p.lng)*a;return new we(new Ve(u.lat-x,u.lng-T),new Ve(p.lat+x,p.lng+T))},getCenter:function(){return new Ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Ve||"lat"in a?a=de(a):a=Ue(a);var u=this._southWest,p=this._northEast,x,T;return a instanceof we?(x=a.getSouthWest(),T=a.getNorthEast()):x=T=a,x.lat>=u.lat&&T.lat<=p.lat&&x.lng>=u.lng&&T.lng<=p.lng},intersects:function(a){a=Ue(a);var u=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),C=T.lat>=u.lat&&x.lat<=p.lat,H=T.lng>=u.lng&&x.lng<=p.lng;return C&&H},overlaps:function(a){a=Ue(a);var u=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),C=T.lat>u.lat&&x.lat<p.lat,H=T.lng>u.lng&&x.lng<p.lng;return C&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,u){return a?(a=Ue(a),this._southWest.equals(a.getSouthWest(),u)&&this._northEast.equals(a.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ue(a,u){return a instanceof we?a:new we(a,u)}function Ve(a,u,p){if(isNaN(a)||isNaN(u))throw new Error("Invalid LatLng object: ("+a+", "+u+")");this.lat=+a,this.lng=+u,p!==void 0&&(this.alt=+p)}Ve.prototype={equals:function(a,u){if(!a)return!1;a=de(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(u===void 0?1e-9:u)},toString:function(a){return"LatLng("+I(this.lat,a)+", "+I(this.lng,a)+")"},distanceTo:function(a){return Ke.distance(this,de(a))},wrap:function(){return Ke.wrapLatLng(this)},toBounds:function(a){var u=180*a/40075017,p=u/Math.cos(Math.PI/180*this.lat);return Ue([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new Ve(this.lat,this.lng,this.alt)}};function de(a,u,p){return a instanceof Ve?a:te(a)&&typeof a[0]!="object"?a.length===3?new Ve(a[0],a[1],a[2]):a.length===2?new Ve(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Ve(a.lat,"lng"in a?a.lng:a.lon,a.alt):u===void 0?null:new Ve(a,u,p)}var Re={latLngToPoint:function(a,u){var p=this.projection.project(a),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(a,u){var p=this.scale(u),x=this.transformation.untransform(a,p);return this.projection.unproject(x)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(a),x=this.transformation.transform(u.min,p),T=this.transformation.transform(u.max,p);return new Te(x,T)},infinite:!1,wrapLatLng:function(a){var u=this.wrapLng?E(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?E(a.lat,this.wrapLat,!0):a.lat,x=a.alt;return new Ve(p,u,x)},wrapLatLngBounds:function(a){var u=a.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,T=u.lng-p.lng;if(x===0&&T===0)return a;var C=a.getSouthWest(),H=a.getNorthEast(),J=new Ve(C.lat-x,C.lng-T),oe=new Ve(H.lat-x,H.lng-T);return new we(J,oe)}},Ke=o({},Re,{wrapLng:[-180,180],R:6371e3,distance:function(a,u){var p=Math.PI/180,x=a.lat*p,T=u.lat*p,C=Math.sin((u.lat-a.lat)*p/2),H=Math.sin((u.lng-a.lng)*p/2),J=C*C+Math.cos(x)*Math.cos(T)*H*H,oe=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*oe}}),Ye=6378137,Be={R:Ye,MAX_LATITUDE:85.0511287798,project:function(a){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,a.lat),-p),T=Math.sin(x*u);return new se(this.R*a.lng*u,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var u=180/Math.PI;return new Ve((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*u,a.x*u/this.R)},bounds:function(){var a=Ye*Math.PI;return new Te([-a,-a],[a,a])}()};function Tt(a,u,p,x){if(te(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=u,this._c=p,this._d=x}Tt.prototype={transform:function(a,u){return this._transform(a.clone(),u)},_transform:function(a,u){return u=u||1,a.x=u*(this._a*a.x+this._b),a.y=u*(this._c*a.y+this._d),a},untransform:function(a,u){return u=u||1,new se((a.x/u-this._b)/this._a,(a.y/u-this._d)/this._c)}};function Bt(a,u,p,x){return new Tt(a,u,p,x)}var ii=o({},Ke,{code:"EPSG:3857",projection:Be,transformation:function(){var a=.5/(Math.PI*Be.R);return Bt(a,.5,-a,.5)}()}),Ss=o({},ii,{code:"EPSG:900913"});function ya(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Ho(a,u){var p="",x,T,C,H,J,oe;for(x=0,C=a.length;x<C;x++){for(J=a[x],T=0,H=J.length;T<H;T++)oe=J[T],p+=(T?"L":"M")+oe.x+" "+oe.y;p+=u?Pe.svg?"z":"x":""}return p||"M0 0"}var qn=document.documentElement.style,xa="ActiveXObject"in window,Go=xa&&!document.addEventListener,kr="msLaunchUri"in navigator&&!("documentMode"in document),As=Gn("webkit"),Kl=Gn("android"),Pr=Gn("android 2")||Gn("android 3"),Zo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Wl=Kl&&Gn("Google")&&Zo<537&&!("AudioNode"in window),Mt=!!window.opera,_t=!kr&&Gn("chrome"),Hn=Gn("gecko")&&!As&&!Mt&&!xa,Tn=!_t&&Gn("safari"),$o=Gn("phantom"),Yl="OTransition"in qn,jr=navigator.platform.indexOf("Win")===0,Xs=xa&&"transition"in qn,Is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pr,pi="MozPerspective"in qn,ba=!window.L_DISABLE_3D&&(Xs||Is||pi)&&!Yl&&!$o,Ai=typeof orientation<"u"||Gn("mobile"),Ko=Ai&&As,Wo=Ai&&Is,wa=!window.PointerEvent&&window.MSPointerEvent,Xi=!!(window.PointerEvent||wa),Ji="ontouchstart"in window||!!window.TouchEvent,Yo=!window.L_NO_TOUCH&&(Ji||Xi),es=Ai&&Mt,Qo=Ai&&Hn,Js=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ta=function(){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",A,u),window.removeEventListener("testPassiveEventSupport",A,u)}catch{}return a}(),er=function(){return!!document.createElement("canvas").getContext}(),Ea=!!(document.createElementNS&&ya("svg").createSVGRect),Dt=!!Ea&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),sn=!Ea&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var u=a.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Qt=navigator.platform.indexOf("Mac")===0,gi=navigator.platform.indexOf("Linux")===0;function Gn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Pe={ie:xa,ielt9:Go,edge:kr,webkit:As,android:Kl,android23:Pr,androidStock:Wl,opera:Mt,chrome:_t,gecko:Hn,safari:Tn,phantom:$o,opera12:Yl,win:jr,ie3d:Xs,webkit3d:Is,gecko3d:pi,any3d:ba,mobile:Ai,mobileWebkit:Ko,mobileWebkit3d:Wo,msPointer:wa,pointer:Xi,touch:Yo,touchNative:Ji,mobileOpera:es,mobileGecko:Qo,retina:Js,passiveEvents:Ta,canvas:er,svg:Ea,vml:sn,inlineSvg:Dt,mac:Qt,linux:gi},Cs=Pe.msPointer?"MSPointerDown":"pointerdown",Xo=Pe.msPointer?"MSPointerMove":"pointermove",tr=Pe.msPointer?"MSPointerUp":"pointerup",Rs=Pe.msPointer?"MSPointerCancel":"pointercancel",Ii={touchstart:Cs,touchmove:Xo,touchend:tr,touchcancel:Rs},Ci={touchstart:Dr,touchmove:Mr,touchend:Mr,touchcancel:Mr},jn={},En=!1;function Zt(a,u,p){return u==="touchstart"&&Ql(),Ci[u]?(p=Ci[u].bind(this,p),a.addEventListener(Ii[u],p,!1),p):(console.warn("wrong event specified:",u),A)}function Jo(a,u,p){if(!Ii[u]){console.warn("wrong event specified:",u);return}a.removeEventListener(Ii[u],p,!1)}function Na(a){jn[a.pointerId]=a}function Ri(a){jn[a.pointerId]&&(jn[a.pointerId]=a)}function ts(a){delete jn[a.pointerId]}function Ql(){En||(document.addEventListener(Cs,Na,!0),document.addEventListener(Xo,Ri,!0),document.addEventListener(tr,ts,!0),document.addEventListener(Rs,ts,!0),En=!0)}function Mr(a,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in jn)u.touches.push(jn[p]);u.changedTouches=[u],a(u)}}function Dr(a,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&At(u),Mr(a,u)}function Xl(a){var u={},p,x;for(x in a)p=a[x],u[x]=p&&p.bind?p.bind(a):p;return a=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var nr=200;function ns(a,u){a.addEventListener("dblclick",u);var p=0,x;function T(C){if(C.detail!==1){x=C.detail;return}if(!(C.pointerType==="mouse"||C.sourceCapabilities&&!C.sourceCapabilities.firesTouchEvents)){var H=Ia(C);if(!(H.some(function(oe){return oe instanceof HTMLLabelElement&&oe.attributes.for})&&!H.some(function(oe){return oe instanceof HTMLInputElement||oe instanceof HTMLSelectElement}))){var J=Date.now();J-p<=nr?(x++,x===2&&u(Xl(C))):x=1,p=J}}}return a.addEventListener("click",T),{dblclick:u,simDblclick:T}}function _n(a,u){a.removeEventListener("dblclick",u.dblclick),a.removeEventListener("click",u.simDblclick)}var ks=ki(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ir=ki(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),is=ir==="webkitTransition"||ir==="OTransition"?ir+"End":"transitionend";function Lr(a){return typeof a=="string"?document.getElementById(a):a}function ss(a,u){var p=a.style[u]||a.currentStyle&&a.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(a,null);p=x?x[u]:null}return p==="auto"?null:p}function st(a,u,p){var x=document.createElement(a);return x.className=u||"",p&&p.appendChild(x),x}function xt(a){var u=a.parentNode;u&&u.removeChild(a)}function un(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function rs(a){var u=a.parentNode;u&&u.lastChild!==a&&u.appendChild(a)}function sr(a){var u=a.parentNode;u&&u.firstChild!==a&&u.insertBefore(a,u.firstChild)}function rr(a,u){if(a.classList!==void 0)return a.classList.contains(u);var p=Ft(a);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Qe(a,u){if(a.classList!==void 0)for(var p=D(u),x=0,T=p.length;x<T;x++)a.classList.add(p[x]);else if(!rr(a,u)){var C=Ft(a);el(a,(C?C+" ":"")+u)}}function Et(a,u){a.classList!==void 0?a.classList.remove(u):el(a,F((" "+Ft(a)+" ").replace(" "+u+" "," ")))}function el(a,u){a.className.baseVal===void 0?a.className=u:a.className.baseVal=u}function Ft(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Lt(a,u){"opacity"in a.style?a.style.opacity=u:"filter"in a.style&&Or(a,u)}function Or(a,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(x)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):a.style.filter+=" progid:"+x+"(opacity="+u+")"}function ki(a){for(var u=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in u)return a[p];return!1}function Mn(a,u,p){var x=u||new se(0,0);a.style[ks]=(Pe.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function He(a,u){a._leaflet_pos=u,Pe.any3d?Mn(a,u):(a.style.left=u.x+"px",a.style.top=u.y+"px")}function si(a){return a._leaflet_pos||new se(0,0)}var Nn,Pi,Sa;if("onselectstart"in document)Nn=function(){ze(window,"selectstart",At)},Pi=function(){mt(window,"selectstart",At)};else{var Ps=ki(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nn=function(){if(Ps){var a=document.documentElement.style;Sa=a[Ps],a[Ps]="none"}},Pi=function(){Ps&&(document.documentElement.style[Ps]=Sa,Sa=void 0)}}function Vr(){ze(window,"dragstart",At)}function tl(){mt(window,"dragstart",At)}var Aa,ar;function ji(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Dn(),Aa=a,ar=a.style.outlineStyle,a.style.outlineStyle="none",ze(window,"keydown",Dn))}function Dn(){Aa&&(Aa.style.outlineStyle=ar,Aa=void 0,ar=void 0,mt(window,"keydown",Dn))}function as(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function Mi(a){var u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}var nl={__proto__:null,TRANSFORM:ks,TRANSITION:ir,TRANSITION_END:is,get:Lr,getStyle:ss,create:st,remove:xt,empty:un,toFront:rs,toBack:sr,hasClass:rr,addClass:Qe,removeClass:Et,setClass:el,getClass:Ft,setOpacity:Lt,testProp:ki,setTransform:Mn,setPosition:He,getPosition:si,get disableTextSelection(){return Nn},get enableTextSelection(){return Pi},disableImageDrag:Vr,enableImageDrag:tl,preventOutline:ji,restoreOutline:Dn,getSizedParentNode:as,getScale:Mi};function ze(a,u,p,x){if(u&&typeof u=="object")for(var T in u)js(a,T,u[T],p);else{u=D(u);for(var C=0,H=u.length;C<H;C++)js(a,u[C],p,x)}return this}var ri="_leaflet_events";function mt(a,u,p,x){if(arguments.length===1)_i(a),delete a[ri];else if(u&&typeof u=="object")for(var T in u)vi(a,T,u[T],p);else if(u=D(u),arguments.length===2)_i(a,function(J){return _e(u,J)!==-1});else for(var C=0,H=u.length;C<H;C++)vi(a,u[C],p,x);return this}function _i(a,u){for(var p in a[ri]){var x=p.split(/\d/)[0];(!u||u(x))&&vi(a,x,null,null,p)}}var Zn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function js(a,u,p,x){var T=u+y(p)+(x?"_"+y(x):"");if(a[ri]&&a[ri][T])return this;var C=function(J){return p.call(x||a,J||window.event)},H=C;!Pe.touchNative&&Pe.pointer&&u.indexOf("touch")===0?C=Zt(a,u,C):Pe.touch&&u==="dblclick"?C=ns(a,C):"addEventListener"in a?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?a.addEventListener(Zn[u]||u,C,Pe.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(C=function(J){J=J||window.event,Ds(a,J)&&H(J)},a.addEventListener(Zn[u],C,!1)):a.addEventListener(u,H,!1):a.attachEvent("on"+u,C),a[ri]=a[ri]||{},a[ri][T]=C}function vi(a,u,p,x,T){T=T||u+y(p)+(x?"_"+y(x):"");var C=a[ri]&&a[ri][T];if(!C)return this;!Pe.touchNative&&Pe.pointer&&u.indexOf("touch")===0?Jo(a,u,C):Pe.touch&&u==="dblclick"?_n(a,C):"removeEventListener"in a?a.removeEventListener(Zn[u]||u,C,!1):a.detachEvent("on"+u,C),a[ri][T]=null}function $n(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Di(a){return js(a,"wheel",$n),this}function Ms(a){return ze(a,"mousedown touchstart dblclick contextmenu",$n),a._leaflet_disable_click=!0,this}function At(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Sn(a){return At(a),$n(a),this}function Ia(a){if(a.composedPath)return a.composedPath();for(var u=[],p=a.target;p;)u.push(p),p=p.parentNode;return u}function rn(a,u){if(!u)return new se(a.clientX,a.clientY);var p=Mi(u),x=p.boundingClientRect;return new se((a.clientX-x.left)/p.x-u.clientLeft,(a.clientY-x.top)/p.y-u.clientTop)}var vt=Pe.linux&&Pe.chrome?window.devicePixelRatio:Pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ur(a){return Pe.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/vt:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ds(a,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var Jl={__proto__:null,on:ze,off:mt,stopPropagation:$n,disableScrollPropagation:Di,disableClickPropagation:Ms,preventDefault:At,stop:Sn,getPropagationPath:Ia,getMousePosition:rn,getWheelDelta:Ur,isExternalTarget:Ds,addListener:ze,removeListener:mt},zr=Y.extend({run:function(a,u,p,x){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=si(a),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(a){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,u){var p=this._startPos.add(this._offset.multiplyBy(a));u&&p._round(),He(this._el,p),this.fire("step")},_complete:function(){Z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),tt=Y.extend({options:{crs:ii,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,u){u=M(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(de(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ir&&Pe.any3d&&!Pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,is,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),a=this._limitCenter(de(a),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=o({animate:p.animate},p.zoom),p.pan=o({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,u,p.zoom):this._tryAnimatedPan(a,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(a,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,u){return this._loaded?this.setView(this.getCenter(),a,{zoom:u}):(this._zoom=a,this)},zoomIn:function(a,u){return a=a||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,u)},zoomOut:function(a,u){return a=a||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,u)},setZoomAround:function(a,u,p){var x=this.getZoomScale(u),T=this.getSize().divideBy(2),C=a instanceof se?a:this.latLngToContainerPoint(a),H=C.subtract(T).multiplyBy(1-1/x),J=this.containerPointToLatLng(T.add(H));return this.setView(J,u,{zoom:p})},_getBoundsCenterZoom:function(a,u){u=u||{},a=a.getBounds?a.getBounds():Ue(a);var p=ve(u.paddingTopLeft||u.padding||[0,0]),x=ve(u.paddingBottomRight||u.padding||[0,0]),T=this.getBoundsZoom(a,!1,p.add(x));if(T=typeof u.maxZoom=="number"?Math.min(u.maxZoom,T):T,T===1/0)return{center:a.getCenter(),zoom:T};var C=x.subtract(p).divideBy(2),H=this.project(a.getSouthWest(),T),J=this.project(a.getNorthEast(),T),oe=this.unproject(H.add(J).divideBy(2).add(C),T);return{center:oe,zoom:T}},fitBounds:function(a,u){if(a=Ue(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,u){return this.setView(a,this._zoom,{pan:u})},panBy:function(a,u){if(a=ve(a).round(),u=u||{},!a.x&&!a.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new zr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Qe(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,u,p){if(p=p||{},p.animate===!1||!Pe.any3d)return this.setView(a,u,p);this._stop();var x=this.project(this.getCenter()),T=this.project(a),C=this.getSize(),H=this._zoom;a=de(a),u=u===void 0?H:u;var J=Math.max(C.x,C.y),oe=J*this.getZoomScale(H,u),ye=T.distanceTo(x)||1,Ee=1.42,Ae=Ee*Ee;function ke(Ht){var fs=Ht?-1:1,Bs=Ht?oe:J,dr=oe*oe-J*J+fs*Ae*Ae*ye*ye,Fs=2*Bs*Ae*ye,_l=dr/Fs,dc=Math.sqrt(_l*_l+1)-_l,vl=dc<1e-9?-18:Math.log(dc);return vl}function We(Ht){return(Math.exp(Ht)-Math.exp(-Ht))/2}function Vt(Ht){return(Math.exp(Ht)+Math.exp(-Ht))/2}function $t(Ht){return We(Ht)/Vt(Ht)}var In=ke(0);function yi(Ht){return J*(Vt(In)/Vt(In+Ee*Ht))}function md(Ht){return J*(Vt(In)*$t(In+Ee*Ht)-We(In))/Ae}function pd(Ht){return 1-Math.pow(1-Ht,1.5)}var gl=Date.now(),Ga=(ke(1)-In)/Ee,gd=p.duration?1e3*p.duration:1e3*Ga*.8;function Za(){var Ht=(Date.now()-gl)/gd,fs=pd(Ht)*Ga;Ht<=1?(this._flyToFrame=q(Za,this),this._move(this.unproject(x.add(T.subtract(x).multiplyBy(md(fs)/ye)),H),this.getScaleZoom(J/yi(fs),H),{flyTo:!0})):this._move(a,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Za.call(this),this},flyToBounds:function(a,u){var p=this._getBoundsCenterZoom(a,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(a){return a=Ue(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var u=this.options.minZoom;return this.options.minZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var u=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&u!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,Ue(a));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(a,u){u=u||{};var p=ve(u.paddingTopLeft||u.padding||[0,0]),x=ve(u.paddingBottomRight||u.padding||[0,0]),T=this.project(this.getCenter()),C=this.project(a),H=this.getPixelBounds(),J=Me([H.min.add(p),H.max.subtract(x)]),oe=J.getSize();if(!J.contains(C)){this._enforcingBounds=!0;var ye=C.subtract(J.getCenter()),Ee=J.extend(C).getSize().subtract(oe);T.x+=ye.x<0?-Ee.x:Ee.x,T.y+=ye.y<0?-Ee.y:Ee.y,this.panTo(this.unproject(T),u),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),T=p.divideBy(2).round(),C=x.subtract(T);return!C.x&&!C.y?this:(a.animate&&a.pan?this.panBy(C):(a.pan&&this._rawPanBy(C),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=f(this._handleGeolocationResponse,this),p=f(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,a):navigator.geolocation.getCurrentPosition(u,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var u=a.code,p=a.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var u=a.coords.latitude,p=a.coords.longitude,x=new Ve(u,p),T=x.toBounds(a.coords.accuracy*2),C=this._locateOptions;if(C.setView){var H=this.getBoundsZoom(T);this.setView(x,C.maxZoom?Math.min(H,C.maxZoom):H)}var J={latlng:x,bounds:T,timestamp:a.timestamp};for(var oe in a.coords)typeof a.coords[oe]=="number"&&(J[oe]=a.coords[oe]);this.fire("locationfound",J)}},addHandler:function(a,u){if(!u)return this;var p=this[a]=new u(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)xt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,u){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),x=st("div",p,u||this._mapPane);return a&&(this._panes[a]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),u=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new we(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,u,p){a=Ue(a),p=ve(p||[0,0]);var x=this.getZoom()||0,T=this.getMinZoom(),C=this.getMaxZoom(),H=a.getNorthWest(),J=a.getSouthEast(),oe=this.getSize().subtract(p),ye=Me(this.project(J,x),this.project(H,x)).getSize(),Ee=Pe.any3d?this.options.zoomSnap:1,Ae=oe.x/ye.x,ke=oe.y/ye.y,We=u?Math.max(Ae,ke):Math.min(Ae,ke);return x=this.getScaleZoom(We,x),Ee&&(x=Math.round(x/(Ee/100))*(Ee/100),x=u?Math.ceil(x/Ee)*Ee:Math.floor(x/Ee)*Ee),Math.max(T,Math.min(C,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new se(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,u){var p=this._getTopLeftPoint(a,u);return new Te(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(a)/p.scale(u)},getScaleZoom:function(a,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var x=p.zoom(a*p.scale(u));return isNaN(x)?1/0:x},project:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(de(a),u)},unproject:function(a,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(ve(a),u)},layerPointToLatLng:function(a){var u=ve(a).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(a){var u=this.project(de(a))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(de(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Ue(a))},distance:function(a,u){return this.options.crs.distance(de(a),de(u))},containerPointToLayerPoint:function(a){return ve(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return ve(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var u=this.containerPointToLayerPoint(ve(a));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(a)))},mouseEventToContainerPoint:function(a){return rn(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var u=this._container=Lr(a);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(u,"scroll",this._onScroll,this),this._containerId=y(u)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pe.any3d,Qe(a,"leaflet-container"+(Pe.touch?" leaflet-touch":"")+(Pe.retina?" leaflet-retina":"")+(Pe.ielt9?" leaflet-oldie":"")+(Pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=ss(a,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),He(this._mapPane,new se(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Qe(a.markerPane,"leaflet-zoom-hide"),Qe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,u,p){He(this._mapPane,new se(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var T=this._zoom!==u;this._moveStart(T,p)._move(a,u)._moveEnd(T),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(a,u){return a&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(a,u,p,x){u===void 0&&(u=this._zoom);var T=this._zoom!==u;return this._zoom=u,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),x?p&&p.pinch&&this.fire("zoom",p):((T||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){He(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[y(this._container)]=this;var u=a?mt:ze;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Pe.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Z(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,u){for(var p=[],x,T=u==="mouseout"||u==="mouseover",C=a.target||a.srcElement,H=!1;C;){if(x=this._targets[y(C)],x&&(u==="click"||u==="preclick")&&this._draggableMoved(x)){H=!0;break}if(x&&x.listens(u,!0)&&(T&&!Ds(C,a)||(p.push(x),T))||C===this._container)break;C=C.parentNode}return!p.length&&!H&&!T&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var u=a.target||a.srcElement;if(!(!this._loaded||u._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(u))){var p=a.type;p==="mousedown"&&ji(u),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,u,p){if(a.type==="click"){var x=o({},a);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var T=this._findEventTargets(a,u);if(p){for(var C=[],H=0;H<p.length;H++)p[H].listens(u,!0)&&C.push(p[H]);T=C.concat(T)}if(T.length){u==="contextmenu"&&At(a);var J=T[0],oe={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ye=J.getLatLng&&(!J._radius||J._radius<=10);oe.containerPoint=ye?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(a),oe.layerPoint=this.containerPointToLayerPoint(oe.containerPoint),oe.latlng=ye?J.getLatLng():this.layerPointToLatLng(oe.layerPoint)}for(H=0;H<T.length;H++)if(T[H].fire(u,oe,!0),oe.originalEvent._stopped||T[H].options.bubblingMouseEvents===!1&&_e(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,u=this._handlers.length;a<u;a++)this._handlers[a].disable()},whenReady:function(a,u){return this._loaded?a.call(u||this,{target:this}):this.on("load",a,u),this},_getMapPanePos:function(){return si(this._mapPane)||new se(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,u){var p=a&&u!==void 0?this._getNewPixelOrigin(a,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,u){var p=this.getSize()._divideBy(2);return this.project(a,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(a,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(a,u,p){var x=this._getNewPixelOrigin(p,u);return Me([this.project(a.getSouthWest(),u)._subtract(x),this.project(a.getNorthWest(),u)._subtract(x),this.project(a.getSouthEast(),u)._subtract(x),this.project(a.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,u,p){if(!p)return a;var x=this.project(a,u),T=this.getSize().divideBy(2),C=new Te(x.subtract(T),x.add(T)),H=this._getBoundsOffset(C,p,u);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?a:this.unproject(x.add(H),u)},_limitOffset:function(a,u){if(!u)return a;var p=this.getPixelBounds(),x=new Te(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(a,u,p){var x=Me(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),T=x.min.subtract(a.min),C=x.max.subtract(a.max),H=this._rebound(T.x,-C.x),J=this._rebound(T.y,-C.y);return new se(H,J)},_rebound:function(a,u){return a+u>0?Math.round(a-u)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(u))},_limitZoom:function(a){var u=this.getMinZoom(),p=this.getMaxZoom(),x=Pe.any3d?this.options.zoomSnap:1;return x&&(a=Math.round(a/x)*x),Math.max(u,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Et(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,u){var p=this._getCenterOffset(a)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var a=this._proxy=st("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(u){var p=ks,x=this._proxy.style[p];Mn(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),u=this.getZoom();Mn(this._proxy,this.project(a,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),T=this._getCenterOffset(a)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(T)?!1:(q(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,u,!0)},this),!0)},_animateZoom:function(a,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=u,Qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function os(a,u){return new tt(a,u)}var vn=Ce.extend({options:{position:"topright"},initialize:function(a){M(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var u=this._map;return u&&u.removeControl(this),this.options.position=a,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var u=this._container=this.onAdd(a),p=this.getPosition(),x=a._controlCorners[p];return Qe(u,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),An=function(a){return new vn(a)};tt.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},u="leaflet-",p=this._controlContainer=st("div",u+"control-container",this._container);function x(T,C){var H=u+T+" "+u+C;a[T+C]=st("div",H,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)xt(this._controlCorners[a]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var il=vn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(a,u,p){M(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in a)this._addLayer(a[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return vn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,u){return this._addLayer(a,u),this._map?this._update():this},addOverlay:function(a,u){return this._addLayer(a,u,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var u=this._getLayer(y(a));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Et(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",u=this._container=st("div",a),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Ms(u),Di(u);var x=this._section=st("section",a+"-list");p&&(this._map.on("click",this.collapse,this),ze(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=st("a",a+"-toggle",u);T.href="#",T.title="Layers",T.setAttribute("role","button"),ze(T,{keydown:function(C){C.keyCode===13&&this._expandSafely()},click:function(C){At(C),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=st("div",a+"-base",x),this._separator=st("div",a+"-separator",x),this._overlaysList=st("div",a+"-overlays",x),u.appendChild(x)},_getLayer:function(a){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&y(this._layers[u].layer)===a)return this._layers[u]},_addLayer:function(a,u,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(f(function(x,T){return this.options.sortFunction(x.layer,T.layer,x.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;un(this._baseLayersList),un(this._overlaysList),this._layerControlInputs=[];var a,u,p,x,T=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),u=u||x.overlay,a=a||!x.overlay,T+=x.overlay?0:1;return this.options.hideSingleBase&&(a=a&&T>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=u&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var u=this._getLayer(y(a.target)),p=u.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(a,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(a){var u=document.createElement("label"),p=this._map.hasLayer(a.layer),x;a.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+y(this),p),this._layerControlInputs.push(x),x.layerId=y(a.layer),ze(x,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var C=document.createElement("span");u.appendChild(C),C.appendChild(x),C.appendChild(T);var H=a.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,u,p,x=[],T=[];this._handlingClick=!0;for(var C=a.length-1;C>=0;C--)u=a[C],p=this._getLayer(u.layerId).layer,u.checked?x.push(p):u.checked||T.push(p);for(C=0;C<T.length;C++)this._map.hasLayer(T[C])&&this._map.removeLayer(T[C]);for(C=0;C<x.length;C++)this._map.hasLayer(x[C])||this._map.addLayer(x[C]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,u,p,x=this._map.getZoom(),T=a.length-1;T>=0;T--)u=a[T],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,ze(a,"click",At),this.expand();var u=this;setTimeout(function(){mt(a,"click",At),u._preventClick=!1})}}),mu=function(a,u,p){return new il(a,u,p)},Ls=vn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var u="leaflet-control-zoom",p=st("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,u,p,x,T){var C=st("a",p,x);return C.innerHTML=a,C.href="#",C.title=u,C.setAttribute("role","button"),C.setAttribute("aria-label",u),Ms(C),ze(C,"click",Sn),ze(C,"click",T,this),ze(C,"click",this._refocusOnMap,this),C},_updateDisabled:function(){var a=this._map,u="leaflet-disabled";Et(this._zoomInButton,u),Et(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Qe(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Qe(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});tt.mergeOptions({zoomControl:!0}),tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ls,this.addControl(this.zoomControl))});var Ca=function(a){return new Ls(a)},Ra=vn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var u="leaflet-control-scale",p=st("div",u),x=this.options;return this._addScales(x,u+"-line",p),a.on(x.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,u,p){a.metric&&(this._mScale=st("div",u,p)),a.imperial&&(this._iScale=st("div",u,p))},_update:function(){var a=this._map,u=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,u]),a.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var u=this._getRoundNum(a),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/a)},_updateImperial:function(a){var u=a*3.2808399,p,x,T;u>5280?(p=u/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(T=this._getRoundNum(u),this._updateScale(this._iScale,T+" ft",T/u))},_updateScale:function(a,u,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=u},_getRoundNum:function(a){var u=Math.pow(10,(Math.floor(a)+"").length-1),p=a/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),ka=function(a){return new Ra(a)},ec='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',or=vn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pe.inlineSvg?ec+" ":"")+"Leaflet</a>"},initialize:function(a){M(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=st("div","leaflet-control-attribution"),Ms(this._container);for(var u in a._layers)a._layers[u].getAttribution&&this.addAttribution(a._layers[u].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var u in this._attributions)this._attributions[u]&&a.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});tt.mergeOptions({attributionControl:!0}),tt.addInitHook(function(){this.options.attributionControl&&new or().addTo(this)});var pu=function(a){return new or(a)};vn.Layers=il,vn.Zoom=Ls,vn.Scale=Ra,vn.Attribution=or,An.layers=mu,An.zoom=Ca,An.scale=ka,An.attribution=pu;var Kn=Ce.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Kn.addTo=function(a,u){return a.addHandler(u,this),this};var Br={Events:ee},sl=Pe.touch?"touchstart mousedown":"mousedown",Li=Y.extend({options:{clickTolerance:3},initialize:function(a,u,p,x){M(this,x),this._element=a,this._dragStartTarget=u||a,this._preventOutline=p},enable:function(){this._enabled||(ze(this._dragStartTarget,sl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Li._dragging===this&&this.finishDrag(!0),mt(this._dragStartTarget,sl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!rr(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Li._dragging===this&&this.finishDrag();return}if(!(Li._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Li._dragging=this,this._preventOutline&&ji(this._element),Vr(),Nn(),!this._moving)){this.fire("down");var u=a.touches?a.touches[0]:a,p=as(this._element);this._startPoint=new se(u.clientX,u.clientY),this._startPos=si(this._element),this._parentScale=Mi(p);var x=a.type==="mousedown";ze(document,x?"mousemove":"touchmove",this._onMove,this),ze(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var u=a.touches&&a.touches.length===1?a.touches[0]:a,p=new se(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,At(a),this._moved||(this.fire("dragstart"),this._moved=!0,Qe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),He(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Et(document.body,"leaflet-dragging"),this._lastTarget&&(Et(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mt(document,"mousemove touchmove",this._onMove,this),mt(document,"mouseup touchend touchcancel",this._onUp,this),tl(),Pi();var u=this._moved&&this._moving;this._moving=!1,Li._dragging=!1,u&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Pa(a,u,p){var x,T=[1,4,2,8],C,H,J,oe,ye,Ee,Ae,ke;for(C=0,Ee=a.length;C<Ee;C++)a[C]._code=ls(a[C],u);for(J=0;J<4;J++){for(Ae=T[J],x=[],C=0,Ee=a.length,H=Ee-1;C<Ee;H=C++)oe=a[C],ye=a[H],oe._code&Ae?ye._code&Ae||(ke=hn(ye,oe,Ae,u,p),ke._code=ls(ke,u),x.push(ke)):(ye._code&Ae&&(ke=hn(ye,oe,Ae,u,p),ke._code=ls(ke,u),x.push(ke)),x.push(oe));a=x}return a}function lr(a,u){var p,x,T,C,H,J,oe,ye,Ee;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ae=de([0,0]),ke=Ue(a),We=ke.getNorthWest().distanceTo(ke.getSouthWest())*ke.getNorthEast().distanceTo(ke.getNorthWest());We<1700&&(Ae=ja(a));var Vt=a.length,$t=[];for(p=0;p<Vt;p++){var In=de(a[p]);$t.push(u.project(de([In.lat-Ae.lat,In.lng-Ae.lng])))}for(J=oe=ye=0,p=0,x=Vt-1;p<Vt;x=p++)T=$t[p],C=$t[x],H=T.y*C.x-C.y*T.x,oe+=(T.x+C.x)*H,ye+=(T.y+C.y)*H,J+=H*3;J===0?Ee=$t[0]:Ee=[oe/J,ye/J];var yi=u.unproject(ve(Ee));return de([yi.lat+Ae.lat,yi.lng+Ae.lng])}function ja(a){for(var u=0,p=0,x=0,T=0;T<a.length;T++){var C=de(a[T]);u+=C.lat,p+=C.lng,x++}return de([u/x,p/x])}var Ma={__proto__:null,clipPolygon:Pa,polygonCenter:lr,centroid:ja};function rl(a,u){if(!u||!a.length)return a.slice();var p=u*u;return a=nc(a,p),a=tc(a,p),a}function Da(a,u,p){return Math.sqrt(Wn(a,u,p,!0))}function Os(a,u,p){return Wn(a,u,p)}function tc(a,u){var p=a.length,x=typeof Uint8Array<"u"?Uint8Array:Array,T=new x(p);T[0]=T[p-1]=1,La(a,T,u,0,p-1);var C,H=[];for(C=0;C<p;C++)T[C]&&H.push(a[C]);return H}function La(a,u,p,x,T){var C=0,H,J,oe;for(J=x+1;J<=T-1;J++)oe=Wn(a[J],a[x],a[T],!0),oe>C&&(H=J,C=oe);C>p&&(u[H]=1,La(a,u,p,x,H),La(a,u,p,H,T))}function nc(a,u){for(var p=[a[0]],x=1,T=0,C=a.length;x<C;x++)ic(a[x],a[T])>u&&(p.push(a[x]),T=x);return T<C-1&&p.push(a[C-1]),p}var al;function Fr(a,u,p,x,T){var C=x?al:ls(a,p),H=ls(u,p),J,oe,ye;for(al=H;;){if(!(C|H))return[a,u];if(C&H)return!1;J=C||H,oe=hn(a,u,J,p,T),ye=ls(oe,p),J===C?(a=oe,C=ye):(u=oe,H=ye)}}function hn(a,u,p,x,T){var C=u.x-a.x,H=u.y-a.y,J=x.min,oe=x.max,ye,Ee;return p&8?(ye=a.x+C*(oe.y-a.y)/H,Ee=oe.y):p&4?(ye=a.x+C*(J.y-a.y)/H,Ee=J.y):p&2?(ye=oe.x,Ee=a.y+H*(oe.x-a.x)/C):p&1&&(ye=J.x,Ee=a.y+H*(J.x-a.x)/C),new se(ye,Ee,T)}function ls(a,u){var p=0;return a.x<u.min.x?p|=1:a.x>u.max.x&&(p|=2),a.y<u.min.y?p|=4:a.y>u.max.y&&(p|=8),p}function ic(a,u){var p=u.x-a.x,x=u.y-a.y;return p*p+x*x}function Wn(a,u,p,x){var T=u.x,C=u.y,H=p.x-T,J=p.y-C,oe=H*H+J*J,ye;return oe>0&&(ye=((a.x-T)*H+(a.y-C)*J)/oe,ye>1?(T=p.x,C=p.y):ye>0&&(T+=H*ye,C+=J*ye)),H=a.x-T,J=a.y-C,x?H*H+J*J:new se(T,C)}function m(a){return!te(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function w(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(a)}function N(a,u){var p,x,T,C,H,J,oe,ye;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ee=de([0,0]),Ae=Ue(a),ke=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());ke<1700&&(Ee=ja(a));var We=a.length,Vt=[];for(p=0;p<We;p++){var $t=de(a[p]);Vt.push(u.project(de([$t.lat-Ee.lat,$t.lng-Ee.lng])))}for(p=0,x=0;p<We-1;p++)x+=Vt[p].distanceTo(Vt[p+1])/2;if(x===0)ye=Vt[0];else for(p=0,C=0;p<We-1;p++)if(H=Vt[p],J=Vt[p+1],T=H.distanceTo(J),C+=T,C>x){oe=(C-x)/T,ye=[J.x-oe*(J.x-H.x),J.y-oe*(J.y-H.y)];break}var In=u.unproject(ve(ye));return de([In.lat+Ee.lat,In.lng+Ee.lng])}var P={__proto__:null,simplify:rl,pointToSegmentDistance:Da,closestPointOnSegment:Os,clipSegment:Fr,_getEdgeIntersection:hn,_getBitCode:ls,_sqClosestPointOnSegment:Wn,isFlat:m,_flat:w,polylineCenter:N},X={project:function(a){return new se(a.lng,a.lat)},unproject:function(a){return new Ve(a.y,a.x)},bounds:new Te([-180,-90],[180,90])},le={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var u=Math.PI/180,p=this.R,x=a.lat*u,T=this.R_MINOR/p,C=Math.sqrt(1-T*T),H=C*Math.sin(x),J=Math.tan(Math.PI/4-x/2)/Math.pow((1-H)/(1+H),C/2);return x=-p*Math.log(Math.max(J,1e-10)),new se(a.lng*u*p,x)},unproject:function(a){for(var u=180/Math.PI,p=this.R,x=this.R_MINOR/p,T=Math.sqrt(1-x*x),C=Math.exp(-a.y/p),H=Math.PI/2-2*Math.atan(C),J=0,oe=.1,ye;J<15&&Math.abs(oe)>1e-7;J++)ye=T*Math.sin(H),ye=Math.pow((1-ye)/(1+ye),T/2),oe=Math.PI/2-2*Math.atan(C*ye)-H,H+=oe;return new Ve(H*u,a.x*u/p)}},be={__proto__:null,LonLat:X,Mercator:le,SphericalMercator:Be},ct=o({},Ke,{code:"EPSG:3395",projection:le,transformation:function(){var a=.5/(Math.PI*le.R);return Bt(a,.5,-a,.5)}()}),Xt=o({},Ke,{code:"EPSG:4326",projection:X,transformation:Bt(1/180,1,-1/180,.5)}),ut=o({},Re,{projection:X,transformation:Bt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,u){var p=u.lng-a.lng,x=u.lat-a.lat;return Math.sqrt(p*p+x*x)},infinite:!0});Re.Earth=Ke,Re.EPSG3395=ct,Re.EPSG3857=ii,Re.EPSG900913=Ss,Re.EPSG4326=Xt,Re.Simple=ut;var bt=Y.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[y(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[y(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var u=a.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});tt.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var u=y(a);return this._layers[u]?this:(this._layers[u]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var u=y(a);return this._layers[u]?(this._loaded&&a.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return y(a)in this._layers},eachLayer:function(a,u){for(var p in this._layers)a.call(u,this._layers[p]);return this},_addLayers:function(a){a=a?te(a)?a:[a]:[];for(var u=0,p=a.length;u<p;u++)this.addLayer(a[u])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[y(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var u=y(a);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var T=this._zoomBoundLayers[x].options;a=T.minZoom===void 0?a:Math.min(a,T.minZoom),u=T.maxZoom===void 0?u:Math.max(u,T.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ot=bt.extend({initialize:function(a,u){M(this,u),this._layers={};var p,x;if(a)for(p=0,x=a.length;p<x;p++)this.addLayer(a[p])},addLayer:function(a){var u=this.getLayerId(a);return this._layers[u]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var u=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(a){var u=typeof a=="number"?a:this.getLayerId(a);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var u=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[a]&&x[a].apply(x,u);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,u){for(var p in this._layers)a.call(u,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return y(a)}}),Vs=function(a,u){return new Ot(a,u)},kt=Ot.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),Ot.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),Ot.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new we;for(var u in this._layers){var p=this._layers[u];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),cs=function(a,u){return new kt(a,u)},us=Ce.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){M(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,u){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(x,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(a,u){var p=this.options,x=p[u+"Size"];typeof x=="number"&&(x=[x,x]);var T=ve(x),C=ve(u==="shadow"&&p.shadowAnchor||p.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+u+" "+(p.className||""),C&&(a.style.marginLeft=-C.x+"px",a.style.marginTop=-C.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,u){return u=u||document.createElement("img"),u.src=a,u},_getIconUrl:function(a){return Pe.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function sc(a){return new us(a)}var Oa=us.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Oa.imagePath!="string"&&(Oa.imagePath=this._detectIconPath()),(this.options.imagePath||Oa.imagePath)+us.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var u=function(p,x,T){var C=x.exec(p);return C&&C[T]};return a=u(a,/^url\((['"])?(.+)\1\)$/,2),a&&u(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=st("div","leaflet-default-icon-path",document.body),u=ss(a,"background-image")||ss(a,"backgroundImage");if(document.body.removeChild(a),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),gu=Kn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Li(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Qe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,C=si(u._icon),H=p.getPixelBounds(),J=p.getPixelOrigin(),oe=Me(H.min._subtract(J).add(T),H.max._subtract(J).subtract(T));if(!oe.contains(C)){var ye=ve((Math.max(oe.max.x,C.x)-oe.max.x)/(H.max.x-oe.max.x)-(Math.min(oe.min.x,C.x)-oe.min.x)/(H.min.x-oe.min.x),(Math.max(oe.max.y,C.y)-oe.max.y)/(H.max.y-oe.max.y)-(Math.min(oe.min.y,C.y)-oe.min.y)/(H.min.y-oe.min.y)).multiplyBy(x);p.panBy(ye,{animate:!1}),this._draggable._newPos._add(ye),this._draggable._startPos._add(ye),He(u._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=q(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(Z(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,a)))},_onDrag:function(a){var u=this._marker,p=u._shadow,x=si(u._icon),T=u._map.layerPointToLatLng(x);p&&He(p,x),u._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,u.fire("move",a).fire("drag",a)},_onDragEnd:function(a){Z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),Va=bt.extend({options:{icon:new Oa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,u){M(this,u),this._latlng=de(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var u=this._latlng;return this._latlng=de(a),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Qe(p,u),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(p,"focus",this._panOnFocus,this);var T=a.icon.createShadow(this._shadow),C=!1;T!==this._shadow&&(this._removeShadow(),C=!0),T&&(Qe(T,u),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&C&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(this._icon,"focus",this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&He(this._icon,a),this._shadow&&He(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),gu)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new gu(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Lt(this._icon,a),this._shadow&&Lt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var u=this.options.icon.options,p=u.iconSize?ve(u.iconSize):ve(0,0),x=u.iconAnchor?ve(u.iconAnchor):ve(0,0);a.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function _u(a,u){return new Va(a,u)}var Us=bt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return M(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ol=Us.extend({options:{fill:!0,radius:10},initialize:function(a,u){M(this,u),this._latlng=de(a),this._radius=this.options.radius},setLatLng:function(a){var u=this._latlng;return this._latlng=de(a),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var u=a&&a.radius||this._radius;return Us.prototype.setStyle.call(this,a),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,u=this._radiusY||a,p=this._clickTolerance(),x=[a+p,u+p];this._pxBounds=new Te(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ld(a,u){return new ol(a,u)}var vu=ol.extend({initialize:function(a,u,p){if(typeof u=="number"&&(u=o({},p,{radius:u})),M(this,u),this._latlng=de(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new we(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Us.prototype.setStyle,_project:function(){var a=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Ke.distance){var T=Math.PI/180,C=this._mRadius/Ke.R/T,H=p.project([u+C,a]),J=p.project([u-C,a]),oe=H.add(J).divideBy(2),ye=p.unproject(oe).lat,Ee=Math.acos((Math.cos(C*T)-Math.sin(u*T)*Math.sin(ye*T))/(Math.cos(u*T)*Math.cos(ye*T)))/T;(isNaN(Ee)||Ee===0)&&(Ee=C/Math.cos(Math.PI/180*u)),this._point=oe.subtract(p.getPixelOrigin()),this._radius=isNaN(Ee)?0:oe.x-p.project([ye,a-Ee]).x,this._radiusY=oe.y-H.y}else{var Ae=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ae).x}this._updateBounds()}});function ep(a,u,p){return new vu(a,u,p)}var zs=Us.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,u){M(this,u),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var u=1/0,p=null,x=Wn,T,C,H=0,J=this._parts.length;H<J;H++)for(var oe=this._parts[H],ye=1,Ee=oe.length;ye<Ee;ye++){T=oe[ye-1],C=oe[ye];var Ae=x(a,T,C,!0);Ae<u&&(u=Ae,p=x(a,T,C))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return N(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,u){return u=u||this._defaultShape(),a=de(a),u.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new we,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var u=[],p=m(a),x=0,T=a.length;x<T;x++)p?(u[x]=de(a[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(a[x]);return u},_project:function(){var a=new Te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),u=new se(a,a);this._rawPxBounds&&(this._pxBounds=new Te([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(a,u,p){var x=a[0]instanceof Ve,T=a.length,C,H;if(x){for(H=[],C=0;C<T;C++)H[C]=this._map.latLngToLayerPoint(a[C]),p.extend(H[C]);u.push(H)}else for(C=0;C<T;C++)this._projectLatlngs(a[C],u,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,x,T,C,H,J,oe;for(p=0,T=0,C=this._rings.length;p<C;p++)for(oe=this._rings[p],x=0,H=oe.length;x<H-1;x++)J=Fr(oe[x],oe[x+1],a,x,!0),J&&(u[T]=u[T]||[],u[T].push(J[0]),(J[1]!==oe[x+1]||x===H-2)&&(u[T].push(J[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,u=this.options.smoothFactor,p=0,x=a.length;p<x;p++)a[p]=rl(a[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,u){var p,x,T,C,H,J,oe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,C=this._parts.length;p<C;p++)for(J=this._parts[p],x=0,H=J.length,T=H-1;x<H;T=x++)if(!(!u&&x===0)&&Da(a,J[T],J[x])<=oe)return!0;return!1}});function tp(a,u){return new zs(a,u)}zs._flat=w;var Ua=zs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return lr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var u=zs.prototype._convertLatLngs.call(this,a),p=u.length;return p>=2&&u[0]instanceof Ve&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(a){zs.prototype._setLatLngs.call(this,a),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,u=this.options.weight,p=new se(u,u);if(a=new Te(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,T=this._rings.length,C;x<T;x++)C=Pa(this._rings[x],a,!0),C.length&&this._parts.push(C)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var u=!1,p,x,T,C,H,J,oe,ye;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(C=0,oe=this._parts.length;C<oe;C++)for(p=this._parts[C],H=0,ye=p.length,J=ye-1;H<ye;J=H++)x=p[H],T=p[J],x.y>a.y!=T.y>a.y&&a.x<(T.x-x.x)*(a.y-x.y)/(T.y-x.y)+x.x&&(u=!u);return u||zs.prototype._containsPoint.call(this,a,!0)}});function ai(a,u){return new Ua(a,u)}var oi=kt.extend({initialize:function(a,u){M(this,u),this._layers={},a&&this.addData(a)},addData:function(a){var u=te(a)?a:a.features,p,x,T;if(u){for(p=0,x=u.length;p<x;p++)T=u[p],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var C=this.options;if(C.filter&&!C.filter(a))return this;var H=ll(a,C);return H?(H.feature=za(a),H.defaultOptions=H.options,this.resetStyle(H),C.onEachFeature&&C.onEachFeature(a,H),this.addLayer(H)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(u){this._setLayerStyle(u,a)},this)},_setLayerStyle:function(a,u){a.setStyle&&(typeof u=="function"&&(u=u(a.feature)),a.setStyle(u))}});function ll(a,u){var p=a.type==="Feature"?a.geometry:a,x=p?p.coordinates:null,T=[],C=u&&u.pointToLayer,H=u&&u.coordsToLatLng||rc,J,oe,ye,Ee;if(!x&&!p)return null;switch(p.type){case"Point":return J=H(x),yu(C,a,J,u);case"MultiPoint":for(ye=0,Ee=x.length;ye<Ee;ye++)J=H(x[ye]),T.push(yu(C,a,J,u));return new kt(T);case"LineString":case"MultiLineString":return oe=cl(x,p.type==="LineString"?0:1,H),new zs(oe,u);case"Polygon":case"MultiPolygon":return oe=cl(x,p.type==="Polygon"?1:2,H),new Ua(oe,u);case"GeometryCollection":for(ye=0,Ee=p.geometries.length;ye<Ee;ye++){var Ae=ll({geometry:p.geometries[ye],type:"Feature",properties:a.properties},u);Ae&&T.push(Ae)}return new kt(T);case"FeatureCollection":for(ye=0,Ee=p.features.length;ye<Ee;ye++){var ke=ll(p.features[ye],u);ke&&T.push(ke)}return new kt(T);default:throw new Error("Invalid GeoJSON object.")}}function yu(a,u,p,x){return a?a(u,p):new Va(p,x&&x.markersInheritOptions&&x)}function rc(a){return new Ve(a[1],a[0],a[2])}function cl(a,u,p){for(var x=[],T=0,C=a.length,H;T<C;T++)H=u?cl(a[T],u-1,p):(p||rc)(a[T]),x.push(H);return x}function ul(a,u){return a=de(a),a.alt!==void 0?[I(a.lng,u),I(a.lat,u),I(a.alt,u)]:[I(a.lng,u),I(a.lat,u)]}function ac(a,u,p,x){for(var T=[],C=0,H=a.length;C<H;C++)T.push(u?ac(a[C],m(a[C])?0:u-1,p,x):ul(a[C],x));return!u&&p&&T.length>0&&T.push(T[0].slice()),T}function Oi(a,u){return a.feature?o({},a.feature,{geometry:u}):za(u)}function za(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var qr={toGeoJSON:function(a){return Oi(this,{type:"Point",coordinates:ul(this.getLatLng(),a)})}};Va.include(qr),vu.include(qr),ol.include(qr),zs.include({toGeoJSON:function(a){var u=!m(this._latlngs),p=ac(this._latlngs,u?1:0,!1,a);return Oi(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),Ua.include({toGeoJSON:function(a){var u=!m(this._latlngs),p=u&&!m(this._latlngs[0]),x=ac(this._latlngs,p?2:u?1:0,!0,a);return u||(x=[x]),Oi(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),Ot.include({toMultiPoint:function(a){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(a).geometry.coordinates)}),Oi(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(a){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(a);var p=u==="GeometryCollection",x=[];return this.eachLayer(function(T){if(T.toGeoJSON){var C=T.toGeoJSON(a);if(p)x.push(C.geometry);else{var H=za(C);H.type==="FeatureCollection"?x.push.apply(x,H.features):x.push(H)}}}),p?Oi(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function oc(a,u){return new oi(a,u)}var cd=oc,hs=bt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,u,p){this._url=a,this._bounds=Ue(u),M(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&rs(this._image),this},bringToBack:function(){return this._map&&sr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Ue(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",u=this._image=a?this._url:st("img");if(Qe(u,"leaflet-image-layer"),this._zoomAnimated&&Qe(u,"leaflet-zoom-animated"),this.options.className&&Qe(u,this.options.className),u.onselectstart=A,u.onmousemove=A,u.onload=f(this.fire,this,"load"),u.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(a){var u=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Mn(this._image,p,u)},_reset:function(){var a=this._image,u=new Te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();He(a,u.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Lt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Ba=function(a,u,p){return new hs(a,u,p)},lc=hs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",u=this._image=a?this._url:st("video");if(Qe(u,"leaflet-image-layer"),this._zoomAnimated&&Qe(u,"leaflet-zoom-animated"),this.options.className&&Qe(u,this.options.className),u.onselectstart=A,u.onmousemove=A,u.onloadeddata=f(this.fire,this,"load"),a){for(var p=u.getElementsByTagName("source"),x=[],T=0;T<p.length;T++)x.push(p[T].src);this._url=p.length>0?x:[u.src];return}te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var C=0;C<this._url.length;C++){var H=st("source");H.src=this._url[C],u.appendChild(H)}}});function ud(a,u,p){return new lc(a,u,p)}var cr=hs.extend({_initImage:function(){var a=this._image=this._url;Qe(a,"leaflet-image-layer"),this._zoomAnimated&&Qe(a,"leaflet-zoom-animated"),this.options.className&&Qe(a,this.options.className),a.onselectstart=A,a.onmousemove=A}});function hd(a,u,p){return new cr(a,u,p)}var Vi=bt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,u){a&&(a instanceof Ve||te(a))?(this._latlng=de(a),M(this,u)):(M(this,a),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Lt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Lt(this._container,1),this.bringToFront(),this.options.interactive&&(Qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Lt(this._container,0),this._removeTimeout=setTimeout(f(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=de(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rs(this._container),this},bringToBack:function(){return this._map&&sr(this._container),this},_prepareOpen:function(a){var u=this._source;if(!u._map)return!1;if(u instanceof kt){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!a)if(u.getCenter)a=u.getCenter();else if(u.getLatLng)a=u.getLatLng();else if(u.getBounds)a=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")a.innerHTML=u;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),u=ve(this.options.offset),p=this._getAnchor();this._zoomAnimated?He(this._container,a.add(p)):u=u.add(a).add(p);var x=this._containerBottom=-u.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});tt.include({_initOverlay:function(a,u,p,x){var T=u;return T instanceof a||(T=new a(x).setContent(u)),p&&T.setLatLng(p),T}}),bt.include({_initOverlay:function(a,u,p,x){var T=p;return T instanceof a?(M(T,x),T._source=this):(T=u&&!x?u:new a(x,this),T.setContent(p)),T}});var hl=Vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Vi.prototype.openOn.call(this,a)},onAdd:function(a){Vi.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Us||this._source.on("preclick",$n))},onRemove:function(a){Vi.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Us||this._source.off("preclick",$n))},getEvents:function(){var a=Vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",u=this._container=st("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=st("div",a+"-content-wrapper",u);if(this._contentNode=st("div",a+"-content",p),Ms(u),Di(this._contentNode),ze(u,"contextmenu",$n),this._tipContainer=st("div",a+"-tip-container",u),this._tip=st("div",a+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=st("a",a+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',ze(x,"click",function(T){At(T),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,u=a.style;u.width="",u.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var x=a.offsetHeight,T=this.options.maxHeight,C="leaflet-popup-scrolled";T&&x>T?(u.height=T+"px",Qe(a,C)):Et(a,C),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();He(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,u=parseInt(ss(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,T=new se(this._containerLeft,-p-this._containerBottom);T._add(si(this._container));var C=a.layerPointToContainerPoint(T),H=ve(this.options.autoPanPadding),J=ve(this.options.autoPanPaddingTopLeft||H),oe=ve(this.options.autoPanPaddingBottomRight||H),ye=a.getSize(),Ee=0,Ae=0;C.x+x+oe.x>ye.x&&(Ee=C.x+x-ye.x+oe.x),C.x-Ee-J.x<0&&(Ee=C.x-J.x),C.y+p+oe.y>ye.y&&(Ae=C.y+p-ye.y+oe.y),C.y-Ae-J.y<0&&(Ae=C.y-J.y),(Ee||Ae)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([Ee,Ae]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),np=function(a,u){return new hl(a,u)};tt.mergeOptions({closePopupOnClick:!0}),tt.include({openPopup:function(a,u,p){return this._initOverlay(hl,a,u,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),bt.include({bindPopup:function(a,u){return this._popup=this._initOverlay(hl,this._popup,a,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof kt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Sn(a);var u=a.layer||a.target;if(this._popup._source===u&&!(u instanceof Us)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=u,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var cc=Vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Vi.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Vi.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Vi.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",u=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=st("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var u,p,x=this._map,T=this._container,C=x.latLngToContainerPoint(x.getCenter()),H=x.layerPointToContainerPoint(a),J=this.options.direction,oe=T.offsetWidth,ye=T.offsetHeight,Ee=ve(this.options.offset),Ae=this._getAnchor();J==="top"?(u=oe/2,p=ye):J==="bottom"?(u=oe/2,p=0):J==="center"?(u=oe/2,p=ye/2):J==="right"?(u=0,p=ye/2):J==="left"?(u=oe,p=ye/2):H.x<C.x?(J="right",u=0,p=ye/2):(J="left",u=oe+(Ee.x+Ae.x)*2,p=ye/2),a=a.subtract(ve(u,p,!0)).add(Ee).add(Ae),Et(T,"leaflet-tooltip-right"),Et(T,"leaflet-tooltip-left"),Et(T,"leaflet-tooltip-top"),Et(T,"leaflet-tooltip-bottom"),Qe(T,"leaflet-tooltip-"+J),He(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Lt(this._container,a)},_animateZoom:function(a){var u=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(u)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ip=function(a,u){return new cc(a,u)};tt.include({openTooltip:function(a,u,p){return this._initOverlay(cc,a,u,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),bt.include({bindTooltip:function(a,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(cc,this._tooltip,a,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var u=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof kt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&(ze(u,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),ze(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var u=typeof a.getElement=="function"&&a.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var u=a.latlng,p,x;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var xu=us.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var u=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(un(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=ve(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function dd(a){return new xu(a)}us.Default=Oa;var Hr=bt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){M(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),xt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rs(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(sr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof se?a:new se(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var u=this.getPane().children,p=-a(-1/0,1/0),x=0,T=u.length,C;x<T;x++)C=u[x].style.zIndex,u[x]!==this._container&&C&&(p=a(p,+C));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pe.ielt9){Lt(this._container,this.options.opacity);var a=+new Date,u=!1,p=!1;for(var x in this._tiles){var T=this._tiles[x];if(!(!T.current||!T.loaded)){var C=Math.min(1,(a-T.loaded)/200);Lt(T.el,C),C<1?u=!0:(T.active?p=!0:this._onOpaqueTile(T),T.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(Z(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:A,_initContainer:function(){this._container||(this._container=st("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,u=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=u-Math.abs(a-p),this._onUpdateLevel(p)):(xt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[a],T=this._map;return x||(x=this._levels[a]={},x.el=st("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),x.zoom=a,this._setZoomTransform(x,T.getCenter(),T.getZoom()),A(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:A,_onRemoveLevel:A,_onCreateLevel:A,_pruneTiles:function(){if(this._map){var a,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)u=this._tiles[a],u.retain=u.current;for(a in this._tiles)if(u=this._tiles[a],u.current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var u in this._tiles)this._tiles[u].coords.z===a&&this._removeTile(u)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)xt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,u,p,x){var T=Math.floor(a/2),C=Math.floor(u/2),H=p-1,J=new se(+T,+C);J.z=+H;var oe=this._tileCoordsToKey(J),ye=this._tiles[oe];return ye&&ye.active?(ye.retain=!0,!0):(ye&&ye.loaded&&(ye.retain=!0),H>x?this._retainParent(T,C,H,x):!1)},_retainChildren:function(a,u,p,x){for(var T=2*a;T<2*a+2;T++)for(var C=2*u;C<2*u+2;C++){var H=new se(T,C);H.z=p+1;var J=this._tileCoordsToKey(H),oe=this._tiles[J];if(oe&&oe.active){oe.retain=!0;continue}else oe&&oe.loaded&&(oe.retain=!0);p+1<x&&this._retainChildren(T,C,p+1,x)}},_resetView:function(a){var u=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var u=this.options;return u.minNativeZoom!==void 0&&a<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<a?u.maxNativeZoom:a},_setView:function(a,u,p,x){var T=Math.round(u);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var C=this.options.updateWhenZooming&&T!==this._tileZoom;(!x||C)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,u)},_setZoomTransforms:function(a,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,u)},_setZoomTransform:function(a,u,p){var x=this._map.getZoomScale(p,a.zoom),T=a.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();Pe.any3d?Mn(a.el,T,x):He(a.el,T)},_resetGrid:function(){var a=this._map,u=a.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(a.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(a.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),T=u.project(a,this._tileZoom).floor(),C=u.getSize().divideBy(x*2);return new Te(T.subtract(C),T.add(C))},_update:function(a){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(a===void 0&&(a=u.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(x),C=T.getCenter(),H=[],J=this.options.keepBuffer,oe=new Te(T.getBottomLeft().subtract([J,-J]),T.getTopRight().add([J,-J]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ye in this._tiles){var Ee=this._tiles[ye].coords;(Ee.z!==this._tileZoom||!oe.contains(new se(Ee.x,Ee.y)))&&(this._tiles[ye].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Ae=T.min.y;Ae<=T.max.y;Ae++)for(var ke=T.min.x;ke<=T.max.x;ke++){var We=new se(ke,Ae);if(We.z=this._tileZoom,!!this._isValidTile(We)){var Vt=this._tiles[this._tileCoordsToKey(We)];Vt?Vt.current=!0:H.push(We)}}if(H.sort(function(In,yi){return In.distanceTo(C)-yi.distanceTo(C)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $t=document.createDocumentFragment();for(ke=0;ke<H.length;ke++)this._addTile(H[ke],$t);this._level.el.appendChild($t)}}}},_isValidTile:function(a){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!u.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(a);return Ue(this.options.bounds).overlaps(x)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var u=this._map,p=this.getTileSize(),x=a.scaleBy(p),T=x.add(p),C=u.unproject(x,a.z),H=u.unproject(T,a.z);return[C,H]},_tileCoordsToBounds:function(a){var u=this._tileCoordsToNwSe(a),p=new we(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var u=a.split(":"),p=new se(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(a){var u=this._tiles[a];u&&(xt(u.el),delete this._tiles[a],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Qe(a,"leaflet-tile");var u=this.getTileSize();a.style.width=u.x+"px",a.style.height=u.y+"px",a.onselectstart=A,a.onmousemove=A,Pe.ielt9&&this.options.opacity<1&&Lt(a,this.options.opacity)},_addTile:function(a,u){var p=this._getTilePos(a),x=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),f(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&q(f(this._tileReady,this,a,null,T)),He(T,p),this._tiles[x]={el:T,coords:a,current:!0},u.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:a});var x=this._tileCoordsToKey(a);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Lt(p.el,0),Z(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Qe(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pe.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var u=new se(this._wrapX?E(a.x,this._wrapX):a.x,this._wrapY?E(a.y,this._wrapY):a.y);return u.z=a.z,u},_pxBoundsToTileRange:function(a){var u=this.getTileSize();return new Te(a.min.unscaleBy(u).floor(),a.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ui(a){return new Hr(a)}var Gr=Hr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,u){this._url=a,u=M(this,u),u.detectRetina&&Pe.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,u){return this._url===a&&u===void 0&&(u=!0),this._url=a,u||this.redraw(),this},createTile:function(a,u){var p=document.createElement("img");return ze(p,"load",f(this._tileOnLoad,this,u,p)),ze(p,"error",f(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var u={r:Pe.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(u.y=p),u["-y"]=p}return $(this._url,o(u,this.options))},_tileOnLoad:function(a,u){Pe.ielt9?setTimeout(f(a,this,null,u),0):a(null,u)},_tileOnError:function(a,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),a(p,u)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(a=u-a),a+x},_getSubdomain:function(a){var u=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var a,u;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(u=this._tiles[a].el,u.onload=A,u.onerror=A,!u.complete)){u.src=ge;var p=this._tiles[a].coords;xt(u),delete this._tiles[a],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(a){var u=this._tiles[a];if(u)return u.el.setAttribute("src",ge),Hr.prototype._removeTile.call(this,a)},_tileReady:function(a,u,p){if(!(!this._map||p&&p.getAttribute("src")===ge))return Hr.prototype._tileReady.call(this,a,u,p)}});function li(a,u){return new Gr(a,u)}var ci=Gr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,u){this._url=a;var p=o({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);u=M(this,u);var T=u.detectRetina&&Pe.retina?2:1,C=this.getTileSize();p.width=C.x*T,p.height=C.y*T,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Gr.prototype.onAdd.call(this,a)},getTileUrl:function(a){var u=this._tileCoordsToNwSe(a),p=this._crs,x=Me(p.project(u[0]),p.project(u[1])),T=x.min,C=x.max,H=(this._wmsVersion>=1.3&&this._crs===Xt?[T.y,T.x,C.y,C.x]:[T.x,T.y,C.x,C.y]).join(","),J=Gr.prototype.getTileUrl.call(this,a);return J+z(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(a,u){return o(this.wmsParams,a),u||this.redraw(),this}});function Fa(a,u){return new ci(a,u)}Gr.WMS=ci,li.wms=Fa;var zi=bt.extend({options:{padding:.1},initialize:function(a){M(this,a),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,u),C=x.multiplyBy(-p).add(T).subtract(this._map._getNewPixelOrigin(a,u));Pe.any3d?Mn(this._container,C,p):He(this._container,C)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-a)).round();this._bounds=new Te(p,p.add(u.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dl=zi.extend({options:{tolerance:0},getEvents:function(){var a=zi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");ze(a,"mousemove",this._onMouseMove,this),ze(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){Z(this._redrawRequest),delete this._ctx,xt(this._container),mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var u in this._layers)a=this._layers[u],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zi.prototype._update.call(this);var a=this._bounds,u=this._container,p=a.getSize(),x=Pe.retina?2:1;He(u,a.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[y(a)]=a;var u=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var u=a._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete a._order,delete this._layers[y(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var u=a.options.dashArray.split(/[, ]+/),p=[],x,T;for(T=0;T<u.length;T++){if(x=Number(u[T]),isNaN(x))return;p.push(x)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var u=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Te,this._redrawBounds.extend(a._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(a._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var u=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)a=x.layer,(!u||a._pxBounds&&a._pxBounds.intersects(u))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,u){if(this._drawing){var p,x,T,C,H=a._parts,J=H.length,oe=this._ctx;if(J){for(oe.beginPath(),p=0;p<J;p++){for(x=0,T=H[p].length;x<T;x++)C=H[p][x],oe[x?"lineTo":"moveTo"](C.x,C.y);u&&oe.closePath()}this._fillStroke(oe,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var u=a._point,p=this._ctx,x=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||x)/x;T!==1&&(p.save(),p.scale(1,T)),p.beginPath(),p.arc(u.x,u.y/T,x,0,Math.PI*2,!1),T!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,u){var p=u.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(u.options&&u.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var u=this._map.mouseEventToLayerPoint(a),p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,u)}},_handleMouseOut:function(a){var u=this._hoveredLayer;u&&(Et(this._container,"leaflet-interactive"),this._fireEvent([u],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,u){if(!this._mouseHoverThrottled){for(var p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(a),x&&(Qe(this._container,"leaflet-interactive"),this._fireEvent([x],a,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,u,p){this._map._fireDOMEvent(u,p||u.type,a)},_bringToFront:function(a){var u=a._order;if(u){var p=u.next,x=u.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(a)}},_bringToBack:function(a){var u=a._order;if(u){var p=u.next,x=u.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(a)}}});function fl(a){return Pe.canvas?new dl(a):null}var Zr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qa={_initContainer:function(){this._container=st("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var u=a._container=Zr("shape");Qe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",a._path=Zr("path"),u.appendChild(a._path),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){var u=a._container;this._container.appendChild(u),a.options.interactive&&a.addInteractiveTarget(u)},_removePath:function(a){var u=a._container;xt(u),a.removeInteractiveTarget(u),delete this._layers[y(a)]},_updateStyle:function(a){var u=a._stroke,p=a._fill,x=a.options,T=a._container;T.stroked=!!x.stroke,T.filled=!!x.fill,x.stroke?(u||(u=a._stroke=Zr("stroke")),T.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,x.dashArray?u.dashStyle=te(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(T.removeChild(u),a._stroke=null),x.fill?(p||(p=a._fill=Zr("fill")),T.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(T.removeChild(p),a._fill=null)},_updateCircle:function(a){var u=a._point.round(),p=Math.round(a._radius),x=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(a,u){a._path.v=u},_bringToFront:function(a){rs(a._container)},_bringToBack:function(a){sr(a._container)}},ml=Pe.vml?Zr:ya,ur=zi.extend({_initContainer:function(){this._container=ml("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ml("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zi.prototype._update.call(this);var a=this._bounds,u=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),He(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(a){var u=a._path=ml("path");a.options.className&&Qe(u,a.options.className),a.options.interactive&&Qe(u,"leaflet-interactive"),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){xt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[y(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var u=a._path,p=a.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(a,u){this._setPath(a,Ho(a._parts,u))},_updateCircle:function(a){var u=a._point,p=Math.max(Math.round(a._radius),1),x=Math.max(Math.round(a._radiusY),1)||p,T="a"+p+","+x+" 0 1,0 ",C=a._empty()?"M0 0":"M"+(u.x-p)+","+u.y+T+p*2+",0 "+T+-p*2+",0 ";this._setPath(a,C)},_setPath:function(a,u){a._path.setAttribute("d",u)},_bringToFront:function(a){rs(a._path)},_bringToBack:function(a){sr(a._path)}});Pe.vml&&ur.include(qa);function $r(a){return Pe.svg||Pe.vml?new ur(a):null}tt.include({getRenderer:function(a){var u=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var u=this._paneRenderers[a];return u===void 0&&(u=this._createRenderer({pane:a}),this._paneRenderers[a]=u),u},_createRenderer:function(a){return this.options.preferCanvas&&fl(a)||$r(a)}});var fd=Ua.extend({initialize:function(a,u){Ua.prototype.initialize.call(this,this._boundsToLatLngs(a),u)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Ue(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ui(a,u){return new fd(a,u)}ur.create=ml,ur.pointsToPath=Ho,oi.geometryToLayer=ll,oi.coordsToLatLng=rc,oi.coordsToLatLngs=cl,oi.latLngToCoords=ul,oi.latLngsToCoords=ac,oi.getFeature=Oi,oi.asFeature=za,tt.mergeOptions({boxZoom:!0});var uc=Kn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nn(),Vr(),this._startPoint=this._map.mouseEventToContainerPoint(a),ze(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=st("div","leaflet-zoom-box",this._container),Qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var u=new Te(this._point,this._startPoint),p=u.getSize();He(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(xt(this._box),Et(this._container,"leaflet-crosshair")),Pi(),tl(),mt(document,{contextmenu:Sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var u=new we(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});tt.addInitHook("addHandler","boxZoom",uc),tt.mergeOptions({doubleClickZoom:!0});var ds=Kn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,T=a.originalEvent.shiftKey?p-x:p+x;u.options.doubleClickZoom==="center"?u.setZoom(T):u.setZoomAround(a.containerPoint,T)}});tt.addInitHook("addHandler","doubleClickZoom",ds),tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var bu=Kn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Li(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,"leaflet-grab"),Et(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Ue(this._map.options.maxBounds);this._offsetLimit=Me(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,u){return a-(a-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;a.x<u.min.x&&(a.x=this._viscousLimit(a.x,u.min.x)),a.y<u.min.y&&(a.y=this._viscousLimit(a.y,u.min.y)),a.x>u.max.x&&(a.x=this._viscousLimit(a.x,u.max.x)),a.y>u.max.y&&(a.y=this._viscousLimit(a.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,u=Math.round(a/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,T=(x-u+p)%a+u-p,C=(x+u+p)%a-u-p,H=Math.abs(T+p)<Math.abs(C+p)?T:C;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(a){var u=this._map,p=u.options,x=!p.inertia||a.noInertia||this._times.length<2;if(u.fire("dragend",a),x)u.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),C=(this._lastTime-this._times[0])/1e3,H=p.easeLinearity,J=T.multiplyBy(H/C),oe=J.distanceTo([0,0]),ye=Math.min(p.inertiaMaxSpeed,oe),Ee=J.multiplyBy(ye/oe),Ae=ye/(p.inertiaDeceleration*H),ke=Ee.multiplyBy(-Ae/2).round();!ke.x&&!ke.y?u.fire("moveend"):(ke=u._limitOffset(ke,u.options.maxBounds),q(function(){u.panBy(ke,{duration:Ae,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});tt.addInitHook("addHandler","dragging",bu),tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var pl=Kn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),ze(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,u=document.documentElement,p=a.scrollTop||u.scrollTop,x=a.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var u=this._panKeys={},p=this.keyCodes,x,T;for(x=0,T=p.left.length;x<T;x++)u[p.left[x]]=[-1*a,0];for(x=0,T=p.right.length;x<T;x++)u[p.right[x]]=[a,0];for(x=0,T=p.down.length;x<T;x++)u[p.down[x]]=[0,a];for(x=0,T=p.up.length;x<T;x++)u[p.up[x]]=[0,-1*a]},_setZoomDelta:function(a){var u=this._zoomKeys={},p=this.keyCodes,x,T;for(x=0,T=p.zoomIn.length;x<T;x++)u[p.zoomIn[x]]=a;for(x=0,T=p.zoomOut.length;x<T;x++)u[p.zoomOut[x]]=-a},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var u=a.keyCode,p=this._map,x;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],a.shiftKey&&(x=ve(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(ve(x),p.options.maxBounds)),p.options.worldCopyJump){var T=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(T)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Sn(a)}}});tt.addInitHook("addHandler","keyboard",pl),tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hr=Kn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var u=Ur(a),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),x),Sn(a)},_performZoom:function(){var a=this._map,u=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,C=p?Math.ceil(T/p)*p:T,H=a._limitZoom(u+(this._delta>0?C:-C))-u;this._delta=0,this._startTime=null,H&&(a.options.scrollWheelZoom==="center"?a.setZoom(u+H):a.setZoomAround(this._lastMousePos,u+H))}});tt.addInitHook("addHandler","scrollWheelZoom",hr);var wu=600;tt.mergeOptions({tapHold:Pe.touchNative&&Pe.safari&&Pe.mobile,tapTolerance:15});var hc=Kn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var u=a.touches[0];this._startPos=this._newPos=new se(u.clientX,u.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",At),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),wu),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){mt(document,"touchend",At),mt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)},_onMove:function(a){var u=a.touches[0];this._newPos=new se(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,u){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});tt.addInitHook("addHandler","tapHold",hc),tt.mergeOptions({touchZoom:Pe.touch,bounceAtZoomLimits:!0});var Kr=Kn.extend({addHooks:function(){Qe(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var u=this._map;if(!(!a.touches||a.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(a.touches[0]),x=u.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),At(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(a.touches[0]),x=u.mouseEventToContainerPoint(a.touches[1]),T=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(T,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&T<1||this._zoom>u.getMaxZoom()&&T>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var C=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(T===1&&C.x===0&&C.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(C),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),Z(this._animRequest);var H=f(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(H,this,!0),At(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Z(this._animRequest),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});tt.addInitHook("addHandler","touchZoom",Kr),tt.BoxZoom=uc,tt.DoubleClickZoom=ds,tt.Drag=bu,tt.Keyboard=pl,tt.ScrollWheelZoom=hr,tt.TapHold=hc,tt.TouchZoom=Kr,t.Bounds=Te,t.Browser=Pe,t.CRS=Re,t.Canvas=dl,t.Circle=vu,t.CircleMarker=ol,t.Class=Ce,t.Control=vn,t.DivIcon=xu,t.DivOverlay=Vi,t.DomEvent=Jl,t.DomUtil=nl,t.Draggable=Li,t.Evented=Y,t.FeatureGroup=kt,t.GeoJSON=oi,t.GridLayer=Hr,t.Handler=Kn,t.Icon=us,t.ImageOverlay=hs,t.LatLng=Ve,t.LatLngBounds=we,t.Layer=bt,t.LayerGroup=Ot,t.LineUtil=P,t.Map=tt,t.Marker=Va,t.Mixin=Br,t.Path=Us,t.Point=se,t.PolyUtil=Ma,t.Polygon=Ua,t.Polyline=zs,t.Popup=hl,t.PosAnimation=zr,t.Projection=be,t.Rectangle=fd,t.Renderer=zi,t.SVG=ur,t.SVGOverlay=cr,t.TileLayer=Gr,t.Tooltip=cc,t.Transformation=Tt,t.Util=O,t.VideoOverlay=lc,t.bind=f,t.bounds=Me,t.canvas=fl,t.circle=ep,t.circleMarker=ld,t.control=An,t.divIcon=dd,t.extend=o,t.featureGroup=cs,t.geoJSON=oc,t.geoJson=cd,t.gridLayer=Ui,t.icon=sc,t.imageOverlay=Ba,t.latLng=de,t.latLngBounds=Ue,t.layerGroup=Vs,t.map=os,t.marker=_u,t.point=ve,t.polygon=ai,t.polyline=tp,t.popup=np,t.rectangle=ui,t.setOptions=M,t.stamp=y,t.svg=$r,t.svgOverlay=hd,t.tileLayer=li,t.tooltip=ip,t.transformation=Bt,t.version=s,t.videoOverlay=ud;var Ha=window.L;t.noConflict=function(){return window.L=Ha,this},window.L=t})}(mh,mh.exports)),mh.exports}var fu=iU();const Qm=eE(fu);function Xm(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function Jm(n,e){return e==null?function(s,o){const c=V.useRef(void 0);return c.current||(c.current=n(s,o)),c}:function(s,o){const c=V.useRef(void 0);c.current||(c.current=n(s,o));const f=V.useRef(s),{instance:_}=c.current;return V.useEffect(function(){f.current!==s&&(e(_,s,f.current),f.current=s)},[_,s,e]),c}}function TA(n,e){V.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function EA(n){return function(t){const s=Wm(),o=n(Ym(t,s),s);return xA(s.map,t.attribution),Iy(o.current,t.eventHandlers),TA(o.current,s),o}}function sU(n,e){const t=V.useRef(void 0);V.useEffect(function(){if(e.pathOptions!==t.current){const o=e.pathOptions??{};n.instance.setStyle(o),t.current=o}},[n,e])}function rU(n){return function(t){const s=Wm(),o=n(Ym(t,s),s);return Iy(o.current,t.eventHandlers),TA(o.current,s),sU(o.current,t),o}}function aU(n,e){const t=Jm(n,e),s=EA(t);return wA(s)}function oU(n,e){const t=Jm(n),s=tU(t,e);return JV(s)}function lU(n,e){const t=Jm(n,e),s=rU(t);return wA(s)}function cU(n,e){const t=Jm(n,e),s=EA(t);return eU(s)}function uU(n,e,t){const{opacity:s,zIndex:o}=e;s!=null&&s!==t.opacity&&n.setOpacity(s),o!=null&&o!==t.zIndex&&n.setZIndex(o)}function hU(){return Wm().map}function dU({bounds:n,boundsOptions:e,center:t,children:s,className:o,id:c,placeholder:f,style:_,whenReady:y,zoom:b,...E},A){const[I]=V.useState({className:o,id:c,style:_}),[F,D]=V.useState(null),M=V.useRef(void 0);V.useImperativeHandle(A,()=>F?.map??null,[F]);const z=V.useCallback($=>{if($!==null&&!M.current){const te=new fu.Map($,E);M.current=te,t!=null&&b!=null?te.setView(t,b):n!=null&&te.fitBounds(n,e),y!=null&&te.whenReady(y),D(XV(te))}},[]);V.useEffect(()=>()=>{F?.map.remove()},[F]);const W=F?Hf.createElement(Ay,{value:F},s):f??null;return Hf.createElement("div",{...I,ref:z},W)}const fU=V.forwardRef(dU),mU=aU(function({position:e,...t},s){const o=new fu.Marker(e,t);return Xm(o,bA(s,{overlayContainer:o}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==s.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==s.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),pU=lU(function({positions:e,...t},s){const o=new fu.Polyline(e,t);return Xm(o,bA(s,{overlayContainer:o}))},function(e,t,s){t.positions!==s.positions&&e.setLatLngs(t.positions)}),gU=oU(function(e,t){const s=new fu.Popup(e,t.overlayContainer);return Xm(s,t)},function(e,t,{position:s},o){V.useEffect(function(){const{instance:f}=e;function _(b){b.popup===f&&(f.update(),o(!0))}function y(b){b.popup===f&&o(!1)}return t.map.on({popupopen:_,popupclose:y}),t.overlayContainer==null?(s!=null&&f.setLatLng(s),f.openOn(t.map)):t.overlayContainer.bindPopup(f),function(){t.map.off({popupopen:_,popupclose:y}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(f)}},[e,t,o,s])}),_U=cU(function({url:e,...t},s){const o=new fu.TileLayer(e,Ym(t,s));return Xm(o,s)},function(e,t,s){uU(e,t,s);const{url:o}=t;o!=null&&o!==s.url&&e.setUrl(o)}),vU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",yU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",xU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete Qm.Icon.Default.prototype._getIconUrl;Qm.Icon.Default.mergeOptions({iconUrl:vU,iconRetinaUrl:yU,shadowUrl:xU});const bU=({plans:n})=>{const e=hU();return V.useEffect(()=>{if(n.length===0)return;const t=n.filter(s=>s.latitude&&s.longitude);if(t.length!==0)if(t.length===1){const s=t[0];e.setView([s.latitude,s.longitude],15)}else{const s=Qm.latLngBounds(t.map(o=>[o.latitude,o.longitude]));e.fitBounds(s,{padding:[20,20]})}},[n,e]),null},wU=({plans:n,center:e=[37.5665,126.978],zoom:t=10,className:s,height:o="400px",onPlanClick:c})=>{const f=V.useRef(null),y=[...n].sort((A,I)=>A.day!==I.day?A.day-I.day:A.start_time.localeCompare(I.start_time)).filter(A=>A.latitude&&A.longitude),b=A=>{switch(A){case"attraction":return"#f59e0b";case"restaurant":return"#10b981";case"hotel":return"#8b5cf6";case"transport":return"#0ea5e9";default:return"#6b7280"}},E=(A,I)=>{const F=b(A);return Qm.divIcon({className:"custom-marker",html:`
        <div style="
          width: 32px;
          height: 32px;
          border-radius: 50%;
          background: ${F};
          border: 3px solid white;
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          color: white;
          font-size: 12px;
        ">
          ${I||""}
        </div>
      `,iconSize:[32,32],iconAnchor:[16,16]})};return d.jsxs("div",{className:Nr("relative",s),style:{height:o},children:[d.jsxs(fU,{ref:f,center:e,zoom:t,className:"w-full h-full rounded-xl overflow-hidden",zoomControl:!0,scrollWheelZoom:!0,children:[d.jsx(_U,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),d.jsx(bU,{plans:y}),y.map((A,I)=>{if(I<y.length-1){const F=A,D=y[I+1],M=F.day===D.day;return d.jsx(pU,{positions:[[F.latitude,F.longitude],[D.latitude,D.longitude]],pathOptions:{color:M?"#10b981":"#f59e0b",weight:M?3:2,opacity:M?.8:.5,dashArray:M?"":"5, 10"}},`line-${I}`)}return null}),y.map((A,I)=>d.jsx(mU,{position:[A.latitude,A.longitude],icon:E(A.type,I+1),eventHandlers:{click:()=>c?.(A)},children:d.jsx(gU,{children:d.jsxs("div",{className:"p-2 min-w-[200px]",children:[d.jsx("h3",{className:"font-semibold text-lg mb-2",children:A.place_name}),d.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[A.start_time,A.end_time&&` ~ ${A.end_time}`]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:b(A.type)}}),d.jsx("span",{className:"text-sm capitalize",children:A.type})]})]})})},I))]}),y.length===0&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-xl",children:d.jsxs("div",{className:"text-center text-white/80",children:[d.jsx("p",{className:"text-lg font-semibold mb-2",children:"위치 정보가 없습니다"}),d.jsx("p",{className:"text-sm",children:"일정에 위치를 추가해보세요"})]})})]})},$T=()=>{const{id:n}=Gh(),{user:e}=Qs(),t=Qi(),[s,o]=V.useState([]),[c,f]=V.useState(null),[_,y]=V.useState([]),[b,E]=V.useState([]),[A,I]=V.useState(!0),[F,D]=V.useState(null),[M,z]=V.useState("all"),[W,$]=V.useState(!1),[te,_e]=V.useState(null),[ge,xe]=V.useState(n||null),[B,k]=V.useState(!1),[j,U]=V.useState({planId:"",latitude:"",longitude:""});if(V.useEffect(()=>{if(!e||n)return;const ce=Gc(la(cn,"trips"),dm("user_id","==",e.uid),Vc("created_at","desc")),ve=To(ce,Te=>{const Me=Te.docs.map(we=>({id:we.id,...we.data()}));o(Me),I(!1)});return()=>ve()},[e,n]),V.useEffect(()=>{if(!e)return;const ce=ge||n;if(!ce){const we=Gc(la(cn,"plans"),Vc("day","asc"),Vc("start_time","asc")),Ue=To(we,Ve=>{const de=Ve.docs.map(Ye=>({id:Ye.id,...Ye.data()})),Re=s.map(Ye=>Ye.id),Ke=de.filter(Ye=>Re.includes(Ye.trip_id));y(Ke)});return()=>Ue()}const ve=To(Ni(cn,"trips",ce),we=>{if(we.exists()){const Ue={id:we.id,...we.data()};if(Ue.user_id!==e.uid){D("접근 권한이 없습니다."),I(!1);return}f(Ue)}else D("여행을 찾을 수 없습니다.");I(!1)},we=>{console.error("Trip 로딩 실패:",we),D("여행 데이터를 불러오는데 실패했습니다."),I(!1)}),Te=Gc(la(cn,"plans"),dm("trip_id","==",ce),Vc("day","asc"),Vc("start_time","asc")),Me=To(Te,we=>{const Ue=we.docs.map(Ve=>({id:Ve.id,...Ve.data()}));y(Ue)},we=>{console.error("Plans 로딩 실패:",we)});return()=>{ve(),Me()}},[ge,n,e,s]),V.useEffect(()=>{E(M==="all"?_:_.filter(ce=>ce.day===M))},[_,M]),A)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"지도를 불러오는 중..."})});if(F||!c&&n)return d.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:d.jsxs(je,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:F||"여행을 찾을 수 없습니다."}),d.jsx(Le,{onClick:()=>t("/"),children:"Back"})]})});const q=()=>{if(!c)return 0;const ce=new Date(c.start_date),ve=new Date(c.end_date),Te=Math.abs(ve.getTime()-ce.getTime());return Math.ceil(Te/(1e3*60*60*24))+1},Z=ce=>{if(!c)return`Day ${ce}`;const ve=new Date(c.start_date),Te=new Date(ve);Te.setDate(ve.getDate()+ce-1);const Me=String(Te.getMonth()+1).padStart(2,"0"),we=String(Te.getDate()).padStart(2,"0"),Ve=["일","월","화","수","목","금","토"][Te.getDay()];return`${Me}.${we}.${Ve}`},O=c?Array.from({length:q()},(ce,ve)=>ve+1):[],Ce=b.filter(ce=>ce.latitude&&ce.longitude),Je=ce=>{_e(ce),$(!0)},ee=ce=>{t(`/trips/${n}/plans/${ce.id}`)},Y=ce=>{U({planId:ce.id,latitude:ce.latitude?.toString()||"",longitude:ce.longitude?.toString()||""}),k(!0)},se=async()=>{if(!j.planId||!j.latitude||!j.longitude)return;const ce=parseFloat(j.latitude),ve=parseFloat(j.longitude);if(isNaN(ce)||isNaN(ve)||ce<-90||ce>90||ve<-180||ve>180){alert("올바른 좌표를 입력해주세요. (위도: -90~90, 경도: -180~180)");return}try{await fm(Ni(cn,"plans",j.planId),{latitude:ce,longitude:ve,updated_at:new Date}),k(!1),U({planId:"",latitude:"",longitude:""})}catch(Te){console.error("좌표 저장 실패:",Te),alert("좌표 저장에 실패했습니다.")}};return d.jsxs("div",{className:"h-screen relative overflow-hidden",children:[d.jsx(Ys,{}),d.jsxs("div",{className:"fixed top-16 left-0 right-0 z-20 bg-black/20 backdrop-blur-lg",children:[d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[(n||ge)&&d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>{n?t(-1):ge&&t(`/trips/${ge}`)},className:"!p-2",children:d.jsx(Fh,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-xl font-bold text-white text-glow",children:c?`${c.title} 지도`:"전체 여행 지도"})]}),d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>$(!W),className:"!p-2 ml-4",children:d.jsx(QT,{className:"w-5 h-5"})})]})}),!n&&s.length>0&&d.jsx("div",{className:"px-4 pb-4",children:d.jsxs(je,{variant:"light",className:"p-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(Bn,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"여행 선택"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsx("button",{onClick:()=>{xe(null),z("all")},className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${ge?"bg-white/10 text-white/70 hover:bg-white/20":"bg-primary-500 text-white"}`,children:"전체"}),s.map(ce=>d.jsx("button",{onClick:()=>{xe(ce.id),f(ce),z(1)},className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${ge===ce.id?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:ce.title},ce.id))]}),ge&&c&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(ys,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"Day 필터"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsxs("button",{onClick:()=>z("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${M==="all"?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["전체",d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:Ce.length})]}),O.map(ce=>{const ve=_.filter(Te=>Te.day===ce&&Te.latitude&&Te.longitude);return d.jsx("button",{onClick:()=>z(ce),className:`relative flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${M===ce?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("span",{children:["Day ",ce]}),ve.length>0&&d.jsx("span",{className:"text-xs bg-white/20 rounded-full px-1.5",children:ve.length})]}),d.jsx("span",{className:"text-xs opacity-70",children:Z(ce)})]})},ce)})]})]})]})})]}),d.jsx("div",{className:`fixed inset-0 ${!n&&s.length>0&&ge?"pt-96":!n&&s.length>0?"pt-72":"pt-32"} px-4`,children:d.jsx(wU,{plans:b,onPlanClick:Je,className:"h-full w-full",height:"100%"})}),n&&c&&d.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10 px-4",children:d.jsxs(je,{variant:"light",className:"p-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[d.jsx(ys,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"Day 필터"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsxs("button",{onClick:()=>z("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${M==="all"?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["전체",d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:Ce.length})]}),O.map(ce=>{const ve=_.filter(Te=>Te.day===ce&&Te.latitude&&Te.longitude);return d.jsx("button",{onClick:()=>z(ce),className:`relative flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${M===ce?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsxs("span",{children:["Day ",ce]}),ve.length>0&&d.jsx("span",{className:"text-xs bg-white/20 rounded-full px-1.5",children:ve.length})]}),d.jsx("span",{className:"text-xs opacity-70",children:Z(ce)})]})},ce)})]})]})}),W&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>$(!1)}),d.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-black/50 backdrop-blur-lg z-40 overflow-y-auto",children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"일정 목록"}),d.jsx("button",{onClick:()=>$(!1),className:"text-white/60 hover:text-white",children:"✕"})]}),te&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"선택된 일정"}),d.jsx(X_,{plan:te}),d.jsxs("div",{className:"mt-3 space-y-2",children:[d.jsxs(Le,{variant:"travel",size:"sm",onClick:()=>ee(te),className:"w-full",children:[d.jsx($I,{className:"w-4 h-4 mr-2"}),"일정 편집"]}),(!te.latitude||!te.longitude)&&d.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>Y(te),className:"w-full",children:[d.jsx(Ml,{className:"w-4 h-4 mr-2"}),"위치 추가"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:M==="all"?"전체 일정":`Day ${M} 일정`}),b.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Bn,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60",children:"일정이 없습니다"})]}):d.jsx("div",{className:"space-y-3",children:b.map(ce=>d.jsxs("div",{className:"relative",children:[d.jsx(X_,{plan:ce,onClick:()=>_e(ce)}),(!ce.latitude||!ce.longitude)&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx("button",{onClick:()=>Y(ce),className:"w-6 h-6 bg-red-500/80 rounded-full flex items-center justify-center text-white text-xs",title:"위치 정보 없음",children:"!"})})]},ce.id))})]})]})})]}),B&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>k(!1)}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:d.jsxs(je,{variant:"travel",className:"w-full max-w-md",children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[d.jsx(Ml,{className:"w-5 h-5 inline mr-2"}),"좌표 입력"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"위도 (Latitude) *"}),d.jsx("input",{type:"text",value:j.latitude,onChange:ce=>U({...j,latitude:ce.target.value}),placeholder:"예: 35.710063",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"경도 (Longitude) *"}),d.jsx("input",{type:"text",value:j.longitude,onChange:ce=>U({...j,longitude:ce.target.value}),placeholder:"예: 139.810700",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsx("div",{className:"bg-travel-blue/20 border border-travel-blue/30 rounded-xl p-3",children:d.jsxs("p",{className:"text-white/80 text-sm",children:["💡 ",d.jsx("strong",{children:"좌표 찾는 방법:"}),d.jsx("br",{}),"1. Google Maps에서 장소 검색",d.jsx("br",{}),"2. 장소를 우클릭 → 좌표 복사",d.jsx("br",{}),"3. 위도, 경도 순서로 입력"]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(Le,{variant:"travel",onClick:se,className:"flex-1",children:"저장"}),d.jsx(Le,{variant:"ghost",onClick:()=>k(!1),className:"flex-1",children:"취소"})]})]})]})})]}),Ce.length===0&&d.jsx("div",{className:"absolute top-1/2 left-4 right-4 z-10 transform -translate-y-1/2 px-4",children:d.jsxs(je,{variant:"light",className:"text-center",children:[d.jsx(Ml,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-2",children:"지도에 표시할 일정이 없습니다"}),d.jsx("p",{className:"text-white/50 text-sm",children:"일정에 위치 정보를 추가해보세요"})]})})]})};function TU(){const[n,e]=V.useState(!1),[t,s]=V.useState(""),[o,c]=V.useState(""),[f,_]=V.useState(""),[y,b]=V.useState(""),[E,A]=V.useState(!1),[I,F]=V.useState(!1),[D,M]=V.useState(""),[z,W]=V.useState(!1),[$,te]=V.useState(!1),_e=Qi(),{signInWithEmailAndPassword:ge,signUpWithEmailAndPassword:xe,signInWithGoogle:B,resetPassword:k}=Qs(),j=async()=>{if(!t.trim()){M("먼저 이메일을 입력해주세요.");return}try{M(""),await k(t),alert("비밀번호 재설정 링크를 이메일로 발송했습니다. 이메일을 확인해주세요.")}catch(O){let Ce="비밀번호 재설정에 실패했습니다.";O.code==="auth/user-not-found"?Ce="존재하지 않는 이메일입니다.":O.code==="auth/invalid-email"&&(Ce="올바른 이메일 주소를 입력해주세요."),M(Ce)}},U=()=>{if(!t||!o)return M("이메일과 비밀번호를 입력해주세요."),!1;if(n){if(!y.trim())return M("이름을 입력해주세요."),!1;if(o.length<6)return M("비밀번호는 최소 6자 이상이어야 합니다."),!1;if(o!==f)return M("비밀번호가 일치하지 않습니다."),!1}return!0},q=async O=>{if(O.preventDefault(),M(""),!!U()){W(!0);try{n?await xe(t,o,y):await ge(t,o),_e("/")}catch(Ce){let Je=Ce.message||"오류가 발생했습니다.";Ce.code==="auth/email-already-in-use"?Je="이미 사용 중인 이메일입니다.":Ce.code==="auth/weak-password"?Je="비밀번호가 너무 약합니다.":Ce.code==="auth/user-not-found"?Je="존재하지 않는 계정입니다.":Ce.code==="auth/wrong-password"?Je="비밀번호가 틀렸습니다.":Ce.code==="auth/invalid-email"?Je="올바른 이메일 주소를 입력해주세요.":Ce.code==="auth/user-disabled"&&(Je="비활성화된 계정입니다."),M(Je)}finally{W(!1)}}},Z=async()=>{M(""),te(!0);try{await B(),_e("/")}catch(O){M(O.message||"Google 로그인에 실패했습니다.")}finally{te(!1)}};return d.jsx("main",{className:"min-h-screen flex items-center justify-center p-4 relative","aria-label":"로그인 페이지",children:d.jsx("div",{className:"w-full max-w-md sm:max-w-lg md:max-w-xl mx-auto px-4 sm:px-0 relative z-10",children:d.jsxs(je,{variant:"strong",className:"p-6 sm:p-8 animate-fade-in",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"text-5xl mb-4 animate-bounce-gentle",children:"🌊"}),d.jsx("h1",{className:"text-3xl font-bold text-white mb-2 text-glow",children:"Moonwave Travel"}),d.jsx("p",{className:"text-white/80 text-lg",children:"여행의 모든 순간을 담다"})]}),d.jsxs("div",{className:"flex mb-6 bg-white/10 rounded-lg p-1",children:[d.jsxs("button",{type:"button",onClick:()=>{e(!1),M(""),c(""),_(""),b("")},className:`flex-1 py-2 px-4 rounded-md transition-all text-sm font-medium ${n?"text-white/70 hover:text-white hover:bg-white/10":"bg-primary-500 text-white shadow-lg"}`,children:[d.jsx(gw,{className:"w-4 h-4 inline mr-2"}),"로그인"]}),d.jsxs("button",{type:"button",onClick:()=>{e(!0),M(""),c(""),_("")},className:`flex-1 py-2 px-4 rounded-md transition-all text-sm font-medium ${n?"bg-primary-500 text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"}`,children:[d.jsx(Rg,{className:"w-4 h-4 inline mr-2"}),"회원가입"]})]}),D&&d.jsx(je,{variant:"light",className:"p-4 mb-6 border-red-500/50 bg-red-500/10",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"text-red-400",children:"⚠️"}),d.jsx("p",{className:"text-sm text-white",children:D})]})}),d.jsx(Le,{type:"button",variant:"secondary",size:"lg",className:"w-full mb-4",onClick:Z,disabled:$,children:d.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[d.jsx("div",{className:"w-5 h-5",children:d.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),d.jsx("span",{children:$?"Google 로그인 중...":"Google로 로그인"})]})}),d.jsxs("div",{className:"my-6 relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-white/20"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"bg-transparent px-2 text-white",children:"또는"})})]}),d.jsxs("form",{onSubmit:q,className:"space-y-6",children:[n&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"이름"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Rg,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:"text",value:y,onChange:O=>b(O.target.value),className:`
                      glass-card w-full pl-10 pr-4 py-3 rounded-lg 
                      text-base text-white placeholder-white/50 
                      focus:outline-none focus:ring-2 
                      focus:ring-primary-500/50 focus:border-transparent
                      transition-all
                    `,placeholder:"이름을 입력하세요",required:n})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"이메일"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(nv,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:"email",value:t,onChange:O=>s(O.target.value),className:`
                    glass-card w-full pl-10 pr-4 py-3 rounded-lg 
                    text-base text-white placeholder-white/50 
                    focus:outline-none focus:ring-2 
                    focus:ring-primary-500/50 focus:border-transparent
                    transition-all
                  `,placeholder:"이메일을 입력하세요",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"비밀번호"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Gf,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:E?"text":"password",value:o,onChange:O=>c(O.target.value),className:`
                    glass-card w-full pl-10 pr-12 py-3 rounded-lg 
                    text-base text-white placeholder-white/50 
                    focus:outline-none focus:ring-2 
                    focus:ring-primary-500/50 focus:border-transparent
                    transition-all
                  `,placeholder:n?"비밀번호 (최소 6자)":"비밀번호를 입력하세요",required:!0,minLength:n?6:void 0}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-white/20 transition-all duration-200 min-w-[44px] min-h-[44px]",onClick:()=>A(!E),disabled:z||$,"aria-label":E?"비밀번호 숨기기":"비밀번호 보기",children:E?d.jsx(_w,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"}):d.jsx(vw,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"})})]})]}),n&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"비밀번호 확인"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Gf,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:I?"text":"password",value:f,onChange:O=>_(O.target.value),className:`
                      glass-card w-full pl-10 pr-12 py-3 rounded-lg 
                      text-base text-white placeholder-white/50 
                      focus:outline-none focus:ring-2 
                      focus:ring-primary-500/50 focus:border-transparent
                      transition-all
                    `,placeholder:"비밀번호를 다시 입력하세요",required:n}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-white/20 transition-all duration-200 min-w-[44px] min-h-[44px]",onClick:()=>F(!I),disabled:z||$,"aria-label":I?"비밀번호 숨기기":"비밀번호 보기",children:I?d.jsx(_w,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"}):d.jsx(vw,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"})})]})]}),d.jsx(Le,{type:"submit",variant:"primary",size:"lg",className:"w-full",disabled:z,children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n?d.jsx(Rg,{size:20}):d.jsx(gw,{size:20}),d.jsx("span",{children:z?n?"회원가입 중...":"로그인 중...":n?"회원가입":"로그인"})]})})]}),!n&&d.jsx("div",{className:"text-center mt-4",children:d.jsx("button",{type:"button",onClick:j,className:"text-sm text-white/70 hover:text-white hover:underline transition-colors",children:"비밀번호를 잊으셨나요?"})})]})})})}const EU=({isOpen:n=!0,onClose:e,enableCallback:t=!1})=>{const{user:s,signOut:o}=Qs(),c=Qi(),[f]=ym(),{smartGoBack:_}=Km(f),[y,b]=V.useState("profile"),[E,A]=V.useState({theme:"auto",language:"ko",notifications:!0,emailNotifications:!0});V.useEffect(()=>{const z=localStorage.getItem("moonwaveTravelPreferences");if(z)try{A(JSON.parse(z))}catch(W){console.error("Failed to parse preferences:",W)}},[]);const I=z=>{A(z),localStorage.setItem("moonwaveTravelPreferences",JSON.stringify(z))},F=async()=>{try{await o(),e&&e(),t?_(c,"/login"):c("/login")}catch(z){console.error("Logout failed:",z),alert("로그아웃에 실패했습니다.")}},D=()=>{e?e():t&&_(c,"/")};if(!n)return null;const M=[{id:"profile",label:"프로필",icon:Uf},{id:"notifications",label:"알림",icon:KI},{id:"privacy",label:"개인정보",icon:XT}];return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:d.jsxs(je,{variant:"strong",className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(Sh,{className:"w-8 h-8 text-travel-blue"}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"설정"})]}),(e||t)&&d.jsx("button",{onClick:D,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:d.jsx(Ol,{className:"w-5 h-5 text-white"})})]}),d.jsxs("div",{className:"flex h-[600px]",children:[d.jsxs("div",{className:"w-64 bg-white/5 p-4",children:[d.jsx("nav",{className:"space-y-2",children:M.map(z=>d.jsxs("button",{onClick:()=>b(z.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all ${y===z.id?"bg-travel-blue text-white":"text-white/70 hover:bg-white/10"}`,children:[d.jsx(z.icon,{size:20}),d.jsx("span",{children:z.label})]},z.id))}),d.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:d.jsxs(Le,{variant:"secondary",size:"sm",onClick:F,className:"w-full",children:[d.jsx(WI,{size:16,className:"mr-2"}),"로그아웃"]})})]}),d.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[y==="profile"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"프로필 정보"}),d.jsxs(je,{variant:"light",className:"p-6",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-travel-blue to-travel-purple flex items-center justify-center overflow-hidden",children:s?.photoURL?d.jsx("img",{src:s.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):d.jsx(Uf,{className:"w-8 h-8 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:s?.displayName||s?.email?.split("@")[0]||"사용자"}),d.jsx("p",{className:"text-white/60",children:s?.email})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"이메일"}),d.jsx("input",{type:"email",value:s?.email||"",disabled:!0,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"표시 이름"}),d.jsx("input",{type:"text",value:s?.displayName||"",disabled:!0,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",placeholder:"설정된 이름이 없습니다"})]})]})]})]}),y==="notifications"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"알림 설정"}),d.jsx(je,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium",children:"푸시 알림"}),d.jsx("p",{className:"text-white/60 text-sm",children:"여행 일정 및 중요 알림을 받습니다"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:E.notifications,onChange:z=>I({...E,notifications:z.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-travel-blue"})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium",children:"이메일 알림"}),d.jsx("p",{className:"text-white/60 text-sm",children:"중요한 업데이트를 이메일로 받습니다"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:E.emailNotifications,onChange:z=>I({...E,emailNotifications:z.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-travel-blue"})]})]})]})})]}),y==="privacy"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"개인정보 보호"}),d.jsx(je,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium mb-2",children:"데이터 보호"}),d.jsx("p",{className:"text-white/70 text-sm mb-4",children:"모든 개인정보는 안전하게 암호화되어 저장됩니다."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium mb-2",children:"계정 보안"}),d.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Firebase Authentication을 통해 안전하게 관리됩니다."})]}),d.jsx("div",{className:"pt-4 border-t border-white/10",children:d.jsx(Le,{variant:"secondary",size:"sm",onClick:()=>alert("계정 삭제 기능은 관리자에게 문의해주세요."),children:"계정 삭제"})})]})})]})]})]})]})})},NU=()=>{const n=Qi(),[e,t]=V.useState(!1);V.useEffect(()=>{const o=setTimeout(()=>{t(!0)},100);return()=>clearTimeout(o)},[]);const s=()=>{t(!1),n("/")};return d.jsx(EU,{isOpen:e,onClose:s})};function NA(){return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-black"}),d.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-black/90 via-transparent to-gray-900/60"}),d.jsx("div",{className:"fixed inset-0 opacity-20 pointer-events-none overflow-hidden",children:d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/10 to-transparent animate-pulse",style:{transform:"rotate(-12deg) scale(1.2)"}})}),d.jsx("div",{className:"fixed inset-0 opacity-60 pointer-events-none overflow-hidden",children:Array.from({length:60}).map((n,e)=>{const t=Math.random()*2+1,s=["#ffffff","#fbbf24","#60a5fa","#a855f7"],o=s[e%s.length];return d.jsx("div",{className:"absolute rounded-full",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,backgroundColor:o,animation:`twinkle ${Math.random()*3+2}s ease-in-out infinite ${Math.random()*2}s`,boxShadow:`0 0 ${t*3}px ${o}`,filter:"blur(0.2px)"}},`small-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-70 pointer-events-none overflow-hidden",children:Array.from({length:12}).map((n,e)=>{const t=Math.random()*3+3,s=["#ffffff","#fbbf24","#60a5fa","#f59e0b"],o=s[e%s.length];return d.jsx("div",{className:"absolute rounded-full",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,backgroundColor:o,animation:`twinkle ${Math.random()*4+3}s ease-in-out infinite ${Math.random()*3}s`,boxShadow:`0 0 ${t*4}px ${o}`,filter:"blur(0.3px)"}},`big-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-80 pointer-events-none overflow-hidden",children:Array.from({length:6}).map((n,e)=>{const s=[{left:"0%",top:"20%"},{left:"5%",top:"60%"},{left:"10%",top:"80%"},{left:"15%",top:"40%"},{left:"0%",top:"90%"},{left:"20%",top:"10%"}][e];return d.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:s.left,top:s.top,animation:`shooting-star ${Math.random()*2+4}s linear infinite ${Math.random()*3}s`,boxShadow:"0 0 15px #ffffff, 0 0 30px #ffffff",filter:"blur(0.2px)"}},`shooting-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-40 pointer-events-none overflow-hidden",children:Array.from({length:30}).map((n,e)=>{const t=Math.random()*1.5+.5;return d.jsx("div",{className:"absolute rounded-full bg-gray-300",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`float ${Math.random()*6+8}s ease-in-out infinite ${Math.random()*4}s`,filter:"blur(0.3px)"}},`dust-${e}`)})}),d.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-transparent via-blue-900/3 to-purple-900/3"})]})}function SU(){const n=V.useMemo(()=>[{name:"Music Platform",url:"music.moonwave.kr",description:"Moonwave만의 감성음악 제작",icon:YI,color:"from-purple-500 to-pink-500"},{name:"Travel Service",url:"travel.moonwave.kr",description:"Moonwave과 함께 세계여행",icon:Bf,color:"from-blue-500 to-cyan-500"},{name:"Subscription Manager",url:"sub.moonwave.kr",description:"AI 서비스 중심의 구독 관리",icon:QI,color:"from-green-500 to-emerald-500"},{name:"Crypto Trading",url:"btc.moonwave.kr",description:"Moonwave와 함께하는 크립토 매매",icon:XI,color:"from-yellow-500 to-orange-500"},{name:"Music Album",url:"oh.moonwave.kr",description:"국가대표 오안나 헌정 앨범",icon:JI,color:"from-pink-500 to-rose-500"},{name:"Financial Strategy",url:"financial.moonwave.kr",description:"Moonwave와 함께하는 금융투자 전략",icon:eC,color:"from-emerald-500 to-teal-500"},{name:"Kids Platform",url:"lego.moonwave.kr",description:"아이들과 함께 Lego 블럭 재사용 조립놀이",icon:yw,color:"from-indigo-500 to-purple-500"}],[]),e=V.useMemo(()=>[{title:"자신만의 파동",description:"세상의 기준이 아닌, 각자의 고유함을 존중합니다",icon:zf,color:"from-red-500 to-pink-500"},{title:"명료한 전략",description:"복잡함 속에서 본질을 찾아 단순하게 만듭니다",icon:tC,color:"from-blue-500 to-cyan-500"},{title:"지속적인 혁신",description:"멈추지 않되, 자신의 속도로 진화합니다",icon:nC,color:"from-purple-500 to-indigo-500"},{title:"진정한 파트너십",description:"함께 파동을 만들고 흐름을 이어갑니다",icon:iC,color:"from-green-500 to-emerald-500"}],[]),t=V.useMemo(()=>[{category:"AI가 만드는 공명",items:[{name:"GPT-4, Claude, Gemini",description:"전략적 사고의 파트너"},{name:"SUNO AI",description:"텍스트를 음악의 파동으로"},{name:"Sora",description:"상상을 시각적 파동으로"}],icon:sC,color:"from-purple-500 to-pink-500"},{category:"흐름을 만드는 인프라",items:[{name:"Supabase, Firebase",description:"실시간으로 흐르는 데이터"},{name:"Vercel",description:"빠르고 안정적인 배포의 흐름"},{name:"Make, n8n",description:"끊김 없는 업무 프로세스"}],icon:xw,color:"from-blue-500 to-cyan-500"},{category:"전문 AI 서비스",items:[{name:"Zenspike",description:"데이터에서 인사이트의 파동을 발견"},{name:"Skywork",description:"복잡한 워크플로우를 자연스러운 흐름으로"},{name:"Perplexcity",description:"스토리텔링에 몰입의 파동을 더하다"}],icon:yw,color:"from-yellow-500 to-orange-500"}],[]);return d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(NA,{}),d.jsx(Ys,{}),d.jsx("main",{className:"pt-28 pb-6 px-4 relative z-10",children:d.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[d.jsx("div",{className:"text-center space-y-6",children:d.jsx(je,{variant:"strong",className:"p-8",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(Bf,{className:"text-white text-2xl"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-white text-5xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Moonwave Travel"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"당신만의 여행 파동과 흐름으로 만드는 여행 경험"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("blockquote",{className:"text-white text-xl italic leading-relaxed tracking-normal",children:['"세상이 만들어낸 여행 속도는 나의 기준이 될 수 없으며,',d.jsx("br",{}),"타인의 여행은 나의 여행을 설명할 수 없다.",d.jsx("br",{}),'나는 오직 나만의 여행 파동으로, 나만의 여행 흐름으로 존재한다."']}),d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:"Moonwave Travel은 이 철학에서 시작되었습니다."})]})]})})}),d.jsx("div",{className:"space-y-6",children:d.jsx(je,{variant:"light",className:"p-8",children:d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"About Moonwave Travel"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"Moonwave Travel의 철학과 가치에 대해 더 자세히 알아보세요"})]}),d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("p",{className:"text-white text-base opacity-90 leading-relaxed tracking-normal",children:"Moonwave Travel은 세상의 기준이 아닌, 각자의 고유한 여행 파동과 흐름으로 움직이는 여행 경험을 만들어갑니다."}),d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:'Footer의 "About Moonwave Travel" 링크를 클릭하여 더 자세한 정보를 확인하세요.'})]})]})})}),d.jsx("div",{className:"space-y-6",children:d.jsx(je,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Philosophy: 여행 파동(Wave)과 흐름(Flow)"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"우리가 믿는 것"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4 p-6 bg-white/5 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(xw,{className:"text-white text-xl"})}),d.jsx("h3",{className:"text-white text-xl font-semibold",children:"여행 파동(Wave)"})]}),d.jsx("p",{className:"text-white text-base leading-relaxed tracking-normal",children:"각자가 가진 고유한 여행 철학과 감성의 진동입니다. 이는 남과 비교할 수 없는, 오직 자신만의 여행 방식입니다."})]}),d.jsxs("div",{className:"space-y-4 p-6 bg-white/5 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(rC,{className:"text-white text-xl"})}),d.jsx("h3",{className:"text-white text-xl font-semibold",children:"여행 흐름(Flow)"})]}),d.jsx("p",{className:"text-white text-base leading-relaxed tracking-normal",children:"그 파동을 현실에서 실현하는 여행 전략과 실행의 연결입니다. 끊임없이 움직이되, 자신만의 속도로 흐르는 여행입니다."})]})]})]})})}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Values: 우리가 지키는 것"})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((s,o)=>d.jsx(je,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4 text-center",children:[d.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg mx-auto bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-2xl"})}),d.jsx("h3",{className:"text-white text-lg font-semibold",children:s.title}),d.jsx("p",{className:"text-white text-sm opacity-80 leading-relaxed tracking-normal",children:s.description})]})},s.title+"-"+o))})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Projects: 파동이 만드는 디지털 경험"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal mt-3",children:"우리가 만들어가는 고유한 서비스들"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((s,o)=>d.jsx(je,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-xl"})}),d.jsx(Ff,{className:"text-white/60 w-5 h-5"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:s.name}),d.jsx("p",{className:"text-white text-sm opacity-80 leading-relaxed tracking-normal mb-3",children:s.description}),d.jsx("p",{className:"text-primary-400 text-xs font-medium tracking-normal",children:s.url})]})]})},s.name+"-"+o))})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Technology: 파동을 실현하는 도구들"})}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:t.map((s,o)=>d.jsx(je,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-lg"})}),d.jsx("h3",{className:"text-white text-lg font-semibold",children:s.category})]}),d.jsx("div",{className:"space-y-3",children:s.items.map((c,f)=>d.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[d.jsx("p",{className:"text-white text-sm font-medium",children:c.name}),d.jsx("p",{className:"text-white text-xs opacity-70 tracking-normal",children:c.description})]},c.name+"-"+f))})]})},s.category+"-"+o))})]}),d.jsx("div",{className:"space-y-6",children:d.jsx(je,{variant:"strong",className:"p-8",children:d.jsxs("div",{className:"text-center space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Join the Travel Wave"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal mt-3",children:"당신만의 여행 파동을 찾고 계신가요?"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("blockquote",{className:"text-white text-xl italic leading-relaxed tracking-normal",children:['"여행의 속도는 순간의 환호를 가져올지 모르나',d.jsx("br",{}),'여행 파동과 흐름은 진정한 여행 경험을 가져온다."']}),d.jsx("p",{className:"text-white text-base opacity-80 tracking-normal",children:"Moonwave Travel은 당신이 세상의 여행 속도에 휩쓸리지 않고, 자신만의 여행 파동과 흐름을 만들 수 있도록 돕습니다."})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsxs(Le,{variant:"primary",onClick:()=>window.location.href="mailto:deasoung@gmail.com",className:"px-6 py-3",children:[d.jsx(nv,{className:"w-5 h-5"}),"Contact Moonwave Travel"]}),d.jsxs(Le,{variant:"secondary",onClick:()=>window.open("https://www.moonwave.kr","_blank"),className:"px-6 py-3",children:[d.jsx(Ff,{className:"w-5 h-5"}),"Visit Website"]})]}),d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:"Moonwave Travel HQ"}),d.jsx("p",{className:"text-white text-sm opacity-80 tracking-normal",children:"전략적 디지털 여행실에서 당신의 여행 파동을 기다립니다."})]})]})})}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(Le,{variant:"ghost",onClick:()=>window.history.back(),className:"px-6 py-3",children:[d.jsx(Fh,{className:"w-5 h-5"}),"뒤로 가기"]})})]})}),d.jsx(ga,{})]})}function AU(){return d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(Ys,{}),d.jsx("main",{className:"pt-28 pb-6 px-4 relative z-10",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"mb-8",children:d.jsxs(Eo,{to:"/",className:"text-white hover:text-primary-400",children:[d.jsx(Fh,{size:16}),d.jsx("span",{children:"뒤로 가기"})]})}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 mb-4 shadow-lg",children:d.jsx(bw,{size:24,className:"text-white icon-enhanced"})}),d.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-normal",children:"서비스 이용약관"}),d.jsx("p",{className:"text-lg text-white tracking-normal",children:"travel.moonwave.kr 여행 관리 서비스 이용과 관련된 약관 및 개인정보처리방침"}),d.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(XT,{size:16,className:"text-green-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"안전한 서비스"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Gf,{size:16,className:"text-blue-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"개인정보 보호"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Uf,{size:16,className:"text-purple-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"사용자 중심"})]})]})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsx(je,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:d.jsx(bw,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"travel.moonwave.kr 서비스 이용약관"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"시행일: 2025년 1월 1일"})]})]}),d.jsxs("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제1조 (목적)"}),d.jsx("p",{className:"break-keep-ko",children:'이 약관은 문유(문대성)(이하 "운영자")가 제공하는 여행 관리 플랫폼 travel.moonwave.kr(이하 "서비스")의 이용과 관련하여 운영자와 이용자의 권리, 의무 및 책임사항을 명확히 규정함을 목적으로 합니다.'})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제2조 (정의)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:'1. "서비스"란 운영자가 제공하는 여행 관리 플랫폼과 이를 통해 제공되는 모든 기능을 의미합니다.'}),d.jsx("p",{className:"break-keep-ko",children:'2. "이용자"란 이 약관에 따라 운영자가 제공하는 서비스를 이용하기 위하여 본 약관에 동의하고 가입한 자를 의미합니다.'}),d.jsx("p",{className:"break-keep-ko",children:'3. "계정"이란 이용자가 서비스 이용 시 본인을 식별하고 접속할 수 있도록 이메일 주소와 비밀번호를 설정하여 생성한 로그인 정보를 의미합니다.'})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제3조 (약관의 효력 및 변경)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 본 약관은 이용자가 회원가입 시 동의함으로써 효력이 발생합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 운영자는 필요한 경우 「약관의 규제에 관한 법률」 및 기타 관련 법령을 위배하지 않는 범위에서 이 약관을 변경할 수 있습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 약관이 변경될 경우 운영자는 변경된 약관의 시행일로부터 최소 7일 이전에 서비스 홈페이지 또는 이메일 등을 통해 공지합니다."}),d.jsx("p",{className:"break-keep-ko",children:"4. 이용자가 약관 변경 고지 이후에도 서비스를 계속 사용할 경우 변경된 약관에 동의한 것으로 간주합니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제4조 (서비스의 제공 및 변경)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 운영자는 다음 서비스를 제공합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"여행 일정 관리 및 계획"}),d.jsx("li",{className:"break-keep-ko",children:"여행지 정보 검색 및 저장"}),d.jsx("li",{className:"break-keep-ko",children:"여행 사진 및 메모 관리"}),d.jsx("li",{className:"break-keep-ko",children:"여행 지도 및 경로 확인"}),d.jsx("li",{className:"break-keep-ko",children:"여행 관련 정보 제공"})]}),d.jsx("p",{className:"break-keep-ko",children:"2. 서비스는 연중무휴, 1일 24시간 제공을 원칙으로 합니다. 다만, 운영상의 이유나 기술적 유지보수를 위해 일시 중지될 수 있습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 운영자는 서비스의 품질 개선, 기술적 사유, 법적 이유 등으로 서비스의 내용을 변경할 수 있으며, 변경 사항은 미리 공지합니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제5조 (서비스 이용)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스는 회원가입 절차를 통해 이용 가능하며, 현재 모든 기능은 무료로 제공됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 이용자는 계정의 관리 책임이 있으며, 계정을 타인과 공유하거나 양도할 수 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 이용자는 다음 행위를 금지합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"타인의 개인정보 도용 및 허위 정보 등록"}),d.jsx("li",{className:"break-keep-ko",children:"서비스의 안정적 운영을 방해하는 행위"}),d.jsx("li",{className:"break-keep-ko",children:"기타 대한민국 법률에 위반되는 행위"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제6조 (저작권 및 지적재산권)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스에 대한 저작권 및 기타 지적재산권은 운영자에게 귀속됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 이용자가 서비스 내에서 생성한 콘텐츠의 저작권은 이용자 본인에게 있으며, 운영자는 서비스 운영에 필요한 범위 내에서만 이를 이용할 수 있습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제7조 (책임 제한)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 운영자는 무료로 제공하는 서비스의 사용과 관련하여 발생하는 어떠한 손해에 대해서도 책임을 지지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 천재지변, 정전, 인터넷 장애 등 불가항력적 사유로 인한 서비스 중단에 대해서도 책임지지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 이용자의 서비스 이용으로 기대한 수익이나 효과가 발생하지 않은 것에 대해서 운영자는 책임지지 않습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제8조 (분쟁 해결)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스 이용과 관련한 분쟁 발생 시 우선 운영자와 이용자는 상호협의를 통해 해결합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 협의가 이루어지지 않을 경우, 분쟁은 대한민국 법률을 적용하며 관할 법원은 민사소송법에 따라 정합니다."})]})]})]})]})}),d.jsx(je,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-secondary-500 to-secondary-600 flex items-center justify-center",children:d.jsx(Gf,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"travel.moonwave.kr 개인정보처리방침"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"시행일: 2025년 1월 1일"})]})]}),d.jsxs("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:[d.jsx("p",{className:"break-keep-ko",children:"운영자 문유(문대성)는 「개인정보 보호법」을 준수하여 이용자의 개인정보를 보호합니다."}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"1. 개인정보처리자 정보"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"개인정보처리자: 문유(문대성)"}),d.jsx("li",{className:"break-keep-ko",children:"서비스명: travel.moonwave.kr"}),d.jsxs("li",{className:"break-keep-ko",children:["연락처: ",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"2. 개인정보 수집 항목"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 서비스 제공을 위해 다음 개인정보를 수집합니다:"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-medium text-white tracking-normal mb-2",children:"필수 항목"}),d.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:d.jsx("li",{className:"break-keep-ko",children:"이메일 주소, 비밀번호(암호화 저장), 서비스 이용 기록"})})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-medium text-white tracking-normal mb-2",children:"선택 항목"}),d.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:d.jsx("li",{className:"break-keep-ko",children:"여행 일정 정보, 여행지 정보, 여행 사진 및 메모"})})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"3. 개인정보 수집 목적"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"회원 관리: 서비스 이용자 식별 및 인증"}),d.jsx("li",{className:"break-keep-ko",children:"서비스 제공: 여행 일정 관리 및 맞춤형 정보 제공"}),d.jsx("li",{className:"break-keep-ko",children:"서비스 개선: 이용 통계 분석 및 신규 기능 개발"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"4. 개인정보 보유 및 이용 기간"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"• 회원 탈퇴 시 즉시 파기합니다."}),d.jsx("p",{className:"break-keep-ko",children:"• 관계법령에 따라 필요한 경우 다음과 같이 보관합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"서비스 이용 기록: 3년 (통신비밀보호법)"}),d.jsx("li",{className:"break-keep-ko",children:"로그인 기록: 3개월 (통신비밀보호법)"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"5. 개인정보 제3자 제공"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 원칙적으로 이용자의 동의 없이 개인정보를 제3자에게 제공하지 않으며, 법률의 특별한 규정에 의한 경우에만 제공합니다."})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"6. 개인정보 안전성 확보 조치"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"비밀번호 암호화 저장"}),d.jsx("li",{className:"break-keep-ko",children:"해킹 방지 기술적 조치: 보안 프로그램 설치 및 정기적 점검"}),d.jsx("li",{className:"break-keep-ko",children:"접근 권한 제한: 운영자 외 접근 불가"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"7. 이용자의 권리 행사"}),d.jsxs("p",{className:"break-keep-ko",children:["이용자는 이메일(",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"}),")을 통해 언제든지 개인정보의 열람, 정정, 삭제, 처리정지를 요구할 수 있습니다."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"8. 쿠키(Cookie) 운영"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 쿠키를 통해 이용자 맞춤형 서비스를 제공합니다."}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"목적: 로그인 유지, 이용 행태 분석"}),d.jsx("li",{className:"break-keep-ko",children:"쿠키 거부 방법: 웹 브라우저 설정 변경을 통해 가능"}),d.jsx("li",{className:"break-keep-ko",children:"쿠키 거부 시 서비스 일부 기능 사용이 제한될 수 있습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"9. 개인정보처리방침 변경"}),d.jsx("p",{className:"break-keep-ko",children:"개인정보처리방침 변경 시 시행 7일 전 서비스 웹사이트 및 이메일 등을 통해 고지합니다."})]})]})]})}),d.jsx(je,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center",children:d.jsx(aC,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"면책조항"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"서비스 이용 관련 안내"})]})]}),d.jsx("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 개인 운영 서비스로서 운영자 개인이 관리합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 서비스가 제공하는 정보는 참고용이며, 정확성이나 최신성을 보장하지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 모든 서비스는 무료 제공이며, 이에 대한 품질 보증이나 지속적 제공 의무는 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"4. 이용자는 중요 데이터를 별도 백업해야 하며, 데이터 손실에 대한 책임은 운영자에게 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"5. 외부 서비스 연동 시 해당 서비스 이용약관이 별도로 적용됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"6. 개인 서비스 특성상 서비스는 예고 없이 중단될 수 있으며, 이로 인한 손해는 책임지지 않습니다."})]})})]})}),d.jsx(je,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:d.jsx(nv,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"문의사항"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"궁금한 점이 있으시면 언제든 연락주세요"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-lg font-medium text-white tracking-normal",children:"운영자 정보"}),d.jsxs("div",{className:"space-y-2 text-base text-white tracking-normal",children:[d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"운영자:"})," 문유(문대성)"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"Email:"})," ",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"})]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"Website:"})," ",d.jsx("a",{href:"http://www.moonwave.kr",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300 underline",children:"www.moonwave.kr"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-lg font-medium text-white tracking-normal",children:"서비스 정보"}),d.jsxs("div",{className:"space-y-2 text-base text-white tracking-normal",children:[d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"서비스명:"})," travel.moonwave.kr"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"서비스 유형:"})," 여행 관리 플랫폼"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"제공 방식:"})," 무료 서비스"]})]})]})]}),d.jsx("div",{className:"pt-6 border-t border-white/20",children:d.jsx("p",{className:"text-center text-sm text-white tracking-normal opacity-80",children:"© 2025 Moonwave Travel by 문유(문대성). All rights reserved."})})]})})]})]})}),d.jsx(ga,{})]})}const Al=[{id:"1",title:"Glass Vault",artist:"Moonwave",audioUrl:"/Music/10. Glass Vault.mp3"},{id:"2",title:"Null Error Grace Part1",artist:"Moonwave",audioUrl:"/Music/11. Null Error Grace Part1.mp3"},{id:"3",title:"Shine Bright",artist:"Moonwave",audioUrl:"/Music/13. Shine Bright.mp3"},{id:"4",title:"Moonwave",artist:"Moonwave",audioUrl:"/Music/17. Moonwave.mp3"},{id:"5",title:"Phantom Fairy",artist:"Moonwave",audioUrl:"/Music/5. Phantom Fairy.mp3"}];function IU(){const{user:n}=Qs(),e=V.useRef(null),[t,s]=V.useState(0),[o,c]=V.useState(!1),[f,_]=V.useState(0),[y,b]=V.useState(0),[E,A]=V.useState(.7),[I,F]=V.useState(!1),[D,M]=V.useState(!0),z=Al[t];V.useEffect(()=>{const ge=e.current;if(!ge)return;const xe=()=>_(ge.currentTime),B=()=>b(ge.duration),k=()=>{c(!1);const j=D?Math.floor(Math.random()*Al.length):(t+1)%Al.length;s(j),setTimeout(async()=>{const U=e.current;if(U)try{await U.play(),c(!0)}catch(q){console.error("자동 재생 실패:",q),c(!1)}},500)};return ge.addEventListener("timeupdate",xe),ge.addEventListener("durationchange",B),ge.addEventListener("ended",k),()=>{ge.removeEventListener("timeupdate",xe),ge.removeEventListener("durationchange",B),ge.removeEventListener("ended",k)}},[t,D]),V.useEffect(()=>{const ge=e.current;ge&&(ge.volume=I?0:E)},[E,I]),V.useEffect(()=>{_(0),b(0),c(!1)},[t]);const W=async()=>{const ge=e.current;if(ge)try{o?(ge.pause(),c(!1)):(await ge.play(),c(!0))}catch(xe){console.error("재생 오류:",xe),c(!1)}},$=async()=>{const ge=D?Math.floor(Math.random()*Al.length):t>0?t-1:Al.length-1;s(ge),setTimeout(async()=>{const xe=e.current;if(xe)try{await xe.play(),c(!0)}catch(B){console.error("자동 재생 실패:",B),c(!1)}},100)},te=async()=>{const ge=D?Math.floor(Math.random()*Al.length):(t+1)%Al.length;s(ge),setTimeout(async()=>{const xe=e.current;if(xe)try{await xe.play(),c(!0)}catch(B){console.error("자동 재생 실패:",B),c(!1)}},100)},_e=ge=>{if(isNaN(ge))return"0:00";const xe=Math.floor(ge/60),B=Math.floor(ge%60);return`${xe}:${B.toString().padStart(2,"0")}`};return n?d.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50",children:d.jsxs(je,{variant:"strong",className:"p-4 backdrop-blur-xl",children:[d.jsx("audio",{ref:e,src:z.audioUrl,preload:"metadata"}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("div",{className:"text-white font-medium text-sm truncate",children:z.title}),d.jsx("div",{className:"text-white/60 text-xs truncate",children:z.artist})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>M(!D),className:Nr("p-2",D?"text-primary-400":"text-white/60"),ariaLabel:"셔플 모드",children:d.jsx(oC,{className:"w-4 h-4"})}),d.jsx(Le,{variant:"ghost",size:"sm",onClick:$,className:"p-2 text-white/80 hover:text-white",ariaLabel:"이전 트랙",children:d.jsx(lC,{className:"w-4 h-4"})}),d.jsx(Le,{variant:"primary",size:"sm",onClick:W,className:"p-3",ariaLabel:o?"일시정지":"재생",children:o?d.jsx(cC,{className:"w-4 h-4"}):d.jsx(c_,{className:"w-4 h-4"})}),d.jsx(Le,{variant:"ghost",size:"sm",onClick:te,className:"p-2 text-white/80 hover:text-white",ariaLabel:"다음 트랙",children:d.jsx(uC,{className:"w-4 h-4"})}),d.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[d.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>F(!I),className:"p-2 text-white/80 hover:text-white",ariaLabel:I?"음소거 해제":"음소거",children:I?d.jsx(hC,{className:"w-4 h-4"}):d.jsx(dC,{className:"w-4 h-4"})}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:E,onChange:ge=>A(parseFloat(ge.target.value)),className:"w-20 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"})]}),d.jsxs("div",{className:"hidden md:block text-xs text-white/60 min-w-[80px] text-right",children:[_e(f)," / ",_e(y)]})]})]}),d.jsx("div",{className:"mt-3",children:d.jsx("div",{className:"w-full h-1 bg-white/20 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-primary-400 to-primary-600 transition-all duration-300",style:{width:y>0?`${f/y*100}%`:"0%"}})})})]})}):null}function CU(){return Es().pathname==="/login"?null:d.jsx("div",{className:"px-4 pb-4",children:d.jsx(IU,{})})}function RU(){return Es().pathname==="/login"?null:d.jsx(Ys,{})}function kU(){return d.jsx(sV,{children:d.jsx(DR,{children:d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(NA,{}),d.jsx(RU,{}),d.jsx("div",{className:"relative z-10 min-h-screen",children:d.jsxs(hR,{children:[d.jsx(di,{path:"/",element:d.jsx(UV,{})}),d.jsx(di,{path:"/login",element:d.jsx(TU,{})}),d.jsx(di,{path:"/settings",element:d.jsx(NU,{})}),d.jsx(di,{path:"/about",element:d.jsx(SU,{})}),d.jsx(di,{path:"/terms",element:d.jsx(AU,{})}),d.jsx(di,{path:"/trips/new",element:d.jsx(zV,{})}),d.jsx(di,{path:"/trips/:id/edit",element:d.jsx(BV,{})}),d.jsx(di,{path:"/trips/:id",element:d.jsx(KV,{})}),d.jsx(di,{path:"/trips/:tripId/plans/new",element:d.jsx(GT,{})}),d.jsx(di,{path:"/trips/:tripId/plans/:planId",element:d.jsx(GT,{})}),d.jsx(di,{path:"/places/search",element:d.jsx(YV,{})}),d.jsx(di,{path:"/trips/:id/map",element:d.jsx($T,{})}),d.jsx(di,{path:"/trip-map",element:d.jsx($T,{})}),d.jsx(di,{path:"*",element:d.jsx("div",{children:"404 - Page Not Found"})})]})}),d.jsx(CU,{})]})})})}bC.createRoot(document.getElementById("root")).render(d.jsx(Hf.StrictMode,{children:d.jsx(kU,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
//# sourceMappingURL=index-CIaxKgKA.js.map
