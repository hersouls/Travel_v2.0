import{r as U,I as DT,S as jf,T as Lf,M as Wn,C as gs,H as EI,a as OT,U as Df,b as SI,c as Of,d as AI,P as wh,e as Dc,X as Ml,f as B_,g as NI,h as II,i as RI,j as Wg,Y as Al,k as Th,l as VT,G as Vf,E as Uf,N as uh,m as zf,B as F_,n as H_,o as Eh,A as zh,p as Qg,q as CI,F as UT,R as Bf,s as kI,t as q_,L as Xg,u as PI,v as MI,w as jI,x as LI,y as zT,z as DI,D as OI,J as VI,K as UI,O as zI,Q as BI,V as ow,W as FI,Z as HI,_ as qI,$ as GI,a0 as lw,a1 as ZI,a2 as cw,a3 as $I,a4 as KI,a5 as YI,a6 as WI,a7 as QI,a8 as XI}from"./ui-CzJ_WPTm.js";import{r as JI,a as BT,g as FT}from"./vendor-gH-7aFTg.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var yg={exports:{}},Wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function eR(){if(uw)return Wu;uw=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var _ in o)_!=="key"&&(u[_]=o[_])}else u=o;return o=u.ref,{$$typeof:n,type:s,key:f,ref:o!==void 0?o:null,props:u}}return Wu.Fragment=e,Wu.jsx=t,Wu.jsxs=t,Wu}var hw;function tR(){return hw||(hw=1,yg.exports=eR()),yg.exports}var d=tR(),xg={exports:{}},Qu={},bg={exports:{}},wg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dw;function nR(){return dw||(dw=1,function(n){function e(X,ce){var J=X.length;X.push(ce);e:for(;0<J;){var Ee=J-1>>>1,_e=X[Ee];if(0<o(_e,ce))X[Ee]=ce,X[J]=_e,J=Ee;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ce=X[0],J=X.pop();if(J!==ce){X[0]=J;e:for(var Ee=0,_e=X.length,je=_e>>>1;Ee<je;){var Ie=2*(Ee+1)-1,Se=X[Ie],$e=Ie+1,qe=X[$e];if(0>o(Se,J))$e<_e&&0>o(qe,Se)?(X[Ee]=qe,X[$e]=J,Ee=$e):(X[Ee]=Se,X[Ie]=J,Ee=Ie);else if($e<_e&&0>o(qe,J))X[Ee]=qe,X[$e]=J,Ee=$e;else break e}}return ce}function o(X,ce){var J=X.sortIndex-ce.sortIndex;return J!==0?J:X.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var f=Date,_=f.now();n.unstable_now=function(){return f.now()-_}}var y=[],b=[],E=1,I=null,N=3,F=!1,H=!1,D=!1,q=!1,Y=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function pe(X){for(var ce=t(b);ce!==null;){if(ce.callback===null)s(b);else if(ce.startTime<=X)s(b),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=t(b)}}function xe(X){if(D=!1,pe(X),!H)if(t(y)!==null)H=!0,ge||(ge=!0,V());else{var ce=t(b);ce!==null&&ke(xe,ce.startTime-X)}}var ge=!1,G=-1,k=5,j=-1;function O(){return q?!0:!(n.unstable_now()-j<k)}function Z(){if(q=!1,ge){var X=n.unstable_now();j=X;var ce=!0;try{e:{H=!1,D&&(D=!1,oe(G),G=-1),F=!0;var J=N;try{t:{for(pe(X),I=t(y);I!==null&&!(I.expirationTime>X&&O());){var Ee=I.callback;if(typeof Ee=="function"){I.callback=null,N=I.priorityLevel;var _e=Ee(I.expirationTime<=X);if(X=n.unstable_now(),typeof _e=="function"){I.callback=_e,pe(X),ce=!0;break t}I===t(y)&&s(y),pe(X)}else s(y);I=t(y)}if(I!==null)ce=!0;else{var je=t(b);je!==null&&ke(xe,je.startTime-X),ce=!1}}break e}finally{I=null,N=J,F=!1}ce=void 0}}finally{ce?V():ge=!1}}}var V;if(typeof ne=="function")V=function(){ne(Z)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ve=M.port2;M.port1.onmessage=Z,V=function(){ve.postMessage(null)}}else V=function(){Y(Z,0)};function ke(X,ce){G=Y(function(){X(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_next=function(X){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var J=N;N=ce;try{return X()}finally{N=J}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var J=N;N=X;try{return ce()}finally{N=J}},n.unstable_scheduleCallback=function(X,ce,J){var Ee=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Ee+J:Ee):J=Ee,X){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=J+_e,X={id:E++,callback:ce,priorityLevel:X,startTime:J,expirationTime:_e,sortIndex:-1},J>Ee?(X.sortIndex=J,e(b,X),t(y)===null&&X===t(b)&&(D?(oe(G),G=-1):D=!0,ke(xe,J-Ee))):(X.sortIndex=_e,e(y,X),H||F||(H=!0,ge||(ge=!0,V()))),X},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(X){var ce=N;return function(){var J=N;N=ce;try{return X.apply(this,arguments)}finally{N=J}}}}(wg)),wg}var fw;function iR(){return fw||(fw=1,bg.exports=nR()),bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mw;function sR(){if(mw)return Qu;mw=1;var n=iR(),e=JI(),t=BT();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var r=i,l=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(l=r.return),i=r.return;while(i)}return r.tag===3?l:null}function f(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function _(i){if(u(i)!==i)throw Error(s(188))}function y(i){var r=i.alternate;if(!r){if(r=u(i),r===null)throw Error(s(188));return r!==i?null:i}for(var l=i,h=r;;){var g=l.return;if(g===null)break;var v=g.alternate;if(v===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===l)return _(g),i;if(v===h)return _(g),r;v=v.sibling}throw Error(s(188))}if(l.return!==h.return)l=g,h=v;else{for(var A=!1,C=g.child;C;){if(C===l){A=!0,l=g,h=v;break}if(C===h){A=!0,h=g,l=v;break}C=C.sibling}if(!A){for(C=v.child;C;){if(C===l){A=!0,l=v,h=g;break}if(C===h){A=!0,h=v,l=g;break}C=C.sibling}if(!A)throw Error(s(189))}}if(l.alternate!==h)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?i:r}function b(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=b(i),r!==null)return r;i=i.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function ve(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case H:return"Fragment";case q:return"Profiler";case D:return"StrictMode";case xe:return"Suspense";case ge:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case F:return"Portal";case ne:return(i.displayName||"Context")+".Provider";case oe:return(i._context.displayName||"Context")+".Consumer";case pe:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case G:return r=i.displayName||null,r!==null?r:ve(i.type)||"Memo";case k:r=i._payload,i=i._init;try{return ve(i(r))}catch{}}return null}var ke=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Ee=[],_e=-1;function je(i){return{current:i}}function Ie(i){0>_e||(i.current=Ee[_e],Ee[_e]=null,_e--)}function Se(i,r){_e++,Ee[_e]=i.current,i.current=r}var $e=je(null),qe=je(null),Ge=je(null),Xt=je(null);function Gt(i,r){switch(Se(Ge,r),Se(qe,i),Se($e,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Lb(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Lb(r),i=Db(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Ie($e),Se($e,i)}function Ts(){Ie($e),Ie(qe),Ie(Ge)}function Ki(i){i.memoizedState!==null&&Se(Xt,i);var r=$e.current,l=Db(r,i.type);r!==l&&(Se(qe,i),Se($e,l))}function wi(i){qe.current===i&&(Ie($e),Ie(qe)),Xt.current===i&&(Ie(Xt),Gu._currentValue=J)}var Ti=Object.prototype.hasOwnProperty,Es=n.unstable_scheduleCallback,Ar=n.unstable_cancelCallback,pa=n.unstable_shouldYield,qo=n.unstable_requestPaint,Vn=n.unstable_now,ga=n.unstable_getCurrentPriorityLevel,Go=n.unstable_ImmediatePriority,Nr=n.unstable_UserBlockingPriority,Ss=n.unstable_NormalPriority,ql=n.unstable_LowPriority,Ir=n.unstable_IdlePriority,Zo=n.log,Gl=n.unstable_setDisableYieldValue,It=null,ft=null;function Un(i){if(typeof Zo=="function"&&Gl(i),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(It,i)}catch{}}var yn=Math.clz32?Math.clz32:Rr,$o=Math.log,Zl=Math.LN2;function Rr(i){return i>>>=0,i===0?32:31-($o(i)/Zl|0)|0}var Ws=256,As=4194304;function ci(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function _a(i,r,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var C=h&134217727;return C!==0?(h=C&~v,h!==0?g=ci(h):(A&=C,A!==0?g=ci(A):l||(l=C&~i,l!==0&&(g=ci(l))))):(C=h&~v,C!==0?g=ci(C):A!==0?g=ci(A):l||(l=h&~i,l!==0&&(g=ci(l)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,l=r&-r,v>=l||v===32&&(l&4194048)!==0)?r:g}function Ei(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function Ko(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var i=Ws;return Ws<<=1,(Ws&4194048)===0&&(Ws=256),i}function va(){var i=As;return As<<=1,(As&62914560)===0&&(As=4194304),i}function Yi(i){for(var r=[],l=0;31>l;l++)r.push(i);return r}function Wi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Wo(i,r,l,h,g,v){var A=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var C=i.entanglements,B=i.expirationTimes,te=i.hiddenUpdates;for(l=A&~l;0<l;){var le=31-yn(l),de=1<<le;C[le]=0,B[le]=-1;var ie=te[le];if(ie!==null)for(te[le]=null,le=0;le<ie.length;le++){var se=ie[le];se!==null&&(se.lane&=-536870913)}l&=~de}h!==0&&Qi(i,h,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~r))}function Qi(i,r,l){i.pendingLanes|=r,i.suspendedLanes&=~r;var h=31-yn(r);i.entangledLanes|=r,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function Qo(i,r){var l=i.entangledLanes|=r;for(i=i.entanglements;l;){var h=31-yn(l),g=1<<h;g&r|i[h]&r&&(i[h]|=r),l&=~g}}function Qs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ya(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Xs(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:tw(i.type))}function xa(i,r){var l=ce.p;try{return ce.p=i,r()}finally{ce.p=l}}var Rt=Math.random().toString(36).slice(2),Jt="__reactFiber$"+Rt,Zt="__reactProps$"+Rt,ui="__reactContainer$"+Rt,zn="__reactEvents$"+Rt,Ce="__reactListeners$"+Rt,Ns="__reactHandles$"+Rt,Xo="__reactResources$"+Rt,Js="__reactMarker$"+Rt;function Is(i){delete i[Jt],delete i[Zt],delete i[zn],delete i[Ce],delete i[Ns]}function Si(i){var r=i[Jt];if(r)return r;for(var l=i.parentNode;l;){if(r=l[ui]||l[Jt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(i=zb(i);i!==null;){if(l=i[Jt])return l;i=zb(i)}return r}i=l,l=i.parentNode}return null}function Ai(i){if(i=i[Jt]||i[ui]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function Rn(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function xn(i){var r=i[Xo];return r||(r=i[Xo]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function zt(i){i[Js]=!0}var Jo=new Set,ba={};function Ni(i,r){Xi(i,r),Xi(i+"Capture",r)}function Xi(i,r){for(ba[i]=r,i=0;i<r.length;i++)Jo.add(r[i])}var $l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cr={},kr={};function Kl(i){return Ti.call(kr,i)?!0:Ti.call(Cr,i)?!1:$l.test(i)?kr[i]=!0:(Cr[i]=!0,!1)}function er(i,r,l){if(Kl(r))if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+l)}}function Ji(i,r,l){if(l===null)i.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+l)}}function fn(i,r,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(r,l,""+h)}}var Rs,tr;function es(i){if(Rs===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Rs=r&&r[1]||"",tr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rs+i+tr}var Pr=!1;function ts(i,r){if(!i||Pr)return"";Pr=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(se){var ie=se}Reflect.construct(i,[],de)}else{try{de.call()}catch(se){ie=se}i.call(de.prototype)}}else{try{throw Error()}catch(se){ie=se}(de=i())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(se){if(se&&ie&&typeof se.stack=="string")return[se.stack,ie.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=h.DetermineComponentFrameRoot(),A=v[0],C=v[1];if(A&&C){var B=A.split(`
`),te=C.split(`
`);for(g=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;g<te.length&&!te[g].includes("DetermineComponentFrameRoot");)g++;if(h===B.length||g===te.length)for(h=B.length-1,g=te.length-1;1<=h&&0<=g&&B[h]!==te[g];)g--;for(;1<=h&&0<=g;h--,g--)if(B[h]!==te[g]){if(h!==1||g!==1)do if(h--,g--,0>g||B[h]!==te[g]){var le=`
`+B[h].replace(" at new "," at ");return i.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",i.displayName)),le}while(1<=h&&0<=g);break}}}finally{Pr=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?es(l):""}function et(i){switch(i.tag){case 26:case 27:case 5:return es(i.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return ts(i.type,!1);case 11:return ts(i.type.render,!1);case 1:return ts(i.type,!0);case 31:return es("Activity");default:return""}}function gt(i){try{var r="";do r+=et(i),i=i.return;while(i);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function an(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ns(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function nr(i){var r=ns(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),h=""+i[r];if(!i.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,v=l.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(A){h=""+A,v.call(this,A)}}),Object.defineProperty(i,r,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(A){h=""+A},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function ir(i){i._valueTracker||(i._valueTracker=nr(i))}function Ke(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var l=r.getValue(),h="";return i&&(h=ns(i)?i.checked?"true":"false":i.value),i=h,i!==l?(r.setValue(i),!0):!1}function yt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var el=/[\n"\\]/g;function Dt(i){return i.replace(el,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ct(i,r,l,h,g,v,A,C){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),r!=null?A==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+an(r)):i.value!==""+an(r)&&(i.value=""+an(r)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),r!=null?Ii(i,A,an(r)):l!=null?Ii(i,A,an(l)):h!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+an(C):i.removeAttribute("name")}function Mr(i,r,l,h,g,v,A,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||r!=null))return;l=l!=null?""+an(l):"",r=r!=null?""+an(r):l,C||r===i.value||(i.value=r),i.defaultValue=r}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=C?i.checked:!!h,i.defaultChecked=!!h,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A)}function Ii(i,r,l){r==="number"&&yt(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function Cn(i,r,l,h){if(i=i.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=r.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+an(l),r=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function ze(i,r,l){if(r!=null&&(r=""+an(r),r!==i.value&&(i.value=r),l==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=l!=null?""+an(l):""}function Jn(i,r,l,h){if(r==null){if(h!=null){if(l!=null)throw Error(s(92));if(ke(h)){if(1<h.length)throw Error(s(93));h=h[0]}l=h}l==null&&(l=""),r=l}l=an(r),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function bn(i,r){if(r){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=r;return}}i.textContent=r}var Ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wa(i,r,l){var h=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":h?i.setProperty(r,l):typeof l!="number"||l===0||Ri.has(r)?r==="float"?i.cssFloat=l:i[r]=(""+l).trim():i[r]=l+"px"}function Cs(i,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in r)h=r[g],r.hasOwnProperty(g)&&l[g]!==h&&wa(i,g,h)}else for(var v in r)r.hasOwnProperty(v)&&wa(i,v,r[v])}function jr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ta=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sr(i){return Ta.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Ci=null;function kn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var is=null,ki=null;function nl(i){var r=Ai(i);if(r&&(i=r.stateNode)){var l=i[Zt]||null;e:switch(i=r.stateNode,r.type){case"input":if(Ct(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Dt(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var h=l[r];if(h!==i&&h.form===i.form){var g=h[Zt]||null;if(!g)throw Error(s(90));Ct(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)h=l[r],h.form===i.form&&Ke(h)}break e;case"textarea":ze(i,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Cn(i,!!l.multiple,r,!1)}}}var De=!1;function ei(i,r,l){if(De)return i(r,l);De=!0;try{var h=i(r);return h}finally{if(De=!1,(is!==null||ki!==null)&&(Bd(),is&&(r=is,i=ki,ki=is=null,nl(r),i)))for(r=0;r<i.length;r++)nl(i[r])}}function ut(i,r){var l=i.stateNode;if(l===null)return null;var h=l[Zt]||null;if(h===null)return null;l=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bn=!1;if(hi)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Bn=!1}var di=null,Fn=null,Pi=null;function Ps(){if(Pi)return Pi;var i,r=Fn,l=r.length,h,g="value"in di?di.value:di.textContent,v=g.length;for(i=0;i<l&&r[i]===g[i];i++);var A=l-i;for(h=1;h<=A&&r[l-h]===g[v-h];h++);return Pi=g.slice(i,1<h?1-h:void 0)}function wt(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function wn(){return!0}function Ea(){return!1}function en(i){function r(l,h,g,v,A){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(l=i[C],this[C]=l?l(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?wn:Ea,this.isPropagationStopped=Ea,this}return E(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),r}var mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lr=en(mt),Ms=E({},mt,{view:0,detail:0}),Yl=en(Ms),Dr,Qe,ss,mn=E({},Ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ar,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ss&&(ss&&i.type==="mousemove"?(Dr=i.screenX-ss.screenX,Qe=i.screenY-ss.screenY):Qe=Dr=0,ss=i),Dr)},movementY:function(i){return"movementY"in i?i.movementY:Qe}}),Tn=en(mn),il=E({},mn,{dataTransfer:0}),lu=en(il),js=E({},Ms,{relatedTarget:0}),Sa=en(js),Aa=E({},mt,{animationName:0,elapsedTime:0,pseudoElement:0}),Na=en(Aa),Wl=E({},mt,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rr=en(Wl),cu=E({},mt,{data:0}),Hn=en(cu),Or={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ia(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=Mi[i])?!!r[i]:!1}function ar(){return Ia}var Ra=E({},Ms,{key:function(i){if(i.key){var r=Or[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=wt(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ar,charCode:function(i){return i.type==="keypress"?wt(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?wt(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ca=en(Ra),rl=E({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ka=en(rl),Ls=E({},Ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ar}),Ql=en(Ls),Pa=E({},mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xl=en(Pa),al=E({},mn,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Vr=en(al),on=E({},mt,{newState:0,oldState:0}),rs=en(on),Jl=[9,13,27,32],qn=hi&&"CompositionEvent"in window,m=null;hi&&"documentMode"in document&&(m=document.documentMode);var w=hi&&"TextEvent"in window&&!m,S=hi&&(!qn||m&&8<m&&11>=m),P=" ",W=!1;function ae(i,r){switch(i){case"keyup":return Jl.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ye(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var rt=!1;function $t(i,r){switch(i){case"compositionend":return ye(r);case"keypress":return r.which!==32?null:(W=!0,P);case"textInput":return i=r.data,i===P&&W?null:i;default:return null}}function at(i,r){if(rt)return i==="compositionend"||!qn&&ae(i,r)?(i=Ps(),Pi=Fn=di=null,rt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return S&&r.locale!=="ko"?null:r.data;default:return null}}var _t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kt(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!_t[i.type]:r==="textarea"}function Ds(i,r,l,h){is?ki?ki.push(h):ki=[h]:is=h,r=$d(r,"onChange"),0<r.length&&(l=new Lr("onChange","change",null,l,h),i.push({event:l,listeners:r}))}var At=null,as=null;function os(i){Cb(i,0)}function ec(i){var r=Rn(i);if(Ke(r))return i}function Ma(i,r){if(i==="change")return r}var uu=!1;if(hi){var ja;if(hi){var hu="oninput"in document;if(!hu){var Os=document.createElement("div");Os.setAttribute("oninput","return;"),hu=typeof Os.oninput=="function"}ja=hu}else ja=!1;uu=ja&&(!document.documentMode||9<document.documentMode)}function ol(){At&&(At.detachEvent("onpropertychange",ad),as=At=null)}function ad(i){if(i.propertyName==="value"&&ec(as)){var r=[];Ds(r,as,i,kn(i)),ei(os,r)}}function du(i,r,l){i==="focusin"?(ol(),At=r,as=l,At.attachEvent("onpropertychange",ad)):i==="focusout"&&ol()}function Hm(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ec(as)}function Vs(i,r){if(i==="click")return ec(r)}function qm(i,r){if(i==="input"||i==="change")return ec(r)}function La(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var ti=typeof Object.is=="function"?Object.is:La;function ni(i,r){if(ti(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var l=Object.keys(i),h=Object.keys(r);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Ti.call(r,g)||!ti(i[g],r[g]))return!1}return!0}function ll(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fu(i,r){var l=ll(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=r&&h>=r)return{node:l,offset:r-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ll(l)}}function tc(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?tc(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function cl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=yt(i.document);r instanceof i.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)i=r.contentWindow;else break;r=yt(i.document)}return r}function ul(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var nc=hi&&"documentMode"in document&&11>=document.documentMode,ji=null,Da=null,Ur=null,ic=!1;function od(i,r,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ic||ji==null||ji!==yt(h)||(h=ji,"selectionStart"in h&&ul(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ur&&ni(Ur,h)||(Ur=h,h=$d(Da,"onSelect"),0<h.length&&(r=new Lr("onSelect","select",null,r,l),i.push({event:r,listeners:h}),r.target=ji)))}function ls(i,r){var l={};return l[i.toLowerCase()]=r.toLowerCase(),l["Webkit"+i]="webkit"+r,l["Moz"+i]="moz"+r,l}var Oa={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},sc={},ld={};hi&&(ld=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function or(i){if(sc[i])return sc[i];if(!Oa[i])return i;var r=Oa[i],l;for(l in r)if(r.hasOwnProperty(l)&&l in ld)return sc[i]=r[l];return i}var cd=or("animationend"),Li=or("animationiteration"),hl=or("animationstart"),Gm=or("transitionrun"),rc=or("transitionstart"),Zm=or("transitioncancel"),mu=or("transitionend"),ud=new Map,zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zr.push("scrollEnd");function Di(i,r){ud.set(i,r),Ni(r,[i])}var Br=new WeakMap;function ii(i,r){if(typeof i=="object"&&i!==null){var l=Br.get(i);return l!==void 0?l:(r={value:i,source:r,stack:gt(r)},Br.set(i,r),r)}return{value:i,source:r,stack:gt(r)}}var si=[],Va=0,Oi=0;function dl(){for(var i=Va,r=Oi=Va=0;r<i;){var l=si[r];si[r++]=null;var h=si[r];si[r++]=null;var g=si[r];si[r++]=null;var v=si[r];if(si[r++]=null,h!==null&&g!==null){var A=h.pending;A===null?g.next=g:(g.next=A.next,A.next=g),h.pending=g}v!==0&&ml(l,g,v)}}function fl(i,r,l,h){si[Va++]=i,si[Va++]=r,si[Va++]=l,si[Va++]=h,Oi|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function Fr(i,r,l,h){return fl(i,r,l,h),lr(i)}function Ua(i,r){return fl(i,null,null,r),lr(i)}function ml(i,r,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,v=i.return;v!==null;)v.childLanes|=l,h=v.alternate,h!==null&&(h.childLanes|=l),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&r!==null&&(g=31-yn(l),i=v.hiddenUpdates,h=i[g],h===null?i[g]=[r]:h.push(r),r.lane=l|536870912),v):null}function lr(i){if(50<Ou)throw Ou=0,Hp=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Hr={};function hd(i,r,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(i,r,l,h){return new hd(i,r,l,h)}function ac(i){return i=i.prototype,!(!i||!i.isReactComponent)}function cs(i,r){var l=i.alternate;return l===null?(l=ri(i.tag,r,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=r,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,r=i.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function pu(i,r){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,r=l.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function pl(i,r,l,h,g,v){var A=0;if(h=i,typeof i=="function")ac(i)&&(A=1);else if(typeof i=="string")A=hI(i,l,$e.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=ri(31,l,r,g),i.elementType=j,i.lanes=v,i;case H:return cr(l.children,g,v,r);case D:A=8,g|=24;break;case q:return i=ri(12,l,r,g|2),i.elementType=q,i.lanes=v,i;case xe:return i=ri(13,l,r,g),i.elementType=xe,i.lanes=v,i;case ge:return i=ri(19,l,r,g),i.elementType=ge,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:case ne:A=10;break e;case oe:A=9;break e;case pe:A=11;break e;case G:A=14;break e;case k:A=16,h=null;break e}A=29,l=Error(s(130,i===null?"null":typeof i,"")),h=null}return r=ri(A,l,r,g),r.elementType=i,r.type=h,r.lanes=v,r}function cr(i,r,l,h){return i=ri(7,i,h,r),i.lanes=l,i}function gu(i,r,l){return i=ri(6,i,null,r),i.lanes=l,i}function oc(i,r,l){return r=ri(4,i.children!==null?i.children:[],i.key,r),r.lanes=l,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var qr=[],za=0,a=null,c=0,p=[],x=0,T=null,R=1,z="";function Q(i,r){qr[za++]=c,qr[za++]=a,a=i,c=r}function re(i,r,l){p[x++]=R,p[x++]=z,p[x++]=T,T=i;var h=R;i=z;var g=32-yn(h)-1;h&=~(1<<g),l+=1;var v=32-yn(r)+g;if(30<v){var A=g-g%5;v=(h&(1<<A)-1).toString(32),h>>=A,g-=A,R=1<<32-yn(r)+g|l<<g|h,z=v+i}else R=1<<v|l<<g|h,z=i}function me(i){i.return!==null&&(Q(i,1),re(i,1,0))}function be(i){for(;i===a;)a=qr[--za],qr[za]=null,c=qr[--za],qr[za]=null;for(;i===T;)T=p[--x],p[x]=null,z=p[--x],p[x]=null,R=p[--x],p[x]=null}var Ae=null,Re=null,Ze=!1,Pt=null,Bt=!1,En=Error(s(519));function fi(i){var r=Error(s(418,""));throw Fa(ii(r,i)),En}function dd(i){var r=i.stateNode,l=i.type,h=i.memoizedProps;switch(r[Jt]=i,r[Zt]=h,l){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(l=0;l<Uu.length;l++)it(Uu[l],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":it("invalid",r),Mr(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),ir(r);break;case"select":it("invalid",r);break;case"textarea":it("invalid",r),Jn(r,h.value,h.defaultValue,h.children),ir(r)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||h.suppressHydrationWarning===!0||jb(r.textContent,l)?(h.popover!=null&&(it("beforetoggle",r),it("toggle",r)),h.onScroll!=null&&it("scroll",r),h.onScrollEnd!=null&&it("scrollend",r),h.onClick!=null&&(r.onclick=Kd),r=!0):r=!1,r||fi(i)}function fd(i){for(Ae=i.return;Ae;)switch(Ae.tag){case 5:case 13:Bt=!1;return;case 27:case 3:Bt=!0;return;default:Ae=Ae.return}}function gl(i){if(i!==Ae)return!1;if(!Ze)return fd(i),Ze=!0,!1;var r=i.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||rg(i.type,i.memoizedProps)),l=!l),l&&Re&&fi(i),fd(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(r===0){Re=Fs(i.nextSibling);break e}r--}else l!=="$"&&l!=="$!"&&l!=="$?"||r++;i=i.nextSibling}Re=null}}else r===27?(r=Re,io(i.type)?(i=cg,cg=null,Re=i):Re=r):Re=Ae?Fs(i.stateNode.nextSibling):null;return!0}function Ba(){Re=Ae=null,Ze=!1}function md(){var i=Pt;return i!==null&&(gi===null?gi=i:gi.push.apply(gi,i),Pt=null),i}function Fa(i){Pt===null?Pt=[i]:Pt.push(i)}var Vt=je(null),us=null,Us=null;function ur(i,r,l){Se(Vt,r._currentValue),r._currentValue=l}function zs(i){i._currentValue=Vt.current,Ie(Vt)}function _l(i,r,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),i===l)break;i=i.return}}function lc(i,r,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var A=g.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=g;for(var B=0;B<r.length;B++)if(C.context===r[B]){v.lanes|=l,C=v.alternate,C!==null&&(C.lanes|=l),_l(v.return,l,i),h||(A=null);break e}v=C.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(s(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),_l(A,l,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function vl(i,r,l,h){i=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var C=g.type;ti(g.pendingProps.value,A.value)||(i!==null?i.push(C):i=[C])}}else if(g===Xt.current){if(A=g.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Gu):i=[Gu])}g=g.return}i!==null&&lc(r,i,l,h),r.flags|=262144}function pd(i){for(i=i.firstContext;i!==null;){if(!ti(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function yl(i){us=i,Us=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Gn(i){return xy(us,i)}function gd(i,r){return us===null&&yl(i),xy(i,r)}function xy(i,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Us===null){if(i===null)throw Error(s(308));Us=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Us=Us.next=r;return l}var uN=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){r.aborted=!0,i.forEach(function(l){return l()})}},hN=n.unstable_scheduleCallback,dN=n.unstable_NormalPriority,pn={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $m(){return{controller:new uN,data:new Map,refCount:0}}function _u(i){i.refCount--,i.refCount===0&&hN(dN,function(){i.controller.abort()})}var vu=null,Km=0,cc=0,uc=null;function fN(i,r){if(vu===null){var l=vu=[];Km=0,cc=Wp(),uc={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Km++,r.then(by,by),r}function by(){if(--Km===0&&vu!==null){uc!==null&&(uc.status="fulfilled");var i=vu;vu=null,cc=0,uc=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function mN(i,r){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var wy=X.S;X.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&fN(i,r),wy!==null&&wy(i,r)};var xl=je(null);function Ym(){var i=xl.current;return i!==null?i:Mt.pooledCache}function _d(i,r){r===null?Se(xl,xl.current):Se(xl,r.pool)}function Ty(){var i=Ym();return i===null?null:{parent:pn._currentValue,pool:i}}var yu=Error(s(460)),Ey=Error(s(474)),vd=Error(s(542)),Wm={then:function(){}};function Sy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function yd(){}function Ay(i,r,l){switch(l=i[l],l===void 0?i.push(r):l!==r&&(r.then(yd,yd),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Iy(i),i;default:if(typeof r.status=="string")r.then(yd,yd);else{if(i=Mt,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(h){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=h}},function(h){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Iy(i),i}throw xu=r,yu}}var xu=null;function Ny(){if(xu===null)throw Error(s(459));var i=xu;return xu=null,i}function Iy(i){if(i===yu||i===vd)throw Error(s(483))}var Ha=!1;function Qm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xm(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ga(i,r,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(xt&2)!==0){var g=h.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),h.pending=r,r=lr(i),ml(i,null,l),r}return fl(i,h,r,l),lr(i)}function bu(i,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,Qo(i,l)}}function Jm(i,r){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?g=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?g=v=r:v=v.next=r}else g=v=r;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=r:i.next=r,l.lastBaseUpdate=r}var ep=!1;function wu(){if(ep){var i=uc;if(i!==null)throw i}}function Tu(i,r,l,h){ep=!1;var g=i.updateQueue;Ha=!1;var v=g.firstBaseUpdate,A=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var B=C,te=B.next;B.next=null,A===null?v=te:A.next=te,A=B;var le=i.alternate;le!==null&&(le=le.updateQueue,C=le.lastBaseUpdate,C!==A&&(C===null?le.firstBaseUpdate=te:C.next=te,le.lastBaseUpdate=B))}if(v!==null){var de=g.baseState;A=0,le=te=B=null,C=v;do{var ie=C.lane&-536870913,se=ie!==C.lane;if(se?(ht&ie)===ie:(h&ie)===ie){ie!==0&&ie===cc&&(ep=!0),le!==null&&(le=le.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var He=i,Ve=C;ie=r;var St=l;switch(Ve.tag){case 1:if(He=Ve.payload,typeof He=="function"){de=He.call(St,de,ie);break e}de=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ve.payload,ie=typeof He=="function"?He.call(St,de,ie):He,ie==null)break e;de=E({},de,ie);break e;case 2:Ha=!0}}ie=C.callback,ie!==null&&(i.flags|=64,se&&(i.flags|=8192),se=g.callbacks,se===null?g.callbacks=[ie]:se.push(ie))}else se={lane:ie,tag:C.tag,payload:C.payload,callback:C.callback,next:null},le===null?(te=le=se,B=de):le=le.next=se,A|=ie;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;se=C,C=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);le===null&&(B=de),g.baseState=B,g.firstBaseUpdate=te,g.lastBaseUpdate=le,v===null&&(g.shared.lanes=0),Ja|=A,i.lanes=A,i.memoizedState=de}}function Ry(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function Cy(i,r){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Ry(l[i],r)}var hc=je(null),xd=je(0);function ky(i,r){i=Qr,Se(xd,i),Se(hc,r),Qr=i|r.baseLanes}function tp(){Se(xd,Qr),Se(hc,hc.current)}function np(){Qr=xd.current,Ie(hc),Ie(xd)}var Za=0,Je=null,Tt=null,ln=null,bd=!1,dc=!1,bl=!1,wd=0,Eu=0,fc=null,pN=0;function tn(){throw Error(s(321))}function ip(i,r){if(r===null)return!1;for(var l=0;l<r.length&&l<i.length;l++)if(!ti(i[l],r[l]))return!1;return!0}function sp(i,r,l,h,g,v){return Za=v,Je=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=i===null||i.memoizedState===null?mx:px,bl=!1,v=l(h,g),bl=!1,dc&&(v=My(r,l,h,g)),Py(i),v}function Py(i){X.H=Id;var r=Tt!==null&&Tt.next!==null;if(Za=0,ln=Tt=Je=null,bd=!1,Eu=0,fc=null,r)throw Error(s(300));i===null||Sn||(i=i.dependencies,i!==null&&pd(i)&&(Sn=!0))}function My(i,r,l,h){Je=i;var g=0;do{if(dc&&(fc=null),Eu=0,dc=!1,25<=g)throw Error(s(301));if(g+=1,ln=Tt=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}X.H=wN,v=r(l,h)}while(dc);return v}function gN(){var i=X.H,r=i.useState()[0];return r=typeof r.then=="function"?Su(r):r,i=i.useState()[0],(Tt!==null?Tt.memoizedState:null)!==i&&(Je.flags|=1024),r}function rp(){var i=wd!==0;return wd=0,i}function ap(i,r,l){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~l}function op(i){if(bd){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}bd=!1}Za=0,ln=Tt=Je=null,dc=!1,Eu=wd=0,fc=null}function mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Je.memoizedState=ln=i:ln=ln.next=i,ln}function cn(){if(Tt===null){var i=Je.alternate;i=i!==null?i.memoizedState:null}else i=Tt.next;var r=ln===null?Je.memoizedState:ln.next;if(r!==null)ln=r,Tt=i;else{if(i===null)throw Je.alternate===null?Error(s(467)):Error(s(310));Tt=i,i={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},ln===null?Je.memoizedState=ln=i:ln=ln.next=i}return ln}function lp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Su(i){var r=Eu;return Eu+=1,fc===null&&(fc=[]),i=Ay(fc,i,r),r=Je,(ln===null?r.memoizedState:ln.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?mx:px),i}function Td(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Su(i);if(i.$$typeof===ne)return Gn(i)}throw Error(s(438,String(i)))}function cp(i){var r=null,l=Je.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var h=Je.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=lp(),Je.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(i),h=0;h<i;h++)l[h]=O;return r.index++,l}function Gr(i,r){return typeof r=="function"?r(i):r}function Ed(i){var r=cn();return up(r,Tt,i)}function up(i,r,l){var h=i.queue;if(h===null)throw Error(s(311));h.lastRenderedReducer=l;var g=i.baseQueue,v=h.pending;if(v!==null){if(g!==null){var A=g.next;g.next=v.next,v.next=A}r.baseQueue=g=v,h.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{r=g.next;var C=A=null,B=null,te=r,le=!1;do{var de=te.lane&-536870913;if(de!==te.lane?(ht&de)===de:(Za&de)===de){var ie=te.revertLane;if(ie===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),de===cc&&(le=!0);else if((Za&ie)===ie){te=te.next,ie===cc&&(le=!0);continue}else de={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(C=B=de,A=v):B=B.next=de,Je.lanes|=ie,Ja|=ie;de=te.action,bl&&l(v,de),v=te.hasEagerState?te.eagerState:l(v,de)}else ie={lane:de,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},B===null?(C=B=ie,A=v):B=B.next=ie,Je.lanes|=de,Ja|=de;te=te.next}while(te!==null&&te!==r);if(B===null?A=v:B.next=C,!ti(v,i.memoizedState)&&(Sn=!0,le&&(l=uc,l!==null)))throw l;i.memoizedState=v,i.baseState=A,i.baseQueue=B,h.lastRenderedState=v}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function hp(i){var r=cn(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,v=r.memoizedState;if(g!==null){l.pending=null;var A=g=g.next;do v=i(v,A.action),A=A.next;while(A!==g);ti(v,r.memoizedState)||(Sn=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),l.lastRenderedState=v}return[v,h]}function jy(i,r,l){var h=Je,g=cn(),v=Ze;if(v){if(l===void 0)throw Error(s(407));l=l()}else l=r();var A=!ti((Tt||g).memoizedState,l);A&&(g.memoizedState=l,Sn=!0),g=g.queue;var C=Oy.bind(null,h,g,i);if(Au(2048,8,C,[i]),g.getSnapshot!==r||A||ln!==null&&ln.memoizedState.tag&1){if(h.flags|=2048,mc(9,Sd(),Dy.bind(null,h,g,l,r),null),Mt===null)throw Error(s(349));v||(Za&124)!==0||Ly(h,r,l)}return l}function Ly(i,r,l){i.flags|=16384,i={getSnapshot:r,value:l},r=Je.updateQueue,r===null?(r=lp(),Je.updateQueue=r,r.stores=[i]):(l=r.stores,l===null?r.stores=[i]:l.push(i))}function Dy(i,r,l,h){r.value=l,r.getSnapshot=h,Vy(r)&&Uy(i)}function Oy(i,r,l){return l(function(){Vy(r)&&Uy(i)})}function Vy(i){var r=i.getSnapshot;i=i.value;try{var l=r();return!ti(i,l)}catch{return!0}}function Uy(i){var r=Ua(i,2);r!==null&&Fi(r,i,2)}function dp(i){var r=mi();if(typeof i=="function"){var l=i;if(i=l(),bl){Un(!0);try{l()}finally{Un(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:i},r}function zy(i,r,l,h){return i.baseState=l,up(i,Tt,typeof h=="function"?h:Gr)}function _N(i,r,l,h,g){if(Nd(i))throw Error(s(485));if(i=r.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};X.T!==null?l(!0):v.isTransition=!1,h(v),l=r.pending,l===null?(v.next=r.pending=v,By(r,v)):(v.next=l.next,r.pending=l.next=v)}}function By(i,r){var l=r.action,h=r.payload,g=i.state;if(r.isTransition){var v=X.T,A={};X.T=A;try{var C=l(g,h),B=X.S;B!==null&&B(A,C),Fy(i,r,C)}catch(te){fp(i,r,te)}finally{X.T=v}}else try{v=l(g,h),Fy(i,r,v)}catch(te){fp(i,r,te)}}function Fy(i,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Hy(i,r,h)},function(h){return fp(i,r,h)}):Hy(i,r,l)}function Hy(i,r,l){r.status="fulfilled",r.value=l,qy(r),i.state=l,r=i.pending,r!==null&&(l=r.next,l===r?i.pending=null:(l=l.next,r.next=l,By(i,l)))}function fp(i,r,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=l,qy(r),r=r.next;while(r!==h)}i.action=null}function qy(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Gy(i,r){return r}function Zy(i,r){if(Ze){var l=Mt.formState;if(l!==null){e:{var h=Je;if(Ze){if(Re){t:{for(var g=Re,v=Bt;g.nodeType!==8;){if(!v){g=null;break t}if(g=Fs(g.nextSibling),g===null){g=null;break t}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Re=Fs(g.nextSibling),h=g.data==="F!";break e}}fi(h)}h=!1}h&&(r=l[0])}}return l=mi(),l.memoizedState=l.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:r},l.queue=h,l=hx.bind(null,Je,h),h.dispatch=l,h=dp(!1),v=vp.bind(null,Je,!1,h.queue),h=mi(),g={state:r,dispatch:null,action:i,pending:null},h.queue=g,l=_N.bind(null,Je,g,v,l),g.dispatch=l,h.memoizedState=i,[r,l,!1]}function $y(i){var r=cn();return Ky(r,Tt,i)}function Ky(i,r,l){if(r=up(i,r,Gy)[0],i=Ed(Gr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Su(r)}catch(A){throw A===yu?vd:A}else h=r;r=cn();var g=r.queue,v=g.dispatch;return l!==r.memoizedState&&(Je.flags|=2048,mc(9,Sd(),vN.bind(null,g,l),null)),[h,v,i]}function vN(i,r){i.action=r}function Yy(i){var r=cn(),l=Tt;if(l!==null)return Ky(r,l,i);cn(),r=r.memoizedState,l=cn();var h=l.queue.dispatch;return l.memoizedState=i,[r,h,!1]}function mc(i,r,l,h){return i={tag:i,create:l,deps:h,inst:r,next:null},r=Je.updateQueue,r===null&&(r=lp(),Je.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,r.lastEffect=i),i}function Sd(){return{destroy:void 0,resource:void 0}}function Wy(){return cn().memoizedState}function Ad(i,r,l,h){var g=mi();h=h===void 0?null:h,Je.flags|=i,g.memoizedState=mc(1|r,Sd(),l,h)}function Au(i,r,l,h){var g=cn();h=h===void 0?null:h;var v=g.memoizedState.inst;Tt!==null&&h!==null&&ip(h,Tt.memoizedState.deps)?g.memoizedState=mc(r,v,l,h):(Je.flags|=i,g.memoizedState=mc(1|r,v,l,h))}function Qy(i,r){Ad(8390656,8,i,r)}function Xy(i,r){Au(2048,8,i,r)}function Jy(i,r){return Au(4,2,i,r)}function ex(i,r){return Au(4,4,i,r)}function tx(i,r){if(typeof r=="function"){i=i();var l=r(i);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function nx(i,r,l){l=l!=null?l.concat([i]):null,Au(4,4,tx.bind(null,r,i),l)}function mp(){}function ix(i,r){var l=cn();r=r===void 0?null:r;var h=l.memoizedState;return r!==null&&ip(r,h[1])?h[0]:(l.memoizedState=[i,r],i)}function sx(i,r){var l=cn();r=r===void 0?null:r;var h=l.memoizedState;if(r!==null&&ip(r,h[1]))return h[0];if(h=i(),bl){Un(!0);try{i()}finally{Un(!1)}}return l.memoizedState=[h,r],h}function pp(i,r,l){return l===void 0||(Za&1073741824)!==0?i.memoizedState=r:(i.memoizedState=l,i=ob(),Je.lanes|=i,Ja|=i,l)}function rx(i,r,l,h){return ti(l,r)?l:hc.current!==null?(i=pp(i,l,h),ti(i,r)||(Sn=!0),i):(Za&42)===0?(Sn=!0,i.memoizedState=l):(i=ob(),Je.lanes|=i,Ja|=i,r)}function ax(i,r,l,h,g){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=X.T,C={};X.T=C,vp(i,!1,r,l);try{var B=g(),te=X.S;if(te!==null&&te(C,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var le=mN(B,h);Nu(i,r,le,Bi(i))}else Nu(i,r,h,Bi(i))}catch(de){Nu(i,r,{then:function(){},status:"rejected",reason:de},Bi())}finally{ce.p=v,X.T=A}}function yN(){}function gp(i,r,l,h){if(i.tag!==5)throw Error(s(476));var g=ox(i).queue;ax(i,g,r,J,l===null?yN:function(){return lx(i),l(h)})}function ox(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:J},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:l},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function lx(i){var r=ox(i).next.queue;Nu(i,r,{},Bi())}function _p(){return Gn(Gu)}function cx(){return cn().memoizedState}function ux(){return cn().memoizedState}function xN(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var l=Bi();i=qa(l);var h=Ga(r,i,l);h!==null&&(Fi(h,r,l),bu(h,r,l)),r={cache:$m()},i.payload=r;return}r=r.return}}function bN(i,r,l){var h=Bi();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Nd(i)?dx(r,l):(l=Fr(i,r,l,h),l!==null&&(Fi(l,i,h),fx(l,r,h)))}function hx(i,r,l){var h=Bi();Nu(i,r,l,h)}function Nu(i,r,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Nd(i))dx(r,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var A=r.lastRenderedState,C=v(A,l);if(g.hasEagerState=!0,g.eagerState=C,ti(C,A))return fl(i,r,g,0),Mt===null&&dl(),!1}catch{}finally{}if(l=Fr(i,r,g,h),l!==null)return Fi(l,i,h),fx(l,r,h),!0}return!1}function vp(i,r,l,h){if(h={lane:2,revertLane:Wp(),action:h,hasEagerState:!1,eagerState:null,next:null},Nd(i)){if(r)throw Error(s(479))}else r=Fr(i,l,h,2),r!==null&&Fi(r,i,2)}function Nd(i){var r=i.alternate;return i===Je||r!==null&&r===Je}function dx(i,r){dc=bd=!0;var l=i.pending;l===null?r.next=r:(r.next=l.next,l.next=r),i.pending=r}function fx(i,r,l){if((l&4194048)!==0){var h=r.lanes;h&=i.pendingLanes,l|=h,r.lanes=l,Qo(i,l)}}var Id={readContext:Gn,use:Td,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},mx={readContext:Gn,use:Td,useCallback:function(i,r){return mi().memoizedState=[i,r===void 0?null:r],i},useContext:Gn,useEffect:Qy,useImperativeHandle:function(i,r,l){l=l!=null?l.concat([i]):null,Ad(4194308,4,tx.bind(null,r,i),l)},useLayoutEffect:function(i,r){return Ad(4194308,4,i,r)},useInsertionEffect:function(i,r){Ad(4,2,i,r)},useMemo:function(i,r){var l=mi();r=r===void 0?null:r;var h=i();if(bl){Un(!0);try{i()}finally{Un(!1)}}return l.memoizedState=[h,r],h},useReducer:function(i,r,l){var h=mi();if(l!==void 0){var g=l(r);if(bl){Un(!0);try{l(r)}finally{Un(!1)}}}else g=r;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=bN.bind(null,Je,i),[h.memoizedState,i]},useRef:function(i){var r=mi();return i={current:i},r.memoizedState=i},useState:function(i){i=dp(i);var r=i.queue,l=hx.bind(null,Je,r);return r.dispatch=l,[i.memoizedState,l]},useDebugValue:mp,useDeferredValue:function(i,r){var l=mi();return pp(l,i,r)},useTransition:function(){var i=dp(!1);return i=ax.bind(null,Je,i.queue,!0,!1),mi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,l){var h=Je,g=mi();if(Ze){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Mt===null)throw Error(s(349));(ht&124)!==0||Ly(h,r,l)}g.memoizedState=l;var v={value:l,getSnapshot:r};return g.queue=v,Qy(Oy.bind(null,h,v,i),[i]),h.flags|=2048,mc(9,Sd(),Dy.bind(null,h,v,l,r),null),l},useId:function(){var i=mi(),r=Mt.identifierPrefix;if(Ze){var l=z,h=R;l=(h&~(1<<32-yn(h)-1)).toString(32)+l,r="«"+r+"R"+l,l=wd++,0<l&&(r+="H"+l.toString(32)),r+="»"}else l=pN++,r="«"+r+"r"+l.toString(32)+"»";return i.memoizedState=r},useHostTransitionStatus:_p,useFormState:Zy,useActionState:Zy,useOptimistic:function(i){var r=mi();r.memoizedState=r.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=vp.bind(null,Je,!0,l),l.dispatch=r,[i,r]},useMemoCache:cp,useCacheRefresh:function(){return mi().memoizedState=xN.bind(null,Je)}},px={readContext:Gn,use:Td,useCallback:ix,useContext:Gn,useEffect:Xy,useImperativeHandle:nx,useInsertionEffect:Jy,useLayoutEffect:ex,useMemo:sx,useReducer:Ed,useRef:Wy,useState:function(){return Ed(Gr)},useDebugValue:mp,useDeferredValue:function(i,r){var l=cn();return rx(l,Tt.memoizedState,i,r)},useTransition:function(){var i=Ed(Gr)[0],r=cn().memoizedState;return[typeof i=="boolean"?i:Su(i),r]},useSyncExternalStore:jy,useId:cx,useHostTransitionStatus:_p,useFormState:$y,useActionState:$y,useOptimistic:function(i,r){var l=cn();return zy(l,Tt,i,r)},useMemoCache:cp,useCacheRefresh:ux},wN={readContext:Gn,use:Td,useCallback:ix,useContext:Gn,useEffect:Xy,useImperativeHandle:nx,useInsertionEffect:Jy,useLayoutEffect:ex,useMemo:sx,useReducer:hp,useRef:Wy,useState:function(){return hp(Gr)},useDebugValue:mp,useDeferredValue:function(i,r){var l=cn();return Tt===null?pp(l,i,r):rx(l,Tt.memoizedState,i,r)},useTransition:function(){var i=hp(Gr)[0],r=cn().memoizedState;return[typeof i=="boolean"?i:Su(i),r]},useSyncExternalStore:jy,useId:cx,useHostTransitionStatus:_p,useFormState:Yy,useActionState:Yy,useOptimistic:function(i,r){var l=cn();return Tt!==null?zy(l,Tt,i,r):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:cp,useCacheRefresh:ux},pc=null,Iu=0;function Rd(i){var r=Iu;return Iu+=1,pc===null&&(pc=[]),Ay(pc,i,r)}function Ru(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Cd(i,r){throw r.$$typeof===I?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function gx(i){var r=i._init;return r(i._payload)}function _x(i){function r(K,$){if(i){var ee=K.deletions;ee===null?(K.deletions=[$],K.flags|=16):ee.push($)}}function l(K,$){if(!i)return null;for(;$!==null;)r(K,$),$=$.sibling;return null}function h(K){for(var $=new Map;K!==null;)K.key!==null?$.set(K.key,K):$.set(K.index,K),K=K.sibling;return $}function g(K,$){return K=cs(K,$),K.index=0,K.sibling=null,K}function v(K,$,ee){return K.index=ee,i?(ee=K.alternate,ee!==null?(ee=ee.index,ee<$?(K.flags|=67108866,$):ee):(K.flags|=67108866,$)):(K.flags|=1048576,$)}function A(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function C(K,$,ee,ue){return $===null||$.tag!==6?($=gu(ee,K.mode,ue),$.return=K,$):($=g($,ee),$.return=K,$)}function B(K,$,ee,ue){var Ne=ee.type;return Ne===H?le(K,$,ee.props.children,ue,ee.key):$!==null&&($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===k&&gx(Ne)===$.type)?($=g($,ee.props),Ru($,ee),$.return=K,$):($=pl(ee.type,ee.key,ee.props,null,K.mode,ue),Ru($,ee),$.return=K,$)}function te(K,$,ee,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?($=oc(ee,K.mode,ue),$.return=K,$):($=g($,ee.children||[]),$.return=K,$)}function le(K,$,ee,ue,Ne){return $===null||$.tag!==7?($=cr(ee,K.mode,ue,Ne),$.return=K,$):($=g($,ee),$.return=K,$)}function de(K,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=gu(""+$,K.mode,ee),$.return=K,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case N:return ee=pl($.type,$.key,$.props,null,K.mode,ee),Ru(ee,$),ee.return=K,ee;case F:return $=oc($,K.mode,ee),$.return=K,$;case k:var ue=$._init;return $=ue($._payload),de(K,$,ee)}if(ke($)||V($))return $=cr($,K.mode,ee,null),$.return=K,$;if(typeof $.then=="function")return de(K,Rd($),ee);if($.$$typeof===ne)return de(K,gd(K,$),ee);Cd(K,$)}return null}function ie(K,$,ee,ue){var Ne=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ne!==null?null:C(K,$,""+ee,ue);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:return ee.key===Ne?B(K,$,ee,ue):null;case F:return ee.key===Ne?te(K,$,ee,ue):null;case k:return Ne=ee._init,ee=Ne(ee._payload),ie(K,$,ee,ue)}if(ke(ee)||V(ee))return Ne!==null?null:le(K,$,ee,ue,null);if(typeof ee.then=="function")return ie(K,$,Rd(ee),ue);if(ee.$$typeof===ne)return ie(K,$,gd(K,ee),ue);Cd(K,ee)}return null}function se(K,$,ee,ue,Ne){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return K=K.get(ee)||null,C($,K,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case N:return K=K.get(ue.key===null?ee:ue.key)||null,B($,K,ue,Ne);case F:return K=K.get(ue.key===null?ee:ue.key)||null,te($,K,ue,Ne);case k:var tt=ue._init;return ue=tt(ue._payload),se(K,$,ee,ue,Ne)}if(ke(ue)||V(ue))return K=K.get(ee)||null,le($,K,ue,Ne,null);if(typeof ue.then=="function")return se(K,$,ee,Rd(ue),Ne);if(ue.$$typeof===ne)return se(K,$,ee,gd($,ue),Ne);Cd($,ue)}return null}function He(K,$,ee,ue){for(var Ne=null,tt=null,Pe=$,Ue=$=0,Nn=null;Pe!==null&&Ue<ee.length;Ue++){Pe.index>Ue?(Nn=Pe,Pe=null):Nn=Pe.sibling;var pt=ie(K,Pe,ee[Ue],ue);if(pt===null){Pe===null&&(Pe=Nn);break}i&&Pe&&pt.alternate===null&&r(K,Pe),$=v(pt,$,Ue),tt===null?Ne=pt:tt.sibling=pt,tt=pt,Pe=Nn}if(Ue===ee.length)return l(K,Pe),Ze&&Q(K,Ue),Ne;if(Pe===null){for(;Ue<ee.length;Ue++)Pe=de(K,ee[Ue],ue),Pe!==null&&($=v(Pe,$,Ue),tt===null?Ne=Pe:tt.sibling=Pe,tt=Pe);return Ze&&Q(K,Ue),Ne}for(Pe=h(Pe);Ue<ee.length;Ue++)Nn=se(Pe,K,Ue,ee[Ue],ue),Nn!==null&&(i&&Nn.alternate!==null&&Pe.delete(Nn.key===null?Ue:Nn.key),$=v(Nn,$,Ue),tt===null?Ne=Nn:tt.sibling=Nn,tt=Nn);return i&&Pe.forEach(function(lo){return r(K,lo)}),Ze&&Q(K,Ue),Ne}function Ve(K,$,ee,ue){if(ee==null)throw Error(s(151));for(var Ne=null,tt=null,Pe=$,Ue=$=0,Nn=null,pt=ee.next();Pe!==null&&!pt.done;Ue++,pt=ee.next()){Pe.index>Ue?(Nn=Pe,Pe=null):Nn=Pe.sibling;var lo=ie(K,Pe,pt.value,ue);if(lo===null){Pe===null&&(Pe=Nn);break}i&&Pe&&lo.alternate===null&&r(K,Pe),$=v(lo,$,Ue),tt===null?Ne=lo:tt.sibling=lo,tt=lo,Pe=Nn}if(pt.done)return l(K,Pe),Ze&&Q(K,Ue),Ne;if(Pe===null){for(;!pt.done;Ue++,pt=ee.next())pt=de(K,pt.value,ue),pt!==null&&($=v(pt,$,Ue),tt===null?Ne=pt:tt.sibling=pt,tt=pt);return Ze&&Q(K,Ue),Ne}for(Pe=h(Pe);!pt.done;Ue++,pt=ee.next())pt=se(Pe,K,Ue,pt.value,ue),pt!==null&&(i&&pt.alternate!==null&&Pe.delete(pt.key===null?Ue:pt.key),$=v(pt,$,Ue),tt===null?Ne=pt:tt.sibling=pt,tt=pt);return i&&Pe.forEach(function(TI){return r(K,TI)}),Ze&&Q(K,Ue),Ne}function St(K,$,ee,ue){if(typeof ee=="object"&&ee!==null&&ee.type===H&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case N:e:{for(var Ne=ee.key;$!==null;){if($.key===Ne){if(Ne=ee.type,Ne===H){if($.tag===7){l(K,$.sibling),ue=g($,ee.props.children),ue.return=K,K=ue;break e}}else if($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===k&&gx(Ne)===$.type){l(K,$.sibling),ue=g($,ee.props),Ru(ue,ee),ue.return=K,K=ue;break e}l(K,$);break}else r(K,$);$=$.sibling}ee.type===H?(ue=cr(ee.props.children,K.mode,ue,ee.key),ue.return=K,K=ue):(ue=pl(ee.type,ee.key,ee.props,null,K.mode,ue),Ru(ue,ee),ue.return=K,K=ue)}return A(K);case F:e:{for(Ne=ee.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){l(K,$.sibling),ue=g($,ee.children||[]),ue.return=K,K=ue;break e}else{l(K,$);break}else r(K,$);$=$.sibling}ue=oc(ee,K.mode,ue),ue.return=K,K=ue}return A(K);case k:return Ne=ee._init,ee=Ne(ee._payload),St(K,$,ee,ue)}if(ke(ee))return He(K,$,ee,ue);if(V(ee)){if(Ne=V(ee),typeof Ne!="function")throw Error(s(150));return ee=Ne.call(ee),Ve(K,$,ee,ue)}if(typeof ee.then=="function")return St(K,$,Rd(ee),ue);if(ee.$$typeof===ne)return St(K,$,gd(K,ee),ue);Cd(K,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,$!==null&&$.tag===6?(l(K,$.sibling),ue=g($,ee),ue.return=K,K=ue):(l(K,$),ue=gu(ee,K.mode,ue),ue.return=K,K=ue),A(K)):l(K,$)}return function(K,$,ee,ue){try{Iu=0;var Ne=St(K,$,ee,ue);return pc=null,Ne}catch(Pe){if(Pe===yu||Pe===vd)throw Pe;var tt=ri(29,Pe,null,K.mode);return tt.lanes=ue,tt.return=K,tt}finally{}}}var gc=_x(!0),vx=_x(!1),hs=je(null),hr=null;function $a(i){var r=i.alternate;Se(gn,gn.current&1),Se(hs,i),hr===null&&(r===null||hc.current!==null||r.memoizedState!==null)&&(hr=i)}function yx(i){if(i.tag===22){if(Se(gn,gn.current),Se(hs,i),hr===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(hr=i)}}else Ka()}function Ka(){Se(gn,gn.current),Se(hs,hs.current)}function Zr(i){Ie(hs),hr===i&&(hr=null),Ie(gn)}var gn=je(0);function kd(i){for(var r=i;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||lg(l)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function yp(i,r,l,h){r=i.memoizedState,l=l(h,r),l=l==null?r:E({},r,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var xp={enqueueSetState:function(i,r,l){i=i._reactInternals;var h=Bi(),g=qa(h);g.payload=r,l!=null&&(g.callback=l),r=Ga(i,g,h),r!==null&&(Fi(r,i,h),bu(r,i,h))},enqueueReplaceState:function(i,r,l){i=i._reactInternals;var h=Bi(),g=qa(h);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Ga(i,g,h),r!==null&&(Fi(r,i,h),bu(r,i,h))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var l=Bi(),h=qa(l);h.tag=2,r!=null&&(h.callback=r),r=Ga(i,h,l),r!==null&&(Fi(r,i,l),bu(r,i,l))}};function xx(i,r,l,h,g,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,v,A):r.prototype&&r.prototype.isPureReactComponent?!ni(l,h)||!ni(g,v):!0}function bx(i,r,l,h){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,h),r.state!==i&&xp.enqueueReplaceState(r,r.state,null)}function wl(i,r){var l=r;if("ref"in r){l={};for(var h in r)h!=="ref"&&(l[h]=r[h])}if(i=i.defaultProps){l===r&&(l=E({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var Pd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function wx(i){Pd(i)}function Tx(i){console.error(i)}function Ex(i){Pd(i)}function Md(i,r){try{var l=i.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Sx(i,r,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function bp(i,r,l){return l=qa(l),l.tag=3,l.payload={element:null},l.callback=function(){Md(i,r)},l}function Ax(i){return i=qa(i),i.tag=3,i}function Nx(i,r,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var v=h.value;i.payload=function(){return g(v)},i.callback=function(){Sx(r,l,h)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Sx(r,l,h),typeof g!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function TN(i,r,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=l.alternate,r!==null&&vl(r,l,g,!0),l=hs.current,l!==null){switch(l.tag){case 13:return hr===null?Gp():l.alternate===null&&Kt===0&&(Kt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Wm?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([h]):r.add(h),$p(i,h,g)),!1;case 22:return l.flags|=65536,h===Wm?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([h]):l.add(h)),$p(i,h,g)),!1}throw Error(s(435,l.tag))}return $p(i,h,g),Gp(),!1}if(Ze)return r=hs.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,h!==En&&(i=Error(s(422),{cause:h}),Fa(ii(i,l)))):(h!==En&&(r=Error(s(423),{cause:h}),Fa(ii(r,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=ii(h,l),g=bp(i.stateNode,h,g),Jm(i,g),Kt!==4&&(Kt=2)),!1;var v=Error(s(520),{cause:h});if(v=ii(v,l),Du===null?Du=[v]:Du.push(v),Kt!==4&&(Kt=2),r===null)return!0;h=ii(h,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=bp(l.stateNode,h,i),Jm(l,i),!1;case 1:if(r=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(eo===null||!eo.has(v))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Ax(g),Nx(g,i,l,h),Jm(l,g),!1}l=l.return}while(l!==null);return!1}var Ix=Error(s(461)),Sn=!1;function Pn(i,r,l,h){r.child=i===null?vx(r,null,l,h):gc(r,i.child,l,h)}function Rx(i,r,l,h,g){l=l.render;var v=r.ref;if("ref"in h){var A={};for(var C in h)C!=="ref"&&(A[C]=h[C])}else A=h;return yl(r),h=sp(i,r,l,A,v,g),C=rp(),i!==null&&!Sn?(ap(i,r,g),$r(i,r,g)):(Ze&&C&&me(r),r.flags|=1,Pn(i,r,h,g),r.child)}function Cx(i,r,l,h,g){if(i===null){var v=l.type;return typeof v=="function"&&!ac(v)&&v.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=v,kx(i,r,v,h,g)):(i=pl(l.type,null,h,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Rp(i,g)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:ni,l(A,h)&&i.ref===r.ref)return $r(i,r,g)}return r.flags|=1,i=cs(v,h),i.ref=r.ref,i.return=r,r.child=i}function kx(i,r,l,h,g){if(i!==null){var v=i.memoizedProps;if(ni(v,h)&&i.ref===r.ref)if(Sn=!1,r.pendingProps=h=v,Rp(i,g))(i.flags&131072)!==0&&(Sn=!0);else return r.lanes=i.lanes,$r(i,r,g)}return wp(i,r,l,h,g)}function Px(i,r,l){var h=r.pendingProps,g=h.children,v=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=v!==null?v.baseLanes|l:l,i!==null){for(g=r.child=i.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;r.childLanes=v&~h}else r.childLanes=0,r.child=null;return Mx(i,r,h,l)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&_d(r,v!==null?v.cachePool:null),v!==null?ky(r,v):tp(),yx(r);else return r.lanes=r.childLanes=536870912,Mx(i,r,v!==null?v.baseLanes|l:l,l)}else v!==null?(_d(r,v.cachePool),ky(r,v),Ka(),r.memoizedState=null):(i!==null&&_d(r,null),tp(),Ka());return Pn(i,r,g,l),r.child}function Mx(i,r,l,h){var g=Ym();return g=g===null?null:{parent:pn._currentValue,pool:g},r.memoizedState={baseLanes:l,cachePool:g},i!==null&&_d(r,null),tp(),yx(r),i!==null&&vl(i,r,h,!0),null}function jd(i,r){var l=r.ref;if(l===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(i===null||i.ref!==l)&&(r.flags|=4194816)}}function wp(i,r,l,h,g){return yl(r),l=sp(i,r,l,h,void 0,g),h=rp(),i!==null&&!Sn?(ap(i,r,g),$r(i,r,g)):(Ze&&h&&me(r),r.flags|=1,Pn(i,r,l,g),r.child)}function jx(i,r,l,h,g,v){return yl(r),r.updateQueue=null,l=My(r,h,l,g),Py(i),h=rp(),i!==null&&!Sn?(ap(i,r,v),$r(i,r,v)):(Ze&&h&&me(r),r.flags|=1,Pn(i,r,l,v),r.child)}function Lx(i,r,l,h,g){if(yl(r),r.stateNode===null){var v=Hr,A=l.contextType;typeof A=="object"&&A!==null&&(v=Gn(A)),v=new l(h,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=xp,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=h,v.state=r.memoizedState,v.refs={},Qm(r),A=l.contextType,v.context=typeof A=="object"&&A!==null?Gn(A):Hr,v.state=r.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(yp(r,l,A,h),v.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&xp.enqueueReplaceState(v,v.state,null),Tu(r,h,v,g),wu(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(i===null){v=r.stateNode;var C=r.memoizedProps,B=wl(l,C);v.props=B;var te=v.context,le=l.contextType;A=Hr,typeof le=="object"&&le!==null&&(A=Gn(le));var de=l.getDerivedStateFromProps;le=typeof de=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=r.pendingProps!==C,le||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||te!==A)&&bx(r,v,h,A),Ha=!1;var ie=r.memoizedState;v.state=ie,Tu(r,h,v,g),wu(),te=r.memoizedState,C||ie!==te||Ha?(typeof de=="function"&&(yp(r,l,de,h),te=r.memoizedState),(B=Ha||xx(r,l,B,h,ie,te,A))?(le||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=te),v.props=h,v.state=te,v.context=A,h=B):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{v=r.stateNode,Xm(i,r),A=r.memoizedProps,le=wl(l,A),v.props=le,de=r.pendingProps,ie=v.context,te=l.contextType,B=Hr,typeof te=="object"&&te!==null&&(B=Gn(te)),C=l.getDerivedStateFromProps,(te=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==de||ie!==B)&&bx(r,v,h,B),Ha=!1,ie=r.memoizedState,v.state=ie,Tu(r,h,v,g),wu();var se=r.memoizedState;A!==de||ie!==se||Ha||i!==null&&i.dependencies!==null&&pd(i.dependencies)?(typeof C=="function"&&(yp(r,l,C,h),se=r.memoizedState),(le=Ha||xx(r,l,le,h,ie,se,B)||i!==null&&i.dependencies!==null&&pd(i.dependencies))?(te||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,se,B),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,se,B)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&ie===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ie===i.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=se),v.props=h,v.state=se,v.context=B,h=le):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&ie===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&ie===i.memoizedState||(r.flags|=1024),h=!1)}return v=h,jd(i,r),h=(r.flags&128)!==0,v||h?(v=r.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&h?(r.child=gc(r,i.child,null,g),r.child=gc(r,null,l,g)):Pn(i,r,l,g),r.memoizedState=v.state,i=r.child):i=$r(i,r,g),i}function Dx(i,r,l,h){return Ba(),r.flags|=256,Pn(i,r,l,h),r.child}var Tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ep(i){return{baseLanes:i,cachePool:Ty()}}function Sp(i,r,l){return i=i!==null?i.childLanes&~l:0,r&&(i|=ds),i}function Ox(i,r,l){var h=r.pendingProps,g=!1,v=(r.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(gn.current&2)!==0),A&&(g=!0,r.flags&=-129),A=(r.flags&32)!==0,r.flags&=-33,i===null){if(Ze){if(g?$a(r):Ka(),Ze){var C=Re,B;if(B=C){e:{for(B=C,C=Bt;B.nodeType!==8;){if(!C){C=null;break e}if(B=Fs(B.nextSibling),B===null){C=null;break e}}C=B}C!==null?(r.memoizedState={dehydrated:C,treeContext:T!==null?{id:R,overflow:z}:null,retryLane:536870912,hydrationErrors:null},B=ri(18,null,null,0),B.stateNode=C,B.return=r,r.child=B,Ae=r,Re=null,B=!0):B=!1}B||fi(r)}if(C=r.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return lg(C)?r.lanes=32:r.lanes=536870912,null;Zr(r)}return C=h.children,h=h.fallback,g?(Ka(),g=r.mode,C=Ld({mode:"hidden",children:C},g),h=cr(h,g,l,null),C.return=r,h.return=r,C.sibling=h,r.child=C,g=r.child,g.memoizedState=Ep(l),g.childLanes=Sp(i,A,l),r.memoizedState=Tp,h):($a(r),Ap(r,C))}if(B=i.memoizedState,B!==null&&(C=B.dehydrated,C!==null)){if(v)r.flags&256?($a(r),r.flags&=-257,r=Np(i,r,l)):r.memoizedState!==null?(Ka(),r.child=i.child,r.flags|=128,r=null):(Ka(),g=h.fallback,C=r.mode,h=Ld({mode:"visible",children:h.children},C),g=cr(g,C,l,null),g.flags|=2,h.return=r,g.return=r,h.sibling=g,r.child=h,gc(r,i.child,null,l),h=r.child,h.memoizedState=Ep(l),h.childLanes=Sp(i,A,l),r.memoizedState=Tp,r=g);else if($a(r),lg(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var te=A.dgst;A=te,h=Error(s(419)),h.stack="",h.digest=A,Fa({value:h,source:null,stack:null}),r=Np(i,r,l)}else if(Sn||vl(i,r,l,!1),A=(l&i.childLanes)!==0,Sn||A){if(A=Mt,A!==null&&(h=l&-l,h=(h&42)!==0?1:Qs(h),h=(h&(A.suspendedLanes|l))!==0?0:h,h!==0&&h!==B.retryLane))throw B.retryLane=h,Ua(i,h),Fi(A,i,h),Ix;C.data==="$?"||Gp(),r=Np(i,r,l)}else C.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=B.treeContext,Re=Fs(C.nextSibling),Ae=r,Ze=!0,Pt=null,Bt=!1,i!==null&&(p[x++]=R,p[x++]=z,p[x++]=T,R=i.id,z=i.overflow,T=r),r=Ap(r,h.children),r.flags|=4096);return r}return g?(Ka(),g=h.fallback,C=r.mode,B=i.child,te=B.sibling,h=cs(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,te!==null?g=cs(te,g):(g=cr(g,C,l,null),g.flags|=2),g.return=r,h.return=r,h.sibling=g,r.child=h,h=g,g=r.child,C=i.child.memoizedState,C===null?C=Ep(l):(B=C.cachePool,B!==null?(te=pn._currentValue,B=B.parent!==te?{parent:te,pool:te}:B):B=Ty(),C={baseLanes:C.baseLanes|l,cachePool:B}),g.memoizedState=C,g.childLanes=Sp(i,A,l),r.memoizedState=Tp,h):($a(r),l=i.child,i=l.sibling,l=cs(l,{mode:"visible",children:h.children}),l.return=r,l.sibling=null,i!==null&&(A=r.deletions,A===null?(r.deletions=[i],r.flags|=16):A.push(i)),r.child=l,r.memoizedState=null,l)}function Ap(i,r){return r=Ld({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Ld(i,r){return i=ri(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Np(i,r,l){return gc(r,i.child,null,l),i=Ap(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Vx(i,r,l){i.lanes|=r;var h=i.alternate;h!==null&&(h.lanes|=r),_l(i.return,r,l)}function Ip(i,r,l,h,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=h,v.tail=l,v.tailMode=g)}function Ux(i,r,l){var h=r.pendingProps,g=h.revealOrder,v=h.tail;if(Pn(i,r,h.children,l),h=gn.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Vx(i,l,r);else if(i.tag===19)Vx(i,l,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(Se(gn,h),g){case"forwards":for(l=r.child,g=null;l!==null;)i=l.alternate,i!==null&&kd(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Ip(r,!1,g,l,v);break;case"backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&kd(i)===null){r.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}Ip(r,!0,l,null,v);break;case"together":Ip(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function $r(i,r,l){if(i!==null&&(r.dependencies=i.dependencies),Ja|=r.lanes,(l&r.childLanes)===0)if(i!==null){if(vl(i,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,l=cs(i,i.pendingProps),r.child=l,l.return=r;i.sibling!==null;)i=i.sibling,l=l.sibling=cs(i,i.pendingProps),l.return=r;l.sibling=null}return r.child}function Rp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&pd(i)))}function EN(i,r,l){switch(r.tag){case 3:Gt(r,r.stateNode.containerInfo),ur(r,pn,i.memoizedState.cache),Ba();break;case 27:case 5:Ki(r);break;case 4:Gt(r,r.stateNode.containerInfo);break;case 10:ur(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?($a(r),r.flags|=128,null):(l&r.child.childLanes)!==0?Ox(i,r,l):($a(r),i=$r(i,r,l),i!==null?i.sibling:null);$a(r);break;case 19:var g=(i.flags&128)!==0;if(h=(l&r.childLanes)!==0,h||(vl(i,r,l,!1),h=(l&r.childLanes)!==0),g){if(h)return Ux(i,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Se(gn,gn.current),h)break;return null;case 22:case 23:return r.lanes=0,Px(i,r,l);case 24:ur(r,pn,i.memoizedState.cache)}return $r(i,r,l)}function zx(i,r,l){if(i!==null)if(i.memoizedProps!==r.pendingProps)Sn=!0;else{if(!Rp(i,l)&&(r.flags&128)===0)return Sn=!1,EN(i,r,l);Sn=(i.flags&131072)!==0}else Sn=!1,Ze&&(r.flags&1048576)!==0&&re(r,c,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var h=r.elementType,g=h._init;if(h=g(h._payload),r.type=h,typeof h=="function")ac(h)?(i=wl(h,i),r.tag=1,r=Lx(null,r,h,i,l)):(r.tag=0,r=wp(null,r,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===pe){r.tag=11,r=Rx(null,r,h,i,l);break e}else if(g===G){r.tag=14,r=Cx(null,r,h,i,l);break e}}throw r=ve(h)||h,Error(s(306,r,""))}}return r;case 0:return wp(i,r,r.type,r.pendingProps,l);case 1:return h=r.type,g=wl(h,r.pendingProps),Lx(i,r,h,g,l);case 3:e:{if(Gt(r,r.stateNode.containerInfo),i===null)throw Error(s(387));h=r.pendingProps;var v=r.memoizedState;g=v.element,Xm(i,r),Tu(r,h,null,l);var A=r.memoizedState;if(h=A.cache,ur(r,pn,h),h!==v.cache&&lc(r,[pn],l,!0),wu(),h=A.element,v.isDehydrated)if(v={element:h,isDehydrated:!1,cache:A.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Dx(i,r,h,l);break e}else if(h!==g){g=ii(Error(s(424)),r),Fa(g),r=Dx(i,r,h,l);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Re=Fs(i.firstChild),Ae=r,Ze=!0,Pt=null,Bt=!0,l=vx(r,null,h,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ba(),h===g){r=$r(i,r,l);break e}Pn(i,r,h,l)}r=r.child}return r;case 26:return jd(i,r),i===null?(l=qb(r.type,null,r.pendingProps,null))?r.memoizedState=l:Ze||(l=r.type,i=r.pendingProps,h=Yd(Ge.current).createElement(l),h[Jt]=r,h[Zt]=i,jn(h,l,i),zt(h),r.stateNode=h):r.memoizedState=qb(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ki(r),i===null&&Ze&&(h=r.stateNode=Bb(r.type,r.pendingProps,Ge.current),Ae=r,Bt=!0,g=Re,io(r.type)?(cg=g,Re=Fs(h.firstChild)):Re=g),Pn(i,r,r.pendingProps.children,l),jd(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Ze&&((g=h=Re)&&(h=XN(h,r.type,r.pendingProps,Bt),h!==null?(r.stateNode=h,Ae=r,Re=Fs(h.firstChild),Bt=!1,g=!0):g=!1),g||fi(r)),Ki(r),g=r.type,v=r.pendingProps,A=i!==null?i.memoizedProps:null,h=v.children,rg(g,v)?h=null:A!==null&&rg(g,A)&&(r.flags|=32),r.memoizedState!==null&&(g=sp(i,r,gN,null,null,l),Gu._currentValue=g),jd(i,r),Pn(i,r,h,l),r.child;case 6:return i===null&&Ze&&((i=l=Re)&&(l=JN(l,r.pendingProps,Bt),l!==null?(r.stateNode=l,Ae=r,Re=null,i=!0):i=!1),i||fi(r)),null;case 13:return Ox(i,r,l);case 4:return Gt(r,r.stateNode.containerInfo),h=r.pendingProps,i===null?r.child=gc(r,null,h,l):Pn(i,r,h,l),r.child;case 11:return Rx(i,r,r.type,r.pendingProps,l);case 7:return Pn(i,r,r.pendingProps,l),r.child;case 8:return Pn(i,r,r.pendingProps.children,l),r.child;case 12:return Pn(i,r,r.pendingProps.children,l),r.child;case 10:return h=r.pendingProps,ur(r,r.type,h.value),Pn(i,r,h.children,l),r.child;case 9:return g=r.type._context,h=r.pendingProps.children,yl(r),g=Gn(g),h=h(g),r.flags|=1,Pn(i,r,h,l),r.child;case 14:return Cx(i,r,r.type,r.pendingProps,l);case 15:return kx(i,r,r.type,r.pendingProps,l);case 19:return Ux(i,r,l);case 31:return h=r.pendingProps,l=r.mode,h={mode:h.mode,children:h.children},i===null?(l=Ld(h,l),l.ref=r.ref,r.child=l,l.return=r,r=l):(l=cs(i.child,h),l.ref=r.ref,r.child=l,l.return=r,r=l),r;case 22:return Px(i,r,l);case 24:return yl(r),h=Gn(pn),i===null?(g=Ym(),g===null&&(g=Mt,v=$m(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=l),g=v),r.memoizedState={parent:h,cache:g},Qm(r),ur(r,pn,g)):((i.lanes&l)!==0&&(Xm(i,r),Tu(r,null,null,l),wu()),g=i.memoizedState,v=r.memoizedState,g.parent!==h?(g={parent:h,cache:h},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ur(r,pn,h)):(h=v.cache,ur(r,pn,h),h!==g.cache&&lc(r,[pn],l,!0))),Pn(i,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Kr(i){i.flags|=4}function Bx(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Yb(r)){if(r=hs.current,r!==null&&((ht&4194048)===ht?hr!==null:(ht&62914560)!==ht&&(ht&536870912)===0||r!==hr))throw xu=Wm,Ey;i.flags|=8192}}function Dd(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?va():536870912,i.lanes|=r,xc|=r)}function Cu(i,r){if(!Ze)switch(i.tailMode){case"hidden":r=i.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ft(i){var r=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(r)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,r}function SN(i,r,l){var h=r.pendingProps;switch(be(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return Ft(r),null;case 3:return l=r.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),zs(pn),Ts(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(gl(r)?Kr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,md())),Ft(r),null;case 26:return l=r.memoizedState,i===null?(Kr(r),l!==null?(Ft(r),Bx(r,l)):(Ft(r),r.flags&=-16777217)):l?l!==i.memoizedState?(Kr(r),Ft(r),Bx(r,l)):(Ft(r),r.flags&=-16777217):(i.memoizedProps!==h&&Kr(r),Ft(r),r.flags&=-16777217),null;case 27:wi(r),l=Ge.current;var g=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Kr(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return Ft(r),null}i=$e.current,gl(r)?dd(r):(i=Bb(g,h,l),r.stateNode=i,Kr(r))}return Ft(r),null;case 5:if(wi(r),l=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==h&&Kr(r);else{if(!h){if(r.stateNode===null)throw Error(s(166));return Ft(r),null}if(i=$e.current,gl(r))dd(r);else{switch(g=Yd(Ge.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[Jt]=r,i[Zt]=h;e:for(g=r.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===r)break e;for(;g.sibling===null;){if(g.return===null||g.return===r)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}r.stateNode=i;e:switch(jn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Kr(r)}}return Ft(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==h&&Kr(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(s(166));if(i=Ge.current,gl(r)){if(i=r.stateNode,l=r.memoizedProps,h=null,g=Ae,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[Jt]=r,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||jb(i.nodeValue,l)),i||fi(r)}else i=Yd(i).createTextNode(h),i[Jt]=r,r.stateNode=i}return Ft(r),null;case 13:if(h=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=gl(r),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[Jt]=r}else Ba(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),g=!1}else g=md(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Zr(r),r):(Zr(r),null)}if(Zr(r),(r.flags&128)!==0)return r.lanes=l,r;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=r.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var v=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==g&&(h.flags|=2048)}return l!==i&&l&&(r.child.flags|=8192),Dd(r,r.updateQueue),Ft(r),null;case 4:return Ts(),i===null&&eg(r.stateNode.containerInfo),Ft(r),null;case 10:return zs(r.type),Ft(r),null;case 19:if(Ie(gn),g=r.memoizedState,g===null)return Ft(r),null;if(h=(r.flags&128)!==0,v=g.rendering,v===null)if(h)Cu(g,!1);else{if(Kt!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=kd(i),v!==null){for(r.flags|=128,Cu(g,!1),i=v.updateQueue,r.updateQueue=i,Dd(r,i),r.subtreeFlags=0,i=l,l=r.child;l!==null;)pu(l,i),l=l.sibling;return Se(gn,gn.current&1|2),r.child}i=i.sibling}g.tail!==null&&Vn()>Ud&&(r.flags|=128,h=!0,Cu(g,!1),r.lanes=4194304)}else{if(!h)if(i=kd(v),i!==null){if(r.flags|=128,h=!0,i=i.updateQueue,r.updateQueue=i,Dd(r,i),Cu(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Ze)return Ft(r),null}else 2*Vn()-g.renderingStartTime>Ud&&l!==536870912&&(r.flags|=128,h=!0,Cu(g,!1),r.lanes=4194304);g.isBackwards?(v.sibling=r.child,r.child=v):(i=g.last,i!==null?i.sibling=v:r.child=v,g.last=v)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=Vn(),r.sibling=null,i=gn.current,Se(gn,h?i&1|2:i&1),r):(Ft(r),null);case 22:case 23:return Zr(r),np(),h=r.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(l&536870912)!==0&&(r.flags&128)===0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),l=r.updateQueue,l!==null&&Dd(r,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==l&&(r.flags|=2048),i!==null&&Ie(xl),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),zs(pn),Ft(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function AN(i,r){switch(be(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return zs(pn),Ts(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return wi(r),null;case 13:if(Zr(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Ba()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return Ie(gn),null;case 4:return Ts(),null;case 10:return zs(r.type),null;case 22:case 23:return Zr(r),np(),i!==null&&Ie(xl),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return zs(pn),null;case 25:return null;default:return null}}function Fx(i,r){switch(be(r),r.tag){case 3:zs(pn),Ts();break;case 26:case 27:case 5:wi(r);break;case 4:Ts();break;case 13:Zr(r);break;case 19:Ie(gn);break;case 10:zs(r.type);break;case 22:case 23:Zr(r),np(),i!==null&&Ie(xl);break;case 24:zs(pn)}}function ku(i,r){try{var l=r.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var v=l.create,A=l.inst;h=v(),A.destroy=h}l=l.next}while(l!==g)}}catch(C){Nt(r,r.return,C)}}function Ya(i,r,l){try{var h=r.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var v=g.next;h=v;do{if((h.tag&i)===i){var A=h.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,g=r;var B=l,te=C;try{te()}catch(le){Nt(g,B,le)}}}h=h.next}while(h!==v)}}catch(le){Nt(r,r.return,le)}}function Hx(i){var r=i.updateQueue;if(r!==null){var l=i.stateNode;try{Cy(r,l)}catch(h){Nt(i,i.return,h)}}}function qx(i,r,l){l.props=wl(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Nt(i,r,h)}}function Pu(i,r){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Nt(i,r,g)}}function dr(i,r){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Nt(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Nt(i,r,g)}else l.current=null}function Gx(i){var r=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Nt(i,i.return,g)}}function Cp(i,r,l){try{var h=i.stateNode;$N(h,i.type,l,r),h[Zt]=r}catch(g){Nt(i,i.return,g)}}function Zx(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&io(i.type)||i.tag===4}function kp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&io(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Pp(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(i),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Kd));else if(h!==4&&(h===27&&io(i.type)&&(l=i.stateNode,r=null),i=i.child,i!==null))for(Pp(i,r,l),i=i.sibling;i!==null;)Pp(i,r,l),i=i.sibling}function Od(i,r,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,r?l.insertBefore(i,r):l.appendChild(i);else if(h!==4&&(h===27&&io(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Od(i,r,l),i=i.sibling;i!==null;)Od(i,r,l),i=i.sibling}function $x(i){var r=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);jn(r,h,l),r[Jt]=i,r[Zt]=l}catch(v){Nt(i,i.return,v)}}var Yr=!1,nn=!1,Mp=!1,Kx=typeof WeakSet=="function"?WeakSet:Set,An=null;function NN(i,r){if(i=i.containerInfo,ig=tf,i=cl(i),ul(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,v=h.focusNode;h=h.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,C=-1,B=-1,te=0,le=0,de=i,ie=null;t:for(;;){for(var se;de!==l||g!==0&&de.nodeType!==3||(C=A+g),de!==v||h!==0&&de.nodeType!==3||(B=A+h),de.nodeType===3&&(A+=de.nodeValue.length),(se=de.firstChild)!==null;)ie=de,de=se;for(;;){if(de===i)break t;if(ie===l&&++te===g&&(C=A),ie===v&&++le===h&&(B=A),(se=de.nextSibling)!==null)break;de=ie,ie=de.parentNode}de=se}l=C===-1||B===-1?null:{start:C,end:B}}else l=null}l=l||{start:0,end:0}}else l=null;for(sg={focusedElem:i,selectionRange:l},tf=!1,An=r;An!==null;)if(r=An,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,An=i;else for(;An!==null;){switch(r=An,v=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,l=r,g=v.memoizedProps,v=v.memoizedState,h=l.stateNode;try{var He=wl(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(He,v),h.__reactInternalSnapshotBeforeUpdate=i}catch(Ve){Nt(l,l.return,Ve)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,l=i.nodeType,l===9)og(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":og(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,An=i;break}An=r.return}}function Yx(i,r,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Wa(i,l),h&4&&ku(5,l);break;case 1:if(Wa(i,l),h&4)if(i=l.stateNode,r===null)try{i.componentDidMount()}catch(A){Nt(l,l.return,A)}else{var g=wl(l.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Nt(l,l.return,A)}}h&64&&Hx(l),h&512&&Pu(l,l.return);break;case 3:if(Wa(i,l),h&64&&(i=l.updateQueue,i!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Cy(i,r)}catch(A){Nt(l,l.return,A)}}break;case 27:r===null&&h&4&&$x(l);case 26:case 5:Wa(i,l),r===null&&h&4&&Gx(l),h&512&&Pu(l,l.return);break;case 12:Wa(i,l);break;case 13:Wa(i,l),h&4&&Xx(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=DN.bind(null,l),eI(i,l))));break;case 22:if(h=l.memoizedState!==null||Yr,!h){r=r!==null&&r.memoizedState!==null||nn,g=Yr;var v=nn;Yr=h,(nn=r)&&!v?Qa(i,l,(l.subtreeFlags&8772)!==0):Wa(i,l),Yr=g,nn=v}break;case 30:break;default:Wa(i,l)}}function Wx(i){var r=i.alternate;r!==null&&(i.alternate=null,Wx(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Is(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ut=null,pi=!1;function Wr(i,r,l){for(l=l.child;l!==null;)Qx(i,r,l),l=l.sibling}function Qx(i,r,l){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(It,l)}catch{}switch(l.tag){case 26:nn||dr(l,r),Wr(i,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nn||dr(l,r);var h=Ut,g=pi;io(l.type)&&(Ut=l.stateNode,pi=!1),Wr(i,r,l),Bu(l.stateNode),Ut=h,pi=g;break;case 5:nn||dr(l,r);case 6:if(h=Ut,g=pi,Ut=null,Wr(i,r,l),Ut=h,pi=g,Ut!==null)if(pi)try{(Ut.nodeType===9?Ut.body:Ut.nodeName==="HTML"?Ut.ownerDocument.body:Ut).removeChild(l.stateNode)}catch(v){Nt(l,r,v)}else try{Ut.removeChild(l.stateNode)}catch(v){Nt(l,r,v)}break;case 18:Ut!==null&&(pi?(i=Ut,Ub(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Yu(i)):Ub(Ut,l.stateNode));break;case 4:h=Ut,g=pi,Ut=l.stateNode.containerInfo,pi=!0,Wr(i,r,l),Ut=h,pi=g;break;case 0:case 11:case 14:case 15:nn||Ya(2,l,r),nn||Ya(4,l,r),Wr(i,r,l);break;case 1:nn||(dr(l,r),h=l.stateNode,typeof h.componentWillUnmount=="function"&&qx(l,r,h)),Wr(i,r,l);break;case 21:Wr(i,r,l);break;case 22:nn=(h=nn)||l.memoizedState!==null,Wr(i,r,l),nn=h;break;default:Wr(i,r,l)}}function Xx(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Yu(i)}catch(l){Nt(r,r.return,l)}}function IN(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Kx),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Kx),r;default:throw Error(s(435,i.tag))}}function jp(i,r){var l=IN(i);r.forEach(function(h){var g=ON.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function Vi(i,r){var l=r.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],v=i,A=r,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(io(C.type)){Ut=C.stateNode,pi=!1;break e}break;case 5:Ut=C.stateNode,pi=!1;break e;case 3:case 4:Ut=C.stateNode.containerInfo,pi=!0;break e}C=C.return}if(Ut===null)throw Error(s(160));Qx(v,A,g),Ut=null,pi=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Jx(r,i),r=r.sibling}var Bs=null;function Jx(i,r){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Vi(r,i),Ui(i),h&4&&(Ya(3,i,i.return),ku(3,i),Ya(5,i,i.return));break;case 1:Vi(r,i),Ui(i),h&512&&(nn||l===null||dr(l,l.return)),h&64&&Yr&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=Bs;if(Vi(r,i),Ui(i),h&512&&(nn||l===null||dr(l,l.return)),h&4){var v=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Js]||v[Jt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(h),g.head.insertBefore(v,g.querySelector("head > title"))),jn(v,h,l),v[Jt]=i,zt(v),h=v;break e;case"link":var A=$b("link","href",g).get(h+(l.href||""));if(A){for(var C=0;C<A.length;C++)if(v=A[C],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(C,1);break t}}v=g.createElement(h),jn(v,h,l),g.head.appendChild(v);break;case"meta":if(A=$b("meta","content",g).get(h+(l.content||""))){for(C=0;C<A.length;C++)if(v=A[C],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(C,1);break t}}v=g.createElement(h),jn(v,h,l),g.head.appendChild(v);break;default:throw Error(s(468,h))}v[Jt]=i,zt(v),h=v}i.stateNode=h}else Kb(g,i.type,i.stateNode);else i.stateNode=Zb(g,h,i.memoizedProps);else v!==h?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,h===null?Kb(g,i.type,i.stateNode):Zb(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&Cp(i,i.memoizedProps,l.memoizedProps)}break;case 27:Vi(r,i),Ui(i),h&512&&(nn||l===null||dr(l,l.return)),l!==null&&h&4&&Cp(i,i.memoizedProps,l.memoizedProps);break;case 5:if(Vi(r,i),Ui(i),h&512&&(nn||l===null||dr(l,l.return)),i.flags&32){g=i.stateNode;try{bn(g,"")}catch(se){Nt(i,i.return,se)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,Cp(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Mp=!0);break;case 6:if(Vi(r,i),Ui(i),h&4){if(i.stateNode===null)throw Error(s(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(se){Nt(i,i.return,se)}}break;case 3:if(Xd=null,g=Bs,Bs=Wd(r.containerInfo),Vi(r,i),Bs=g,Ui(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Yu(r.containerInfo)}catch(se){Nt(i,i.return,se)}Mp&&(Mp=!1,eb(i));break;case 4:h=Bs,Bs=Wd(i.stateNode.containerInfo),Vi(r,i),Ui(i),Bs=h;break;case 12:Vi(r,i),Ui(i);break;case 13:Vi(r,i),Ui(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zp=Vn()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jp(i,h)));break;case 22:g=i.memoizedState!==null;var B=l!==null&&l.memoizedState!==null,te=Yr,le=nn;if(Yr=te||g,nn=le||B,Vi(r,i),nn=le,Yr=te,Ui(i),h&8192)e:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||B||Yr||nn||Tl(i)),l=null,r=i;;){if(r.tag===5||r.tag===26){if(l===null){B=l=r;try{if(v=B.stateNode,g)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=B.stateNode;var de=B.memoizedProps.style,ie=de!=null&&de.hasOwnProperty("display")?de.display:null;C.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(se){Nt(B,B.return,se)}}}else if(r.tag===6){if(l===null){B=r;try{B.stateNode.nodeValue=g?"":B.memoizedProps}catch(se){Nt(B,B.return,se)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,jp(i,l))));break;case 19:Vi(r,i),Ui(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,jp(i,h)));break;case 30:break;case 21:break;default:Vi(r,i),Ui(i)}}function Ui(i){var r=i.flags;if(r&2){try{for(var l,h=i.return;h!==null;){if(Zx(h)){l=h;break}h=h.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,v=kp(i);Od(i,v,g);break;case 5:var A=l.stateNode;l.flags&32&&(bn(A,""),l.flags&=-33);var C=kp(i);Od(i,C,A);break;case 3:case 4:var B=l.stateNode.containerInfo,te=kp(i);Pp(i,te,B);break;default:throw Error(s(161))}}catch(le){Nt(i,i.return,le)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function eb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;eb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Wa(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Yx(i,r.alternate,r),r=r.sibling}function Tl(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Ya(4,r,r.return),Tl(r);break;case 1:dr(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&qx(r,r.return,l),Tl(r);break;case 27:Bu(r.stateNode);case 26:case 5:dr(r,r.return),Tl(r);break;case 22:r.memoizedState===null&&Tl(r);break;case 30:Tl(r);break;default:Tl(r)}i=i.sibling}}function Qa(i,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,g=i,v=r,A=v.flags;switch(v.tag){case 0:case 11:case 15:Qa(g,v,l),ku(4,v);break;case 1:if(Qa(g,v,l),h=v,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(te){Nt(h,h.return,te)}if(h=v,g=h.updateQueue,g!==null){var C=h.stateNode;try{var B=g.shared.hiddenCallbacks;if(B!==null)for(g.shared.hiddenCallbacks=null,g=0;g<B.length;g++)Ry(B[g],C)}catch(te){Nt(h,h.return,te)}}l&&A&64&&Hx(v),Pu(v,v.return);break;case 27:$x(v);case 26:case 5:Qa(g,v,l),l&&h===null&&A&4&&Gx(v),Pu(v,v.return);break;case 12:Qa(g,v,l);break;case 13:Qa(g,v,l),l&&A&4&&Xx(g,v);break;case 22:v.memoizedState===null&&Qa(g,v,l),Pu(v,v.return);break;case 30:break;default:Qa(g,v,l)}r=r.sibling}}function Lp(i,r){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&_u(l))}function Dp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_u(i))}function fr(i,r,l,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tb(i,r,l,h),r=r.sibling}function tb(i,r,l,h){var g=r.flags;switch(r.tag){case 0:case 11:case 15:fr(i,r,l,h),g&2048&&ku(9,r);break;case 1:fr(i,r,l,h);break;case 3:fr(i,r,l,h),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&_u(i)));break;case 12:if(g&2048){fr(i,r,l,h),i=r.stateNode;try{var v=r.memoizedProps,A=v.id,C=v.onPostCommit;typeof C=="function"&&C(A,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(B){Nt(r,r.return,B)}}else fr(i,r,l,h);break;case 13:fr(i,r,l,h);break;case 23:break;case 22:v=r.stateNode,A=r.alternate,r.memoizedState!==null?v._visibility&2?fr(i,r,l,h):Mu(i,r):v._visibility&2?fr(i,r,l,h):(v._visibility|=2,_c(i,r,l,h,(r.subtreeFlags&10256)!==0)),g&2048&&Lp(A,r);break;case 24:fr(i,r,l,h),g&2048&&Dp(r.alternate,r);break;default:fr(i,r,l,h)}}function _c(i,r,l,h,g){for(g=g&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var v=i,A=r,C=l,B=h,te=A.flags;switch(A.tag){case 0:case 11:case 15:_c(v,A,C,B,g),ku(8,A);break;case 23:break;case 22:var le=A.stateNode;A.memoizedState!==null?le._visibility&2?_c(v,A,C,B,g):Mu(v,A):(le._visibility|=2,_c(v,A,C,B,g)),g&&te&2048&&Lp(A.alternate,A);break;case 24:_c(v,A,C,B,g),g&&te&2048&&Dp(A.alternate,A);break;default:_c(v,A,C,B,g)}r=r.sibling}}function Mu(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=i,h=r,g=h.flags;switch(h.tag){case 22:Mu(l,h),g&2048&&Lp(h.alternate,h);break;case 24:Mu(l,h),g&2048&&Dp(h.alternate,h);break;default:Mu(l,h)}r=r.sibling}}var ju=8192;function vc(i){if(i.subtreeFlags&ju)for(i=i.child;i!==null;)nb(i),i=i.sibling}function nb(i){switch(i.tag){case 26:vc(i),i.flags&ju&&i.memoizedState!==null&&fI(Bs,i.memoizedState,i.memoizedProps);break;case 5:vc(i);break;case 3:case 4:var r=Bs;Bs=Wd(i.stateNode.containerInfo),vc(i),Bs=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=ju,ju=16777216,vc(i),ju=r):vc(i));break;default:vc(i)}}function ib(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Lu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];An=h,rb(h,i)}ib(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)sb(i),i=i.sibling}function sb(i){switch(i.tag){case 0:case 11:case 15:Lu(i),i.flags&2048&&Ya(9,i,i.return);break;case 3:Lu(i);break;case 12:Lu(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Vd(i)):Lu(i);break;default:Lu(i)}}function Vd(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var h=r[l];An=h,rb(h,i)}ib(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Ya(8,r,r.return),Vd(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,Vd(r));break;default:Vd(r)}i=i.sibling}}function rb(i,r){for(;An!==null;){var l=An;switch(l.tag){case 0:case 11:case 15:Ya(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:_u(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,An=h;else e:for(l=i;An!==null;){h=An;var g=h.sibling,v=h.return;if(Wx(h),h===l){An=null;break e}if(g!==null){g.return=v,An=g;break e}An=v}}}var RN={getCacheForType:function(i){var r=Gn(pn),l=r.data.get(i);return l===void 0&&(l=i(),r.data.set(i,l)),l}},CN=typeof WeakMap=="function"?WeakMap:Map,xt=0,Mt=null,nt=null,ht=0,bt=0,zi=null,Xa=!1,yc=!1,Op=!1,Qr=0,Kt=0,Ja=0,El=0,Vp=0,ds=0,xc=0,Du=null,gi=null,Up=!1,zp=0,Ud=1/0,zd=null,eo=null,Mn=0,to=null,bc=null,wc=0,Bp=0,Fp=null,ab=null,Ou=0,Hp=null;function Bi(){if((xt&2)!==0&&ht!==0)return ht&-ht;if(X.T!==null){var i=cc;return i!==0?i:Wp()}return Xs()}function ob(){ds===0&&(ds=(ht&536870912)===0||Ze?Yo():536870912);var i=hs.current;return i!==null&&(i.flags|=32),ds}function Fi(i,r,l){(i===Mt&&(bt===2||bt===9)||i.cancelPendingCommit!==null)&&(Tc(i,0),no(i,ht,ds,!1)),Wi(i,l),((xt&2)===0||i!==Mt)&&(i===Mt&&((xt&2)===0&&(El|=l),Kt===4&&no(i,ht,ds,!1)),mr(i))}function lb(i,r,l){if((xt&6)!==0)throw Error(s(327));var h=!l&&(r&124)===0&&(r&i.expiredLanes)===0||Ei(i,r),g=h?MN(i,r):Zp(i,r,!0),v=h;do{if(g===0){yc&&!h&&no(i,r,0,!1);break}else{if(l=i.current.alternate,v&&!kN(l)){g=Zp(i,r,!1),v=!1;continue}if(g===2){if(v=r,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){r=A;e:{var C=i;g=Du;var B=C.current.memoizedState.isDehydrated;if(B&&(Tc(C,A).flags|=256),A=Zp(C,A,!1),A!==2){if(Op&&!B){C.errorRecoveryDisabledLanes|=v,El|=v,g=4;break e}v=gi,gi=g,v!==null&&(gi===null?gi=v:gi.push.apply(gi,v))}g=A}if(v=!1,g!==2)continue}}if(g===1){Tc(i,0),no(i,r,0,!0);break}e:{switch(h=i,v=g,v){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:no(h,r,ds,!Xa);break e;case 2:gi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=zp+300-Vn(),10<g)){if(no(h,r,ds,!Xa),_a(h,0,!0)!==0)break e;h.timeoutHandle=Ob(cb.bind(null,h,l,gi,zd,Up,r,ds,El,xc,Xa,v,2,-0,0),g);break e}cb(h,l,gi,zd,Up,r,ds,El,xc,Xa,v,0,-0,0)}}break}while(!0);mr(i)}function cb(i,r,l,h,g,v,A,C,B,te,le,de,ie,se){if(i.timeoutHandle=-1,de=r.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(qu={stylesheets:null,count:0,unsuspend:dI},nb(r),de=mI(),de!==null)){i.cancelPendingCommit=de(gb.bind(null,i,r,v,l,h,g,A,C,B,le,1,ie,se)),no(i,v,A,!te);return}gb(i,r,v,l,h,g,A,C,B)}function kN(i){for(var r=i;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],v=g.getSnapshot;g=g.value;try{if(!ti(v(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function no(i,r,l,h){r&=~Vp,r&=~El,i.suspendedLanes|=r,i.pingedLanes&=~r,h&&(i.warmLanes|=r),h=i.expirationTimes;for(var g=r;0<g;){var v=31-yn(g),A=1<<v;h[v]=-1,g&=~A}l!==0&&Qi(i,l,r)}function Bd(){return(xt&6)===0?(Vu(0),!1):!0}function qp(){if(nt!==null){if(bt===0)var i=nt.return;else i=nt,Us=us=null,op(i),pc=null,Iu=0,i=nt;for(;i!==null;)Fx(i.alternate,i),i=i.return;nt=null}}function Tc(i,r){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,YN(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),qp(),Mt=i,nt=l=cs(i.current,null),ht=r,bt=0,zi=null,Xa=!1,yc=Ei(i,r),Op=!1,xc=ds=Vp=El=Ja=Kt=0,gi=Du=null,Up=!1,(r&8)!==0&&(r|=r&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=r;0<h;){var g=31-yn(h),v=1<<g;r|=i[g],h&=~v}return Qr=r,dl(),l}function ub(i,r){Je=null,X.H=Id,r===yu||r===vd?(r=Ny(),bt=3):r===Ey?(r=Ny(),bt=4):bt=r===Ix?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,zi=r,nt===null&&(Kt=1,Md(i,ii(r,i.current)))}function hb(){var i=X.H;return X.H=Id,i===null?Id:i}function db(){var i=X.A;return X.A=RN,i}function Gp(){Kt=4,Xa||(ht&4194048)!==ht&&hs.current!==null||(yc=!0),(Ja&134217727)===0&&(El&134217727)===0||Mt===null||no(Mt,ht,ds,!1)}function Zp(i,r,l){var h=xt;xt|=2;var g=hb(),v=db();(Mt!==i||ht!==r)&&(zd=null,Tc(i,r)),r=!1;var A=Kt;e:do try{if(bt!==0&&nt!==null){var C=nt,B=zi;switch(bt){case 8:qp(),A=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(r=!0);var te=bt;if(bt=0,zi=null,Ec(i,C,B,te),l&&yc){A=0;break e}break;default:te=bt,bt=0,zi=null,Ec(i,C,B,te)}}PN(),A=Kt;break}catch(le){ub(i,le)}while(!0);return r&&i.shellSuspendCounter++,Us=us=null,xt=h,X.H=g,X.A=v,nt===null&&(Mt=null,ht=0,dl()),A}function PN(){for(;nt!==null;)fb(nt)}function MN(i,r){var l=xt;xt|=2;var h=hb(),g=db();Mt!==i||ht!==r?(zd=null,Ud=Vn()+500,Tc(i,r)):yc=Ei(i,r);e:do try{if(bt!==0&&nt!==null){r=nt;var v=zi;t:switch(bt){case 1:bt=0,zi=null,Ec(i,r,v,1);break;case 2:case 9:if(Sy(v)){bt=0,zi=null,mb(r);break}r=function(){bt!==2&&bt!==9||Mt!==i||(bt=7),mr(i)},v.then(r,r);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Sy(v)?(bt=0,zi=null,mb(r)):(bt=0,zi=null,Ec(i,r,v,7));break;case 5:var A=null;switch(nt.tag){case 26:A=nt.memoizedState;case 5:case 27:var C=nt;if(!A||Yb(A)){bt=0,zi=null;var B=C.sibling;if(B!==null)nt=B;else{var te=C.return;te!==null?(nt=te,Fd(te)):nt=null}break t}}bt=0,zi=null,Ec(i,r,v,5);break;case 6:bt=0,zi=null,Ec(i,r,v,6);break;case 8:qp(),Kt=6;break e;default:throw Error(s(462))}}jN();break}catch(le){ub(i,le)}while(!0);return Us=us=null,X.H=h,X.A=g,xt=l,nt!==null?0:(Mt=null,ht=0,dl(),Kt)}function jN(){for(;nt!==null&&!pa();)fb(nt)}function fb(i){var r=zx(i.alternate,i,Qr);i.memoizedProps=i.pendingProps,r===null?Fd(i):nt=r}function mb(i){var r=i,l=r.alternate;switch(r.tag){case 15:case 0:r=jx(l,r,r.pendingProps,r.type,void 0,ht);break;case 11:r=jx(l,r,r.pendingProps,r.type.render,r.ref,ht);break;case 5:op(r);default:Fx(l,r),r=nt=pu(r,Qr),r=zx(l,r,Qr)}i.memoizedProps=i.pendingProps,r===null?Fd(i):nt=r}function Ec(i,r,l,h){Us=us=null,op(r),pc=null,Iu=0;var g=r.return;try{if(TN(i,g,r,l,ht)){Kt=1,Md(i,ii(l,i.current)),nt=null;return}}catch(v){if(g!==null)throw nt=g,v;Kt=1,Md(i,ii(l,i.current)),nt=null;return}r.flags&32768?(Ze||h===1?i=!0:yc||(ht&536870912)!==0?i=!1:(Xa=i=!0,(h===2||h===9||h===3||h===6)&&(h=hs.current,h!==null&&h.tag===13&&(h.flags|=16384))),pb(r,i)):Fd(r)}function Fd(i){var r=i;do{if((r.flags&32768)!==0){pb(r,Xa);return}i=r.return;var l=SN(r.alternate,r,Qr);if(l!==null){nt=l;return}if(r=r.sibling,r!==null){nt=r;return}nt=r=i}while(r!==null);Kt===0&&(Kt=5)}function pb(i,r){do{var l=AN(i.alternate,i);if(l!==null){l.flags&=32767,nt=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(i=i.sibling,i!==null)){nt=i;return}nt=i=l}while(i!==null);Kt=6,nt=null}function gb(i,r,l,h,g,v,A,C,B){i.cancelPendingCommit=null;do Hd();while(Mn!==0);if((xt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(v=r.lanes|r.childLanes,v|=Oi,Wo(i,l,v,A,C,B),i===Mt&&(nt=Mt=null,ht=0),bc=r,to=i,wc=l,Bp=v,Fp=g,ab=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,VN(Ss,function(){return bb(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=X.T,X.T=null,g=ce.p,ce.p=2,A=xt,xt|=4;try{NN(i,r,l)}finally{xt=A,ce.p=g,X.T=h}}Mn=1,_b(),vb(),yb()}}function _b(){if(Mn===1){Mn=0;var i=to,r=bc,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null;var h=ce.p;ce.p=2;var g=xt;xt|=4;try{Jx(r,i);var v=sg,A=cl(i.containerInfo),C=v.focusedElem,B=v.selectionRange;if(A!==C&&C&&C.ownerDocument&&tc(C.ownerDocument.documentElement,C)){if(B!==null&&ul(C)){var te=B.start,le=B.end;if(le===void 0&&(le=te),"selectionStart"in C)C.selectionStart=te,C.selectionEnd=Math.min(le,C.value.length);else{var de=C.ownerDocument||document,ie=de&&de.defaultView||window;if(ie.getSelection){var se=ie.getSelection(),He=C.textContent.length,Ve=Math.min(B.start,He),St=B.end===void 0?Ve:Math.min(B.end,He);!se.extend&&Ve>St&&(A=St,St=Ve,Ve=A);var K=fu(C,Ve),$=fu(C,St);if(K&&$&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==$.node||se.focusOffset!==$.offset)){var ee=de.createRange();ee.setStart(K.node,K.offset),se.removeAllRanges(),Ve>St?(se.addRange(ee),se.extend($.node,$.offset)):(ee.setEnd($.node,$.offset),se.addRange(ee))}}}}for(de=[],se=C;se=se.parentNode;)se.nodeType===1&&de.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<de.length;C++){var ue=de[C];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}tf=!!ig,sg=ig=null}finally{xt=g,ce.p=h,X.T=l}}i.current=r,Mn=2}}function vb(){if(Mn===2){Mn=0;var i=to,r=bc,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=X.T,X.T=null;var h=ce.p;ce.p=2;var g=xt;xt|=4;try{Yx(i,r.alternate,r)}finally{xt=g,ce.p=h,X.T=l}}Mn=3}}function yb(){if(Mn===4||Mn===3){Mn=0,qo();var i=to,r=bc,l=wc,h=ab;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Mn=5:(Mn=0,bc=to=null,xb(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(eo=null),ya(l),r=r.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(It,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=X.T,g=ce.p,ce.p=2,X.T=null;try{for(var v=i.onRecoverableError,A=0;A<h.length;A++){var C=h[A];v(C.value,{componentStack:C.stack})}}finally{X.T=r,ce.p=g}}(wc&3)!==0&&Hd(),mr(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Hp?Ou++:(Ou=0,Hp=i):Ou=0,Vu(0)}}function xb(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,_u(r)))}function Hd(i){return _b(),vb(),yb(),bb()}function bb(){if(Mn!==5)return!1;var i=to,r=Bp;Bp=0;var l=ya(wc),h=X.T,g=ce.p;try{ce.p=32>l?32:l,X.T=null,l=Fp,Fp=null;var v=to,A=wc;if(Mn=0,bc=to=null,wc=0,(xt&6)!==0)throw Error(s(331));var C=xt;if(xt|=4,sb(v.current),tb(v,v.current,A,l),xt=C,Vu(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(It,v)}catch{}return!0}finally{ce.p=g,X.T=h,xb(i,r)}}function wb(i,r,l){r=ii(l,r),r=bp(i.stateNode,r,2),i=Ga(i,r,2),i!==null&&(Wi(i,2),mr(i))}function Nt(i,r,l){if(i.tag===3)wb(i,i,l);else for(;r!==null;){if(r.tag===3){wb(r,i,l);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(eo===null||!eo.has(h))){i=ii(l,i),l=Ax(2),h=Ga(r,l,2),h!==null&&(Nx(l,h,r,i),Wi(h,2),mr(h));break}}r=r.return}}function $p(i,r,l){var h=i.pingCache;if(h===null){h=i.pingCache=new CN;var g=new Set;h.set(r,g)}else g=h.get(r),g===void 0&&(g=new Set,h.set(r,g));g.has(l)||(Op=!0,g.add(l),i=LN.bind(null,i,r,l),r.then(i,i))}function LN(i,r,l){var h=i.pingCache;h!==null&&h.delete(r),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Mt===i&&(ht&l)===l&&(Kt===4||Kt===3&&(ht&62914560)===ht&&300>Vn()-zp?(xt&2)===0&&Tc(i,0):Vp|=l,xc===ht&&(xc=0)),mr(i)}function Tb(i,r){r===0&&(r=va()),i=Ua(i,r),i!==null&&(Wi(i,r),mr(i))}function DN(i){var r=i.memoizedState,l=0;r!==null&&(l=r.retryLane),Tb(i,l)}function ON(i,r){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(s(314))}h!==null&&h.delete(r),Tb(i,l)}function VN(i,r){return Es(i,r)}var qd=null,Sc=null,Kp=!1,Gd=!1,Yp=!1,Sl=0;function mr(i){i!==Sc&&i.next===null&&(Sc===null?qd=Sc=i:Sc=Sc.next=i),Gd=!0,Kp||(Kp=!0,zN())}function Vu(i,r){if(!Yp&&Gd){Yp=!0;do for(var l=!1,h=qd;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var v=0;else{var A=h.suspendedLanes,C=h.pingedLanes;v=(1<<31-yn(42|i)+1)-1,v&=g&~(A&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,Nb(h,v))}else v=ht,v=_a(h,h===Mt?v:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(v&3)===0||Ei(h,v)||(l=!0,Nb(h,v));h=h.next}while(l);Yp=!1}}function UN(){Eb()}function Eb(){Gd=Kp=!1;var i=0;Sl!==0&&(KN()&&(i=Sl),Sl=0);for(var r=Vn(),l=null,h=qd;h!==null;){var g=h.next,v=Sb(h,r);v===0?(h.next=null,l===null?qd=g:l.next=g,g===null&&(Sc=l)):(l=h,(i!==0||(v&3)!==0)&&(Gd=!0)),h=g}Vu(i)}function Sb(i,r){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-yn(v),C=1<<A,B=g[A];B===-1?((C&l)===0||(C&h)!==0)&&(g[A]=Ko(C,r)):B<=r&&(i.expiredLanes|=C),v&=~C}if(r=Mt,l=ht,l=_a(i,i===r?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===r&&(bt===2||bt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Ar(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||Ei(i,l)){if(r=l&-l,r===i.callbackPriority)return r;switch(h!==null&&Ar(h),ya(l)){case 2:case 8:l=Nr;break;case 32:l=Ss;break;case 268435456:l=Ir;break;default:l=Ss}return h=Ab.bind(null,i),l=Es(l,h),i.callbackPriority=r,i.callbackNode=l,r}return h!==null&&h!==null&&Ar(h),i.callbackPriority=2,i.callbackNode=null,2}function Ab(i,r){if(Mn!==0&&Mn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Hd()&&i.callbackNode!==l)return null;var h=ht;return h=_a(i,i===Mt?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(lb(i,h,r),Sb(i,Vn()),i.callbackNode!=null&&i.callbackNode===l?Ab.bind(null,i):null)}function Nb(i,r){if(Hd())return null;lb(i,r,!0)}function zN(){WN(function(){(xt&6)!==0?Es(Go,UN):Eb()})}function Wp(){return Sl===0&&(Sl=Yo()),Sl}function Ib(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:sr(""+i)}function Rb(i,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,i.id&&l.setAttribute("form",i.id),r.parentNode.insertBefore(l,r),i=new FormData(i),l.parentNode.removeChild(l),i}function BN(i,r,l,h,g){if(r==="submit"&&l&&l.stateNode===g){var v=Ib((g[Zt]||null).action),A=h.submitter;A&&(r=(r=A[Zt]||null)?Ib(r.formAction):A.getAttribute("formAction"),r!==null&&(v=r,A=null));var C=new Lr("action","action",null,h,g);i.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Sl!==0){var B=A?Rb(g,A):new FormData(g);gp(l,{pending:!0,data:B,method:g.method,action:v},null,B)}}else typeof v=="function"&&(C.preventDefault(),B=A?Rb(g,A):new FormData(g),gp(l,{pending:!0,data:B,method:g.method,action:v},v,B))},currentTarget:g}]})}}for(var Qp=0;Qp<zr.length;Qp++){var Xp=zr[Qp],FN=Xp.toLowerCase(),HN=Xp[0].toUpperCase()+Xp.slice(1);Di(FN,"on"+HN)}Di(cd,"onAnimationEnd"),Di(Li,"onAnimationIteration"),Di(hl,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(Gm,"onTransitionRun"),Di(rc,"onTransitionStart"),Di(Zm,"onTransitionCancel"),Di(mu,"onTransitionEnd"),Xi("onMouseEnter",["mouseout","mouseover"]),Xi("onMouseLeave",["mouseout","mouseover"]),Xi("onPointerEnter",["pointerout","pointerover"]),Xi("onPointerLeave",["pointerout","pointerover"]),Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Uu));function Cb(i,r){r=(r&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var v=void 0;if(r)for(var A=h.length-1;0<=A;A--){var C=h[A],B=C.instance,te=C.currentTarget;if(C=C.listener,B!==v&&g.isPropagationStopped())break e;v=C,g.currentTarget=te;try{v(g)}catch(le){Pd(le)}g.currentTarget=null,v=B}else for(A=0;A<h.length;A++){if(C=h[A],B=C.instance,te=C.currentTarget,C=C.listener,B!==v&&g.isPropagationStopped())break e;v=C,g.currentTarget=te;try{v(g)}catch(le){Pd(le)}g.currentTarget=null,v=B}}}}function it(i,r){var l=r[zn];l===void 0&&(l=r[zn]=new Set);var h=i+"__bubble";l.has(h)||(kb(r,i,2,!1),l.add(h))}function Jp(i,r,l){var h=0;r&&(h|=4),kb(l,i,h,r)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function eg(i){if(!i[Zd]){i[Zd]=!0,Jo.forEach(function(l){l!=="selectionchange"&&(qN.has(l)||Jp(l,!1,i),Jp(l,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Zd]||(r[Zd]=!0,Jp("selectionchange",!1,r))}}function kb(i,r,l,h){switch(tw(r)){case 2:var g=_I;break;case 8:g=vI;break;default:g=mg}l=g.bind(null,r,l,i),g=void 0,!Bn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(r,l,{capture:!0,passive:g}):i.addEventListener(r,l,!0):g!==void 0?i.addEventListener(r,l,{passive:g}):i.addEventListener(r,l,!1)}function tg(i,r,l,h,g){var v=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var A=h.tag;if(A===3||A===4){var C=h.stateNode.containerInfo;if(C===g)break;if(A===4)for(A=h.return;A!==null;){var B=A.tag;if((B===3||B===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;C!==null;){if(A=Si(C),A===null)return;if(B=A.tag,B===5||B===6||B===26||B===27){h=v=A;continue e}C=C.parentNode}}h=h.return}ei(function(){var te=v,le=kn(l),de=[];e:{var ie=ud.get(i);if(ie!==void 0){var se=Lr,He=i;switch(i){case"keypress":if(wt(l)===0)break e;case"keydown":case"keyup":se=Ca;break;case"focusin":He="focus",se=Sa;break;case"focusout":He="blur",se=Sa;break;case"beforeblur":case"afterblur":se=Sa;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Ql;break;case cd:case Li:case hl:se=Na;break;case mu:se=Xl;break;case"scroll":case"scrollend":se=Yl;break;case"wheel":se=Vr;break;case"copy":case"cut":case"paste":se=rr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ka;break;case"toggle":case"beforetoggle":se=rs}var Ve=(r&4)!==0,St=!Ve&&(i==="scroll"||i==="scrollend"),K=Ve?ie!==null?ie+"Capture":null:ie;Ve=[];for(var $=te,ee;$!==null;){var ue=$;if(ee=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||ee===null||K===null||(ue=ut($,K),ue!=null&&Ve.push(zu($,ue,ee))),St)break;$=$.return}0<Ve.length&&(ie=new se(ie,He,null,l,le),de.push({event:ie,listeners:Ve}))}}if((r&7)===0){e:{if(ie=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",ie&&l!==Ci&&(He=l.relatedTarget||l.fromElement)&&(Si(He)||He[ui]))break e;if((se||ie)&&(ie=le.window===le?le:(ie=le.ownerDocument)?ie.defaultView||ie.parentWindow:window,se?(He=l.relatedTarget||l.toElement,se=te,He=He?Si(He):null,He!==null&&(St=u(He),Ve=He.tag,He!==St||Ve!==5&&Ve!==27&&Ve!==6)&&(He=null)):(se=null,He=te),se!==He)){if(Ve=Tn,ue="onMouseLeave",K="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(Ve=ka,ue="onPointerLeave",K="onPointerEnter",$="pointer"),St=se==null?ie:Rn(se),ee=He==null?ie:Rn(He),ie=new Ve(ue,$+"leave",se,l,le),ie.target=St,ie.relatedTarget=ee,ue=null,Si(le)===te&&(Ve=new Ve(K,$+"enter",He,l,le),Ve.target=ee,Ve.relatedTarget=St,ue=Ve),St=ue,se&&He)t:{for(Ve=se,K=He,$=0,ee=Ve;ee;ee=Ac(ee))$++;for(ee=0,ue=K;ue;ue=Ac(ue))ee++;for(;0<$-ee;)Ve=Ac(Ve),$--;for(;0<ee-$;)K=Ac(K),ee--;for(;$--;){if(Ve===K||K!==null&&Ve===K.alternate)break t;Ve=Ac(Ve),K=Ac(K)}Ve=null}else Ve=null;se!==null&&Pb(de,ie,se,Ve,!1),He!==null&&St!==null&&Pb(de,St,He,Ve,!0)}}e:{if(ie=te?Rn(te):window,se=ie.nodeName&&ie.nodeName.toLowerCase(),se==="select"||se==="input"&&ie.type==="file")var Ne=Ma;else if(kt(ie))if(uu)Ne=qm;else{Ne=Hm;var tt=du}else se=ie.nodeName,!se||se.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?te&&jr(te.elementType)&&(Ne=Ma):Ne=Vs;if(Ne&&(Ne=Ne(i,te))){Ds(de,Ne,l,le);break e}tt&&tt(i,ie,te),i==="focusout"&&te&&ie.type==="number"&&te.memoizedProps.value!=null&&Ii(ie,"number",ie.value)}switch(tt=te?Rn(te):window,i){case"focusin":(kt(tt)||tt.contentEditable==="true")&&(ji=tt,Da=te,Ur=null);break;case"focusout":Ur=Da=ji=null;break;case"mousedown":ic=!0;break;case"contextmenu":case"mouseup":case"dragend":ic=!1,od(de,l,le);break;case"selectionchange":if(nc)break;case"keydown":case"keyup":od(de,l,le)}var Pe;if(qn)e:{switch(i){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else rt?ae(i,l)&&(Ue="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ue="onCompositionStart");Ue&&(S&&l.locale!=="ko"&&(rt||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&rt&&(Pe=Ps()):(di=le,Fn="value"in di?di.value:di.textContent,rt=!0)),tt=$d(te,Ue),0<tt.length&&(Ue=new Hn(Ue,i,null,l,le),de.push({event:Ue,listeners:tt}),Pe?Ue.data=Pe:(Pe=ye(l),Pe!==null&&(Ue.data=Pe)))),(Pe=w?$t(i,l):at(i,l))&&(Ue=$d(te,"onBeforeInput"),0<Ue.length&&(tt=new Hn("onBeforeInput","beforeinput",null,l,le),de.push({event:tt,listeners:Ue}),tt.data=Pe)),BN(de,i,te,l,le)}Cb(de,r)})}function zu(i,r,l){return{instance:i,listener:r,currentTarget:l}}function $d(i,r){for(var l=r+"Capture",h=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=ut(i,l),g!=null&&h.unshift(zu(i,g,v)),g=ut(i,r),g!=null&&h.push(zu(i,g,v))),i.tag===3)return h;i=i.return}return[]}function Ac(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pb(i,r,l,h,g){for(var v=r._reactName,A=[];l!==null&&l!==h;){var C=l,B=C.alternate,te=C.stateNode;if(C=C.tag,B!==null&&B===h)break;C!==5&&C!==26&&C!==27||te===null||(B=te,g?(te=ut(l,v),te!=null&&A.unshift(zu(l,te,B))):g||(te=ut(l,v),te!=null&&A.push(zu(l,te,B)))),l=l.return}A.length!==0&&i.push({event:r,listeners:A})}var GN=/\r\n?/g,ZN=/\u0000|\uFFFD/g;function Mb(i){return(typeof i=="string"?i:""+i).replace(GN,`
`).replace(ZN,"")}function jb(i,r){return r=Mb(r),Mb(i)===r}function Kd(){}function Et(i,r,l,h,g,v){switch(l){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||bn(i,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&bn(i,""+h);break;case"className":Ji(i,"class",h);break;case"tabIndex":Ji(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ji(i,l,h);break;case"style":Cs(i,h,v);break;case"data":if(r!=="object"){Ji(i,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=sr(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(r!=="input"&&Et(i,r,"name",g.name,g,null),Et(i,r,"formEncType",g.formEncType,g,null),Et(i,r,"formMethod",g.formMethod,g,null),Et(i,r,"formTarget",g.formTarget,g,null)):(Et(i,r,"encType",g.encType,g,null),Et(i,r,"method",g.method,g,null),Et(i,r,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=sr(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Kd);break;case"onScroll":h!=null&&it("scroll",i);break;case"onScrollEnd":h!=null&&it("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=sr(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":it("beforetoggle",i),it("toggle",i),er(i,"popover",h);break;case"xlinkActuate":fn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":fn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":fn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":fn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":fn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":fn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":fn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":fn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":fn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":er(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=tl.get(l)||l,er(i,l,h))}}function ng(i,r,l,h,g,v){switch(l){case"style":Cs(i,h,v);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(s(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=l}}break;case"children":typeof h=="string"?bn(i,h):(typeof h=="number"||typeof h=="bigint")&&bn(i,""+h);break;case"onScroll":h!=null&&it("scroll",i);break;case"onScrollEnd":h!=null&&it("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Kd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),v=i[Zt]||null,v=v!=null?v[l]:null,typeof v=="function"&&i.removeEventListener(r,v,g),typeof h=="function")){typeof v!="function"&&v!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(r,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):er(i,l,h)}}}function jn(i,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",i),it("load",i);var h=!1,g=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(i,r,v,A,l,null)}}g&&Et(i,r,"srcSet",l.srcSet,l,null),h&&Et(i,r,"src",l.src,l,null);return;case"input":it("invalid",i);var C=v=A=g=null,B=null,te=null;for(h in l)if(l.hasOwnProperty(h)){var le=l[h];if(le!=null)switch(h){case"name":g=le;break;case"type":A=le;break;case"checked":B=le;break;case"defaultChecked":te=le;break;case"value":v=le;break;case"defaultValue":C=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,r));break;default:Et(i,r,h,le,l,null)}}Mr(i,v,C,B,te,A,g,!1),ir(i);return;case"select":it("invalid",i),h=A=v=null;for(g in l)if(l.hasOwnProperty(g)&&(C=l[g],C!=null))switch(g){case"value":v=C;break;case"defaultValue":A=C;break;case"multiple":h=C;default:Et(i,r,g,C,l,null)}r=v,l=A,i.multiple=!!h,r!=null?Cn(i,!!h,r,!1):l!=null&&Cn(i,!!h,l,!0);return;case"textarea":it("invalid",i),v=g=h=null;for(A in l)if(l.hasOwnProperty(A)&&(C=l[A],C!=null))switch(A){case"value":h=C;break;case"defaultValue":g=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:Et(i,r,A,C,l,null)}Jn(i,h,g,v),ir(i);return;case"option":for(B in l)if(l.hasOwnProperty(B)&&(h=l[B],h!=null))switch(B){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Et(i,r,B,h,l,null)}return;case"dialog":it("beforetoggle",i),it("toggle",i),it("cancel",i),it("close",i);break;case"iframe":case"object":it("load",i);break;case"video":case"audio":for(h=0;h<Uu.length;h++)it(Uu[h],i);break;case"image":it("error",i),it("load",i);break;case"details":it("toggle",i);break;case"embed":case"source":case"link":it("error",i),it("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in l)if(l.hasOwnProperty(te)&&(h=l[te],h!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Et(i,r,te,h,l,null)}return;default:if(jr(r)){for(le in l)l.hasOwnProperty(le)&&(h=l[le],h!==void 0&&ng(i,r,le,h,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(h=l[C],h!=null&&Et(i,r,C,h,l,null))}function $N(i,r,l,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,A=null,C=null,B=null,te=null,le=null;for(se in l){var de=l[se];if(l.hasOwnProperty(se)&&de!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=de;default:h.hasOwnProperty(se)||Et(i,r,se,null,h,de)}}for(var ie in h){var se=h[ie];if(de=l[ie],h.hasOwnProperty(ie)&&(se!=null||de!=null))switch(ie){case"type":v=se;break;case"name":g=se;break;case"checked":te=se;break;case"defaultChecked":le=se;break;case"value":A=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(s(137,r));break;default:se!==de&&Et(i,r,ie,se,h,de)}}Ct(i,A,C,B,te,le,v,g);return;case"select":se=A=C=ie=null;for(v in l)if(B=l[v],l.hasOwnProperty(v)&&B!=null)switch(v){case"value":break;case"multiple":se=B;default:h.hasOwnProperty(v)||Et(i,r,v,null,h,B)}for(g in h)if(v=h[g],B=l[g],h.hasOwnProperty(g)&&(v!=null||B!=null))switch(g){case"value":ie=v;break;case"defaultValue":C=v;break;case"multiple":A=v;default:v!==B&&Et(i,r,g,v,h,B)}r=C,l=A,h=se,ie!=null?Cn(i,!!l,ie,!1):!!h!=!!l&&(r!=null?Cn(i,!!l,r,!0):Cn(i,!!l,l?[]:"",!1));return;case"textarea":se=ie=null;for(C in l)if(g=l[C],l.hasOwnProperty(C)&&g!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Et(i,r,C,null,h,g)}for(A in h)if(g=h[A],v=l[A],h.hasOwnProperty(A)&&(g!=null||v!=null))switch(A){case"value":ie=g;break;case"defaultValue":se=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==v&&Et(i,r,A,g,h,v)}ze(i,ie,se);return;case"option":for(var He in l)if(ie=l[He],l.hasOwnProperty(He)&&ie!=null&&!h.hasOwnProperty(He))switch(He){case"selected":i.selected=!1;break;default:Et(i,r,He,null,h,ie)}for(B in h)if(ie=h[B],se=l[B],h.hasOwnProperty(B)&&ie!==se&&(ie!=null||se!=null))switch(B){case"selected":i.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:Et(i,r,B,ie,h,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in l)ie=l[Ve],l.hasOwnProperty(Ve)&&ie!=null&&!h.hasOwnProperty(Ve)&&Et(i,r,Ve,null,h,ie);for(te in h)if(ie=h[te],se=l[te],h.hasOwnProperty(te)&&ie!==se&&(ie!=null||se!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,r));break;default:Et(i,r,te,ie,h,se)}return;default:if(jr(r)){for(var St in l)ie=l[St],l.hasOwnProperty(St)&&ie!==void 0&&!h.hasOwnProperty(St)&&ng(i,r,St,void 0,h,ie);for(le in h)ie=h[le],se=l[le],!h.hasOwnProperty(le)||ie===se||ie===void 0&&se===void 0||ng(i,r,le,ie,h,se);return}}for(var K in l)ie=l[K],l.hasOwnProperty(K)&&ie!=null&&!h.hasOwnProperty(K)&&Et(i,r,K,null,h,ie);for(de in h)ie=h[de],se=l[de],!h.hasOwnProperty(de)||ie===se||ie==null&&se==null||Et(i,r,de,ie,h,se)}var ig=null,sg=null;function Yd(i){return i.nodeType===9?i:i.ownerDocument}function Lb(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Db(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function rg(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ag=null;function KN(){var i=window.event;return i&&i.type==="popstate"?i===ag?!1:(ag=i,!0):(ag=null,!1)}var Ob=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,Vb=typeof Promise=="function"?Promise:void 0,WN=typeof queueMicrotask=="function"?queueMicrotask:typeof Vb<"u"?function(i){return Vb.resolve(null).then(i).catch(QN)}:Ob;function QN(i){setTimeout(function(){throw i})}function io(i){return i==="head"}function Ub(i,r){var l=r,h=0,g=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"){if(0<h&&8>h){l=h;var A=i.ownerDocument;if(l&1&&Bu(A.documentElement),l&2&&Bu(A.body),l&4)for(l=A.head,Bu(l),A=l.firstChild;A;){var C=A.nextSibling,B=A.nodeName;A[Js]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&A.rel.toLowerCase()==="stylesheet"||l.removeChild(A),A=C}}if(g===0){i.removeChild(v),Yu(r);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=v}while(l);Yu(r)}function og(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":og(l),Is(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function XN(i,r,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Js])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Fs(i.nextSibling),i===null)break}return null}function JN(i,r,l){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Fs(i.nextSibling),i===null))return null;return i}function lg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function eI(i,r){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")r();else{var h=function(){r(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Fs(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var cg=null;function zb(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(r===0)return i;r--}else l==="/$"&&r++}i=i.previousSibling}return null}function Bb(i,r,l){switch(r=Yd(l),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Bu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Is(i)}var fs=new Map,Fb=new Set;function Wd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Xr=ce.d;ce.d={f:tI,r:nI,D:iI,C:sI,L:rI,m:aI,X:lI,S:oI,M:cI};function tI(){var i=Xr.f(),r=Bd();return i||r}function nI(i){var r=Ai(i);r!==null&&r.tag===5&&r.type==="form"?lx(r):Xr.r(i)}var Nc=typeof document>"u"?null:document;function Hb(i,r,l){var h=Nc;if(h&&typeof r=="string"&&r){var g=Dt(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Fb.has(g)||(Fb.add(g),i={rel:i,crossOrigin:l,href:r},h.querySelector(g)===null&&(r=h.createElement("link"),jn(r,"link",i),zt(r),h.head.appendChild(r)))}}function iI(i){Xr.D(i),Hb("dns-prefetch",i,null)}function sI(i,r){Xr.C(i,r),Hb("preconnect",i,r)}function rI(i,r,l){Xr.L(i,r,l);var h=Nc;if(h&&i&&r){var g='link[rel="preload"][as="'+Dt(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+Dt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+Dt(l.imageSizes)+'"]')):g+='[href="'+Dt(i)+'"]';var v=g;switch(r){case"style":v=Ic(i);break;case"script":v=Rc(i)}fs.has(v)||(i=E({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:i,as:r},l),fs.set(v,i),h.querySelector(g)!==null||r==="style"&&h.querySelector(Fu(v))||r==="script"&&h.querySelector(Hu(v))||(r=h.createElement("link"),jn(r,"link",i),zt(r),h.head.appendChild(r)))}}function aI(i,r){Xr.m(i,r);var l=Nc;if(l&&i){var h=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Dt(h)+'"][href="'+Dt(i)+'"]',v=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Rc(i)}if(!fs.has(v)&&(i=E({rel:"modulepreload",href:i},r),fs.set(v,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hu(v)))return}h=l.createElement("link"),jn(h,"link",i),zt(h),l.head.appendChild(h)}}}function oI(i,r,l){Xr.S(i,r,l);var h=Nc;if(h&&i){var g=xn(h).hoistableStyles,v=Ic(i);r=r||"default";var A=g.get(v);if(!A){var C={loading:0,preload:null};if(A=h.querySelector(Fu(v)))C.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":r},l),(l=fs.get(v))&&ug(i,l);var B=A=h.createElement("link");zt(B),jn(B,"link",i),B._p=new Promise(function(te,le){B.onload=te,B.onerror=le}),B.addEventListener("load",function(){C.loading|=1}),B.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Qd(A,r,h)}A={type:"stylesheet",instance:A,count:1,state:C},g.set(v,A)}}}function lI(i,r){Xr.X(i,r);var l=Nc;if(l&&i){var h=xn(l).hoistableScripts,g=Rc(i),v=h.get(g);v||(v=l.querySelector(Hu(g)),v||(i=E({src:i,async:!0},r),(r=fs.get(g))&&hg(i,r),v=l.createElement("script"),zt(v),jn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(g,v))}}function cI(i,r){Xr.M(i,r);var l=Nc;if(l&&i){var h=xn(l).hoistableScripts,g=Rc(i),v=h.get(g);v||(v=l.querySelector(Hu(g)),v||(i=E({src:i,async:!0,type:"module"},r),(r=fs.get(g))&&hg(i,r),v=l.createElement("script"),zt(v),jn(v,"link",i),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},h.set(g,v))}}function qb(i,r,l,h){var g=(g=Ge.current)?Wd(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=Ic(l.href),l=xn(g).hoistableStyles,h=l.get(r),h||(h={type:"style",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ic(l.href);var v=xn(g).hoistableStyles,A=v.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=g.querySelector(Fu(i)))&&!v._p&&(A.instance=v,A.state.loading=5),fs.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},fs.set(i,l),v||uI(g,i,l,A.state))),r&&h===null)throw Error(s(528,""));return A}if(r&&h!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Rc(l),l=xn(g).hoistableScripts,h=l.get(r),h||(h={type:"script",instance:null,count:0,state:null},l.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ic(i){return'href="'+Dt(i)+'"'}function Fu(i){return'link[rel="stylesheet"]['+i+"]"}function Gb(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function uI(i,r,l,h){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=i.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),jn(r,"link",l),zt(r),i.head.appendChild(r))}function Rc(i){return'[src="'+Dt(i)+'"]'}function Hu(i){return"script[async]"+i}function Zb(i,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var h=i.querySelector('style[data-href~="'+Dt(l.href)+'"]');if(h)return r.instance=h,zt(h),h;var g=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),zt(h),jn(h,"style",g),Qd(h,l.precedence,i),r.instance=h;case"stylesheet":g=Ic(l.href);var v=i.querySelector(Fu(g));if(v)return r.state.loading|=4,r.instance=v,zt(v),v;h=Gb(l),(g=fs.get(g))&&ug(h,g),v=(i.ownerDocument||i).createElement("link"),zt(v);var A=v;return A._p=new Promise(function(C,B){A.onload=C,A.onerror=B}),jn(v,"link",h),r.state.loading|=4,Qd(v,l.precedence,i),r.instance=v;case"script":return v=Rc(l.src),(g=i.querySelector(Hu(v)))?(r.instance=g,zt(g),g):(h=l,(g=fs.get(v))&&(h=E({},l),hg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),zt(g),jn(g,"link",h),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Qd(h,l.precedence,i));return r.instance}function Qd(i,r,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,v=g,A=0;A<h.length;A++){var C=h[A];if(C.dataset.precedence===r)v=C;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(i,r.firstChild))}function ug(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function hg(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Xd=null;function $b(i,r,l){if(Xd===null){var h=new Map,g=Xd=new Map;g.set(l,h)}else g=Xd,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var v=l[g];if(!(v[Js]||v[Jt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(r)||"";A=i+A;var C=h.get(A);C?C.push(v):h.set(A,[v])}}return h}function Kb(i,r,l){i=i.ownerDocument||i,i.head.insertBefore(l,r==="title"?i.querySelector("head > title"):null)}function hI(i,r,l){if(l===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Yb(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var qu=null;function dI(){}function fI(i,r,l){if(qu===null)throw Error(s(475));var h=qu;if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=Ic(l.href),v=i.querySelector(Fu(g));if(v){i=v._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Jd.bind(h),i.then(h,h)),r.state.loading|=4,r.instance=v,zt(v);return}v=i.ownerDocument||i,l=Gb(l),(g=fs.get(g))&&ug(l,g),v=v.createElement("link"),zt(v);var A=v;A._p=new Promise(function(C,B){A.onload=C,A.onerror=B}),jn(v,"link",l),r.instance=v}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=Jd.bind(h),i.addEventListener("load",r),i.addEventListener("error",r))}}function mI(){if(qu===null)throw Error(s(475));var i=qu;return i.stylesheets&&i.count===0&&dg(i,i.stylesheets),0<i.count?function(r){var l=setTimeout(function(){if(i.stylesheets&&dg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Jd(){if(this.count--,this.count===0){if(this.stylesheets)dg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ef=null;function dg(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ef=new Map,r.forEach(pI,i),ef=null,Jd.call(i))}function pI(i,r){if(!(r.state.loading&4)){var l=ef.get(i);if(l)var h=l.get(null);else{l=new Map,ef.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var A=g[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),h=A)}h&&l.set(null,h)}g=r.instance,A=g.getAttribute("data-precedence"),v=l.get(A)||h,v===h&&l.set(null,g),l.set(A,g),this.count++,h=Jd.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Gu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function gI(i,r,l,h,g,v,A,C){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function Wb(i,r,l,h,g,v,A,C,B,te,le,de){return i=new gI(i,r,l,A,C,B,te,de),r=1,v===!0&&(r|=24),v=ri(3,null,null,r),i.current=v,v.stateNode=i,r=$m(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:h,isDehydrated:l,cache:r},Qm(v),i}function Qb(i){return i?(i=Hr,i):Hr}function Xb(i,r,l,h,g,v){g=Qb(g),h.context===null?h.context=g:h.pendingContext=g,h=qa(r),h.payload={element:l},v=v===void 0?null:v,v!==null&&(h.callback=v),l=Ga(i,h,r),l!==null&&(Fi(l,i,r),bu(l,i,r))}function Jb(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<r?l:r}}function fg(i,r){Jb(i,r),(i=i.alternate)&&Jb(i,r)}function ew(i){if(i.tag===13){var r=Ua(i,67108864);r!==null&&Fi(r,i,67108864),fg(i,67108864)}}var tf=!0;function _I(i,r,l,h){var g=X.T;X.T=null;var v=ce.p;try{ce.p=2,mg(i,r,l,h)}finally{ce.p=v,X.T=g}}function vI(i,r,l,h){var g=X.T;X.T=null;var v=ce.p;try{ce.p=8,mg(i,r,l,h)}finally{ce.p=v,X.T=g}}function mg(i,r,l,h){if(tf){var g=pg(h);if(g===null)tg(i,r,h,nf,l),nw(i,h);else if(xI(g,i,r,l,h))h.stopPropagation();else if(nw(i,h),r&4&&-1<yI.indexOf(i)){for(;g!==null;){var v=Ai(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=ci(v.pendingLanes);if(A!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var B=1<<31-yn(A);C.entanglements[1]|=B,A&=~B}mr(v),(xt&6)===0&&(Ud=Vn()+500,Vu(0))}}break;case 13:C=Ua(v,2),C!==null&&Fi(C,v,2),Bd(),fg(v,2)}if(v=pg(h),v===null&&tg(i,r,h,nf,l),v===g)break;g=v}g!==null&&h.stopPropagation()}else tg(i,r,h,null,l)}}function pg(i){return i=kn(i),gg(i)}var nf=null;function gg(i){if(nf=null,i=Si(i),i!==null){var r=u(i);if(r===null)i=null;else{var l=r.tag;if(l===13){if(i=f(r),i!==null)return i;i=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return nf=i,null}function tw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ga()){case Go:return 2;case Nr:return 8;case Ss:case ql:return 32;case Ir:return 268435456;default:return 32}default:return 32}}var _g=!1,so=null,ro=null,ao=null,Zu=new Map,$u=new Map,oo=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nw(i,r){switch(i){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":ao=null;break;case"pointerover":case"pointerout":Zu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$u.delete(r.pointerId)}}function Ku(i,r,l,h,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:l,eventSystemFlags:h,nativeEvent:v,targetContainers:[g]},r!==null&&(r=Ai(r),r!==null&&ew(r)),i):(i.eventSystemFlags|=h,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function xI(i,r,l,h,g){switch(r){case"focusin":return so=Ku(so,i,r,l,h,g),!0;case"dragenter":return ro=Ku(ro,i,r,l,h,g),!0;case"mouseover":return ao=Ku(ao,i,r,l,h,g),!0;case"pointerover":var v=g.pointerId;return Zu.set(v,Ku(Zu.get(v)||null,i,r,l,h,g)),!0;case"gotpointercapture":return v=g.pointerId,$u.set(v,Ku($u.get(v)||null,i,r,l,h,g)),!0}return!1}function iw(i){var r=Si(i.target);if(r!==null){var l=u(r);if(l!==null){if(r=l.tag,r===13){if(r=f(l),r!==null){i.blockedOn=r,xa(i.priority,function(){if(l.tag===13){var h=Bi();h=Qs(h);var g=Ua(l,h);g!==null&&Fi(g,l,h),fg(l,h)}});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sf(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var l=pg(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);Ci=h,l.target.dispatchEvent(h),Ci=null}else return r=Ai(l),r!==null&&ew(r),i.blockedOn=l,!1;r.shift()}return!0}function sw(i,r,l){sf(i)&&l.delete(r)}function bI(){_g=!1,so!==null&&sf(so)&&(so=null),ro!==null&&sf(ro)&&(ro=null),ao!==null&&sf(ao)&&(ao=null),Zu.forEach(sw),$u.forEach(sw)}function rf(i,r){i.blockedOn===r&&(i.blockedOn=null,_g||(_g=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,bI)))}var af=null;function rw(i){af!==i&&(af=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===i&&(af=null);for(var r=0;r<i.length;r+=3){var l=i[r],h=i[r+1],g=i[r+2];if(typeof h!="function"){if(gg(h||l)===null)continue;break}var v=Ai(l);v!==null&&(i.splice(r,3),r-=3,gp(v,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Yu(i){function r(B){return rf(B,i)}so!==null&&rf(so,i),ro!==null&&rf(ro,i),ao!==null&&rf(ao,i),Zu.forEach(r),$u.forEach(r);for(var l=0;l<oo.length;l++){var h=oo[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<oo.length&&(l=oo[0],l.blockedOn===null);)iw(l),l.blockedOn===null&&oo.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],v=l[h+1],A=g[Zt]||null;if(typeof v=="function")A||rw(l);else if(A){var C=null;if(v&&v.hasAttribute("formAction")){if(g=v,A=v[Zt]||null)C=A.formAction;else if(gg(g)!==null)continue}else C=A.action;typeof C=="function"?l[h+1]=C:(l.splice(h,3),h-=3),rw(l)}}}function vg(i){this._internalRoot=i}of.prototype.render=vg.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,h=Bi();Xb(l,h,i,r,null,null)},of.prototype.unmount=vg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Xb(i.current,2,null,i,null,null),Bd(),r[ui]=null}};function of(i){this._internalRoot=i}of.prototype.unstable_scheduleHydration=function(i){if(i){var r=Xs();i={blockedOn:null,target:i,priority:r};for(var l=0;l<oo.length&&r!==0&&r<oo[l].priority;l++);oo.splice(l,0,i),l===0&&iw(i)}};var aw=e.version;if(aw!=="19.1.1")throw Error(s(527,aw,"19.1.1"));ce.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=y(r),i=i!==null?b(i):null,i=i===null?null:i.stateNode,i};var wI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{It=lf.inject(wI),ft=lf}catch{}}return Qu.createRoot=function(i,r){if(!o(i))throw Error(s(299));var l=!1,h="",g=wx,v=Tx,A=Ex,C=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks)),r=Wb(i,1,!1,null,null,l,h,g,v,A,C,null),i[ui]=r.current,eg(i),new vg(r)},Qu.hydrateRoot=function(i,r,l){if(!o(i))throw Error(s(299));var h=!1,g="",v=wx,A=Tx,C=Ex,B=null,te=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(B=l.unstable_transitionCallbacks),l.formState!==void 0&&(te=l.formState)),r=Wb(i,1,!0,r,l??null,h,g,v,A,C,B,te),r.context=Qb(null),l=r.current,h=Bi(),h=Qs(h),g=qa(h),g.callback=null,Ga(l,g,h),l=h,r.current.lanes=l,Wi(r,l),mr(r),i[ui]=r.current,eg(i),new of(r)},Qu.version="19.1.1",Qu}var pw;function rR(){if(pw)return xg.exports;pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),xg.exports=sR(),xg.exports}var aR=rR();const oR=FT(aR);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gw="popstate";function lR(n={}){function e(s,o){let{pathname:u,search:f,hash:_}=s.location;return Jg("",{pathname:u,search:f,hash:_},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Sh(o)}return uR(e,t,null,n)}function Ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $s(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cR(){return Math.random().toString(36).substring(2,10)}function _w(n,e){return{usr:n.state,key:n.key,idx:e}}function Jg(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xc(e):e,state:t,key:e&&e.key||s||cR()}}function Sh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function uR(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,_="POP",y=null,b=E();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function E(){return(f.state||{idx:null}).idx}function I(){_="POP";let q=E(),Y=q==null?null:q-b;b=q,y&&y({action:_,location:D.location,delta:Y})}function N(q,Y){_="PUSH";let oe=Jg(D.location,q,Y);b=E()+1;let ne=_w(oe,b),pe=D.createHref(oe);try{f.pushState(ne,"",pe)}catch(xe){if(xe instanceof DOMException&&xe.name==="DataCloneError")throw xe;o.location.assign(pe)}u&&y&&y({action:_,location:D.location,delta:1})}function F(q,Y){_="REPLACE";let oe=Jg(D.location,q,Y);b=E();let ne=_w(oe,b),pe=D.createHref(oe);f.replaceState(ne,"",pe),u&&y&&y({action:_,location:D.location,delta:0})}function H(q){return hR(q)}let D={get action(){return _},get location(){return n(o,f)},listen(q){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(gw,I),y=q,()=>{o.removeEventListener(gw,I),y=null}},createHref(q){return e(o,q)},createURL:H,encodeLocation(q){let Y=H(q);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:N,replace:F,go(q){return f.go(q)}};return D}function hR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Sh(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function HT(n,e,t="/"){return dR(n,e,t,!1)}function dR(n,e,t,s){let o=typeof e=="string"?Xc(e):e,u=oa(o.pathname||"/",t);if(u==null)return null;let f=qT(n);fR(f);let _=null;for(let y=0;_==null&&y<f.length;++y){let b=ER(u);_=wR(f[y],b,s)}return _}function qT(n,e=[],t=[],s=""){let o=(u,f,_)=>{let y={relativePath:_===void 0?u.path||"":_,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};y.relativePath.startsWith("/")&&(Ht(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length));let b=ia([s,y.relativePath]),E=t.concat(y);u.children&&u.children.length>0&&(Ht(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),qT(u.children,e,E,b)),!(u.path==null&&!u.index)&&e.push({path:b,score:xR(b,u.index),routesMeta:E})};return n.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))o(u,f);else for(let _ of GT(u.path))o(u,f,_)}),e}function GT(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=GT(s.join("/")),_=[];return _.push(...f.map(y=>y===""?u:[u,y].join("/"))),o&&_.push(...f),_.map(y=>n.startsWith("/")&&y===""?"/":y)}function fR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bR(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var mR=/^:[\w-]+$/,pR=3,gR=2,_R=1,vR=10,yR=-2,vw=n=>n==="*";function xR(n,e){let t=n.split("/"),s=t.length;return t.some(vw)&&(s+=yR),e&&(s+=gR),t.filter(o=>!vw(o)).reduce((o,u)=>o+(mR.test(u)?pR:u===""?_R:vR),s)}function bR(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function wR(n,e,t=!1){let{routesMeta:s}=n,o={},u="/",f=[];for(let _=0;_<s.length;++_){let y=s[_],b=_===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",I=Ff({path:y.relativePath,caseSensitive:y.caseSensitive,end:b},E),N=y.route;if(!I&&b&&t&&!s[s.length-1].route.index&&(I=Ff({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},E)),!I)return null;Object.assign(o,I.params),f.push({params:o,pathname:ia([u,I.pathname]),pathnameBase:IR(ia([u,I.pathnameBase])),route:N}),I.pathnameBase!=="/"&&(u=ia([u,I.pathnameBase]))}return f}function Ff(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=TR(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),_=o.slice(1);return{params:s.reduce((b,{paramName:E,isOptional:I},N)=>{if(E==="*"){let H=_[N]||"";f=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const F=_[N];return I&&!F?b[E]=void 0:b[E]=(F||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:f,pattern:n}}function TR(n,e=!1,t=!0){$s(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,_,y)=>(s.push({paramName:_,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function ER(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $s(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function oa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function SR(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Xc(n):n;return{pathname:t?t.startsWith("/")?t:AR(t,e):e,search:RR(s),hash:CR(o)}}function AR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Tg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ZT(n){let e=NR(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function $T(n,e,t,s=!1){let o;typeof n=="string"?o=Xc(n):(o={...n},Ht(!o.pathname||!o.pathname.includes("?"),Tg("?","pathname","search",o)),Ht(!o.pathname||!o.pathname.includes("#"),Tg("#","pathname","hash",o)),Ht(!o.search||!o.search.includes("#"),Tg("#","search","hash",o)));let u=n===""||o.pathname==="",f=u?"/":o.pathname,_;if(f==null)_=t;else{let I=e.length-1;if(!s&&f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),I-=1;o.pathname=N.join("/")}_=I>=0?e[I]:"/"}let y=SR(o,_),b=f&&f!=="/"&&f.endsWith("/"),E=(u||f===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(b||E)&&(y.pathname+="/"),y}var ia=n=>n.join("/").replace(/\/\/+/g,"/"),IR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),RR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,CR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function kR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var KT=["POST","PUT","PATCH","DELETE"];new Set(KT);var PR=["GET",...KT];new Set(PR);var Jc=U.createContext(null);Jc.displayName="DataRouter";var hm=U.createContext(null);hm.displayName="DataRouterState";U.createContext(!1);var YT=U.createContext({isTransitioning:!1});YT.displayName="ViewTransition";var MR=U.createContext(new Map);MR.displayName="Fetchers";var jR=U.createContext(null);jR.displayName="Await";var Tr=U.createContext(null);Tr.displayName="Navigation";var Bh=U.createContext(null);Bh.displayName="Location";var Er=U.createContext({outlet:null,matches:[],isDataRoute:!1});Er.displayName="Route";var G_=U.createContext(null);G_.displayName="RouteError";function LR(n,{relative:e}={}){Ht(Fh(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=U.useContext(Tr),{hash:o,pathname:u,search:f}=Hh(n,{relative:e}),_=u;return t!=="/"&&(_=u==="/"?t:ia([t,u])),s.createHref({pathname:_,search:f,hash:o})}function Fh(){return U.useContext(Bh)!=null}function fa(){return Ht(Fh(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Bh).location}var WT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QT(n){U.useContext(Tr).static||U.useLayoutEffect(n)}function bs(){let{isDataRoute:n}=U.useContext(Er);return n?KR():DR()}function DR(){Ht(Fh(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(Jc),{basename:e,navigator:t}=U.useContext(Tr),{matches:s}=U.useContext(Er),{pathname:o}=fa(),u=JSON.stringify(ZT(s)),f=U.useRef(!1);return QT(()=>{f.current=!0}),U.useCallback((y,b={})=>{if($s(f.current,WT),!f.current)return;if(typeof y=="number"){t.go(y);return}let E=$T(y,JSON.parse(u),o,b.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:ia([e,E.pathname])),(b.replace?t.replace:t.push)(E,b.state,b)},[e,t,u,o,n])}U.createContext(null);function dm(){let{matches:n}=U.useContext(Er),e=n[n.length-1];return e?e.params:{}}function Hh(n,{relative:e}={}){let{matches:t}=U.useContext(Er),{pathname:s}=fa(),o=JSON.stringify(ZT(t));return U.useMemo(()=>$T(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function OR(n,e){return XT(n,e)}function XT(n,e,t,s){Ht(Fh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=U.useContext(Tr),{matches:u}=U.useContext(Er),f=u[u.length-1],_=f?f.params:{},y=f?f.pathname:"/",b=f?f.pathnameBase:"/",E=f&&f.route;{let Y=E&&E.path||"";JT(y,!E||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let I=fa(),N;if(e){let Y=typeof e=="string"?Xc(e):e;Ht(b==="/"||Y.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),N=Y}else N=I;let F=N.pathname||"/",H=F;if(b!=="/"){let Y=b.replace(/^\//,"").split("/");H="/"+F.replace(/^\//,"").split("/").slice(Y.length).join("/")}let D=HT(n,{pathname:H});$s(E||D!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),$s(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=FR(D&&D.map(Y=>Object.assign({},Y,{params:Object.assign({},_,Y.params),pathname:ia([b,o.encodeLocation?o.encodeLocation(Y.pathname).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?b:ia([b,o.encodeLocation?o.encodeLocation(Y.pathnameBase).pathname:Y.pathnameBase])})),u,t,s);return e&&q?U.createElement(Bh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},q):q}function VR(){let n=$R(),e=kR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",n),f=U.createElement(U.Fragment,null,U.createElement("p",null,"💿 Hey developer 👋"),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:u},"ErrorBoundary")," or"," ",U.createElement("code",{style:u},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:o},t):null,f)}var UR=U.createElement(VR,null),zR=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?U.createElement(Er.Provider,{value:this.props.routeContext},U.createElement(G_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BR({routeContext:n,match:e,children:t}){let s=U.useContext(Jc);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(Er.Provider,{value:n},t)}function FR(n,e=[],t=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let y=o.findIndex(b=>b.route.id&&u?.[b.route.id]!==void 0);Ht(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let f=!1,_=-1;if(t)for(let y=0;y<o.length;y++){let b=o[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(_=y),b.route.id){let{loaderData:E,errors:I}=t,N=b.route.loader&&!E.hasOwnProperty(b.route.id)&&(!I||I[b.route.id]===void 0);if(b.route.lazy||N){f=!0,_>=0?o=o.slice(0,_+1):o=[o[0]];break}}}return o.reduceRight((y,b,E)=>{let I,N=!1,F=null,H=null;t&&(I=u&&b.route.id?u[b.route.id]:void 0,F=b.route.errorElement||UR,f&&(_<0&&E===0?(JT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,H=null):_===E&&(N=!0,H=b.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,E+1)),q=()=>{let Y;return I?Y=F:N?Y=H:b.route.Component?Y=U.createElement(b.route.Component,null):b.route.element?Y=b.route.element:Y=y,U.createElement(BR,{match:b,routeContext:{outlet:y,matches:D,isDataRoute:t!=null},children:Y})};return t&&(b.route.ErrorBoundary||b.route.errorElement||E===0)?U.createElement(zR,{location:t.location,revalidation:t.revalidation,component:F,error:I,children:q(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):q()},null)}function Z_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HR(n){let e=U.useContext(Jc);return Ht(e,Z_(n)),e}function qR(n){let e=U.useContext(hm);return Ht(e,Z_(n)),e}function GR(n){let e=U.useContext(Er);return Ht(e,Z_(n)),e}function $_(n){let e=GR(n),t=e.matches[e.matches.length-1];return Ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ZR(){return $_("useRouteId")}function $R(){let n=U.useContext(G_),e=qR("useRouteError"),t=$_("useRouteError");return n!==void 0?n:e.errors?.[t]}function KR(){let{router:n}=HR("useNavigate"),e=$_("useNavigate"),t=U.useRef(!1);return QT(()=>{t.current=!0}),U.useCallback(async(o,u={})=>{$s(t.current,WT),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...u}))},[n,e])}var yw={};function JT(n,e,t){!e&&!yw[n]&&(yw[n]=!0,$s(!1,t))}U.memo(YR);function YR({routes:n,future:e,state:t}){return XT(n,void 0,t,e)}function oi(n){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function WR({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){Ht(!Fh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),_=U.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof t=="string"&&(t=Xc(t));let{pathname:y="/",search:b="",hash:E="",state:I=null,key:N="default"}=t,F=U.useMemo(()=>{let H=oa(y,f);return H==null?null:{location:{pathname:H,search:b,hash:E,state:I,key:N},navigationType:s}},[f,y,b,E,I,N,s]);return $s(F!=null,`<Router basename="${f}"> is not able to match the URL "${y}${b}${E}" because it does not start with the basename, so the <Router> won't render anything.`),F==null?null:U.createElement(Tr.Provider,{value:_},U.createElement(Bh.Provider,{children:e,value:F}))}function QR({children:n,location:e}){return OR(e_(n),e)}function e_(n,e=[]){let t=[];return U.Children.forEach(n,(s,o)=>{if(!U.isValidElement(s))return;let u=[...e,o];if(s.type===U.Fragment){t.push.apply(t,e_(s.props.children,u));return}Ht(s.type===oi,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=e_(s.props.children,u)),t.push(f)}),t}var xf="get",bf="application/x-www-form-urlencoded";function fm(n){return n!=null&&typeof n.tagName=="string"}function XR(n){return fm(n)&&n.tagName.toLowerCase()==="button"}function JR(n){return fm(n)&&n.tagName.toLowerCase()==="form"}function eC(n){return fm(n)&&n.tagName.toLowerCase()==="input"}function tC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function nC(n,e){return n.button===0&&(!e||e==="_self")&&!tC(n)}function t_(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function iC(n,e){let t=t_(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(u=>{t.append(o,u)})}),t}var cf=null;function sC(){if(cf===null)try{new FormData(document.createElement("form"),0),cf=!1}catch{cf=!0}return cf}var rC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eg(n){return n!=null&&!rC.has(n)?($s(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):n}function aC(n,e){let t,s,o,u,f;if(JR(n)){let _=n.getAttribute("action");s=_?oa(_,e):null,t=n.getAttribute("method")||xf,o=Eg(n.getAttribute("enctype"))||bf,u=new FormData(n)}else if(XR(n)||eC(n)&&(n.type==="submit"||n.type==="image")){let _=n.form;if(_==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||_.getAttribute("action");if(s=y?oa(y,e):null,t=n.getAttribute("formmethod")||_.getAttribute("method")||xf,o=Eg(n.getAttribute("formenctype"))||Eg(_.getAttribute("enctype"))||bf,u=new FormData(_,n),!sC()){let{name:b,type:E,value:I}=n;if(E==="image"){let N=b?`${b}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else b&&u.append(b,I)}}else{if(fm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xf,s=null,o=bf,f=n}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function K_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function oC(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&oa(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function lC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function uC(n,e,t){let s=await Promise.all(n.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await lC(u,t);return f.links?f.links():[]}return[]}));return mC(s.flat(1).filter(cC).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function xw(n,e,t,s,o,u){let f=(y,b)=>t[b]?y.route.id!==t[b].route.id:!0,_=(y,b)=>t[b].pathname!==y.pathname||t[b].route.path?.endsWith("*")&&t[b].params["*"]!==y.params["*"];return u==="assets"?e.filter((y,b)=>f(y,b)||_(y,b)):u==="data"?e.filter((y,b)=>{let E=s.routes[y.route.id];if(!E||!E.hasLoader)return!1;if(f(y,b)||_(y,b))return!0;if(y.route.shouldRevalidate){let I=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function hC(n,e,{includeHydrateFallback:t}={}){return dC(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function dC(n){return[...new Set(n)]}function fC(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function mC(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let u=JSON.stringify(fC(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function eE(){let n=U.useContext(Jc);return K_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function pC(){let n=U.useContext(hm);return K_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Y_=U.createContext(void 0);Y_.displayName="FrameworkContext";function tE(){let n=U.useContext(Y_);return K_(n,"You must render this element inside a <HydratedRouter> element"),n}function gC(n,e){let t=U.useContext(Y_),[s,o]=U.useState(!1),[u,f]=U.useState(!1),{onFocus:_,onBlur:y,onMouseEnter:b,onMouseLeave:E,onTouchStart:I}=e,N=U.useRef(null);U.useEffect(()=>{if(n==="render"&&f(!0),n==="viewport"){let D=Y=>{Y.forEach(oe=>{f(oe.isIntersecting)})},q=new IntersectionObserver(D,{threshold:.5});return N.current&&q.observe(N.current),()=>{q.disconnect()}}},[n]),U.useEffect(()=>{if(s){let D=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(D)}}},[s]);let F=()=>{o(!0)},H=()=>{o(!1),f(!1)};return t?n!=="intent"?[u,N,{}]:[u,N,{onFocus:Xu(_,F),onBlur:Xu(y,H),onMouseEnter:Xu(b,F),onMouseLeave:Xu(E,H),onTouchStart:Xu(I,F)}]:[!1,N,{}]}function Xu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function _C({page:n,...e}){let{router:t}=eE(),s=U.useMemo(()=>HT(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?U.createElement(yC,{page:n,matches:s,...e}):null}function vC(n){let{manifest:e,routeModules:t}=tE(),[s,o]=U.useState([]);return U.useEffect(()=>{let u=!1;return uC(n,e,t).then(f=>{u||o(f)}),()=>{u=!0}},[n,e,t]),s}function yC({page:n,matches:e,...t}){let s=fa(),{manifest:o,routeModules:u}=tE(),{basename:f}=eE(),{loaderData:_,matches:y}=pC(),b=U.useMemo(()=>xw(n,e,y,o,s,"data"),[n,e,y,o,s]),E=U.useMemo(()=>xw(n,e,y,o,s,"assets"),[n,e,y,o,s]),I=U.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let H=new Set,D=!1;if(e.forEach(Y=>{let oe=o.routes[Y.route.id];!oe||!oe.hasLoader||(!b.some(ne=>ne.route.id===Y.route.id)&&Y.route.id in _&&u[Y.route.id]?.shouldRevalidate||oe.hasClientLoader?D=!0:H.add(Y.route.id))}),H.size===0)return[];let q=oC(n,f,"data");return D&&H.size>0&&q.searchParams.set("_routes",e.filter(Y=>H.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[q.pathname+q.search]},[f,_,s,o,b,e,n,u]),N=U.useMemo(()=>hC(E,o),[E,o]),F=vC(E);return U.createElement(U.Fragment,null,I.map(H=>U.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),N.map(H=>U.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),F.map(({key:H,link:D})=>U.createElement("link",{key:H,nonce:t.nonce,...D})))}function xC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var nE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nE&&(window.__reactRouterVersion="7.8.0")}catch{}function bC({basename:n,children:e,window:t}){let s=U.useRef();s.current==null&&(s.current=lR({window:t,v5Compat:!0}));let o=s.current,[u,f]=U.useState({action:o.action,location:o.location}),_=U.useCallback(y=>{U.startTransition(()=>f(y))},[f]);return U.useLayoutEffect(()=>o.listen(_),[o,_]),U.createElement(WR,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:o})}var iE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sa=U.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:_,target:y,to:b,preventScrollReset:E,viewTransition:I,...N},F){let{basename:H}=U.useContext(Tr),D=typeof b=="string"&&iE.test(b),q,Y=!1;if(typeof b=="string"&&D&&(q=b,nE))try{let j=new URL(window.location.href),O=b.startsWith("//")?new URL(j.protocol+b):new URL(b),Z=oa(O.pathname,H);O.origin===j.origin&&Z!=null?b=Z+O.search+O.hash:Y=!0}catch{$s(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let oe=LR(b,{relative:o}),[ne,pe,xe]=gC(s,N),ge=SC(b,{replace:f,state:_,target:y,preventScrollReset:E,relative:o,viewTransition:I});function G(j){e&&e(j),j.defaultPrevented||ge(j)}let k=U.createElement("a",{...N,...xe,href:q||oe,onClick:Y||u?e:G,ref:xC(F,pe),target:y,"data-discover":!D&&t==="render"?"true":void 0});return ne&&!D?U.createElement(U.Fragment,null,k,U.createElement(_C,{page:oe})):k});sa.displayName="Link";var wC=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:_,children:y,...b},E){let I=Hh(f,{relative:b.relative}),N=fa(),F=U.useContext(hm),{navigator:H,basename:D}=U.useContext(Tr),q=F!=null&&CC(I)&&_===!0,Y=H.encodeLocation?H.encodeLocation(I).pathname:I.pathname,oe=N.pathname,ne=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;t||(oe=oe.toLowerCase(),ne=ne?ne.toLowerCase():null,Y=Y.toLowerCase()),ne&&D&&(ne=oa(ne,D)||ne);const pe=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let xe=oe===Y||!o&&oe.startsWith(Y)&&oe.charAt(pe)==="/",ge=ne!=null&&(ne===Y||!o&&ne.startsWith(Y)&&ne.charAt(Y.length)==="/"),G={isActive:xe,isPending:ge,isTransitioning:q},k=xe?e:void 0,j;typeof s=="function"?j=s(G):j=[s,xe?"active":null,ge?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(G):u;return U.createElement(sa,{...b,"aria-current":k,className:j,ref:E,style:O,to:f,viewTransition:_},typeof y=="function"?y(G):y)});wC.displayName="NavLink";var TC=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:f=xf,action:_,onSubmit:y,relative:b,preventScrollReset:E,viewTransition:I,...N},F)=>{let H=IC(),D=RC(_,{relative:b}),q=f.toLowerCase()==="get"?"get":"post",Y=typeof _=="string"&&iE.test(_),oe=ne=>{if(y&&y(ne),ne.defaultPrevented)return;ne.preventDefault();let pe=ne.nativeEvent.submitter,xe=pe?.getAttribute("formmethod")||f;H(pe||ne.currentTarget,{fetcherKey:e,method:xe,navigate:t,replace:o,state:u,relative:b,preventScrollReset:E,viewTransition:I})};return U.createElement("form",{ref:F,method:q,action:D,onSubmit:s?y:oe,...N,"data-discover":!Y&&n==="render"?"true":void 0})});TC.displayName="Form";function EC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sE(n){let e=U.useContext(Jc);return Ht(e,EC(n)),e}function SC(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:f}={}){let _=bs(),y=fa(),b=Hh(n,{relative:u});return U.useCallback(E=>{if(nC(E,e)){E.preventDefault();let I=t!==void 0?t:Sh(y)===Sh(b);_(n,{replace:I,state:s,preventScrollReset:o,relative:u,viewTransition:f})}},[y,_,b,t,s,e,n,o,u,f])}function rE(n){$s(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=U.useRef(t_(n)),t=U.useRef(!1),s=fa(),o=U.useMemo(()=>iC(s.search,t.current?null:e.current),[s.search]),u=bs(),f=U.useCallback((_,y)=>{const b=t_(typeof _=="function"?_(new URLSearchParams(o)):_);t.current=!0,u("?"+b,y)},[u,o]);return[o,f]}var AC=0,NC=()=>`__${String(++AC)}__`;function IC(){let{router:n}=sE("useSubmit"),{basename:e}=U.useContext(Tr),t=ZR();return U.useCallback(async(s,o={})=>{let{action:u,method:f,encType:_,formData:y,body:b}=aC(s,e);if(o.navigate===!1){let E=o.fetcherKey||NC();await n.fetch(E,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:b,formMethod:o.method||f,formEncType:o.encType||_,flushSync:o.flushSync})}else await n.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:y,body:b,formMethod:o.method||f,formEncType:o.encType||_,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function RC(n,{relative:e}={}){let{basename:t}=U.useContext(Tr),s=U.useContext(Er);Ht(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Hh(n||".",{relative:e})},f=fa();if(n==null){u.search=f.search;let _=new URLSearchParams(u.search),y=_.getAll("index");if(y.some(E=>E==="")){_.delete("index"),y.filter(I=>I).forEach(I=>_.append("index",I));let E=_.toString();u.search=E?`?${E}`:""}}return(!n||n===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:ia([t,u.pathname])),Sh(u)}function CC(n,{relative:e}={}){let t=U.useContext(YT);Ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=sE("useViewTransitionState"),o=Hh(n,{relative:e});if(!t.isTransitioning)return!1;let u=oa(t.currentLocation.pathname,s)||t.currentLocation.pathname,f=oa(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Ff(o.pathname,f)!=null||Ff(o.pathname,u)!=null}var aE=BT();const kC=()=>{};var bw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},PC=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=n[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=n[t++],f=n[t++],_=n[t++],y=((o&7)<<18|(u&63)<<12|(f&63)<<6|_&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=n[t++],f=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},lE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const u=n[o],f=o+1<n.length,_=f?n[o+1]:0,y=o+2<n.length,b=y?n[o+2]:0,E=u>>2,I=(u&3)<<4|_>>4;let N=(_&15)<<2|b>>6,F=b&63;y||(F=64,f||(N=64)),s.push(t[E],t[I],t[N],t[F])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(oE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const u=t[n.charAt(o++)],_=o<n.length?t[n.charAt(o)]:0;++o;const b=o<n.length?t[n.charAt(o)]:64;++o;const I=o<n.length?t[n.charAt(o)]:64;if(++o,u==null||_==null||b==null||I==null)throw new MC;const N=u<<2|_>>4;if(s.push(N),b!==64){const F=_<<4&240|b>>2;if(s.push(F),I!==64){const H=b<<6&192|I;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jC=function(n){const e=oE(n);return lE.encodeByteArray(e,!0)},Hf=function(n){return jC(n).replace(/\./g,"")},cE=function(n){try{return lE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=()=>LC().__FIREBASE_DEFAULTS__,OC=()=>{if(typeof process>"u"||typeof bw>"u")return;const n=bw.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},VC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&cE(n[1]);return e&&JSON.parse(e)},mm=()=>{try{return kC()||DC()||OC()||VC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uE=n=>mm()?.emulatorHosts?.[n],hE=n=>{const e=uE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},dE=()=>mm()?.config,fE=n=>mm()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Hf(JSON.stringify(t)),Hf(JSON.stringify(f)),""].join(".")}const hh={};function zC(){const n={prod:[],emulator:[]};for(const e of Object.keys(hh))hh[e]?n.emulator.push(e):n.prod.push(e);return n}function BC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ww=!1;function Q_(n,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||hh[n]===e||hh[n]||ww)return;hh[n]=e;function t(N){return`__firebase__banner__${N}`}const s="__firebase__banner",u=zC().prod.length>0;function f(){const N=document.getElementById(s);N&&N.remove()}function _(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function y(N,F){N.setAttribute("width","24"),N.setAttribute("id",F),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function b(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{ww=!0,f()},N}function E(N,F){N.setAttribute("id",F),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function I(){const N=BC(s),F=t("text"),H=document.getElementById(F)||document.createElement("span"),D=t("learnmore"),q=document.getElementById(D)||document.createElement("a"),Y=t("preprendIcon"),oe=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ne=N.element;_(ne),E(q,D);const pe=b();y(oe,Y),ne.append(oe,H,q,pe),document.body.appendChild(ne)}u?(H.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xn())}function HC(){const n=mm()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZC(){const n=Xn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $C(){return!HC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X_(){try{return typeof indexedDB=="object"}catch{return!1}}function J_(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function gE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="FirebaseError";class ws extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=KC,Object.setPrototypeOf(this,ws.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?YC(u,s):"Error",_=`${this.serviceName}: ${f} (${o}).`;return new ws(o,_,s)}}function YC(n,e){return n.replace(WC,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const WC=/\{\$([^}]+)}/g;function QC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function So(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=n[o],f=e[o];if(Tw(u)&&Tw(f)){if(!So(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Tw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ih(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function sh(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function XC(n,e){const t=new JC(n,e);return t.subscribe.bind(t)}class JC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ek(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=Sg),o.error===void 0&&(o.error=Sg),o.complete===void 0&&(o.complete=Sg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Sg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1e3,nk=2,ik=14400*1e3,sk=.5;function Ew(n,e=tk,t=nk){const s=e*Math.pow(t,n),o=Math.round(sk*s*(Math.random()-.5)*2);return Math.min(ik,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n){return n&&n._delegate?n._delegate:n}class $i{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new UC;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ok(e))try{this.getOrInitializeService({instanceIdentifier:Nl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nl){return this.instances.has(e)}getOptions(e=Nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,f]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(u);s===_&&f.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ak(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Nl){return this.component?this.component.multipleInstances?e:Nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ak(n){return n===Nl?void 0:n}function ok(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(st||(st={}));const ck={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},uk=st.INFO,hk={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},dk=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=hk[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gh{constructor(e){this.name=e,this._logLevel=uk,this._logHandler=dk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ck[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const fk=(n,e)=>e.some(t=>n instanceof t);let Sw,Aw;function mk(){return Sw||(Sw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pk(){return Aw||(Aw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,n_=new WeakMap,vE=new WeakMap,Ag=new WeakMap,ev=new WeakMap;function gk(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",u),n.removeEventListener("error",f)},u=()=>{t(xo(n.result)),o()},f=()=>{s(n.error),o()};n.addEventListener("success",u),n.addEventListener("error",f)});return e.then(t=>{t instanceof IDBCursor&&_E.set(t,n)}).catch(()=>{}),ev.set(e,n),e}function _k(n){if(n_.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",f),n.removeEventListener("abort",f)},u=()=>{t(),o()},f=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",u),n.addEventListener("error",f),n.addEventListener("abort",f)});n_.set(n,e)}let i_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return n_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vk(n){i_=n(i_)}function yk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Ng(this),e,...t);return vE.set(s,e.sort?e.sort():[e]),xo(s)}:pk().includes(n)?function(...e){return n.apply(Ng(this),e),xo(_E.get(this))}:function(...e){return xo(n.apply(Ng(this),e))}}function xk(n){return typeof n=="function"?yk(n):(n instanceof IDBTransaction&&_k(n),fk(n,mk())?new Proxy(n,i_):n)}function xo(n){if(n instanceof IDBRequest)return gk(n);if(Ag.has(n))return Ag.get(n);const e=xk(n);return e!==n&&(Ag.set(n,e),ev.set(e,n)),e}const Ng=n=>ev.get(n);function yE(n,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(n,e),_=xo(f);return s&&f.addEventListener("upgradeneeded",y=>{s(xo(f.result),y.oldVersion,y.newVersion,xo(f.transaction),y)}),t&&f.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),_.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),_}const bk=["get","getKey","getAll","getAllKeys","count"],wk=["put","add","delete","clear"],Ig=new Map;function Nw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ig.get(e))return Ig.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=wk.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||bk.includes(t)))return;const u=async function(f,..._){const y=this.transaction(f,o?"readwrite":"readonly");let b=y.store;return s&&(b=b.index(_.shift())),(await Promise.all([b[t](..._),o&&y.done]))[0]};return Ig.set(e,u),u}vk(n=>({...n,get:(e,t,s)=>Nw(e,t)||n.get(e,t,s),has:(e,t)=>!!Nw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ek(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Ek(n){return n.getComponent()?.type==="VERSION"}const s_="@firebase/app",Iw="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Gh("@firebase/app"),Sk="@firebase/app-compat",Ak="@firebase/analytics-compat",Nk="@firebase/analytics",Ik="@firebase/app-check-compat",Rk="@firebase/app-check",Ck="@firebase/auth",kk="@firebase/auth-compat",Pk="@firebase/database",Mk="@firebase/data-connect",jk="@firebase/database-compat",Lk="@firebase/functions",Dk="@firebase/functions-compat",Ok="@firebase/installations",Vk="@firebase/installations-compat",Uk="@firebase/messaging",zk="@firebase/messaging-compat",Bk="@firebase/performance",Fk="@firebase/performance-compat",Hk="@firebase/remote-config",qk="@firebase/remote-config-compat",Gk="@firebase/storage",Zk="@firebase/storage-compat",$k="@firebase/firestore",Kk="@firebase/ai",Yk="@firebase/firestore-compat",Wk="firebase",Qk="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="[DEFAULT]",Xk={[s_]:"fire-core",[Sk]:"fire-core-compat",[Nk]:"fire-analytics",[Ak]:"fire-analytics-compat",[Rk]:"fire-app-check",[Ik]:"fire-app-check-compat",[Ck]:"fire-auth",[kk]:"fire-auth-compat",[Pk]:"fire-rtdb",[Mk]:"fire-data-connect",[jk]:"fire-rtdb-compat",[Lk]:"fire-fn",[Dk]:"fire-fn-compat",[Ok]:"fire-iid",[Vk]:"fire-iid-compat",[Uk]:"fire-fcm",[zk]:"fire-fcm-compat",[Bk]:"fire-perf",[Fk]:"fire-perf-compat",[Hk]:"fire-rc",[qk]:"fire-rc-compat",[Gk]:"fire-gcs",[Zk]:"fire-gcs-compat",[$k]:"fire-fst",[Yk]:"fire-fst-compat",[Kk]:"fire-vertex","fire-js":"fire-js",[Wk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new Map,Jk=new Map,a_=new Map;function Rw(n,e){try{n.container.addComponent(e)}catch(t){la.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ys(n){const e=n.name;if(a_.has(e))return la.debug(`There were multiple attempts to register component ${e}.`),!1;a_.set(e,n);for(const t of qf.values())Rw(t,n);for(const t of Jk.values())Rw(t,n);return!0}function ma(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new Oo("app","Firebase",e2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=Qk;function xE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:r_,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw bo.create("bad-app-name",{appName:String(o)});if(t||(t=dE()),!t)throw bo.create("no-options");const u=qf.get(o);if(u){if(So(t,u.options)&&So(s,u.config))return u;throw bo.create("duplicate-app",{appName:o})}const f=new lk(o);for(const y of a_.values())f.addComponent(y);const _=new t2(t,s,f);return qf.set(o,_),_}function Zh(n=r_){const e=qf.get(n);if(!e&&n===r_&&dE())return xE();if(!e)throw bo.create("no-app",{appName:n});return e}function Qn(n,e,t){let s=Xk[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),la.warn(f.join(" "));return}ys(new $i(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="firebase-heartbeat-database",i2=1,Ah="firebase-heartbeat-store";let Rg=null;function bE(){return Rg||(Rg=yE(n2,i2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ah)}catch(t){console.warn(t)}}}}).catch(n=>{throw bo.create("idb-open",{originalErrorMessage:n.message})})),Rg}async function s2(n){try{const t=(await bE()).transaction(Ah),s=await t.objectStore(Ah).get(wE(n));return await t.done,s}catch(e){if(e instanceof ws)la.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e?.message});la.warn(t.message)}}}async function Cw(n,e){try{const s=(await bE()).transaction(Ah,"readwrite");await s.objectStore(Ah).put(e,wE(n)),await s.done}catch(t){if(t instanceof ws)la.warn(t.message);else{const s=bo.create("idb-set",{originalErrorMessage:t?.message});la.warn(s.message)}}}function wE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=1024,a2=30;class o2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new c2(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>a2){const o=u2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){la.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kw(),{heartbeatsToSend:t,unsentEntries:s}=l2(this._heartbeatsCache.heartbeats),o=Hf(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return la.warn(e),""}}}function kw(){return new Date().toISOString().substring(0,10)}function l2(n,e=r2){const t=[];let s=n.slice();for(const o of n){const u=t.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Pw(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Pw(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class c2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X_()?J_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await s2(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Pw(n){return Hf(JSON.stringify({version:2,heartbeats:n})).length}function u2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n){ys(new $i("platform-logger",e=>new Tk(e),"PRIVATE")),ys(new $i("heartbeat",e=>new o2(e),"PRIVATE")),Qn(s_,Iw,n),Qn(s_,Iw,"esm2020"),Qn("fire-js","")}h2("");function TE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d2=TE,EE=new Oo("auth","Firebase",TE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Gh("@firebase/auth");function f2(n,...e){Gf.logLevel<=st.WARN&&Gf.warn(`Auth (${zl}): ${n}`,...e)}function wf(n,...e){Gf.logLevel<=st.ERROR&&Gf.error(`Auth (${zl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(n,...e){throw nv(n,...e)}function Gs(n,...e){return nv(n,...e)}function tv(n,e,t){const s={...d2(),[e]:t};return new Oo("auth","Firebase",s).create(e,{appName:n.name})}function ra(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function m2(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&xs(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return EE.create(n,...e)}function Be(n,e,...t){if(!n)throw nv(e,...t)}function ta(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wf(e),new Error(e)}function ca(n,e){n||ta(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){return typeof self<"u"&&self.location?.href||""}function p2(){return Mw()==="http:"||Mw()==="https:"}function Mw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p2()||pE()||"connection"in navigator)?navigator.onLine:!0}function _2(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.shortDelay=e,this.longDelay=t,ca(t>e,"Short delay should be less than long delay!"),this.isMobile=FC()||GC()}get(){return g2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(n,e){ca(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ta("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ta("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ta("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x2=new $h(3e4,6e4);function Vo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Uo(n,e,t,s,o={}){return AE(n,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const _=qh({key:n.config.apiKey,...f}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const b={method:e,headers:y,...u};return qC()||(b.referrerPolicy="no-referrer"),n.emulatorConfig&&Do(n.emulatorConfig.host)&&(b.credentials="include"),SE.fetch()(await NE(n,n.config.apiHost,t,_),b)})}async function AE(n,e,t){n._canInitEmulator=!1;const s={...v2,...e};try{const o=new w2(n),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw uf(n,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const _=u.ok?f.errorMessage:f.error.message,[y,b]=_.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",f);if(y==="USER_DISABLED")throw uf(n,"user-disabled",f);const E=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw tv(n,E,b);xs(n,E)}}catch(o){if(o instanceof ws)throw o;xs(n,"network-request-failed",{message:String(o)})}}async function Kh(n,e,t,s,o={}){const u=await Uo(n,e,t,s,o);return"mfaPendingCredential"in u&&xs(n,"multi-factor-auth-required",{_serverResponse:u}),u}async function NE(n,e,t,s){const o=`${e}${t}?${s}`,u=n,f=u.config.emulator?iv(n.config,o):`${n.config.apiScheme}://${o}`;return y2.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function b2(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class w2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Gs(this.auth,"network-request-failed")),x2.get())})}}function uf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Gs(n,e,s);return o.customData._tokenResponse=t,o}function jw(n){return n!==void 0&&n.enterprise!==void 0}class T2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return b2(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E2(n,e){return Uo(n,"GET","/v2/recaptchaConfig",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S2(n,e){return Uo(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return Uo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A2(n,e=!1){const t=Lt(n),s=await t.getIdToken(e),o=sv(s);Be(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:dh(Cg(o.auth_time)),issuedAtTime:dh(Cg(o.iat)),expirationTime:dh(Cg(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Cg(n){return Number(n)*1e3}function sv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const o=cE(t);return o?JSON.parse(o):(wf("Failed to decode base64 JWT payload"),null)}catch(o){return wf("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Lw(n){const e=sv(n);return Be(e,"internal-error"),Be(typeof e.exp<"u","internal-error"),Be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ws&&N2(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function N2({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dh(this.lastLoginAt),this.creationTime=dh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(n){const e=n.auth,t=await n.getIdToken(),s=await Nh(n,Zf(e,{idToken:t}));Be(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const u=o.providerUserInfo?.length?IE(o.providerUserInfo):[],f=C2(n.providerData,u),_=n.isAnonymous,y=!(n.email&&o.passwordHash)&&!f?.length,b=_?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new l_(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(n,E)}async function R2(n){const e=Lt(n);await $f(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C2(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function IE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(n,e){const t=await AE(n,{},async()=>{const s=qh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=n.config,f=await NE(n,o,"/v1/token",`key=${u}`),_=await n._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:_,body:s};return n.emulatorConfig&&Do(n.emulatorConfig.host)&&(y.credentials="include"),SE.fetch()(f,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function P2(n,e){return Uo(n,"POST","/v2/accounts:revokeToken",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Be(e.idToken,"internal-error"),Be(typeof e.idToken<"u","internal-error"),Be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Be(e.length!==0,"internal-error");const t=Lw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await k2(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,f=new Oc;return s&&(Be(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Be(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Be(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oc,this.toJSON())}_performRefresh(){return ta("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(n,e){Be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qs{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new I2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new l_(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Nh(this,this.stsTokenManager.getToken(this.auth,e));return Be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return A2(this,e)}reload(){return R2(this)}_assign(e){this!==e&&(Be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await $f(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await Nh(this,S2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,f=t.photoURL??void 0,_=t.tenantId??void 0,y=t._redirectEventId??void 0,b=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:I,emailVerified:N,isAnonymous:F,providerData:H,stsTokenManager:D}=t;Be(I&&D,e,"internal-error");const q=Oc.fromJSON(this.name,D);Be(typeof I=="string",e,"internal-error"),co(s,e.name),co(o,e.name),Be(typeof N=="boolean",e,"internal-error"),Be(typeof F=="boolean",e,"internal-error"),co(u,e.name),co(f,e.name),co(_,e.name),co(y,e.name),co(b,e.name),co(E,e.name);const Y=new qs({uid:I,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:F,photoURL:f,phoneNumber:u,tenantId:_,stsTokenManager:q,createdAt:b,lastLoginAt:E});return H&&Array.isArray(H)&&(Y.providerData=H.map(oe=>({...oe}))),y&&(Y._redirectEventId=y),Y}static async _fromIdTokenResponse(e,t,s=!1){const o=new Oc;o.updateFromServerResponse(t);const u=new qs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $f(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?IE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,_=new Oc;_.updateFromIdToken(s);const y=new qs({uid:o.localId,auth:e,stsTokenManager:_,isAnonymous:f}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new l_(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(y,b),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;function na(n){ca(n instanceof Function,"Expected a class definition");let e=Dw.get(n);return e?(ca(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}RE.type="NONE";const Ow=RE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e,t){return`firebase:${n}:${e}:${t}`}class Vc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Tf(this.userKey,o.apiKey,u),this.fullPersistenceKey=Tf("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?qs._fromGetAccountInfoResponse(this.auth,t,e):null}return qs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vc(na(Ow),e,s);const o=(await Promise.all(t.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||na(Ow);const f=Tf(s,e.config.apiKey,e.name);let _=null;for(const b of t)try{const E=await b._get(f);if(E){let I;if(typeof E=="string"){const N=await Zf(e,{idToken:E}).catch(()=>{});if(!N)break;I=await qs._fromGetAccountInfoResponse(e,N,E)}else I=qs._fromJSON(e,E);b!==u&&(_=I),u=b;break}}catch{}const y=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Vc(u,e,s):(u=y[0],_&&await u._set(f,_.toJSON()),await Promise.all(t.map(async b=>{if(b!==u)try{await b._remove(f)}catch{}})),new Vc(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ME(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LE(e))return"Blackberry";if(DE(e))return"Webos";if(kE(e))return"Safari";if((e.includes("chrome/")||PE(e))&&!e.includes("edge/"))return"Chrome";if(jE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function CE(n=Xn()){return/firefox\//i.test(n)}function kE(n=Xn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PE(n=Xn()){return/crios\//i.test(n)}function ME(n=Xn()){return/iemobile/i.test(n)}function jE(n=Xn()){return/android/i.test(n)}function LE(n=Xn()){return/blackberry/i.test(n)}function DE(n=Xn()){return/webos/i.test(n)}function rv(n=Xn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function M2(n=Xn()){return rv(n)&&!!window.navigator?.standalone}function j2(){return ZC()&&document.documentMode===10}function OE(n=Xn()){return rv(n)||jE(n)||DE(n)||LE(n)||/windows phone/i.test(n)||ME(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e=[]){let t;switch(n){case"Browser":t=Vw(Xn());break;case"Worker":t=`${Vw(Xn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((f,_)=>{try{const y=e(u);f(y)}catch(y){_(y)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(n,e={}){return Uo(n,"GET","/v2/passwordPolicy",Vo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=6;class V2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??O2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uw(this),this.idTokenSubscription=new Uw(this),this.beforeStateQueue=new L2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=na(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),s=await qs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,_=await this.tryRedirectSignIn(e);(!u||u===f)&&_?.user&&(s=_.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $f(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(ra(this));const t=e?Lt(e):null;return t&&Be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(na(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D2(this),t=new V2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await P2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&na(e)||this._popupRedirectResolver;Be(t,this,"argument-error"),this.redirectPersistenceManager=await Vc.create(this,[na(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(Be(_,this,"internal-error"),_.then(()=>{f||u(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,s,o);return()=>{f=!0,y()}}else{const y=e.addObserver(t);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&f2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function zo(n){return Lt(n)}class Uw{constructor(e){this.auth=e,this.observer=null,this.addObserver=XC(t=>this.observer=t)}get next(){return Be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z2(n){pm=n}function UE(n){return pm.loadJS(n)}function B2(){return pm.recaptchaEnterpriseScript}function F2(){return pm.gapiScript}function H2(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class q2{constructor(){this.enterprise=new G2}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class G2{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Z2="recaptcha-enterprise",zE="NO_RECAPTCHA";class $2{constructor(e){this.type=Z2,this.auth=zo(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,_)=>{E2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const b=new T2(y);return u.tenantId==null?u._agentRecaptchaConfig=b:u._tenantRecaptchaConfigs[u.tenantId]=b,f(b.siteKey)}}).catch(y=>{_(y)})})}function o(u,f,_){const y=window.grecaptcha;jw(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(b=>{f(b)}).catch(()=>{f(zE)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q2().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(_=>{if(!t&&jw(window.grecaptcha))o(_,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let y=B2();y.length!==0&&(y+=_),UE(y).then(()=>{o(_,u,f)}).catch(b=>{f(b)})}}).catch(_=>{f(_)})})}}async function zw(n,e,t,s=!1,o=!1){const u=new $2(n);let f;if(o)f=zE;else try{f=await u.verify(t)}catch{f=await u.verify(t,!0)}const _={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const y=_.phoneEnrollmentInfo.phoneNumber,b=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const y=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return s?Object.assign(_,{captchaResp:f}):Object.assign(_,{captchaResponse:f}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function Bw(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await zw(n,e,t,t==="getOobCode");return s(n,u)}else return s(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await zw(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n,e){const t=ma(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(So(u,e??{}))return o;xs(o,"already-initialized")}return t.initialize({options:e})}function Y2(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(na);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function W2(n,e,t){const s=zo(n);Be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=BE(e),{host:f,port:_}=Q2(e),y=_===null?"":`:${_}`,b={url:`${u}//${f}${y}/`},E=Object.freeze({host:f,port:_,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Be(So(b,s.config.emulator)&&So(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Do(f)?(W_(`${u}//${f}${y}`),Q_("Auth",!0)):X2()}function BE(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Q2(n){const e=BE(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Fw(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Fw(f)}}}function Fw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function X2(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ta("not implemented")}_getIdTokenResponse(e){return ta("not implemented")}_linkToIdToken(e,t){return ta("not implemented")}_getReauthenticationResolver(e){return ta("not implemented")}}async function J2(n,e){return Uo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(n,e){return Kh(n,"POST","/v1/accounts:signInWithPassword",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(n,e){return Kh(n,"POST","/v1/accounts:signInWithEmailLink",Vo(n,e))}async function nP(n,e){return Kh(n,"POST","/v1/accounts:signInWithEmailLink",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends av{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ih(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ih(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bw(e,t,"signInWithPassword",eP);case"emailLink":return tP(e,{email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bw(e,s,"signUpPassword",J2);case"emailLink":return nP(e,{idToken:t,email:this._email,oobCode:this._password});default:xs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(n,e){return Kh(n,"POST","/v1/accounts:signInWithIdp",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class jl extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const f=new jl(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const t=this.buildRequest();return Uc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Uc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Uc(e,t)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rP(n){const e=ih(sh(n)).link,t=e?ih(sh(e)).deep_link_id:null,s=ih(sh(n)).deep_link_id;return(s?ih(sh(s)).link:null)||s||t||e||n}class ov{constructor(e){const t=ih(sh(e)),s=t.apiKey??null,o=t.oobCode??null,u=sP(t.mode??null);Be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=rP(e);try{return new ov(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.providerId=eu.PROVIDER_ID}static credential(e,t){return Ih._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=ov.parseLink(t);return Be(s,"argument-error"),Ih._fromEmailAndCode(e,s.code,s.tenantId)}}eu.PROVIDER_ID="password";eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends Yh{constructor(){super("facebook.com")}static credential(e){return jl._fromParams({providerId:fo.PROVIDER_ID,signInMethod:fo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fo.credentialFromTaggedObject(e)}static credentialFromError(e){return fo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fo.credential(e.oauthAccessToken)}catch{return null}}}fo.FACEBOOK_SIGN_IN_METHOD="facebook.com";fo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jl._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ea.credential(t,s)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Yh{constructor(){super("github.com")}static credential(e){return jl._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.GITHUB_SIGN_IN_METHOD="github.com";mo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Yh{constructor(){super("twitter.com")}static credential(e,t){return jl._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return po.credential(t,s)}catch{return null}}}po.TWITTER_SIGN_IN_METHOD="twitter.com";po.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(n,e){return Kh(n,"POST","/v1/accounts:signUp",Vo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await qs._fromIdTokenResponse(e,s,o),f=Hw(s);return new Ao({user:u,providerId:f,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=Hw(s);return new Ao({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function Hw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(n){if(vi(n.app))return Promise.reject(ra(n));const e=zo(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ao({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await aP(e,{returnSecureToken:!0}),s=await Ao._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends ws{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Kf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Kf(e,t,s,o)}}function FE(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Kf._fromErrorAndOperation(n,u,e,s):u})}async function lP(n,e,t=!1){const s=await Nh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ao._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e,t=!1){const{auth:s}=n;if(vi(s.app))return Promise.reject(ra(s));const o="reauthenticate";try{const u=await Nh(n,FE(s,o,e,n),t);Be(u.idToken,s,"internal-error");const f=sv(u.idToken);Be(f,s,"internal-error");const{sub:_}=f;return Be(n.uid===_,s,"user-mismatch"),Ao._forOperation(n,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&xs(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(n,e,t=!1){if(vi(n.app))return Promise.reject(ra(n));const s="signIn",o=await FE(n,s,e),u=await Ao._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(u.user),u}async function uP(n,e){return HE(zo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n){const e=zo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function dP(n,e,t){return vi(n.app)?Promise.reject(ra(n)):uP(Lt(n),eu.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&hP(n),s})}function fP(n,e,t,s){return Lt(n).onIdTokenChanged(e,t,s)}function mP(n,e,t){return Lt(n).beforeAuthStateChanged(e,t)}function pP(n,e,t,s){return Lt(n).onAuthStateChanged(e,t,s)}function gP(n){return Lt(n).signOut()}const Yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yf,"1"),this.storage.removeItem(Yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=1e3,vP=10;class GE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((f,_,y)=>{this.notifyListeners(f,y)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!t&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);j2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vP):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},_P)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}GE.type="LOCAL";const yP=GE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZE.type="SESSION";const $E=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new gm(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,f=this.handlersMap[o];if(!f?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const _=Array.from(f).map(async b=>b(t.origin,u)),y=await xP(_);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((_,y)=>{const b=cv("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(I){const N=I;if(N.data.eventId===b)switch(N.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),_(N.data.response);break;default:clearTimeout(E),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:t},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function wP(n){_r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function TP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EP(){return navigator?.serviceWorker?.controller||null}function SP(){return KE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebaseLocalStorageDb",AP=1,Wf="firebaseLocalStorage",WE="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _m(n,e){return n.transaction([Wf],e?"readwrite":"readonly").objectStore(Wf)}function NP(){const n=indexedDB.deleteDatabase(YE);return new Wh(n).toPromise()}function c_(){const n=indexedDB.open(YE,AP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Wf,{keyPath:WE})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Wf)?e(s):(s.close(),await NP(),e(await c_()))})})}async function qw(n,e,t){const s=_m(n,!0).put({[WE]:e,value:t});return new Wh(s).toPromise()}async function IP(n,e){const t=_m(n,!1).get(e),s=await new Wh(t).toPromise();return s===void 0?null:s.value}function Gw(n,e){const t=_m(n,!0).delete(e);return new Wh(t).toPromise()}const RP=800,CP=3;class QE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await c_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>CP)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(SP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await TP(),!this.activeServiceWorker)return;this.sender=new bP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await c_();return await qw(e,Yf,"1"),await Gw(e,Yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>qw(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>IP(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=_m(o,!1).getAll();return new Wh(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}QE.type="LOCAL";const kP=QE;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e){return e?na(e):(Be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Uc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Uc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PP(n){return HE(n.auth,new uv(n),n.bypassAuthState)}function MP(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),cP(t,new uv(n),n.bypassAuthState)}async function jP(n){const{auth:e,user:t}=n;return Be(t,e,"internal-error"),lP(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:f,type:_}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(y))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PP;case"linkViaPopup":case"linkViaRedirect":return jP;case"reauthViaPopup":case"reauthViaRedirect":return MP;default:xs(this.auth,"internal-error")}}resolve(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ca(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new $h(2e3,1e4);async function DP(n,e,t){if(vi(n.app))return Promise.reject(Gs(n,"operation-not-supported-in-this-environment"));const s=zo(n);m2(n,e,lv);const o=XE(s,t);return new Il(s,"signInViaPopup",e,o).executeNotNull()}class Il extends JE{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Be(e,this.auth,"internal-error"),e}async onExecution(){ca(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LP.get())};e()}}Il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="pendingRedirect",Ef=new Map;class VP extends JE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ef.get(this.auth._key());if(!e){try{const s=await UP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ef.set(this.auth._key(),e)}return this.bypassAuthState||Ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UP(n,e){const t=FP(e),s=BP(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function zP(n,e){Ef.set(n._key(),e)}function BP(n){return na(n._redirectPersistence)}function FP(n){return Tf(OP,n.config.apiKey,n.name)}async function HP(n,e,t=!1){if(vi(n.app))return Promise.reject(ra(n));const s=zo(n),o=XE(s,e),f=await new VP(s,o,t).execute();return f&&!t&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=600*1e3;class GP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!eS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Gs(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zw(e))}saveEventToCache(e){this.cachedEventUids.add(Zw(e)),this.lastProcessedEventTime=Date.now()}}function Zw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ZP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,e={}){return Uo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YP=/^https?/;async function WP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $P(n);for(const t of e)try{if(QP(t))return}catch{}xs(n,"unauthorized-domain")}function QP(n){const e=o_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const f=new URL(n);return f.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&f.hostname===s}if(!YP.test(t))return!1;if(KP.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new $h(3e4,6e4);function $w(){const n=_r().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JP(n){return new Promise((e,t)=>{function s(){$w(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$w(),t(Gs(n,"network-request-failed"))},timeout:XP.get()})}if(_r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_r().gapi?.load)s();else{const o=H2("iframefcb");return _r()[o]=()=>{gapi.load?s():t(Gs(n,"network-request-failed"))},UE(`${F2()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Sf=null,e})}let Sf=null;function eM(n){return Sf=Sf||JP(n),Sf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new $h(5e3,15e3),nM="__/auth/iframe",iM="emulator/auth/iframe",sM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aM(n){const e=n.config;Be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iv(e,iM):`https://${n.config.authDomain}/${nM}`,s={apiKey:e.apiKey,appName:n.name,v:zl},o=rM.get(n.config.apiHost);o&&(s.eid=o);const u=n._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${qh(s).slice(1)}`}async function oM(n){const e=await eM(n),t=_r().gapi;return Be(t,n,"internal-error"),e.open({where:document.body,url:aM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sM,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Gs(n,"network-request-failed"),_=_r().setTimeout(()=>{u(f)},tM.get());function y(){_r().clearTimeout(_),o(s)}s.ping(y).then(y,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cM=500,uM=600,hM="_blank",dM="http://localhost";class Kw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fM(n,e,t,s=cM,o=uM){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let _="";const y={...lM,width:s.toString(),height:o.toString(),top:u,left:f},b=Xn().toLowerCase();t&&(_=PE(b)?hM:t),CE(b)&&(e=e||dM,y.scrollbars="yes");const E=Object.entries(y).reduce((N,[F,H])=>`${N}${F}=${H},`,"");if(M2(b)&&_!=="_self")return mM(e||"",_),new Kw(null);const I=window.open(e||"",_,E);Be(I,n,"popup-blocked");try{I.focus()}catch{}return new Kw(I)}function mM(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="__/auth/handler",gM="emulator/auth/handler",_M=encodeURIComponent("fac");async function Yw(n,e,t,s,o,u){Be(n.config.authDomain,n,"auth-domain-config-required"),Be(n.config.apiKey,n,"invalid-api-key");const f={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:zl,eventId:o};if(e instanceof lv){e.setDefaultLanguage(n.languageCode),f.providerId=e.providerId||"",QC(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))f[E]=I}if(e instanceof Yh){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(f.scopes=E.join(","))}n.tenantId&&(f.tid=n.tenantId);const _=f;for(const E of Object.keys(_))_[E]===void 0&&delete _[E];const y=await n._getAppCheckToken(),b=y?`#${_M}=${encodeURIComponent(y)}`:"";return`${vM(n)}?${qh(_).slice(1)}${b}`}function vM({config:n}){return n.emulator?iv(n,gM):`https://${n.authDomain}/${pM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="webStorageSupport";class yM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$E,this._completeRedirectFn=HP,this._overrideRedirectResult=zP}async _openPopup(e,t,s,o){ca(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Yw(e,t,s,o_(),o);return fM(e,u,cv())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await Yw(e,t,s,o_(),o);return wP(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ca(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await oM(e),s=new GP(e);return t.register("authEvent",o=>(Be(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kg,{type:kg},o=>{const u=o?.[0]?.[kg];u!==void 0&&t(!!u),xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OE()||kE()||rv()}}const xM=yM;var Ww="@firebase/auth",Qw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TM(n){ys(new $i("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=s.options;Be(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:f,authDomain:_,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VE(n)},b=new U2(s,o,u,y);return Y2(b,t),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ys(new $i("auth-internal",e=>{const t=zo(e.getProvider("auth").getImmediate());return(s=>new bM(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qn(Ww,Qw,wM(n)),Qn(Ww,Qw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=300,SM=fE("authIdTokenMaxAge")||EM;let Xw=null;const AM=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SM)return;const o=t?.token;Xw!==o&&(Xw=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function NM(n=Zh()){const e=ma(n,"auth");if(e.isInitialized())return e.getImmediate();const t=K2(n,{popupRedirectResolver:xM,persistence:[kP,yP,$E]}),s=fE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=AM(u.toString());mP(t,f,()=>f(t.currentUser)),fP(t,_=>f(_))}}const o=uE("auth");return o&&W2(t,`http://${o}`),t}function IM(){return document.getElementsByTagName("head")?.[0]??document}z2({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const u=Gs("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",IM().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TM("Browser");var RM="firebase",CM="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn(RM,CM,"app");var Jw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,tS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(G,k){function j(){}j.prototype=k.prototype,G.D=k.prototype,G.prototype=new j,G.prototype.constructor=G,G.C=function(O,Z,V){for(var M=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)M[ve-2]=arguments[ve];return k.prototype[Z].apply(O,M)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(G,k,j){j||(j=0);var O=Array(16);if(typeof k=="string")for(var Z=0;16>Z;++Z)O[Z]=k.charCodeAt(j++)|k.charCodeAt(j++)<<8|k.charCodeAt(j++)<<16|k.charCodeAt(j++)<<24;else for(Z=0;16>Z;++Z)O[Z]=k[j++]|k[j++]<<8|k[j++]<<16|k[j++]<<24;k=G.g[0],j=G.g[1],Z=G.g[2];var V=G.g[3],M=k+(V^j&(Z^V))+O[0]+3614090360&4294967295;k=j+(M<<7&4294967295|M>>>25),M=V+(Z^k&(j^Z))+O[1]+3905402710&4294967295,V=k+(M<<12&4294967295|M>>>20),M=Z+(j^V&(k^j))+O[2]+606105819&4294967295,Z=V+(M<<17&4294967295|M>>>15),M=j+(k^Z&(V^k))+O[3]+3250441966&4294967295,j=Z+(M<<22&4294967295|M>>>10),M=k+(V^j&(Z^V))+O[4]+4118548399&4294967295,k=j+(M<<7&4294967295|M>>>25),M=V+(Z^k&(j^Z))+O[5]+1200080426&4294967295,V=k+(M<<12&4294967295|M>>>20),M=Z+(j^V&(k^j))+O[6]+2821735955&4294967295,Z=V+(M<<17&4294967295|M>>>15),M=j+(k^Z&(V^k))+O[7]+4249261313&4294967295,j=Z+(M<<22&4294967295|M>>>10),M=k+(V^j&(Z^V))+O[8]+1770035416&4294967295,k=j+(M<<7&4294967295|M>>>25),M=V+(Z^k&(j^Z))+O[9]+2336552879&4294967295,V=k+(M<<12&4294967295|M>>>20),M=Z+(j^V&(k^j))+O[10]+4294925233&4294967295,Z=V+(M<<17&4294967295|M>>>15),M=j+(k^Z&(V^k))+O[11]+2304563134&4294967295,j=Z+(M<<22&4294967295|M>>>10),M=k+(V^j&(Z^V))+O[12]+1804603682&4294967295,k=j+(M<<7&4294967295|M>>>25),M=V+(Z^k&(j^Z))+O[13]+4254626195&4294967295,V=k+(M<<12&4294967295|M>>>20),M=Z+(j^V&(k^j))+O[14]+2792965006&4294967295,Z=V+(M<<17&4294967295|M>>>15),M=j+(k^Z&(V^k))+O[15]+1236535329&4294967295,j=Z+(M<<22&4294967295|M>>>10),M=k+(Z^V&(j^Z))+O[1]+4129170786&4294967295,k=j+(M<<5&4294967295|M>>>27),M=V+(j^Z&(k^j))+O[6]+3225465664&4294967295,V=k+(M<<9&4294967295|M>>>23),M=Z+(k^j&(V^k))+O[11]+643717713&4294967295,Z=V+(M<<14&4294967295|M>>>18),M=j+(V^k&(Z^V))+O[0]+3921069994&4294967295,j=Z+(M<<20&4294967295|M>>>12),M=k+(Z^V&(j^Z))+O[5]+3593408605&4294967295,k=j+(M<<5&4294967295|M>>>27),M=V+(j^Z&(k^j))+O[10]+38016083&4294967295,V=k+(M<<9&4294967295|M>>>23),M=Z+(k^j&(V^k))+O[15]+3634488961&4294967295,Z=V+(M<<14&4294967295|M>>>18),M=j+(V^k&(Z^V))+O[4]+3889429448&4294967295,j=Z+(M<<20&4294967295|M>>>12),M=k+(Z^V&(j^Z))+O[9]+568446438&4294967295,k=j+(M<<5&4294967295|M>>>27),M=V+(j^Z&(k^j))+O[14]+3275163606&4294967295,V=k+(M<<9&4294967295|M>>>23),M=Z+(k^j&(V^k))+O[3]+4107603335&4294967295,Z=V+(M<<14&4294967295|M>>>18),M=j+(V^k&(Z^V))+O[8]+1163531501&4294967295,j=Z+(M<<20&4294967295|M>>>12),M=k+(Z^V&(j^Z))+O[13]+2850285829&4294967295,k=j+(M<<5&4294967295|M>>>27),M=V+(j^Z&(k^j))+O[2]+4243563512&4294967295,V=k+(M<<9&4294967295|M>>>23),M=Z+(k^j&(V^k))+O[7]+1735328473&4294967295,Z=V+(M<<14&4294967295|M>>>18),M=j+(V^k&(Z^V))+O[12]+2368359562&4294967295,j=Z+(M<<20&4294967295|M>>>12),M=k+(j^Z^V)+O[5]+4294588738&4294967295,k=j+(M<<4&4294967295|M>>>28),M=V+(k^j^Z)+O[8]+2272392833&4294967295,V=k+(M<<11&4294967295|M>>>21),M=Z+(V^k^j)+O[11]+1839030562&4294967295,Z=V+(M<<16&4294967295|M>>>16),M=j+(Z^V^k)+O[14]+4259657740&4294967295,j=Z+(M<<23&4294967295|M>>>9),M=k+(j^Z^V)+O[1]+2763975236&4294967295,k=j+(M<<4&4294967295|M>>>28),M=V+(k^j^Z)+O[4]+1272893353&4294967295,V=k+(M<<11&4294967295|M>>>21),M=Z+(V^k^j)+O[7]+4139469664&4294967295,Z=V+(M<<16&4294967295|M>>>16),M=j+(Z^V^k)+O[10]+3200236656&4294967295,j=Z+(M<<23&4294967295|M>>>9),M=k+(j^Z^V)+O[13]+681279174&4294967295,k=j+(M<<4&4294967295|M>>>28),M=V+(k^j^Z)+O[0]+3936430074&4294967295,V=k+(M<<11&4294967295|M>>>21),M=Z+(V^k^j)+O[3]+3572445317&4294967295,Z=V+(M<<16&4294967295|M>>>16),M=j+(Z^V^k)+O[6]+76029189&4294967295,j=Z+(M<<23&4294967295|M>>>9),M=k+(j^Z^V)+O[9]+3654602809&4294967295,k=j+(M<<4&4294967295|M>>>28),M=V+(k^j^Z)+O[12]+3873151461&4294967295,V=k+(M<<11&4294967295|M>>>21),M=Z+(V^k^j)+O[15]+530742520&4294967295,Z=V+(M<<16&4294967295|M>>>16),M=j+(Z^V^k)+O[2]+3299628645&4294967295,j=Z+(M<<23&4294967295|M>>>9),M=k+(Z^(j|~V))+O[0]+4096336452&4294967295,k=j+(M<<6&4294967295|M>>>26),M=V+(j^(k|~Z))+O[7]+1126891415&4294967295,V=k+(M<<10&4294967295|M>>>22),M=Z+(k^(V|~j))+O[14]+2878612391&4294967295,Z=V+(M<<15&4294967295|M>>>17),M=j+(V^(Z|~k))+O[5]+4237533241&4294967295,j=Z+(M<<21&4294967295|M>>>11),M=k+(Z^(j|~V))+O[12]+1700485571&4294967295,k=j+(M<<6&4294967295|M>>>26),M=V+(j^(k|~Z))+O[3]+2399980690&4294967295,V=k+(M<<10&4294967295|M>>>22),M=Z+(k^(V|~j))+O[10]+4293915773&4294967295,Z=V+(M<<15&4294967295|M>>>17),M=j+(V^(Z|~k))+O[1]+2240044497&4294967295,j=Z+(M<<21&4294967295|M>>>11),M=k+(Z^(j|~V))+O[8]+1873313359&4294967295,k=j+(M<<6&4294967295|M>>>26),M=V+(j^(k|~Z))+O[15]+4264355552&4294967295,V=k+(M<<10&4294967295|M>>>22),M=Z+(k^(V|~j))+O[6]+2734768916&4294967295,Z=V+(M<<15&4294967295|M>>>17),M=j+(V^(Z|~k))+O[13]+1309151649&4294967295,j=Z+(M<<21&4294967295|M>>>11),M=k+(Z^(j|~V))+O[4]+4149444226&4294967295,k=j+(M<<6&4294967295|M>>>26),M=V+(j^(k|~Z))+O[11]+3174756917&4294967295,V=k+(M<<10&4294967295|M>>>22),M=Z+(k^(V|~j))+O[2]+718787259&4294967295,Z=V+(M<<15&4294967295|M>>>17),M=j+(V^(Z|~k))+O[9]+3951481745&4294967295,G.g[0]=G.g[0]+k&4294967295,G.g[1]=G.g[1]+(Z+(M<<21&4294967295|M>>>11))&4294967295,G.g[2]=G.g[2]+Z&4294967295,G.g[3]=G.g[3]+V&4294967295}s.prototype.u=function(G,k){k===void 0&&(k=G.length);for(var j=k-this.blockSize,O=this.B,Z=this.h,V=0;V<k;){if(Z==0)for(;V<=j;)o(this,G,V),V+=this.blockSize;if(typeof G=="string"){for(;V<k;)if(O[Z++]=G.charCodeAt(V++),Z==this.blockSize){o(this,O),Z=0;break}}else for(;V<k;)if(O[Z++]=G[V++],Z==this.blockSize){o(this,O),Z=0;break}}this.h=Z,this.o+=k},s.prototype.v=function(){var G=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);G[0]=128;for(var k=1;k<G.length-8;++k)G[k]=0;var j=8*this.o;for(k=G.length-8;k<G.length;++k)G[k]=j&255,j/=256;for(this.u(G),G=Array(16),k=j=0;4>k;++k)for(var O=0;32>O;O+=8)G[j++]=this.g[k]>>>O&255;return G};function u(G,k){var j=_;return Object.prototype.hasOwnProperty.call(j,G)?j[G]:j[G]=k(G)}function f(G,k){this.h=k;for(var j=[],O=!0,Z=G.length-1;0<=Z;Z--){var V=G[Z]|0;O&&V==k||(j[Z]=V,O=!1)}this.g=j}var _={};function y(G){return-128<=G&&128>G?u(G,function(k){return new f([k|0],0>k?-1:0)}):new f([G|0],0>G?-1:0)}function b(G){if(isNaN(G)||!isFinite(G))return I;if(0>G)return q(b(-G));for(var k=[],j=1,O=0;G>=j;O++)k[O]=G/j|0,j*=4294967296;return new f(k,0)}function E(G,k){if(G.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(G.charAt(0)=="-")return q(E(G.substring(1),k));if(0<=G.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=b(Math.pow(k,8)),O=I,Z=0;Z<G.length;Z+=8){var V=Math.min(8,G.length-Z),M=parseInt(G.substring(Z,Z+V),k);8>V?(V=b(Math.pow(k,V)),O=O.j(V).add(b(M))):(O=O.j(j),O=O.add(b(M)))}return O}var I=y(0),N=y(1),F=y(16777216);n=f.prototype,n.m=function(){if(D(this))return-q(this).m();for(var G=0,k=1,j=0;j<this.g.length;j++){var O=this.i(j);G+=(0<=O?O:4294967296+O)*k,k*=4294967296}return G},n.toString=function(G){if(G=G||10,2>G||36<G)throw Error("radix out of range: "+G);if(H(this))return"0";if(D(this))return"-"+q(this).toString(G);for(var k=b(Math.pow(G,6)),j=this,O="";;){var Z=pe(j,k).g;j=Y(j,Z.j(k));var V=((0<j.g.length?j.g[0]:j.h)>>>0).toString(G);if(j=Z,H(j))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(G){return 0>G?0:G<this.g.length?this.g[G]:this.h};function H(G){if(G.h!=0)return!1;for(var k=0;k<G.g.length;k++)if(G.g[k]!=0)return!1;return!0}function D(G){return G.h==-1}n.l=function(G){return G=Y(this,G),D(G)?-1:H(G)?0:1};function q(G){for(var k=G.g.length,j=[],O=0;O<k;O++)j[O]=~G.g[O];return new f(j,~G.h).add(N)}n.abs=function(){return D(this)?q(this):this},n.add=function(G){for(var k=Math.max(this.g.length,G.g.length),j=[],O=0,Z=0;Z<=k;Z++){var V=O+(this.i(Z)&65535)+(G.i(Z)&65535),M=(V>>>16)+(this.i(Z)>>>16)+(G.i(Z)>>>16);O=M>>>16,V&=65535,M&=65535,j[Z]=M<<16|V}return new f(j,j[j.length-1]&-2147483648?-1:0)};function Y(G,k){return G.add(q(k))}n.j=function(G){if(H(this)||H(G))return I;if(D(this))return D(G)?q(this).j(q(G)):q(q(this).j(G));if(D(G))return q(this.j(q(G)));if(0>this.l(F)&&0>G.l(F))return b(this.m()*G.m());for(var k=this.g.length+G.g.length,j=[],O=0;O<2*k;O++)j[O]=0;for(O=0;O<this.g.length;O++)for(var Z=0;Z<G.g.length;Z++){var V=this.i(O)>>>16,M=this.i(O)&65535,ve=G.i(Z)>>>16,ke=G.i(Z)&65535;j[2*O+2*Z]+=M*ke,oe(j,2*O+2*Z),j[2*O+2*Z+1]+=V*ke,oe(j,2*O+2*Z+1),j[2*O+2*Z+1]+=M*ve,oe(j,2*O+2*Z+1),j[2*O+2*Z+2]+=V*ve,oe(j,2*O+2*Z+2)}for(O=0;O<k;O++)j[O]=j[2*O+1]<<16|j[2*O];for(O=k;O<2*k;O++)j[O]=0;return new f(j,0)};function oe(G,k){for(;(G[k]&65535)!=G[k];)G[k+1]+=G[k]>>>16,G[k]&=65535,k++}function ne(G,k){this.g=G,this.h=k}function pe(G,k){if(H(k))throw Error("division by zero");if(H(G))return new ne(I,I);if(D(G))return k=pe(q(G),k),new ne(q(k.g),q(k.h));if(D(k))return k=pe(G,q(k)),new ne(q(k.g),k.h);if(30<G.g.length){if(D(G)||D(k))throw Error("slowDivide_ only works with positive integers.");for(var j=N,O=k;0>=O.l(G);)j=xe(j),O=xe(O);var Z=ge(j,1),V=ge(O,1);for(O=ge(O,2),j=ge(j,2);!H(O);){var M=V.add(O);0>=M.l(G)&&(Z=Z.add(j),V=M),O=ge(O,1),j=ge(j,1)}return k=Y(G,Z.j(k)),new ne(Z,k)}for(Z=I;0<=G.l(k);){for(j=Math.max(1,Math.floor(G.m()/k.m())),O=Math.ceil(Math.log(j)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=b(j),M=V.j(k);D(M)||0<M.l(G);)j-=O,V=b(j),M=V.j(k);H(V)&&(V=N),Z=Z.add(V),G=Y(G,M)}return new ne(Z,G)}n.A=function(G){return pe(this,G).h},n.and=function(G){for(var k=Math.max(this.g.length,G.g.length),j=[],O=0;O<k;O++)j[O]=this.i(O)&G.i(O);return new f(j,this.h&G.h)},n.or=function(G){for(var k=Math.max(this.g.length,G.g.length),j=[],O=0;O<k;O++)j[O]=this.i(O)|G.i(O);return new f(j,this.h|G.h)},n.xor=function(G){for(var k=Math.max(this.g.length,G.g.length),j=[],O=0;O<k;O++)j[O]=this.i(O)^G.i(O);return new f(j,this.h^G.h)};function xe(G){for(var k=G.g.length+1,j=[],O=0;O<k;O++)j[O]=G.i(O)<<1|G.i(O-1)>>>31;return new f(j,G.h)}function ge(G,k){var j=k>>5;k%=32;for(var O=G.g.length-j,Z=[],V=0;V<O;V++)Z[V]=0<k?G.i(V+j)>>>k|G.i(V+j+1)<<32-k:G.i(V+j);return new f(Z,G.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,tS=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=E,wo=f}).apply(typeof Jw<"u"?Jw:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nS,rh,iS,Af,u_,sS,rS,aS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,w,S){return m==Array.prototype||m==Object.prototype||(m[w]=S.value),m};function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var w=0;w<m.length;++w){var S=m[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var s=t(this);function o(m,w){if(w)e:{var S=s;m=m.split(".");for(var P=0;P<m.length-1;P++){var W=m[P];if(!(W in S))break e;S=S[W]}m=m[m.length-1],P=S[m],w=w(P),w!=P&&w!=null&&e(S,m,{configurable:!0,writable:!0,value:w})}}function u(m,w){m instanceof String&&(m+="");var S=0,P=!1,W={next:function(){if(!P&&S<m.length){var ae=S++;return{value:w(ae,m[ae]),done:!1}}return P=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}o("Array.prototype.values",function(m){return m||function(){return u(this,function(w,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},_=this||self;function y(m){var w=typeof m;return w=w!="object"?w:m?Array.isArray(m)?"array":w:"null",w=="array"||w=="object"&&typeof m.length=="number"}function b(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function E(m,w,S){return m.call.apply(m.bind,arguments)}function I(m,w,S){if(!m)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,P),m.apply(w,W)}}return function(){return m.apply(w,arguments)}}function N(m,w,S){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:I,N.apply(null,arguments)}function F(m,w){var S=Array.prototype.slice.call(arguments,1);return function(){var P=S.slice();return P.push.apply(P,arguments),m.apply(this,P)}}function H(m,w){function S(){}S.prototype=w.prototype,m.aa=w.prototype,m.prototype=new S,m.prototype.constructor=m,m.Qb=function(P,W,ae){for(var ye=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)ye[rt-2]=arguments[rt];return w.prototype[W].apply(P,ye)}}function D(m){const w=m.length;if(0<w){const S=Array(w);for(let P=0;P<w;P++)S[P]=m[P];return S}return[]}function q(m,w){for(let S=1;S<arguments.length;S++){const P=arguments[S];if(y(P)){const W=m.length||0,ae=P.length||0;m.length=W+ae;for(let ye=0;ye<ae;ye++)m[W+ye]=P[ye]}else m.push(P)}}class Y{constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function oe(m){return/^[\s\xa0]*$/.test(m)}function ne(){var m=_.navigator;return m&&(m=m.userAgent)?m:""}function pe(m){return pe[" "](m),m}pe[" "]=function(){};var xe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function ge(m,w,S){for(const P in m)w.call(S,m[P],P,m)}function G(m,w){for(const S in m)w.call(void 0,m[S],S,m)}function k(m){const w={};for(const S in m)w[S]=m[S];return w}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(m,w){let S,P;for(let W=1;W<arguments.length;W++){P=arguments[W];for(S in P)m[S]=P[S];for(let ae=0;ae<j.length;ae++)S=j[ae],Object.prototype.hasOwnProperty.call(P,S)&&(m[S]=P[S])}}function Z(m){var w=1;m=m.split(":");const S=[];for(;0<w&&m.length;)S.push(m.shift()),w--;return m.length&&S.push(m.join(":")),S}function V(m){_.setTimeout(()=>{throw m},0)}function M(){var m=Ee;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class ve{constructor(){this.h=this.g=null}add(w,S){const P=ke.get();P.set(w,S),this.h?this.h.next=P:this.g=P,this.h=P}}var ke=new Y(()=>new X,m=>m.reset());class X{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,J=!1,Ee=new ve,_e=()=>{const m=_.Promise.resolve(void 0);ce=()=>{m.then(je)}};var je=()=>{for(var m;m=M();){try{m.h.call(m.g)}catch(S){V(S)}var w=ke;w.j(m),100>w.h&&(w.h++,m.next=w.g,w.g=m)}J=!1};function Ie(){this.s=this.s,this.C=this.C}Ie.prototype.s=!1,Ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!_.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};_.addEventListener("test",S,w),_.removeEventListener("test",S,w)}catch{}return m}();function qe(m,w){if(Se.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var S=this.type=m.type,P=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget){if(xe){e:{try{pe(w.nodeName);var W=!0;break e}catch{}W=!1}W||(w=null)}}else S=="mouseover"?w=m.fromElement:S=="mouseout"&&(w=m.toElement);this.relatedTarget=w,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:Ge[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&qe.aa.h.call(this)}}H(qe,Se);var Ge={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),Gt=0;function Ts(m,w,S,P,W){this.listener=m,this.proxy=null,this.src=w,this.type=S,this.capture=!!P,this.ha=W,this.key=++Gt,this.da=this.fa=!1}function Ki(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function wi(m){this.src=m,this.g={},this.h=0}wi.prototype.add=function(m,w,S,P,W){var ae=m.toString();m=this.g[ae],m||(m=this.g[ae]=[],this.h++);var ye=Es(m,w,P,W);return-1<ye?(w=m[ye],S||(w.fa=!1)):(w=new Ts(w,this.src,ae,!!P,W),w.fa=S,m.push(w)),w};function Ti(m,w){var S=w.type;if(S in m.g){var P=m.g[S],W=Array.prototype.indexOf.call(P,w,void 0),ae;(ae=0<=W)&&Array.prototype.splice.call(P,W,1),ae&&(Ki(w),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Es(m,w,S,P){for(var W=0;W<m.length;++W){var ae=m[W];if(!ae.da&&ae.listener==w&&ae.capture==!!S&&ae.ha==P)return W}return-1}var Ar="closure_lm_"+(1e6*Math.random()|0),pa={};function qo(m,w,S,P,W){if(Array.isArray(w)){for(var ae=0;ae<w.length;ae++)qo(m,w[ae],S,P,W);return null}return S=Gl(S),m&&m[Xt]?m.K(w,S,b(P)?!!P.capture:!1,W):Vn(m,w,S,!1,P,W)}function Vn(m,w,S,P,W,ae){if(!w)throw Error("Invalid event type");var ye=b(W)?!!W.capture:!!W,rt=Ir(m);if(rt||(m[Ar]=rt=new wi(m)),S=rt.add(w,S,P,ye,ae),S.proxy)return S;if(P=ga(),S.proxy=P,P.src=m,P.listener=S,m.addEventListener)$e||(W=ye),W===void 0&&(W=!1),m.addEventListener(w.toString(),P,W);else if(m.attachEvent)m.attachEvent(Ss(w.toString()),P);else if(m.addListener&&m.removeListener)m.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ga(){function m(S){return w.call(m.src,m.listener,S)}const w=ql;return m}function Go(m,w,S,P,W){if(Array.isArray(w))for(var ae=0;ae<w.length;ae++)Go(m,w[ae],S,P,W);else P=b(P)?!!P.capture:!!P,S=Gl(S),m&&m[Xt]?(m=m.i,w=String(w).toString(),w in m.g&&(ae=m.g[w],S=Es(ae,S,P,W),-1<S&&(Ki(ae[S]),Array.prototype.splice.call(ae,S,1),ae.length==0&&(delete m.g[w],m.h--)))):m&&(m=Ir(m))&&(w=m.g[w.toString()],m=-1,w&&(m=Es(w,S,P,W)),(S=-1<m?w[m]:null)&&Nr(S))}function Nr(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[Xt])Ti(w.i,m);else{var S=m.type,P=m.proxy;w.removeEventListener?w.removeEventListener(S,P,m.capture):w.detachEvent?w.detachEvent(Ss(S),P):w.addListener&&w.removeListener&&w.removeListener(P),(S=Ir(w))?(Ti(S,m),S.h==0&&(S.src=null,w[Ar]=null)):Ki(m)}}}function Ss(m){return m in pa?pa[m]:pa[m]="on"+m}function ql(m,w){if(m.da)m=!0;else{w=new qe(w,this);var S=m.listener,P=m.ha||m.src;m.fa&&Nr(m),m=S.call(P,w)}return m}function Ir(m){return m=m[Ar],m instanceof wi?m:null}var Zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gl(m){return typeof m=="function"?m:(m[Zo]||(m[Zo]=function(w){return m.handleEvent(w)}),m[Zo])}function It(){Ie.call(this),this.i=new wi(this),this.M=this,this.F=null}H(It,Ie),It.prototype[Xt]=!0,It.prototype.removeEventListener=function(m,w,S,P){Go(this,m,w,S,P)};function ft(m,w){var S,P=m.F;if(P)for(S=[];P;P=P.F)S.push(P);if(m=m.M,P=w.type||w,typeof w=="string")w=new Se(w,m);else if(w instanceof Se)w.target=w.target||m;else{var W=w;w=new Se(P,m),O(w,W)}if(W=!0,S)for(var ae=S.length-1;0<=ae;ae--){var ye=w.g=S[ae];W=Un(ye,P,!0,w)&&W}if(ye=w.g=m,W=Un(ye,P,!0,w)&&W,W=Un(ye,P,!1,w)&&W,S)for(ae=0;ae<S.length;ae++)ye=w.g=S[ae],W=Un(ye,P,!1,w)&&W}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var m=this.i,w;for(w in m.g){for(var S=m.g[w],P=0;P<S.length;P++)Ki(S[P]);delete m.g[w],m.h--}}this.F=null},It.prototype.K=function(m,w,S,P){return this.i.add(String(m),w,!1,S,P)},It.prototype.L=function(m,w,S,P){return this.i.add(String(m),w,!0,S,P)};function Un(m,w,S,P){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();for(var W=!0,ae=0;ae<w.length;++ae){var ye=w[ae];if(ye&&!ye.da&&ye.capture==S){var rt=ye.listener,$t=ye.ha||ye.src;ye.fa&&Ti(m.i,ye),W=rt.call($t,P)!==!1&&W}}return W&&!P.defaultPrevented}function yn(m,w,S){if(typeof m=="function")S&&(m=N(m,S));else if(m&&typeof m.handleEvent=="function")m=N(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:_.setTimeout(m,w||0)}function $o(m){m.g=yn(()=>{m.g=null,m.i&&(m.i=!1,$o(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class Zl extends Ie{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(m){Ie.call(this),this.h=m,this.g={}}H(Rr,Ie);var Ws=[];function As(m){ge(m.g,function(w,S){this.g.hasOwnProperty(S)&&Nr(w)},m),m.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),As(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ci=_.JSON.stringify,_a=_.JSON.parse,Ei=class{stringify(m){return _.JSON.stringify(m,void 0)}parse(m){return _.JSON.parse(m,void 0)}};function Ko(){}Ko.prototype.h=null;function Yo(m){return m.h||(m.h=m.i())}function va(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wi(){Se.call(this,"d")}H(Wi,Se);function Wo(){Se.call(this,"c")}H(Wo,Se);var Qi={},Qo=null;function Qs(){return Qo=Qo||new It}Qi.La="serverreachability";function ya(m){Se.call(this,Qi.La,m)}H(ya,Se);function Xs(m){const w=Qs();ft(w,new ya(w))}Qi.STAT_EVENT="statevent";function xa(m,w){Se.call(this,Qi.STAT_EVENT,m),this.stat=w}H(xa,Se);function Rt(m){const w=Qs();ft(w,new xa(w,m))}Qi.Ma="timingevent";function Jt(m,w){Se.call(this,Qi.Ma,m),this.size=w}H(Jt,Se);function Zt(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return _.setTimeout(function(){m()},w)}function ui(){this.g=!0}ui.prototype.xa=function(){this.g=!1};function zn(m,w,S,P,W,ae){m.info(function(){if(m.g)if(ae)for(var ye="",rt=ae.split("&"),$t=0;$t<rt.length;$t++){var at=rt[$t].split("=");if(1<at.length){var _t=at[0];at=at[1];var kt=_t.split("_");ye=2<=kt.length&&kt[1]=="type"?ye+(_t+"="+at+"&"):ye+(_t+"=redacted&")}}else ye=null;else ye=ae;return"XMLHTTP REQ ("+P+") [attempt "+W+"]: "+w+`
`+S+`
`+ye})}function Ce(m,w,S,P,W,ae,ye){m.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+W+"]: "+w+`
`+S+`
`+ae+" "+ye})}function Ns(m,w,S,P){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Js(m,S)+(P?" "+P:"")})}function Xo(m,w){m.info(function(){return"TIMEOUT: "+w})}ui.prototype.info=function(){};function Js(m,w){if(!m.g)return w;if(!w)return null;try{var S=JSON.parse(w);if(S){for(m=0;m<S.length;m++)if(Array.isArray(S[m])){var P=S[m];if(!(2>P.length)){var W=P[1];if(Array.isArray(W)&&!(1>W.length)){var ae=W[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var ye=1;ye<W.length;ye++)W[ye]=""}}}}return ci(S)}catch{return w}}var Is={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ai;function Rn(){}H(Rn,Ko),Rn.prototype.g=function(){return new XMLHttpRequest},Rn.prototype.i=function(){return{}},Ai=new Rn;function xn(m,w,S,P){this.j=m,this.i=w,this.l=S,this.R=P||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zt}function zt(){this.i=null,this.g="",this.h=!1}var Jo={},ba={};function Ni(m,w,S){m.L=1,m.v=Jn(Ct(w)),m.m=S,m.P=!0,Xi(m,null)}function Xi(m,w){m.F=Date.now(),kr(m),m.A=Ct(m.v);var S=m.A,P=m.R;Array.isArray(P)||(P=[String(P)]),nl(S.i,"t",P),m.C=0,S=m.j.J,m.h=new zt,m.g=Xl(m.j,S?w:null,!m.m),0<m.O&&(m.M=new Zl(N(m.Y,m,m.g),m.O)),w=m.U,S=m.g,P=m.ca;var W="readystatechange";Array.isArray(W)||(W&&(Ws[0]=W.toString()),W=Ws);for(var ae=0;ae<W.length;ae++){var ye=qo(S,W[ae],P||w.handleEvent,!1,w.h||w);if(!ye)break;w.g[ye.key]=ye}w=m.H?k(m.H):{},m.m?(m.u||(m.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,w)):(m.u="GET",m.g.ea(m.A,m.u,null,w)),Xs(),zn(m.i,m.u,m.A,m.l,m.R,m.m)}xn.prototype.ca=function(m){m=m.target;const w=this.M;w&&Tn(m)==3?w.j():this.Y(m)},xn.prototype.Y=function(m){try{if(m==this.g)e:{const kt=Tn(this.g);var w=this.g.Ba();const Ds=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||il(this.g)))){this.J||kt!=4||w==7||(w==8||0>=Ds?Xs(3):Xs(2)),er(this);var S=this.g.Z();this.X=S;t:if($l(this)){var P=il(this.g);m="";var W=P.length,ae=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Ji(this);var ye="";break t}this.h.i=new _.TextDecoder}for(w=0;w<W;w++)this.h.h=!0,m+=this.h.i.decode(P[w],{stream:!(ae&&w==W-1)});P.length=0,this.h.g+=m,this.C=0,ye=this.h.g}else ye=this.g.oa();if(this.o=S==200,Ce(this.i,this.u,this.A,this.l,this.R,kt,S),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,$t=this.g;if((rt=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(rt)){var at=rt;break t}}at=null}if(S=at)Ns(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rs(this,S);else{this.o=!1,this.s=3,Rt(12),fn(this),Ji(this);break e}}if(this.P){S=!0;let At;for(;!this.J&&this.C<ye.length;)if(At=Cr(this,ye),At==ba){kt==4&&(this.s=4,Rt(14),S=!1),Ns(this.i,this.l,null,"[Incomplete Response]");break}else if(At==Jo){this.s=4,Rt(15),Ns(this.i,this.l,ye,"[Invalid Chunk]"),S=!1;break}else Ns(this.i,this.l,At,null),Rs(this,At);if($l(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||ye.length!=0||this.h.h||(this.s=1,Rt(16),S=!1),this.o=this.o&&S,!S)Ns(this.i,this.l,ye,"[Invalid Chunked Response]"),fn(this),Ji(this);else if(0<ye.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+ye.length),ar(_t),_t.M=!0,Rt(11))}}else Ns(this.i,this.l,ye,null),Rs(this,ye);kt==4&&fn(this),this.o&&!this.J&&(kt==4?rl(this.j,this):(this.o=!1,kr(this)))}else lu(this.g),S==400&&0<ye.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),fn(this),Ji(this)}}}catch{}finally{}};function $l(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Cr(m,w){var S=m.C,P=w.indexOf(`
`,S);return P==-1?ba:(S=Number(w.substring(S,P)),isNaN(S)?Jo:(P+=1,P+S>w.length?ba:(w=w.slice(P,P+S),m.C=P+S,w)))}xn.prototype.cancel=function(){this.J=!0,fn(this)};function kr(m){m.S=Date.now()+m.I,Kl(m,m.I)}function Kl(m,w){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Zt(N(m.ba,m),w)}function er(m){m.B&&(_.clearTimeout(m.B),m.B=null)}xn.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Xo(this.i,this.A),this.L!=2&&(Xs(),Rt(17)),fn(this),this.s=2,Ji(this)):Kl(this,this.S-m)};function Ji(m){m.j.G==0||m.J||rl(m.j,m)}function fn(m){er(m);var w=m.M;w&&typeof w.ma=="function"&&w.ma(),m.M=null,As(m.U),m.g&&(w=m.g,m.g=null,w.abort(),w.ma())}function Rs(m,w){try{var S=m.j;if(S.G!=0&&(S.g==m||et(S.h,m))){if(!m.K&&et(S.h,m)&&S.G==3){try{var P=S.Da.g.parse(w)}catch{P=null}if(Array.isArray(P)&&P.length==3){var W=P;if(W[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<m.F)Ca(S),Na(S);else break e;Ia(S),Rt(18)}}else S.za=W[1],0<S.za-S.T&&37500>W[2]&&S.F&&S.v==0&&!S.C&&(S.C=Zt(N(S.Za,S),6e3));if(1>=ts(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ls(S,11)}else if((m.K||S.g==m)&&Ca(S),!oe(w))for(W=S.Da.g.parse(w),w=0;w<W.length;w++){let at=W[w];if(S.T=at[0],at=at[1],S.G==2)if(at[0]=="c"){S.K=at[1],S.ia=at[2];const _t=at[3];_t!=null&&(S.la=_t,S.j.info("VER="+S.la));const kt=at[4];kt!=null&&(S.Aa=kt,S.j.info("SVER="+S.Aa));const Ds=at[5];Ds!=null&&typeof Ds=="number"&&0<Ds&&(P=1.5*Ds,S.L=P,S.j.info("backChannelRequestTimeoutMs_="+P)),P=S;const At=m.g;if(At){const as=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(as){var ae=P.h;ae.g||as.indexOf("spdy")==-1&&as.indexOf("quic")==-1&&as.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(gt(ae,ae.h),ae.h=null))}if(P.D){const os=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;os&&(P.ya=os,ze(P.I,P.D,os))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-m.F,S.j.info("Handshake RTT: "+S.R+"ms")),P=S;var ye=m;if(P.qa=Pa(P,P.J?P.ia:null,P.W),ye.K){an(P.h,ye);var rt=ye,$t=P.L;$t&&(rt.I=$t),rt.B&&(er(rt),kr(rt)),P.g=ye}else Mi(P);0<S.i.length&&rr(S)}else at[0]!="stop"&&at[0]!="close"||Ls(S,7);else S.G==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Ls(S,7):Aa(S):at[0]!="noop"&&S.l&&S.l.ta(at),S.v=0)}}Xs(4)}catch{}}var tr=class{constructor(m,w){this.g=m,this.map=w}};function es(m){this.l=m||10,_.PerformanceNavigationTiming?(m=_.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(_.chrome&&_.chrome.loadTimes&&_.chrome.loadTimes()&&_.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pr(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ts(m){return m.h?1:m.g?m.g.size:0}function et(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function gt(m,w){m.g?m.g.add(w):m.h=w}function an(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}es.prototype.cancel=function(){if(this.i=ns(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ns(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const S of m.g.values())w=w.concat(S.D);return w}return D(m.i)}function nr(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(y(m)){for(var w=[],S=m.length,P=0;P<S;P++)w.push(m[P]);return w}w=[],S=0;for(P in m)w[S++]=m[P];return w}function ir(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(y(m)||typeof m=="string"){var w=[];m=m.length;for(var S=0;S<m;S++)w.push(S);return w}w=[],S=0;for(const P in m)w[S++]=P;return w}}}function Ke(m,w){if(m.forEach&&typeof m.forEach=="function")m.forEach(w,void 0);else if(y(m)||typeof m=="string")Array.prototype.forEach.call(m,w,void 0);else for(var S=ir(m),P=nr(m),W=P.length,ae=0;ae<W;ae++)w.call(void 0,P[ae],S&&S[ae],m)}var yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function el(m,w){if(m){m=m.split("&");for(var S=0;S<m.length;S++){var P=m[S].indexOf("="),W=null;if(0<=P){var ae=m[S].substring(0,P);W=m[S].substring(P+1)}else ae=m[S];w(ae,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Dt(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof Dt){this.h=m.h,Mr(this,m.j),this.o=m.o,this.g=m.g,Ii(this,m.s),this.l=m.l;var w=m.i,S=new Ci;S.i=w.i,w.g&&(S.g=new Map(w.g),S.h=w.h),Cn(this,S),this.m=m.m}else m&&(w=String(m).match(yt))?(this.h=!1,Mr(this,w[1]||"",!0),this.o=bn(w[2]||""),this.g=bn(w[3]||"",!0),Ii(this,w[4]),this.l=bn(w[5]||"",!0),Cn(this,w[6]||"",!0),this.m=bn(w[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}Dt.prototype.toString=function(){var m=[],w=this.j;w&&m.push(Ri(w,Cs,!0),":");var S=this.g;return(S||w=="file")&&(m.push("//"),(w=this.o)&&m.push(Ri(w,Cs,!0),"@"),m.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&m.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Ri(S,S.charAt(0)=="/"?tl:jr,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Ri(S,sr)),m.join("")};function Ct(m){return new Dt(m)}function Mr(m,w,S){m.j=S?bn(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function Ii(m,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);m.s=w}else m.s=null}function Cn(m,w,S){w instanceof Ci?(m.i=w,ei(m.i,m.h)):(S||(w=Ri(w,Ta)),m.i=new Ci(w,m.h))}function ze(m,w,S){m.i.set(w,S)}function Jn(m){return ze(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function bn(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ri(m,w,S){return typeof m=="string"?(m=encodeURI(m).replace(w,wa),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function wa(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Cs=/[#\/\?@]/g,jr=/[#\?:]/g,tl=/[#\?]/g,Ta=/[#\?@]/g,sr=/#/g;function Ci(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function kn(m){m.g||(m.g=new Map,m.h=0,m.i&&el(m.i,function(w,S){m.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}n=Ci.prototype,n.add=function(m,w){kn(this),this.i=null,m=De(this,m);var S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(w),this.h+=1,this};function is(m,w){kn(m),w=De(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function ki(m,w){return kn(m),w=De(m,w),m.g.has(w)}n.forEach=function(m,w){kn(this),this.g.forEach(function(S,P){S.forEach(function(W){m.call(w,W,P,this)},this)},this)},n.na=function(){kn(this);const m=Array.from(this.g.values()),w=Array.from(this.g.keys()),S=[];for(let P=0;P<w.length;P++){const W=m[P];for(let ae=0;ae<W.length;ae++)S.push(w[P])}return S},n.V=function(m){kn(this);let w=[];if(typeof m=="string")ki(this,m)&&(w=w.concat(this.g.get(De(this,m))));else{m=Array.from(this.g.values());for(let S=0;S<m.length;S++)w=w.concat(m[S])}return w},n.set=function(m,w){return kn(this),this.i=null,m=De(this,m),ki(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=this.V(m),0<m.length?String(m[0]):w):w};function nl(m,w,S){is(m,w),0<S.length&&(m.i=null,m.g.set(De(m,w),D(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(var S=0;S<w.length;S++){var P=w[S];const ae=encodeURIComponent(String(P)),ye=this.V(P);for(P=0;P<ye.length;P++){var W=ae;ye[P]!==""&&(W+="="+encodeURIComponent(String(ye[P]))),m.push(W)}}return this.i=m.join("&")};function De(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function ei(m,w){w&&!m.j&&(kn(m),m.i=null,m.g.forEach(function(S,P){var W=P.toLowerCase();P!=W&&(is(this,P),nl(this,W,S))},m)),m.j=w}function ut(m,w){const S=new ui;if(_.Image){const P=new Image;P.onload=F(Bn,S,"TestLoadImage: loaded",!0,w,P),P.onerror=F(Bn,S,"TestLoadImage: error",!1,w,P),P.onabort=F(Bn,S,"TestLoadImage: abort",!1,w,P),P.ontimeout=F(Bn,S,"TestLoadImage: timeout",!1,w,P),_.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=m}else w(!1)}function hi(m,w){const S=new ui,P=new AbortController,W=setTimeout(()=>{P.abort(),Bn(S,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:P.signal}).then(ae=>{clearTimeout(W),ae.ok?Bn(S,"TestPingServer: ok",!0,w):Bn(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(W),Bn(S,"TestPingServer: error",!1,w)})}function Bn(m,w,S,P,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),P(S)}catch{}}function ks(){this.g=new Ei}function di(m,w,S){const P=S||"";try{Ke(m,function(W,ae){let ye=W;b(W)&&(ye=ci(W)),w.push(P+ae+"="+encodeURIComponent(ye))})}catch(W){throw w.push(P+"type="+encodeURIComponent("_badmap")),W}}function Fn(m){this.l=m.Ub||null,this.j=m.eb||!1}H(Fn,Ko),Fn.prototype.g=function(){return new Pi(this.l,this.j)},Fn.prototype.i=function(m){return function(){return m}}({});function Pi(m,w){It.call(this),this.D=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}H(Pi,It),n=Pi.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=w,this.readyState=1,wn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(w.body=m),(this.D||_).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wt(this)),this.readyState=0},n.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,wn(this)),this.g&&(this.readyState=3,wn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof _.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ps(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ps(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}n.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?wt(this):wn(this),this.readyState==3&&Ps(this)}},n.Ra=function(m){this.g&&(this.response=this.responseText=m,wt(this))},n.Qa=function(m){this.g&&(this.response=m,wt(this))},n.ga=function(){this.g&&wt(this)};function wt(m){m.readyState=4,m.l=null,m.j=null,m.v=null,wn(m)}n.setRequestHeader=function(m,w){this.u.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=w.next();return m.join(`\r
`)};function wn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Ea(m){let w="";return ge(m,function(S,P){w+=P,w+=":",w+=S,w+=`\r
`}),w}function en(m,w,S){e:{for(P in S){var P=!1;break e}P=!0}P||(S=Ea(S),typeof m=="string"?S!=null&&encodeURIComponent(String(S)):ze(m,w,S))}function mt(m){It.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}H(mt,It);var Lr=/^https?$/i,Ms=["POST","PUT"];n=mt.prototype,n.Ha=function(m){this.J=m},n.ea=function(m,w,S,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ai.g(),this.v=this.o?Yo(this.o):Yo(Ai),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(ae){Yl(this,ae);return}if(m=S||"",S=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var W in P)S.set(W,P[W]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ae of P.keys())S.set(ae,P.get(ae));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),W=_.FormData&&m instanceof _.FormData,!(0<=Array.prototype.indexOf.call(Ms,w,void 0))||P||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,ye]of S)this.g.setRequestHeader(ae,ye);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mn(this),this.u=!0,this.g.send(m),this.u=!1}catch(ae){Yl(this,ae)}};function Yl(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.m=5,Dr(m),ss(m)}function Dr(m){m.A||(m.A=!0,ft(m,"complete"),ft(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,ft(this,"complete"),ft(this,"abort"),ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),mt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qe(this):this.bb())},n.bb=function(){Qe(this)};function Qe(m){if(m.h&&typeof f<"u"&&(!m.v[1]||Tn(m)!=4||m.Z()!=2)){if(m.u&&Tn(m)==4)yn(m.Ea,0,m);else if(ft(m,"readystatechange"),Tn(m)==4){m.h=!1;try{const ye=m.Z();e:switch(ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var P;if(P=ye===0){var W=String(m.D).match(yt)[1]||null;!W&&_.self&&_.self.location&&(W=_.self.location.protocol.slice(0,-1)),P=!Lr.test(W?W.toLowerCase():"")}S=P}if(S)ft(m,"complete"),ft(m,"success");else{m.m=6;try{var ae=2<Tn(m)?m.g.statusText:""}catch{ae=""}m.l=ae+" ["+m.Z()+"]",Dr(m)}}finally{ss(m)}}}}function ss(m,w){if(m.g){mn(m);const S=m.g,P=m.v[0]?()=>{}:null;m.g=null,m.v=null,w||ft(m,"ready");try{S.onreadystatechange=P}catch{}}}function mn(m){m.I&&(_.clearTimeout(m.I),m.I=null)}n.isActive=function(){return!!this.g};function Tn(m){return m.g?m.g.readyState:0}n.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),_a(w)}};function il(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function lu(m){const w={};m=(m.g&&2<=Tn(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<m.length;P++){if(oe(m[P]))continue;var S=Z(m[P]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=w[W]||[];w[W]=ae,ae.push(S)}G(w,function(P){return P.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function js(m,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||w}function Sa(m){this.Aa=0,this.i=[],this.j=new ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=js("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=js("baseRetryDelayMs",5e3,m),this.cb=js("retryDelaySeedMs",1e4,m),this.Wa=js("forwardChannelMaxRetries",2,m),this.wa=js("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new es(m&&m.concurrentRequestLimit),this.Da=new ks,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Sa.prototype,n.la=8,n.G=1,n.connect=function(m,w,S,P){Rt(0),this.W=m,this.H=w||{},S&&P!==void 0&&(this.H.OSID=S,this.H.OAID=P),this.F=this.X,this.I=Pa(this,null,this.W),rr(this)};function Aa(m){if(Wl(m),m.G==3){var w=m.U++,S=Ct(m.I);if(ze(S,"SID",m.K),ze(S,"RID",w),ze(S,"TYPE","terminate"),Or(m,S),w=new xn(m,m.j,w),w.L=2,w.v=Jn(Ct(S)),S=!1,_.navigator&&_.navigator.sendBeacon)try{S=_.navigator.sendBeacon(w.v.toString(),"")}catch{}!S&&_.Image&&(new Image().src=w.v,S=!0),S||(w.g=Xl(w.j,null),w.g.ea(w.v)),w.F=Date.now(),kr(w)}Ql(m)}function Na(m){m.g&&(ar(m),m.g.cancel(),m.g=null)}function Wl(m){Na(m),m.u&&(_.clearTimeout(m.u),m.u=null),Ca(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&_.clearTimeout(m.s),m.s=null)}function rr(m){if(!Pr(m.h)&&!m.s){m.s=!0;var w=m.Ga;ce||_e(),J||(ce(),J=!0),Ee.add(w,m),m.B=0}}function cu(m,w){return ts(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=w.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Zt(N(m.Ga,m,w),ka(m,m.B)),m.B++,!0)}n.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const W=new xn(this,this.j,m);let ae=this.o;if(this.S&&(ae?(ae=k(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(W.H=ae,ae=null),this.P)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var P=this.i[S];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(w+=P,4096<w){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=sl(this,W,w),S=Ct(this.I),ze(S,"RID",m),ze(S,"CVER",22),this.D&&ze(S,"X-HTTP-Session-Id",this.D),Or(this,S),ae&&(this.O?w="headers="+encodeURIComponent(String(Ea(ae)))+"&"+w:this.m&&en(S,this.m,ae)),gt(this.h,W),this.Ua&&ze(S,"TYPE","init"),this.P?(ze(S,"$req",w),ze(S,"SID","null"),W.T=!0,Ni(W,S,null)):Ni(W,S,w),this.G=2}}else this.G==3&&(m?Hn(this,m):this.i.length==0||Pr(this.h)||Hn(this))};function Hn(m,w){var S;w?S=w.l:S=m.U++;const P=Ct(m.I);ze(P,"SID",m.K),ze(P,"RID",S),ze(P,"AID",m.T),Or(m,P),m.m&&m.o&&en(P,m.m,m.o),S=new xn(m,m.j,S,m.B+1),m.m===null&&(S.H=m.o),w&&(m.i=w.D.concat(m.i)),w=sl(m,S,1e3),S.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),gt(m.h,S),Ni(S,P,w)}function Or(m,w){m.H&&ge(m.H,function(S,P){ze(w,P,S)}),m.l&&Ke({},function(S,P){ze(w,P,S)})}function sl(m,w,S){S=Math.min(m.i.length,S);var P=m.l?N(m.l.Na,m.l,m):null;e:{var W=m.i;let ae=-1;for(;;){const ye=["count="+S];ae==-1?0<S?(ae=W[0].g,ye.push("ofs="+ae)):ae=0:ye.push("ofs="+ae);let rt=!0;for(let $t=0;$t<S;$t++){let at=W[$t].g;const _t=W[$t].map;if(at-=ae,0>at)ae=Math.max(0,W[$t].g-100),rt=!1;else try{di(_t,ye,"req"+at+"_")}catch{P&&P(_t)}}if(rt){P=ye.join("&");break e}}}return m=m.i.splice(0,S),w.D=m,P}function Mi(m){if(!m.g&&!m.u){m.Y=1;var w=m.Fa;ce||_e(),J||(ce(),J=!0),Ee.add(w,m),m.v=0}}function Ia(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Zt(N(m.Fa,m),ka(m,m.v)),m.v++,!0)}n.Fa=function(){if(this.u=null,Ra(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Zt(N(this.ab,this),m)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Na(this),Ra(this))};function ar(m){m.A!=null&&(_.clearTimeout(m.A),m.A=null)}function Ra(m){m.g=new xn(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var w=Ct(m.qa);ze(w,"RID","rpc"),ze(w,"SID",m.K),ze(w,"AID",m.T),ze(w,"CI",m.F?"0":"1"),!m.F&&m.ja&&ze(w,"TO",m.ja),ze(w,"TYPE","xmlhttp"),Or(m,w),m.m&&m.o&&en(w,m.m,m.o),m.L&&(m.g.I=m.L);var S=m.g;m=m.ia,S.L=1,S.v=Jn(Ct(w)),S.m=null,S.P=!0,Xi(S,m)}n.Za=function(){this.C!=null&&(this.C=null,Na(this),Ia(this),Rt(19))};function Ca(m){m.C!=null&&(_.clearTimeout(m.C),m.C=null)}function rl(m,w){var S=null;if(m.g==w){Ca(m),ar(m),m.g=null;var P=2}else if(et(m.h,w))S=w.D,an(m.h,w),P=1;else return;if(m.G!=0){if(w.o)if(P==1){S=w.m?w.m.length:0,w=Date.now()-w.F;var W=m.B;P=Qs(),ft(P,new Jt(P,S)),rr(m)}else Mi(m);else if(W=w.s,W==3||W==0&&0<w.X||!(P==1&&cu(m,w)||P==2&&Ia(m)))switch(S&&0<S.length&&(w=m.h,w.i=w.i.concat(S)),W){case 1:Ls(m,5);break;case 4:Ls(m,10);break;case 3:Ls(m,6);break;default:Ls(m,2)}}}function ka(m,w){let S=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(S*=2),S*w}function Ls(m,w){if(m.j.info("Error code "+w),w==2){var S=N(m.fb,m),P=m.Xa;const W=!P;P=new Dt(P||"//www.google.com/images/cleardot.gif"),_.location&&_.location.protocol=="http"||Mr(P,"https"),Jn(P),W?ut(P.toString(),S):hi(P.toString(),S)}else Rt(2);m.G=0,m.l&&m.l.sa(w),Ql(m),Wl(m)}n.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Ql(m){if(m.G=0,m.ka=[],m.l){const w=ns(m.h);(w.length!=0||m.i.length!=0)&&(q(m.ka,w),q(m.ka,m.i),m.h.i.length=0,D(m.i),m.i.length=0),m.l.ra()}}function Pa(m,w,S){var P=S instanceof Dt?Ct(S):new Dt(S);if(P.g!="")w&&(P.g=w+"."+P.g),Ii(P,P.s);else{var W=_.location;P=W.protocol,w=w?w+"."+W.hostname:W.hostname,W=+W.port;var ae=new Dt(null);P&&Mr(ae,P),w&&(ae.g=w),W&&Ii(ae,W),S&&(ae.l=S),P=ae}return S=m.D,w=m.ya,S&&w&&ze(P,S,w),ze(P,"VER",m.la),Or(m,P),P}function Xl(m,w,S){if(w&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Ca&&!m.pa?new mt(new Fn({eb:S})):new mt(m.pa),w.Ha(m.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function al(){}n=al.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vr(){}Vr.prototype.g=function(m,w){return new on(m,w)};function on(m,w){It.call(this),this.g=new Sa(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(m?m["X-WebChannel-Client-Profile"]=w.va:m={"X-WebChannel-Client-Profile":w.va}),this.g.S=m,(m=w&&w.Sb)&&!oe(m)&&(this.g.m=m),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!oe(w)&&(this.g.D=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new qn(this)}H(on,It),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Aa(this.g)},on.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.u&&(S={},S.__data__=ci(m),m=S);w.i.push(new tr(w.Ya++,m)),w.G==3&&rr(w)},on.prototype.N=function(){this.g.l=null,delete this.j,Aa(this.g),delete this.g,on.aa.N.call(this)};function rs(m){Wi.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const S in w){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}H(rs,Wi);function Jl(){Wo.call(this),this.status=1}H(Jl,Wo);function qn(m){this.g=m}H(qn,al),qn.prototype.ua=function(){ft(this.g,"a")},qn.prototype.ta=function(m){ft(this.g,new rs(m))},qn.prototype.sa=function(m){ft(this.g,new Jl)},qn.prototype.ra=function(){ft(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,aS=function(){return new Vr},rS=function(){return Qs()},sS=Qi,u_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Is.NO_ERROR=0,Is.TIMEOUT=8,Is.HTTP_ERROR=6,Af=Is,Si.COMPLETE="complete",iS=Si,va.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",It.prototype.listen=It.prototype.K,rh=va,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,nS=mt}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const e0="@firebase/firestore",t0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$n.UNAUTHENTICATED=new $n(null),$n.GOOGLE_CREDENTIALS=new $n("google-credentials-uid"),$n.FIRST_PARTY=new $n("first-party-uid"),$n.MOCK_USER=new $n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new Gh("@firebase/firestore");function Cc(){return Ll.logLevel}function Te(n,...e){if(Ll.logLevel<=st.DEBUG){const t=e.map(hv);Ll.debug(`Firestore (${tu}): ${n}`,...t)}}function ua(n,...e){if(Ll.logLevel<=st.ERROR){const t=e.map(hv);Ll.error(`Firestore (${tu}): ${n}`,...t)}}function Zc(n,...e){if(Ll.logLevel<=st.WARN){const t=e.map(hv);Ll.warn(`Firestore (${tu}): ${n}`,...t)}}function hv(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,oS(n,s,t)}function oS(n,e,t){let s=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ua(s),new Error(s)}function vt(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||oS(e,o,s)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ws{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($n.UNAUTHENTICATED))}shutdown(){}}class PM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MM{constructor(e){this.t=e,this.currentUser=$n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,t(y)):Promise.resolve();let u=new To;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new To,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},_=y=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>_(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?_(y):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new To)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(vt(typeof s.accessToken=="string",31837,{l:s}),new lS(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new $n(e)}}class jM{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=$n.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LM{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new jM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t($n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const s=u=>{u.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new n0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new n0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OM(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function ot(n,e){return n<e?-1:n>e?1:0}function h_(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),u=e.charAt(s);if(o!==u)return Pg(o)===Pg(u)?ot(o,u):Pg(o)?1:-1}return ot(n.length,e.length)}const VM=55296,UM=57343;function Pg(n){const e=n.charCodeAt(0);return e>=VM&&e<=UM}function $c(n,e,t){return n.length===e.length&&n.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="__name__";class pr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Fe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Fe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=pr.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return ot(e.length,t.length)}static compareSegments(e,t){const s=pr.isNumericId(e),o=pr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?pr.extractNumericId(e).compare(pr.extractNumericId(t)):h_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class jt extends pr{construct(e,t,s){return new jt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new jt(t)}static emptyPath(){return new jt([])}}const zM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends pr{construct(e,t,s){return new Dn(e,t,s)}static isValidIdentifier(e){return zM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i0}static keyField(){return new Dn([i0])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new we(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let f=!1;for(;o<e.length;){const _=e[o];if(_==="\\"){if(o+1===e.length)throw new we(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new we(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else _==="`"?(f=!f,o++):_!=="."||f?(s+=_,o++):(u(),o++)}if(u(),f)throw new we(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(jt.fromString(e))}static fromName(e){return new Le(jt.fromString(e).popFirst(5))}static empty(){return new Le(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new jt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n,e,t){if(!t)throw new we(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BM(n,e,t,s){if(e===!0&&s===!0)throw new we(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function s0(n){if(!Le.isDocumentKey(n))throw new we(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function r0(n){if(Le.isDocumentKey(n))throw new we(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function vm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Fe(12329,{type:typeof n})}function _s(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vm(n);throw new we(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qh(n,e){if(!uS(n))throw new we(he.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const f=n[s];if(o&&typeof f!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new we(he.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=-62135596800,o0=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*o0);return new ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<a0)throw new we(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/o0}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qh(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-a0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:dn("string",ct._jsonSchemaVersion),seconds:dn("number"),nanoseconds:dn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new ct(0,0))}static max(){return new Ye(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=-1;function FM(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ye.fromTimestamp(s===1e9?new ct(t+1,0):new ct(t,s));return new No(o,Le.empty(),e)}function HM(n){return new No(n.readTime,n.key,Rh)}class No{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new No(Ye.min(),Le.empty(),Rh)}static max(){return new No(Ye.max(),Le.empty(),Rh)}}function qM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:ot(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==GM)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,s)=>{t(e)})}static reject(e){return new fe((t,s)=>{s(e)})}static waitFor(e){return new fe((t,s)=>{let o=0,u=0,f=!1;e.forEach(_=>{++o,_.next(()=>{++u,f&&u===o&&t()},y=>s(y))}),f=!0,u===o&&t()})}static or(e){let t=fe.resolve(!1);for(const s of e)t=t.next(o=>o?fe.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new fe((s,o)=>{const u=e.length,f=new Array(u);let _=0;for(let y=0;y<u;y++){const b=y;t(e[b]).next(E=>{f[b]=E,++_,_===u&&s(f)},E=>o(E))}})}static doWhile(e,t){return new fe((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function $M(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function iu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ym.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv=-1;function xm(n){return n==null}function Qf(n){return n===0&&1/n==-1/0}function KM(n){return typeof n=="number"&&Number.isInteger(n)&&!Qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="";function YM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=l0(e)),e=WM(n.get(t),e);return l0(e)}function WM(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const u=n.charAt(o);switch(u){case"\0":t+="";break;case hS:t+="";break;default:t+=u}}return t}function l0(n){return n+hS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new df(this.root,e,this.comparator,!1)}getReverseIterator(){return new df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new df(this.root,e,this.comparator,!0)}}class df{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Ln.RED,this.left=o??Ln.EMPTY,this.right=u??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Ln(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ln.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Fe(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe(57766)}get value(){throw Fe(16141)}get color(){throw Fe(16727)}get left(){throw Fe(29726)}get right(){throw Fe(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new qi([])}unionWith(e){let t=new _n(Dn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new qi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $c(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new fS("Invalid base64 string: "+u):u}}(e);return new On(t)}static fromUint8Array(e){const t=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new On(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const QM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(n){if(vt(!!n,39018),typeof n=="string"){let e=0;const t=QM.exec(n);if(vt(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ro(n){return typeof n=="string"?On.fromBase64String(n):On.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="server_timestamp",pS="__type__",gS="__previous_value__",_S="__local_write_time__";function mv(n){return(n?.mapValue?.fields||{})[pS]?.stringValue===mS}function bm(n){const e=n.mapValue.fields[gS];return mv(e)?bm(e):e}function Ch(n){const e=Io(n.mapValue.fields[_S].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,t,s,o,u,f,_,y,b,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.longPollingOptions=y,this.useFetchStreams=b,this.isUsingEmulator=E}}const Xf="(default)";class kh{constructor(e,t){this.projectId=e,this.database=t||Xf}static empty(){return new kh("","")}get isDefaultDatabase(){return this.database===Xf}isEqual(e){return e instanceof kh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="__type__",JM="__max__",ff={mapValue:{}},yS="__vector__",Jf="value";function Co(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mv(n)?4:tj(n)?9007199254740991:ej(n)?10:11:Fe(28295,{value:n})}function wr(n,e){if(n===e)return!0;const t=Co(n);if(t!==Co(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ch(n).isEqual(Ch(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Io(o.timestampValue),_=Io(u.timestampValue);return f.seconds===_.seconds&&f.nanos===_.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,u){return Ro(o.bytesValue).isEqual(Ro(u.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,u){return sn(o.geoPointValue.latitude)===sn(u.geoPointValue.latitude)&&sn(o.geoPointValue.longitude)===sn(u.geoPointValue.longitude)}(n,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return sn(o.integerValue)===sn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=sn(o.doubleValue),_=sn(u.doubleValue);return f===_?Qf(f)===Qf(_):isNaN(f)&&isNaN(_)}return!1}(n,e);case 9:return $c(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},_=u.mapValue.fields||{};if(c0(f)!==c0(_))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(_[y]===void 0||!wr(f[y],_[y])))return!1;return!0}(n,e);default:return Fe(52216,{left:n})}}function Ph(n,e){return(n.values||[]).find(t=>wr(t,e))!==void 0}function Kc(n,e){if(n===e)return 0;const t=Co(n),s=Co(e);if(t!==s)return ot(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ot(n.booleanValue,e.booleanValue);case 2:return function(u,f){const _=sn(u.integerValue||u.doubleValue),y=sn(f.integerValue||f.doubleValue);return _<y?-1:_>y?1:_===y?0:isNaN(_)?isNaN(y)?0:-1:1}(n,e);case 3:return h0(n.timestampValue,e.timestampValue);case 4:return h0(Ch(n),Ch(e));case 5:return h_(n.stringValue,e.stringValue);case 6:return function(u,f){const _=Ro(u),y=Ro(f);return _.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(u,f){const _=u.split("/"),y=f.split("/");for(let b=0;b<_.length&&b<y.length;b++){const E=ot(_[b],y[b]);if(E!==0)return E}return ot(_.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,f){const _=ot(sn(u.latitude),sn(f.latitude));return _!==0?_:ot(sn(u.longitude),sn(f.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return d0(n.arrayValue,e.arrayValue);case 10:return function(u,f){const _=u.fields||{},y=f.fields||{},b=_[Jf]?.arrayValue,E=y[Jf]?.arrayValue,I=ot(b?.values?.length||0,E?.values?.length||0);return I!==0?I:d0(b,E)}(n.mapValue,e.mapValue);case 11:return function(u,f){if(u===ff.mapValue&&f===ff.mapValue)return 0;if(u===ff.mapValue)return 1;if(f===ff.mapValue)return-1;const _=u.fields||{},y=Object.keys(_),b=f.fields||{},E=Object.keys(b);y.sort(),E.sort();for(let I=0;I<y.length&&I<E.length;++I){const N=h_(y[I],E[I]);if(N!==0)return N;const F=Kc(_[y[I]],b[E[I]]);if(F!==0)return F}return ot(y.length,E.length)}(n.mapValue,e.mapValue);default:throw Fe(23264,{he:t})}}function h0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ot(n,e);const t=Io(n),s=Io(e),o=ot(t.seconds,s.seconds);return o!==0?o:ot(t.nanos,s.nanos)}function d0(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Kc(t[o],s[o]);if(u)return u}return ot(t.length,s.length)}function Yc(n){return d_(n)}function d_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=Io(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ro(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=d_(u);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${d_(t.fields[f])}`;return o+"}"}(n.mapValue):Fe(61005,{value:n})}function Nf(n){switch(Co(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bm(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ro(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Nf(u),0)}(n.arrayValue);case 10:case 11:return function(s){let o=0;return Bo(s.fields,(u,f)=>{o+=u.length+Nf(f)}),o}(n.mapValue);default:throw Fe(13486,{value:n})}}function f0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function f_(n){return!!n&&"integerValue"in n}function pv(n){return!!n&&"arrayValue"in n}function m0(n){return!!n&&"nullValue"in n}function p0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function If(n){return!!n&&"mapValue"in n}function ej(n){return(n?.mapValue?.fields||{})[vS]?.stringValue===yS}function fh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fh(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fh(n.arrayValue.values[t]);return e}return{...n}}function tj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(t)}setAll(e){let t=Dn.emptyPath(),s={},o=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const y=this.getFieldsMap(t);this.applyChanges(y,s,o),s={},o=[],t=_.popLast()}f?s[_.lastSegment()]=fh(f):o.push(_.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];If(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Bo(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new yi(fh(this.value))}}function xS(n){const e=[];return Bo(n.fields,(t,s)=>{const o=new Dn([t]);if(If(s)){const u=xS(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new qi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,t,s,o,u,f,_){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=_}static newInvalidDocument(e){return new Yn(e,0,Ye.min(),Ye.min(),Ye.min(),yi.empty(),0)}static newFoundDocument(e,t,s,o){return new Yn(e,1,t,Ye.min(),s,o,0)}static newNoDocument(e,t){return new Yn(e,2,t,Ye.min(),Ye.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Ye.min(),Ye.min(),yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){this.position=e,this.inclusive=t}}function g0(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const u=e[o],f=n.position[o];if(u.field.isKeyField()?s=Le.comparator(Le.fromName(f.referenceValue),t.key):s=Kc(f,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function _0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t="asc"){this.field=e,this.dir=t}}function nj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{}class hn extends bS{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new sj(e,t,s):t==="array-contains"?new oj(e,s):t==="in"?new lj(e,s):t==="not-in"?new cj(e,s):t==="array-contains-any"?new uj(e,s):new hn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new rj(e,s):new aj(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Kc(t,this.value)):t!==null&&Co(this.value)===Co(t)&&this.matchesComparison(Kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ks extends bS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ks(e,t)}matches(e){return wS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wS(n){return n.op==="and"}function TS(n){return ij(n)&&wS(n)}function ij(n){for(const e of n.filters)if(e instanceof Ks)return!1;return!0}function m_(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+Yc(n.value);if(TS(n))return n.filters.map(e=>m_(e)).join(",");{const e=n.filters.map(t=>m_(t)).join(",");return`${n.op}(${e})`}}function ES(n,e){return n instanceof hn?function(s,o){return o instanceof hn&&s.op===o.op&&s.field.isEqual(o.field)&&wr(s.value,o.value)}(n,e):n instanceof Ks?function(s,o){return o instanceof Ks&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,_)=>u&&ES(f,o.filters[_]),!0):!1}(n,e):void Fe(19439)}function SS(n){return n instanceof hn?function(t){return`${t.field.canonicalString()} ${t.op} ${Yc(t.value)}`}(n):n instanceof Ks?function(t){return t.op.toString()+" {"+t.getFilters().map(SS).join(" ,")+"}"}(n):"Filter"}class sj extends hn{constructor(e,t,s){super(e,t,s),this.key=Le.fromName(s.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class rj extends hn{constructor(e,t){super(e,"in",t),this.keys=AS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class aj extends hn{constructor(e,t){super(e,"not-in",t),this.keys=AS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AS(n,e){return(e.arrayValue?.values||[]).map(t=>Le.fromName(t.referenceValue))}class oj extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pv(t)&&Ph(t.arrayValue,this.value)}}class lj extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ph(this.value.arrayValue,t)}}class cj extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ph(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ph(this.value.arrayValue,t)}}class uj extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ph(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,t=null,s=[],o=[],u=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=_,this.Te=null}}function v0(n,e=null,t=[],s=[],o=null,u=null,f=null){return new hj(n,e,t,s,o,u,f)}function gv(n){const e=We(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>m_(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),xm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yc(s)).join(",")),e.Te=t}return e.Te}function _v(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ES(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_0(n.startAt,e.startAt)&&_0(n.endAt,e.endAt)}function p_(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,t=null,s=[],o=[],u=null,f="F",_=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=_,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dj(n,e,t,s,o,u,f,_){return new su(n,e,t,s,o,u,f,_)}function wm(n){return new su(n)}function y0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NS(n){return n.collectionGroup!==null}function mh(n){const e=We(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let _=new _n(Dn.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(b=>{b.isInequality()&&(_=_.add(b.field))})}),_})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Mh(u,s))}),t.has(Dn.keyField().canonicalString())||e.Ie.push(new Mh(Dn.keyField(),s))}return e.Ie}function vr(n){const e=We(n);return e.Ee||(e.Ee=fj(e,mh(n))),e.Ee}function fj(n,e){if(n.limitType==="F")return v0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Mh(o.field,u)});const t=n.endAt?new em(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new em(n.startAt.position,n.startAt.inclusive):null;return v0(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function g_(n,e){const t=n.filters.concat([e]);return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function __(n,e,t){return new su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tm(n,e){return _v(vr(n),vr(e))&&n.limitType===e.limitType}function IS(n){return`${gv(vr(n))}|lt:${n.limitType}`}function kc(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>SS(o)).join(", ")}]`),xm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Yc(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Yc(o)).join(",")),`Target(${s})`}(vr(n))}; limitType=${n.limitType})`}function Em(n,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Le.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(n,e)&&function(s,o){for(const u of mh(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(n,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(n,e)&&function(s,o){return!(s.startAt&&!function(f,_,y){const b=g0(f,_,y);return f.inclusive?b<=0:b<0}(s.startAt,mh(s),o)||s.endAt&&!function(f,_,y){const b=g0(f,_,y);return f.inclusive?b>=0:b>0}(s.endAt,mh(s),o))}(n,e)}function mj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RS(n){return(e,t)=>{let s=!1;for(const o of mh(n)){const u=pj(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function pj(n,e,t){const s=n.field.isKeyField()?Le.comparator(e.key,t.key):function(u,f,_){const y=f.data.field(u),b=_.data.field(u);return y!==null&&b!==null?Kc(y,b):Fe(42886)}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Fe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return dS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new qt(Le.comparator);function ha(){return gj}const CS=new qt(Le.comparator);function ah(...n){let e=CS;for(const t of n)e=e.insert(t.key,t);return e}function kS(n){let e=CS;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Rl(){return ph()}function PS(){return ph()}function ph(){return new Bl(n=>n.toString(),(n,e)=>n.isEqual(e))}const _j=new qt(Le.comparator),vj=new _n(Le.comparator);function lt(...n){let e=vj;for(const t of n)e=e.add(t);return e}const yj=new _n(ot);function xj(){return yj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qf(e)?"-0":e}}function MS(n){return{integerValue:""+n}}function jS(n,e){return KM(e)?MS(e):vv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function bj(n,e,t){return n instanceof tm?function(o,u){const f={fields:{[pS]:{stringValue:mS},[_S]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&mv(u)&&(u=bm(u)),u&&(f.fields[gS]=u),{mapValue:f}}(t,e):n instanceof jh?DS(n,e):n instanceof Lh?OS(n,e):function(o,u){const f=LS(o,u),_=x0(f)+x0(o.Ae);return f_(f)&&f_(o.Ae)?MS(_):vv(o.serializer,_)}(n,e)}function wj(n,e,t){return n instanceof jh?DS(n,e):n instanceof Lh?OS(n,e):t}function LS(n,e){return n instanceof Dh?function(s){return f_(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class tm extends Sm{}class jh extends Sm{constructor(e){super(),this.elements=e}}function DS(n,e){const t=VS(e);for(const s of n.elements)t.some(o=>wr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Lh extends Sm{constructor(e){super(),this.elements=e}}function OS(n,e){let t=VS(e);for(const s of n.elements)t=t.filter(o=>!wr(o,s));return{arrayValue:{values:t}}}class Dh extends Sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function x0(n){return sn(n.integerValue||n.doubleValue)}function VS(n){return pv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e,t){this.field=e,this.transform=t}}function Ej(n,e){return n.field.isEqual(e.field)&&function(s,o){return s instanceof jh&&o instanceof jh||s instanceof Lh&&o instanceof Lh?$c(s.elements,o.elements,wr):s instanceof Dh&&o instanceof Dh?wr(s.Ae,o.Ae):s instanceof tm&&o instanceof tm}(n.transform,e.transform)}class Sj{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Am{}function US(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yv(n.key,vs.none()):new Xh(n.key,n.data,vs.none());{const t=n.data,s=yi.empty();let o=new _n(Dn.comparator);for(let u of e.fields)if(!o.has(u)){let f=t.field(u);f===null&&u.length>1&&(u=u.popLast(),f=t.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Fo(n.key,s,new qi(o.toArray()),vs.none())}}function Aj(n,e,t){n instanceof Xh?function(o,u,f){const _=o.value.clone(),y=w0(o.fieldTransforms,u,f.transformResults);_.setAll(y),u.convertToFoundDocument(f.version,_).setHasCommittedMutations()}(n,e,t):n instanceof Fo?function(o,u,f){if(!Rf(o.precondition,u))return void u.convertToUnknownDocument(f.version);const _=w0(o.fieldTransforms,u,f.transformResults),y=u.data;y.setAll(zS(o)),y.setAll(_),u.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(n,e,t):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,t)}function gh(n,e,t,s){return n instanceof Xh?function(u,f,_,y){if(!Rf(u.precondition,f))return _;const b=u.value.clone(),E=T0(u.fieldTransforms,y,f);return b.setAll(E),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null}(n,e,t,s):n instanceof Fo?function(u,f,_,y){if(!Rf(u.precondition,f))return _;const b=T0(u.fieldTransforms,y,f),E=f.data;return E.setAll(zS(u)),E.setAll(b),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),_===null?null:_.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(n,e,t,s):function(u,f,_){return Rf(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):_}(n,e,t)}function Nj(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),u=LS(s.transform,o||null);u!=null&&(t===null&&(t=yi.empty()),t.set(s.field,u))}return t||null}function b0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&$c(s,o,(u,f)=>Ej(u,f))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xh extends Am{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fo extends Am{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function zS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function w0(n,e,t){const s=new Map;vt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const u=n[o],f=u.transform,_=e.data.field(u.field);s.set(u.field,wj(f,_,t[o]))}return s}function T0(n,e,t){const s=new Map;for(const o of n){const u=o.transform,f=t.data.field(o.field);s.set(o.field,bj(u,f,e))}return s}class yv extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ij extends Am{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Aj(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=gh(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=gh(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=PS();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let _=this.applyToLocalView(f,u.mutatedFields);_=t.has(o.key)?null:_;const y=US(f,_);y!==null&&s.set(o.key,y),f.isValidDocument()||f.convertToNoDocument(Ye.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),lt())}isEqual(e){return this.batchId===e.batchId&&$c(this.mutations,e.mutations,(t,s)=>b0(t,s))&&$c(this.baseMutations,e.baseMutations,(t,s)=>b0(t,s))}}class xv{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){vt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=function(){return _j}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new xv(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var un,dt;function Pj(n){switch(n){case he.OK:return Fe(64938);case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0;default:return Fe(15467,{code:n})}}function BS(n){if(n===void 0)return ua("GRPC error has no .code"),he.UNKNOWN;switch(n){case un.OK:return he.OK;case un.CANCELLED:return he.CANCELLED;case un.UNKNOWN:return he.UNKNOWN;case un.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case un.INTERNAL:return he.INTERNAL;case un.UNAVAILABLE:return he.UNAVAILABLE;case un.UNAUTHENTICATED:return he.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case un.NOT_FOUND:return he.NOT_FOUND;case un.ALREADY_EXISTS:return he.ALREADY_EXISTS;case un.PERMISSION_DENIED:return he.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case un.ABORTED:return he.ABORTED;case un.OUT_OF_RANGE:return he.OUT_OF_RANGE;case un.UNIMPLEMENTED:return he.UNIMPLEMENTED;case un.DATA_LOSS:return he.DATA_LOSS;default:return Fe(39323,{code:n})}}(dt=un||(un={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=new wo([4294967295,4294967295],0);function E0(n){const e=Mj().encode(n),t=new tS;return t.update(e),new Uint8Array(t.digest())}function S0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new wo([t,s],0),new wo([o,u],0)]}class bv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new oh(`Invalid padding: ${t}`);if(s<0)throw new oh(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new oh(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new oh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wo.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(wo.fromNumber(s)));return o.compare(jj)===1&&(o=new wo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=E0(e),[s,o]=S0(t);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new bv(u,o,t);return s.forEach(_=>f.insert(_)),f}insert(e){if(this.ge===0)return;const t=E0(e),[s,o]=S0(t);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.Se(f)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Nm(Ye.min(),o,new qt(ot),ha(),lt())}}class Jh{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Jh(s,t,lt(),lt(),lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class FS{constructor(e,t){this.targetId=e,this.Ce=t}}class HS{constructor(e,t,s=On.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class A0{constructor(){this.ve=0,this.Fe=N0(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),t=lt(),s=lt();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Fe(38017,{changeType:u})}}),new Jh(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=N0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Lj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ha(),this.Je=mf(),this.He=mf(),this.Ye=new qt(ot)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Fe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((s,o)=>{this.rt(o)&&t(o)})}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(p_(u))if(s===0){const f=new Le(u.path);this.et(t,f,Yn.newNoDocument(f,Ye.min()))}else vt(s===1,20013,{expectedCount:s});else{const f=this._t(t);if(f!==s){const _=this.ut(e),y=_?this.ct(_,e,f):1;if(y!==0){this.it(t);const b=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,b)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let f,_;try{f=Ro(s).toUint8Array()}catch(y){if(y instanceof fS)return Zc("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{_=new bv(f,o,u)}catch(y){return Zc(y instanceof oh?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return _.ge===0?null:_}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const f=this.Ge.ht(),_=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(_)||(this.et(t,u,null),o++)}),o}Tt(e){const t=new Map;this.ze.forEach((u,f)=>{const _=this.ot(f);if(_){if(u.current&&p_(_.target)){const y=new Le(_.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Yn.newNoDocument(y,e))}u.Be&&(t.set(f,u.ke()),u.qe())}});let s=lt();this.He.forEach((u,f)=>{let _=!0;f.forEachWhile(y=>{const b=this.ot(y);return!b||b.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)}),_&&(s=s.add(u))}),this.je.forEach((u,f)=>f.setReadTime(e));const o=new Nm(e,t,this.Ye,this.je,s);return this.je=ha(),this.Je=mf(),this.He=mf(),this.Ye=new qt(ot),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new A0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _n(ot),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _n(ot),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new A0),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function mf(){return new qt(Le.comparator)}function N0(){return new qt(Le.comparator)}const Dj={asc:"ASCENDING",desc:"DESCENDING"},Oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vj={and:"AND",or:"OR"};class Uj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function v_(n,e){return n.useProto3Json||xm(e)?e:{value:e}}function nm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zj(n,e){return nm(n,e.toTimestamp())}function yr(n){return vt(!!n,49232),Ye.fromTimestamp(function(t){const s=Io(t);return new ct(s.seconds,s.nanos)}(n))}function wv(n,e){return y_(n,e).canonicalString()}function y_(n,e){const t=function(o){return new jt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function GS(n){const e=jt.fromString(n);return vt(WS(e),10190,{key:e.toString()}),e}function x_(n,e){return wv(n.databaseId,e.path)}function Mg(n,e){const t=GS(e);if(t.get(1)!==n.databaseId.projectId)throw new we(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le($S(t))}function ZS(n,e){return wv(n.databaseId,e)}function Bj(n){const e=GS(n);return e.length===4?jt.emptyPath():$S(e)}function b_(n){return new jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $S(n){return vt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function I0(n,e,t){return{name:x_(n,e),fields:t.value.mapValue.fields}}function Fj(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Fe(39313,{state:b})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(b,E){return b.useProto3Json?(vt(E===void 0||typeof E=="string",58123),On.fromBase64String(E||"")):(vt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),On.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(b){const E=b.code===void 0?he.UNKNOWN:BS(b.code);return new we(E,b.message||"")}(f);t=new HS(s,o,u,_||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mg(n,s.document.name),u=yr(s.document.updateTime),f=s.document.createTime?yr(s.document.createTime):Ye.min(),_=new yi({mapValue:{fields:s.document.fields}}),y=Yn.newFoundDocument(o,u,f,_),b=s.targetIds||[],E=s.removedTargetIds||[];t=new Cf(b,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mg(n,s.document),u=s.readTime?yr(s.readTime):Ye.min(),f=Yn.newNoDocument(o,u),_=s.removedTargetIds||[];t=new Cf([],_,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mg(n,s.document),u=s.removedTargetIds||[];t=new Cf([],u,o,null)}else{if(!("filter"in e))return Fe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new kj(o,u),_=s.targetId;t=new FS(_,f)}}return t}function Hj(n,e){let t;if(e instanceof Xh)t={update:I0(n,e.key,e.value)};else if(e instanceof yv)t={delete:x_(n,e.key)};else if(e instanceof Fo)t={update:I0(n,e.key,e.data),updateMask:Xj(e.fieldMask)};else{if(!(e instanceof Ij))return Fe(16599,{Vt:e.type});t={verify:x_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const _=f.transform;if(_ instanceof tm)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof jh)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Lh)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Dh)return{fieldPath:f.field.canonicalString(),increment:_.Ae};throw Fe(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:zj(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Fe(27497)}(n,e.precondition)),t}function qj(n,e){return n&&n.length>0?(vt(e!==void 0,14353),n.map(t=>function(o,u){let f=o.updateTime?yr(o.updateTime):yr(u);return f.isEqual(Ye.min())&&(f=yr(u)),new Sj(f,o.transformResults||[])}(t,e))):[]}function Gj(n,e){return{documents:[ZS(n,e.path)]}}function Zj(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ZS(n,o);const u=function(b){if(b.length!==0)return YS(Ks.create(b,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const f=function(b){if(b.length!==0)return b.map(E=>function(N){return{field:Pc(N.field),direction:Yj(N.dir)}}(E))}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const _=v_(n,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=function(b){return{before:b.inclusive,values:b.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(b){return{before:!b.inclusive,values:b.position}}(e.endAt)),{ft:t,parent:o}}function $j(n){let e=Bj(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){vt(s===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(I){const N=KS(I);return N instanceof Ks&&TS(N)?N.getFilters():[N]}(t.where));let f=[];t.orderBy&&(f=function(I){return I.map(N=>function(H){return new Mh(Mc(H.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction))}(N))}(t.orderBy));let _=null;t.limit&&(_=function(I){let N;return N=typeof I=="object"?I.value:I,xm(N)?null:N}(t.limit));let y=null;t.startAt&&(y=function(I){const N=!!I.before,F=I.values||[];return new em(F,N)}(t.startAt));let b=null;return t.endAt&&(b=function(I){const N=!I.before,F=I.values||[];return new em(F,N)}(t.endAt)),dj(e,o,f,u,_,"F",y,b)}function Kj(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Fe(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Mc(t.unaryFilter.field);return hn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Mc(t.unaryFilter.field);return hn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Mc(t.unaryFilter.field);return hn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Mc(t.unaryFilter.field);return hn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Fe(61313);default:return Fe(60726)}}(n):n.fieldFilter!==void 0?function(t){return hn.create(Mc(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Fe(58110);default:return Fe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ks.create(t.compositeFilter.filters.map(s=>KS(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Fe(1026)}}(t.compositeFilter.op))}(n):Fe(30097,{filter:n})}function Yj(n){return Dj[n]}function Wj(n){return Oj[n]}function Qj(n){return Vj[n]}function Pc(n){return{fieldPath:n.canonicalString()}}function Mc(n){return Dn.fromServerFormat(n.fieldPath)}function YS(n){return n instanceof hn?function(t){if(t.op==="=="){if(p0(t.value))return{unaryFilter:{field:Pc(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:Pc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(p0(t.value))return{unaryFilter:{field:Pc(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:Pc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(t.field),op:Wj(t.op),value:t.value}}}(n):n instanceof Ks?function(t){const s=t.getFilters().map(o=>YS(o));return s.length===1?s[0]:{compositeFilter:{op:Qj(t.op),filters:s}}}(n):Fe(54877,{filter:n})}function Xj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,s,o,u=Ye.min(),f=Ye.min(),_=On.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_,this.expectedCount=y}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e){this.yt=e}}function eL(n){const e=$j({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?__(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(){this.Cn=new nL}addToCollectionParentIndex(e,t){return this.Cn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(No.min())}updateCollectionGroup(e,t,s){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class nL{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new _n(jt.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new _n(jt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QS=41943040;class _i{static withCacheSize(e){return new _i(e,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(QS,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wc(0)}static cr(){return new Wc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="LruGarbageCollector",iL=1048576;function k0([n,e],[t,s]){const o=ot(n,t);return o===0?ot(e,s):o}class sL{constructor(e){this.Ir=e,this.buffer=new _n(k0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();k0(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rL{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(C0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){iu(t)?Te(C0,"Ignoring IndexedDB error during garbage collection: ",t):await nu(t)}await this.Vr(3e5)})}}class aL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(ym.ce);const s=new sL(t);return this.mr.forEachTarget(e,o=>s.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>s.Ar(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(R0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,f,_,y,b;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,f=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(s=I,_=Date.now(),this.removeTargets(e,s,t))).next(I=>(u=I,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(b=Date.now(),Cc()<=st.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(_-f)+`ms
	Removed ${u} targets in `+(y-_)+`ms
	Removed ${I} documents in `+(b-y)+`ms
Total Duration: ${b-E}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I})))}}function oL(n,e){return new aL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.changes=new Bl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?fe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&gh(s.mutation,o,qi.empty(),ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,lt()).next(()=>s))}getLocalViewOfDocuments(e,t,s=lt()){const o=Rl();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let f=ah();return u.forEach((_,y)=>{f=f.insert(_,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,t){const s=Rl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,lt()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,_)=>{t.set(f,_)})})}computeViews(e,t,s,o){let u=ha();const f=ph(),_=function(){return ph()}();return t.forEach((y,b)=>{const E=s.get(b.key);o.has(b.key)&&(E===void 0||E.mutation instanceof Fo)?u=u.insert(b.key,b):E!==void 0?(f.set(b.key,E.mutation.getFieldMask()),gh(E.mutation,b,E.mutation.getFieldMask(),ct.now())):f.set(b.key,qi.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((b,E)=>f.set(b,E)),t.forEach((b,E)=>_.set(b,new cL(E,f.get(b)??null))),_))}recalculateAndSaveOverlays(e,t){const s=ph();let o=new qt((f,_)=>f-_),u=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(f=>{for(const _ of f)_.keys().forEach(y=>{const b=t.get(y);if(b===null)return;let E=s.get(y)||qi.empty();E=_.applyToLocalView(b,E),s.set(y,E);const I=(o.get(_.batchId)||lt()).add(y);o=o.insert(_.batchId,I)})}).next(()=>{const f=[],_=o.getReverseIterator();for(;_.hasNext();){const y=_.getNext(),b=y.key,E=y.value,I=PS();E.forEach(N=>{if(!u.has(N)){const F=US(t.get(N),s.get(N));F!==null&&I.set(N,F),u=u.add(N)}}),f.push(this.documentOverlayCache.saveOverlays(e,b,I))}return fe.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(f){return Le.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):fe.resolve(Rl());let _=Rh,y=u;return f.next(b=>fe.forEach(b,(E,I)=>(_<I.largestBatchId&&(_=I.largestBatchId),u.get(E)?fe.resolve():this.remoteDocumentCache.getEntry(e,E).next(N=>{y=y.insert(E,N)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,y,b,lt())).next(E=>({batchId:_,changes:kS(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(s=>{let o=ah();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let f=ah();return this.indexManager.getCollectionParents(e,u).next(_=>fe.forEach(_,y=>{const b=function(I,N){return new su(N,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(t,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next(E=>{E.forEach((I,N)=>{f=f.insert(I,N)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(f=>{u.forEach((y,b)=>{const E=b.getKey();f.get(E)===null&&(f=f.insert(E,Yn.newInvalidDocument(E)))});let _=ah();return f.forEach((y,b)=>{const E=u.get(y);E!==void 0&&gh(E.mutation,b,qi.empty(),ct.now()),Em(t,b)&&(_=_.insert(y,b))}),_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return fe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:yr(o.createTime)}}(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(o){return{name:o.name,query:eL(o.bundledQuery),readTime:yr(o.readTime)}}(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.overlays=new qt(Le.comparator),this.qr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Rl();return fe.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.St(e,t,u)}),fe.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(s)),fe.resolve()}getOverlaysForCollection(e,t,s){const o=Rl(),u=t.length+1,f=new Le(t.child("")),_=this.overlays.getIteratorFrom(f);for(;_.hasNext();){const y=_.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return fe.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new qt((b,E)=>b-E);const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>s){let E=u.get(b.largestBatchId);E===null&&(E=Rl(),u=u.insert(b.largestBatchId,E)),E.set(b.getKey(),b)}}const _=Rl(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,E)=>_.set(b,E)),!(_.size()>=o)););return fe.resolve(_)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new Cj(t,s));let u=this.qr.get(t);u===void 0&&(u=lt(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(){this.Qr=new _n(In.$r),this.Ur=new _n(In.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new In(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Gr(new In(e,t))}zr(e,t){e.forEach(s=>this.removeReference(s,t))}jr(e){const t=new Le(new jt([])),s=new In(t,e),o=new In(t,e+1),u=[];return this.Ur.forEachInRange([s,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Le(new jt([])),s=new In(t,e),o=new In(t,e+1);let u=lt();return this.Ur.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const t=new In(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class In{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Le.comparator(e.key,t.key)||ot(e.Yr,t.Yr)}static Kr(e,t){return ot(e.Yr,t.Yr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _n(In.$r)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Rj(u,t,s,o);this.mutationQueue.push(f);for(const _ of o)this.Zr=this.Zr.add(new In(_.key,u)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return fe.resolve(f)}lookupMutationBatch(e,t){return fe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return fe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?fv:this.tr-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new In(t,0),o=new In(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],f=>{const _=this.Xr(f.Yr);u.push(_)}),fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new _n(ot);return t.forEach(o=>{const u=new In(o,0),f=new In(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],_=>{s=s.add(_.Yr)})}),fe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;Le.isDocumentKey(u)||(u=u.child(""));const f=new In(new Le(u),0);let _=new _n(ot);return this.Zr.forEachWhile(y=>{const b=y.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(_=_.add(y.Yr)),!0)},f),fe.resolve(this.ti(_))}ti(e){const t=[];return e.forEach(s=>{const o=this.Xr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){vt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return fe.forEach(t.mutations,o=>{const u=new In(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,t){const s=new In(t,0),o=this.Zr.firstAfterOrEqual(s);return fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e){this.ri=e,this.docs=function(){return new qt(Le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,f=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return fe.resolve(s?s.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let s=ha();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Yn.newInvalidDocument(o))}),fe.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=ha();const f=t.path,_=new Le(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(_);for(;y.hasNext();){const{key:b,value:{document:E}}=y.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||qM(HM(E),s)<=0||(o.has(E.key)||Em(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return fe.resolve(u)}getAllFromCollectionGroup(e,t,s,o){Fe(9500)}ii(e,t){return fe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new gL(this)}getSize(e){return fe.resolve(this.size)}}class gL extends lL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)}),fe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.persistence=e,this.si=new Bl(t=>gv(t),_v),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Tv,this.targetCount=0,this.ai=Wc.ur()}forEachTarget(e,t){return this.si.forEach((s,o)=>t(o)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),fe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Wc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Pr(t),fe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach((f,_)=>{_.sequenceNumber<=t&&s.get(_.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,_.targetId)),o++)}),fe.waitFor(u).next(()=>o)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return fe.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),fe.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return fe.resolve(s)}containsKey(e,t){return fe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t){this.ui={},this.overlays={},this.ci=new ym(0),this.li=!1,this.li=!0,this.hi=new fL,this.referenceDelegate=e(this),this.Pi=new _L(this),this.indexManager=new tL,this.remoteDocumentCache=function(o){return new pL(o)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Jj(t),this.Ii=new hL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new mL(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Te("MemoryPersistence","Starting transaction:",e);const o=new vL(this.ci.next());return this.referenceDelegate.Ei(),s(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,t){return fe.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,t)))}}class vL extends ZM{constructor(e){super(),this.currentSequenceNumber=e}}class Ev{constructor(e){this.persistence=e,this.Ri=new Tv,this.Vi=null}static mi(e){return new Ev(e)}get fi(){if(this.Vi)return this.Vi;throw Fe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),fe.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(o=>this.fi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.fi,s=>{const o=Le.fromPath(s);return this.gi(e,o).next(u=>{u||t.removeEntry(o,Ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class im{constructor(e,t){this.persistence=e,this.pi=new Bl(s=>YM(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=oL(this,t)}static mi(e,t){return new im(e,t)}Ei(){}di(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}wr(e){let t=0;return this.pr(e,s=>{t++}).next(()=>t)}pr(e,t){return fe.forEach(this.pi,(s,o)=>this.br(e,s,o).next(u=>u?fe.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,t).next(_=>{_||(s++,u.removeEntry(f,Ye.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),fe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}br(e,t,s){return fe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return fe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=lt(),o=lt();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Sv(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return $C()?8:$M(Xn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(e,t,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new yL;return this.Ss(e,t,f).next(_=>{if(u.result=_,this.Vs)return this.bs(e,t,f,_.size)})}).next(()=>u.result)}bs(e,t,s,o){return s.documentReadCount<this.fs?(Cc()<=st.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",kc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),fe.resolve()):(Cc()<=st.DEBUG&&Te("QueryEngine","Query:",kc(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Cc()<=st.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",kc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vr(t))):fe.resolve())}ys(e,t){if(y0(t))return fe.resolve(null);let s=vr(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=__(t,null,"F"),s=vr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=lt(...u);return this.ps.getDocuments(e,f).next(_=>this.indexManager.getMinOffset(e,s).next(y=>{const b=this.Ds(t,_);return this.Cs(t,b,f,y.readTime)?this.ys(e,__(t,null,"F")):this.vs(e,b,t,y)}))})))}ws(e,t,s,o){return y0(t)||o.isEqual(Ye.min())?fe.resolve(null):this.ps.getDocuments(e,s).next(u=>{const f=this.Ds(t,u);return this.Cs(t,f,s,o)?fe.resolve(null):(Cc()<=st.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),kc(t)),this.vs(e,f,t,FM(o,Rh)).next(_=>_))})}Ds(e,t){let s=new _n(RS(e));return t.forEach((o,u)=>{Em(e,u)&&(s=s.add(u))}),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return Cc()<=st.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",kc(t)),this.ps.getDocumentsMatchingQuery(e,t,No.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="LocalStore",bL=3e8;class wL{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new qt(ot),this.xs=new Bl(u=>gv(u),_v),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function TL(n,e,t,s){return new wL(n,e,t,s)}async function JS(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],_=[];let y=lt();for(const b of o){f.push(b.batchId);for(const E of b.mutations)y=y.add(E.key)}for(const b of u){_.push(b.batchId);for(const E of b.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(s,y).next(b=>({Ls:b,removedBatchIds:f,addedBatchIds:_}))})})}function EL(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return function(_,y,b,E){const I=b.batch,N=I.keys();let F=fe.resolve();return N.forEach(H=>{F=F.next(()=>E.getEntry(y,H)).next(D=>{const q=b.docVersions.get(H);vt(q!==null,48541),D.version.compareTo(q)<0&&(I.applyToRemoteDocument(D,b),D.isValidDocument()&&(D.setReadTime(b.commitVersion),E.addEntry(D)))})}),F.next(()=>_.mutationQueue.removeMutationBatch(y,I))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let y=lt();for(let b=0;b<_.mutationResults.length;++b)_.mutationResults[b].transformResults.length>0&&(y=y.add(_.batch.mutations[b].key));return y}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function e1(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function SL(n,e){const t=We(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const _=[];e.targetChanges.forEach((E,I)=>{const N=o.get(I);if(!N)return;_.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,I).next(()=>t.Pi.addMatchingKeys(u,E.addedDocuments,I)));let F=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?F=F.withResumeToken(On.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,s)),o=o.insert(I,F),function(D,q,Y){return D.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=bL?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(N,F,E)&&_.push(t.Pi.updateTargetData(u,F))});let y=ha(),b=lt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),_.push(AL(u,f,e.documentUpdates).next(E=>{y=E.ks,b=E.qs})),!s.isEqual(Ye.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next(I=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s));_.push(E)}return fe.waitFor(_).next(()=>f.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,y,b)).next(()=>y)}).then(u=>(t.Ms=o,u))}function AL(n,e,t){let s=lt(),o=lt();return t.forEach(u=>s=s.add(u)),e.getEntries(n,s).next(u=>{let f=ha();return t.forEach((_,y)=>{const b=u.get(_);y.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(_)),y.isNoDocument()&&y.version.isEqual(Ye.min())?(e.removeEntry(_,y.readTime),f=f.insert(_,y)):!b.isValidDocument()||y.version.compareTo(b.version)>0||y.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(y),f=f.insert(_,y)):Te(Av,"Ignoring outdated watch update for ",_,". Current version:",b.version," Watch version:",y.version)}),{ks:f,qs:o}})}function NL(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=fv),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function IL(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Pi.getTargetData(s,e).next(u=>u?(o=u,fe.resolve(o)):t.Pi.allocateTargetId(s).next(f=>(o=new vo(e,f,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s})}async function w_(n,e,t){const s=We(n),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!iu(f))throw f;Te(Av,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function P0(n,e,t){const s=We(n);let o=Ye.min(),u=lt();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,b,E){const I=We(y),N=I.xs.get(E);return N!==void 0?fe.resolve(I.Ms.get(N)):I.Pi.getTargetData(b,E)}(s,f,vr(e)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,_.targetId).next(y=>{u=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,e,t?o:Ye.min(),t?u:lt())).next(_=>(RL(s,mj(e),_),{documents:_,Qs:u})))}function RL(n,e,t){let s=n.Os.get(e)||Ye.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),n.Os.set(e,s)}class M0{constructor(){this.activeTargetIds=xj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CL{constructor(){this.Mo=new M0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new M0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="ConnectivityMonitor";class L0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(j0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(j0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pf=null;function T_(){return pf===null?pf=function(){return 268435456+Math.round(2147483648*Math.random())}():pf++,"0x"+pf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="RestConnection",PL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ML{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Xf?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const f=T_(),_=this.zo(e,t.toUriEncodedString());Te(jg,`Sending RPC '${e}' ${f}:`,_,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,u);const{host:b}=new URL(_),E=Do(b);return this.Jo(e,_,y,s,E).then(I=>(Te(jg,`Received RPC '${e}' ${f}: `,I),I),I=>{throw Zc(jg,`RPC '${e}' ${f} failed with error: `,I,"url: ",_,"request:",s),I})}Ho(e,t,s,o,u,f){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+tu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}zo(e,t){const s=PL[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class LL extends ML{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const f=T_();return new Promise((_,y)=>{const b=new nS;b.setWithCredentials(!0),b.listenOnce(iS.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Af.NO_ERROR:const I=b.getResponseJson();Te(Zn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),_(I);break;case Af.TIMEOUT:Te(Zn,`RPC '${e}' ${f} timed out`),y(new we(he.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const N=b.getStatus();if(Te(Zn,`RPC '${e}' ${f} failed with status:`,N,"response text:",b.getResponseText()),N>0){let F=b.getResponseJson();Array.isArray(F)&&(F=F[0]);const H=F?.error;if(H&&H.status&&H.message){const D=function(Y){const oe=Y.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(oe)>=0?oe:he.UNKNOWN}(H.status);y(new we(D,H.message))}else y(new we(he.UNKNOWN,"Server responded with status "+b.getStatus()))}else y(new we(he.UNAVAILABLE,"Connection failed."));break;default:Fe(9055,{l_:e,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{Te(Zn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);Te(Zn,`RPC '${e}' ${f} sending request:`,o),b.send(t,"POST",E,s,15)})}T_(e,t,s){const o=T_(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=aS(),_=rS(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(y.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,s),y.encodeInitMessageHeaders=!0;const E=u.join("");Te(Zn,`Creating RPC '${e}' stream ${o}: ${E}`,y);const I=f.createWebChannel(E,y);this.I_(I);let N=!1,F=!1;const H=new jL({Yo:q=>{F?Te(Zn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(N||(Te(Zn,`Opening RPC '${e}' stream ${o} transport.`),I.open(),N=!0),Te(Zn,`RPC '${e}' stream ${o} sending:`,q),I.send(q))},Zo:()=>I.close()}),D=(q,Y,oe)=>{q.listen(Y,ne=>{try{oe(ne)}catch(pe){setTimeout(()=>{throw pe},0)}})};return D(I,rh.EventType.OPEN,()=>{F||(Te(Zn,`RPC '${e}' stream ${o} transport opened.`),H.o_())}),D(I,rh.EventType.CLOSE,()=>{F||(F=!0,Te(Zn,`RPC '${e}' stream ${o} transport closed`),H.a_(),this.E_(I))}),D(I,rh.EventType.ERROR,q=>{F||(F=!0,Zc(Zn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),H.a_(new we(he.UNAVAILABLE,"The operation could not be completed")))}),D(I,rh.EventType.MESSAGE,q=>{if(!F){const Y=q.data[0];vt(!!Y,16349);const oe=Y,ne=oe?.error||oe[0]?.error;if(ne){Te(Zn,`RPC '${e}' stream ${o} received error:`,ne);const pe=ne.status;let xe=function(k){const j=un[k];if(j!==void 0)return BS(j)}(pe),ge=ne.message;xe===void 0&&(xe=he.INTERNAL,ge="Unknown error status: "+pe+" with message "+ne.message),F=!0,H.a_(new we(xe,ge)),I.close()}else Te(Zn,`RPC '${e}' stream ${o} received:`,Y),H.u_(Y)}}),D(_,sS.STAT_EVENT,q=>{q.stat===u_.PROXY?Te(Zn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===u_.NOPROXY&&Te(Zn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{H.__()},0),H}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Lg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n){return new Uj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="PersistentStream";class n1{constructor(e,t,s,o,u,f,_,y){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new t1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(ua(t.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===he.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.D_===t&&this.G_(s,o)},s=>{e(()=>{const o=new we(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)})})}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{s(()=>this.z_(o))}),this.stream.onMessage(o=>{s(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Te(D0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Te(D0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DL extends n1{constructor(e,t,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,f),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Fj(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ye.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ye.min():f.readTime?yr(f.readTime):Ye.min()}(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=b_(this.serializer),t.addTarget=function(u,f){let _;const y=f.target;if(_=p_(y)?{documents:Gj(u,y)}:{query:Zj(u,y).ft},_.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){_.resumeToken=qS(u,f.resumeToken);const b=v_(u,f.expectedCount);b!==null&&(_.expectedCount=b)}else if(f.snapshotVersion.compareTo(Ye.min())>0){_.readTime=nm(u,f.snapshotVersion.toTimestamp());const b=v_(u,f.expectedCount);b!==null&&(_.expectedCount=b)}return _}(this.serializer,e);const s=Kj(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=b_(this.serializer),t.removeTarget=e,this.q_(t)}}class OL extends n1{constructor(e,t,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qj(e.writeResults,e.commitTime),s=yr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=b_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Hj(this.serializer,s))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{}class UL extends VL{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(he.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(e,y_(t,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(he.UNKNOWN,u.toString())})}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,_])=>this.connection.Ho(e,y_(t,s),o,f,_,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new we(he.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ua(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="RemoteStore";class BL{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{Fl(this)&&(Te(Dl,"Restarting streams for network reachability change."),await async function(y){const b=We(y);b.Ea.add(4),await ed(b),b.Ra.set("Unknown"),b.Ea.delete(4),await Rm(b)}(this))})}),this.Ra=new zL(s,o)}}async function Rm(n){if(Fl(n))for(const e of n.da)await e(!0)}async function ed(n){for(const e of n.da)await e(!1)}function i1(n,e){const t=We(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cv(t)?Rv(t):ru(t).O_()&&Iv(t,e))}function Nv(n,e){const t=We(n),s=ru(t);t.Ia.delete(e),s.O_()&&s1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Fl(t)&&t.Ra.set("Unknown"))}function Iv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ru(n).Y_(e)}function s1(n,e){n.Va.Ue(e),ru(n).Z_(e)}function Rv(n){n.Va=new Lj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ru(n).start(),n.Ra.ua()}function Cv(n){return Fl(n)&&!ru(n).x_()&&n.Ia.size>0}function Fl(n){return We(n).Ea.size===0}function r1(n){n.Va=void 0}async function FL(n){n.Ra.set("Online")}async function HL(n){n.Ia.forEach((e,t)=>{Iv(n,e)})}async function qL(n,e){r1(n),Cv(n)?(n.Ra.ha(e),Rv(n)):n.Ra.set("Unknown")}async function GL(n,e,t){if(n.Ra.set("Online"),e instanceof HS&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const _ of u.targetIds)o.Ia.has(_)&&(await o.remoteSyncer.rejectListen(_,f),o.Ia.delete(_),o.Va.removeTarget(_))}(n,e)}catch(s){Te(Dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await sm(n,s)}else if(e instanceof Cf?n.Va.Ze(e):e instanceof FS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ye.min()))try{const s=await e1(n.localStore);t.compareTo(s)>=0&&await function(u,f){const _=u.Va.Tt(f);return _.targetChanges.forEach((y,b)=>{if(y.resumeToken.approximateByteSize()>0){const E=u.Ia.get(b);E&&u.Ia.set(b,E.withResumeToken(y.resumeToken,f))}}),_.targetMismatches.forEach((y,b)=>{const E=u.Ia.get(y);if(!E)return;u.Ia.set(y,E.withResumeToken(On.EMPTY_BYTE_STRING,E.snapshotVersion)),s1(u,y);const I=new vo(E.target,y,b,E.sequenceNumber);Iv(u,I)}),u.remoteSyncer.applyRemoteEvent(_)}(n,t)}catch(s){Te(Dl,"Failed to raise snapshot:",s),await sm(n,s)}}async function sm(n,e,t){if(!iu(e))throw e;n.Ea.add(1),await ed(n),n.Ra.set("Offline"),t||(t=()=>e1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Te(Dl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rm(n)})}function a1(n,e){return e().catch(t=>sm(n,t,e))}async function Cm(n){const e=We(n),t=ko(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fv;for(;ZL(e);)try{const o=await NL(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,$L(e,o)}catch(o){await sm(e,o)}o1(e)&&l1(e)}function ZL(n){return Fl(n)&&n.Ta.length<10}function $L(n,e){n.Ta.push(e);const t=ko(n);t.O_()&&t.X_&&t.ea(e.mutations)}function o1(n){return Fl(n)&&!ko(n).x_()&&n.Ta.length>0}function l1(n){ko(n).start()}async function KL(n){ko(n).ra()}async function YL(n){const e=ko(n);for(const t of n.Ta)e.ea(t.mutations)}async function WL(n,e,t){const s=n.Ta.shift(),o=xv.from(s,e,t);await a1(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Cm(n)}async function QL(n,e){e&&ko(n).X_&&await async function(s,o){if(function(f){return Pj(f)&&f!==he.ABORTED}(o.code)){const u=s.Ta.shift();ko(s).B_(),await a1(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Cm(s)}}(n,e),o1(n)&&l1(n)}async function O0(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Te(Dl,"RemoteStore received new credentials");const s=Fl(t);t.Ea.add(3),await ed(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rm(t)}async function XL(n,e){const t=We(n);e?(t.Ea.delete(2),await Rm(t)):e||(t.Ea.add(2),await ed(t),t.Ra.set("Unknown"))}function ru(n){return n.ma||(n.ma=function(t,s,o){const u=We(t);return u.sa(),new DL(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{Xo:FL.bind(null,n),t_:HL.bind(null,n),r_:qL.bind(null,n),H_:GL.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Cv(n)?Rv(n):n.Ra.set("Unknown")):(await n.ma.stop(),r1(n))})),n.ma}function ko(n){return n.fa||(n.fa=function(t,s,o){const u=We(t);return u.sa(),new OL(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:KL.bind(null,n),r_:QL.bind(null,n),ta:YL.bind(null,n),na:WL.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Cm(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(Dl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new To,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const f=Date.now()+s,_=new kv(e,t,f,o,u);return _.start(s),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pv(n,e){if(ua("AsyncQueue",`${e}: ${n}`),iu(n))return new we(he.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{static emptySet(e){return new zc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Le.comparator(t.key,s.key):(t,s)=>Le.comparator(t.key,s.key),this.keyedMap=ah(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new zc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.ga=new qt(Le.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Fe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,s)=>{e.push(s)}),e}}class Qc{constructor(e,t,s,o,u,f,_,y,b){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=y,this.hasCachedResults=b}static fromInitialDocuments(e,t,s,o,u){const f=[];return t.forEach(_=>{f.push({type:0,doc:_})}),new Qc(e,t,zc.emptySet(t),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eD{constructor(){this.queries=U0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=We(t),u=o.queries;o.queries=U0(),u.forEach((f,_)=>{for(const y of _.Sa)y.onError(s)})})(this,new we(he.ABORTED,"Firestore shutting down"))}}function U0(){return new Bl(n=>IS(n),Tm)}async function c1(n,e){const t=We(n);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new JL,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(f){const _=Pv(f,`Initialization of query '${kc(e.query)}' failed`);return void e.onError(_)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Mv(t)}async function u1(n,e){const t=We(n),s=e.query;let o=3;const u=t.queries.get(s);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function tD(n,e){const t=We(n);let s=!1;for(const o of e){const u=o.query,f=t.queries.get(u);if(f){for(const _ of f.Sa)_.Fa(o)&&(s=!0);f.wa=o}}s&&Mv(t)}function nD(n,e,t){const s=We(n),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function Mv(n){n.Ca.forEach(e=>{e.next()})}var E_,z0;(z0=E_||(E_={})).Ma="default",z0.Cache="cache";class h1{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Qc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==E_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.key=e}}class f1{constructor(e){this.key=e}}class iD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=lt(),this.mutatedKeys=lt(),this.eu=RS(e),this.tu=new zc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new V0,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,f=o,_=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,I)=>{const N=o.get(E),F=Em(this.query,I)?I:null,H=!!N&&this.mutatedKeys.has(N.key),D=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let q=!1;N&&F?N.data.isEqual(F.data)?H!==D&&(s.track({type:3,doc:F}),q=!0):this.su(N,F)||(s.track({type:2,doc:F}),q=!0,(y&&this.eu(F,y)>0||b&&this.eu(F,b)<0)&&(_=!0)):!N&&F?(s.track({type:0,doc:F}),q=!0):N&&!F&&(s.track({type:1,doc:N}),q=!0,(y||b)&&(_=!0)),q&&(F?(f=f.add(F),u=D?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Cs:_,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((E,I)=>function(F,H){const D=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Fe(20277,{Rt:q})}};return D(F)-D(H)}(E.type,I.type)||this.eu(E.doc,I.doc)),this.ou(s),o=o??!1;const _=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,b=y!==this.Za;return this.Za=y,f.length!==0||b?{snapshot:new Qc(this.query,e.tu,u,f,e.mutatedKeys,y===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new V0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=lt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const t=[];return e.forEach(s=>{this.Xa.has(s)||t.push(new f1(s))}),this.Xa.forEach(s=>{e.has(s)||t.push(new d1(s))}),t}cu(e){this.Ya=e.Qs,this.Xa=lt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Qc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jv="SyncEngine";class sD{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class rD{constructor(e){this.key=e,this.hu=!1}}class aD{constructor(e,t,s,o,u,f){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Bl(_=>IS(_),Tm),this.Iu=new Map,this.Eu=new Set,this.du=new qt(Le.comparator),this.Au=new Map,this.Ru=new Tv,this.Vu={},this.mu=new Map,this.fu=Wc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oD(n,e,t=!0){const s=y1(n);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await m1(s,e,t,!0),o}async function lD(n,e){const t=y1(n);await m1(t,e,!0,!1)}async function m1(n,e,t,s){const o=await IL(n.localStore,vr(e)),u=o.targetId,f=n.sharedClientState.addLocalQueryTarget(u,t);let _;return s&&(_=await cD(n,e,u,f==="current",o.resumeToken)),n.isPrimaryClient&&t&&i1(n.remoteStore,o),_}async function cD(n,e,t,s,o){n.pu=(I,N,F)=>async function(D,q,Y,oe){let ne=q.view.ru(Y);ne.Cs&&(ne=await P0(D.localStore,q.query,!1).then(({documents:G})=>q.view.ru(G,ne)));const pe=oe&&oe.targetChanges.get(q.targetId),xe=oe&&oe.targetMismatches.get(q.targetId)!=null,ge=q.view.applyChanges(ne,D.isPrimaryClient,pe,xe);return F0(D,q.targetId,ge.au),ge.snapshot}(n,I,N,F);const u=await P0(n.localStore,e,!0),f=new iD(e,u.Qs),_=f.ru(u.documents),y=Jh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),b=f.applyChanges(_,n.isPrimaryClient,y);F0(n,t,b.au);const E=new sD(e,t,f);return n.Tu.set(e,E),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),b.snapshot}async function uD(n,e,t){const s=We(n),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter(f=>!Tm(f,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await w_(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Nv(s.remoteStore,o.targetId),S_(s,o.targetId)}).catch(nu)):(S_(s,o.targetId),await w_(s.localStore,o.targetId,!0))}async function hD(n,e){const t=We(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Nv(t.remoteStore,s.targetId))}async function dD(n,e,t){const s=yD(n);try{const o=await function(f,_){const y=We(f),b=ct.now(),E=_.reduce((F,H)=>F.add(H.key),lt());let I,N;return y.persistence.runTransaction("Locally write mutations","readwrite",F=>{let H=ha(),D=lt();return y.Ns.getEntries(F,E).next(q=>{H=q,H.forEach((Y,oe)=>{oe.isValidDocument()||(D=D.add(Y))})}).next(()=>y.localDocuments.getOverlayedDocuments(F,H)).next(q=>{I=q;const Y=[];for(const oe of _){const ne=Nj(oe,I.get(oe.key).overlayedDocument);ne!=null&&Y.push(new Fo(oe.key,ne,xS(ne.value.mapValue),vs.exists(!0)))}return y.mutationQueue.addMutationBatch(F,b,Y,_)}).next(q=>{N=q;const Y=q.applyToLocalDocumentSet(I,D);return y.documentOverlayCache.saveOverlays(F,q.batchId,Y)})}).then(()=>({batchId:N.batchId,changes:kS(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,_,y){let b=f.Vu[f.currentUser.toKey()];b||(b=new qt(ot)),b=b.insert(_,y),f.Vu[f.currentUser.toKey()]=b}(s,o.batchId,t),await td(s,o.changes),await Cm(s.remoteStore)}catch(o){const u=Pv(o,"Failed to persist write");t.reject(u)}}async function p1(n,e){const t=We(n);try{const s=await SL(t.localStore,e);e.targetChanges.forEach((o,u)=>{const f=t.Au.get(u);f&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?vt(f.hu,14607):o.removedDocuments.size>0&&(vt(f.hu,42227),f.hu=!1))}),await td(t,s,e)}catch(s){await nu(s)}}function B0(n,e,t){const s=We(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach((u,f)=>{const _=f.view.va(e);_.snapshot&&o.push(_.snapshot)}),function(f,_){const y=We(f);y.onlineState=_;let b=!1;y.queries.forEach((E,I)=>{for(const N of I.Sa)N.va(_)&&(b=!0)}),b&&Mv(y)}(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fD(n,e,t){const s=We(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new qt(Le.comparator);f=f.insert(u,Yn.newNoDocument(u,Ye.min()));const _=lt().add(u),y=new Nm(Ye.min(),new Map,new qt(ot),f,_);await p1(s,y),s.du=s.du.remove(u),s.Au.delete(e),Lv(s)}else await w_(s.localStore,e,!1).then(()=>S_(s,e,t)).catch(nu)}async function mD(n,e){const t=We(n),s=e.batch.batchId;try{const o=await EL(t.localStore,e);_1(t,s,null),g1(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await td(t,o)}catch(o){await nu(o)}}async function pD(n,e,t){const s=We(n);try{const o=await function(f,_){const y=We(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let E;return y.mutationQueue.lookupMutationBatch(b,_).next(I=>(vt(I!==null,37113),E=I.keys(),y.mutationQueue.removeMutationBatch(b,I))).next(()=>y.mutationQueue.performConsistencyCheck(b)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(b,E,_)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,E)).next(()=>y.localDocuments.getDocuments(b,E))})}(s.localStore,e);_1(s,e,t),g1(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await td(s,o)}catch(o){await nu(o)}}function g1(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function _1(n,e,t){const s=We(n);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function S_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(s=>{n.Ru.containsKey(s)||v1(n,s)})}function v1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Nv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Lv(n))}function F0(n,e,t){for(const s of t)s instanceof d1?(n.Ru.addReference(s.key,e),gD(n,s)):s instanceof f1?(Te(jv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||v1(n,s.key)):Fe(19791,{wu:s})}function gD(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(Te(jv,"New document in limbo: "+t),n.Eu.add(s),Lv(n))}function Lv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(jt.fromString(e)),s=n.fu.next();n.Au.set(s,new rD(t)),n.du=n.du.insert(t,s),i1(n.remoteStore,new vo(vr(wm(t.path)),s,"TargetPurposeLimboResolution",ym.ce))}}async function td(n,e,t){const s=We(n),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((_,y)=>{f.push(s.pu(y,e,t).then(b=>{if((b||t)&&s.isPrimaryClient){const E=b?!b.fromCache:t?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(b){o.push(b);const E=Sv.As(y.targetId,b);u.push(E)}}))}),await Promise.all(f),s.Pu.H_(o),await async function(y,b){const E=We(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>fe.forEach(b,N=>fe.forEach(N.Es,F=>E.persistence.referenceDelegate.addReference(I,N.targetId,F)).next(()=>fe.forEach(N.ds,F=>E.persistence.referenceDelegate.removeReference(I,N.targetId,F)))))}catch(I){if(!iu(I))throw I;Te(Av,"Failed to update sequence numbers: "+I)}for(const I of b){const N=I.targetId;if(!I.fromCache){const F=E.Ms.get(N),H=F.snapshotVersion,D=F.withLastLimboFreeSnapshotVersion(H);E.Ms=E.Ms.insert(N,D)}}}(s.localStore,u))}async function _D(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Te(jv,"User change. New user:",e.toKey());const s=await JS(t.localStore,e);t.currentUser=e,function(u,f){u.mu.forEach(_=>{_.forEach(y=>{y.reject(new we(he.CANCELLED,f))})}),u.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await td(t,s.Ls)}}function vD(n,e){const t=We(n),s=t.Au.get(e);if(s&&s.hu)return lt().add(s.key);{let o=lt();const u=t.Iu.get(e);if(!u)return o;for(const f of u){const _=t.Tu.get(f);o=o.unionWith(_.view.nu)}return o}}function y1(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=p1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fD.bind(null,e),e.Pu.H_=tD.bind(null,e.eventManager),e.Pu.yu=nD.bind(null,e.eventManager),e}function yD(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class rm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return TL(this.persistence,new xL,e.initialUser,this.serializer)}Cu(e){return new XS(Ev.mi,this.serializer)}Du(e){return new CL}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rm.provider={build:()=>new rm};class xD extends rm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof im,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new rL(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new XS(s=>im.mi(s,t),this.serializer)}}class A_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>B0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_D.bind(null,this.syncEngine),await XL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eD}()}createDatastore(e){const t=Im(e.databaseInfo.databaseId),s=function(u){return new LL(u)}(e.databaseInfo);return function(u,f,_,y){return new UL(u,f,_,y)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,f,_){return new BL(s,o,u,f,_)}(this.localStore,this.datastore,e.asyncQueue,t=>B0(this.syncEngine,t,0),function(){return L0.v()?new L0:new kL}())}createSyncEngine(e,t){return function(o,u,f,_,y,b,E){const I=new aD(o,u,f,_,y,b);return E&&(I.gu=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const s=We(t);Te(Dl,"RemoteStore shutting down."),s.Ea.add(5),await ed(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}A_.provider={build:()=>new A_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="FirestoreClient";class bD{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=$n.UNAUTHENTICATED,this.clientId=dv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{Te(Po,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(Te(Po,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new To;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Pv(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Dg(n,e){n.asyncQueue.verifyOperationInProgress(),Te(Po,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async o=>{s.isEqual(o)||(await JS(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function H0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wD(n);Te(Po,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>O0(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,o)=>O0(e.remoteStore,o)),n._onlineComponents=e}async function wD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(Po,"Using user provided OfflineComponentProvider");try{await Dg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===he.FAILED_PRECONDITION||o.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Zc("Error using user provided cache. Falling back to memory cache: "+t),await Dg(n,new rm)}}else Te(Po,"Using default OfflineComponentProvider"),await Dg(n,new xD(void 0));return n._offlineComponents}async function b1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(Po,"Using user provided OnlineComponentProvider"),await H0(n,n._uninitializedComponentsProvider._online)):(Te(Po,"Using default OnlineComponentProvider"),await H0(n,new A_))),n._onlineComponents}function TD(n){return b1(n).then(e=>e.syncEngine)}async function N_(n){const e=await b1(n),t=e.eventManager;return t.onListen=oD.bind(null,e.syncEngine),t.onUnlisten=uD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=hD.bind(null,e.syncEngine),t}function ED(n,e,t={}){const s=new To;return n.asyncQueue.enqueueAndForget(async()=>function(u,f,_,y,b){const E=new x1({next:N=>{E.Nu(),f.enqueueAndForget(()=>u1(u,I));const F=N.docs.has(_);!F&&N.fromCache?b.reject(new we(he.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&N.fromCache&&y&&y.source==="server"?b.reject(new we(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(N)},error:N=>b.reject(N)}),I=new h1(wm(_.path),E,{includeMetadataChanges:!0,qa:!0});return c1(u,I)}(await N_(n),n.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="firestore.googleapis.com",G0=!0;class Z0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T1,this.ssl=G0}else this.host=e.host,this.ssl=e.ssl??G0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iL)throw new we(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=w1(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class km{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Z0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Z0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new kM;switch(s.type){case"firstParty":return new LM(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=q0.get(t);s&&(Te("ComponentProvider","Removing Datastore"),q0.delete(t),s.terminate())}(this),Promise.resolve()}}function SD(n,e,t,s={}){n=_s(n,km);const o=Do(e),u=n._getSettings(),f={...u,emulatorOptions:n._getEmulatorOptions()},_=`${e}:${t}`;o&&(W_(`https://${_}`),Q_("Firestore",!0)),u.host!==T1&&u.host!==_&&Zc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...u,host:_,ssl:o,emulatorOptions:s};if(!So(y,f)&&(n._setSettings(y),s.mockUserToken)){let b,E;if(typeof s.mockUserToken=="string")b=s.mockUserToken,E=$n.MOCK_USER;else{b=mE(s.mockUserToken,n._app?.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new we(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new $n(I)}n._authCredentials=new PM(new lS(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Hl(this.firestore,e,this._query)}}class Yt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Yt(this.firestore,e,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Qh(t,Yt._jsonSchema))return new Yt(e,s||null,new Le(jt.fromString(t.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:dn("string",Yt._jsonSchemaVersion),referencePath:dn("string")};class Eo extends Hl{constructor(e,t,s){super(e,t,wm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new Le(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function aa(n,e,...t){if(n=Lt(n),cS("collection","path",e),n instanceof km){const s=jt.fromString(e,...t);return r0(s),new Eo(n,null,s)}{if(!(n instanceof Yt||n instanceof Eo))throw new we(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(jt.fromString(e,...t));return r0(s),new Eo(n.firestore,null,s)}}function xi(n,e,...t){if(n=Lt(n),arguments.length===1&&(e=dv.newId()),cS("doc","path",e),n instanceof km){const s=jt.fromString(e,...t);return s0(s),new Yt(n,null,new Le(s))}{if(!(n instanceof Yt||n instanceof Eo))throw new we(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(jt.fromString(e,...t));return s0(s),new Yt(n.firestore,n instanceof Eo?n.converter:null,new Le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="AsyncQueue";class K0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new t1(this,"async_queue_retry"),this._c=()=>{const s=Lg();s&&Te($0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Lg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new To;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!iu(e))throw e;Te($0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,ua("INTERNAL UNHANDLED ERROR: ",Y0(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=kv.createAndSchedule(this,e,t,s,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Fe(47125,{Pc:Y0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Y0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1}(n,["next","error","complete"])}class Mo extends km{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new K0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K0(e),this._firestoreClient=void 0,await e}}}function AD(n,e){const t=typeof n=="object"?n:Zh(),s=typeof n=="string"?n:Xf,o=ma(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=hE("firestore");u&&SD(o,...u)}return o}function Dv(n){if(n._terminated)throw new we(he.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ND(n),n._firestoreClient}function ND(n){const e=n._freezeSettings(),t=function(o,u,f,_){return new XM(o,u,f,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,w1(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new bD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ps(On.fromBase64String(e))}catch(t){throw new we(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ps(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qh(e,ps._jsonSchema))return ps.fromBase64String(e.bytes)}}ps._jsonSchemaVersion="firestore/bytes/1.0",ps._jsonSchema={type:dn("string",ps._jsonSchemaVersion),bytes:dn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(Qh(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:dn("string",xr._jsonSchemaVersion),latitude:dn("number"),longitude:dn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qh(e,br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new br(e.vectorValues);throw new we(he.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}br._jsonSchemaVersion="firestore/vectorValue/1.0",br._jsonSchema={type:dn("string",br._jsonSchemaVersion),vectorValues:dn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=/^__.*__$/;class RD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xh(e,this.data,t,this.fieldTransforms)}}class E1{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function S1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe(40011,{Ac:n})}}class Ov{constructor(e,t,s,o,u,f){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ov({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return am(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(S1(this.Ac)&&ID.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class CD{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Im(e)}Cc(e,t,s,o=!1){return new Ov({Ac:e,methodName:t,Dc:s,path:Dn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jm(n){const e=n._freezeSettings(),t=Im(n._databaseId);return new CD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function A1(n,e,t,s,o,u={}){const f=n.Cc(u.merge||u.mergeFields?2:0,e,t,o);Uv("Data must be an object, but it was:",f,s);const _=N1(s,f);let y,b;if(u.merge)y=new qi(f.fieldMask),b=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const I of u.mergeFields){const N=I_(e,I,t);if(!f.contains(N))throw new we(he.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);R1(E,N)||E.push(N)}y=new qi(E),b=f.fieldTransforms.filter(I=>y.covers(I.field))}else y=null,b=f.fieldTransforms;return new RD(new yi(_),y,b)}class nd extends Mm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nd}}class Vv extends Mm{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Dh(e.serializer,jS(e.serializer,this.Fc));return new Tj(e.path,t)}isEqual(e){return e instanceof Vv&&this.Fc===e.Fc}}function kD(n,e,t,s){const o=n.Cc(1,e,t);Uv("Data must be an object, but it was:",o,s);const u=[],f=yi.empty();Bo(s,(y,b)=>{const E=zv(e,y,t);b=Lt(b);const I=o.yc(E);if(b instanceof nd)u.push(E);else{const N=id(b,I);N!=null&&(u.push(E),f.set(E,N))}});const _=new qi(u);return new E1(f,_,o.fieldTransforms)}function PD(n,e,t,s,o,u){const f=n.Cc(1,e,t),_=[I_(e,s,t)],y=[o];if(u.length%2!=0)throw new we(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)_.push(I_(e,u[N])),y.push(u[N+1]);const b=[],E=yi.empty();for(let N=_.length-1;N>=0;--N)if(!R1(b,_[N])){const F=_[N];let H=y[N];H=Lt(H);const D=f.yc(F);if(H instanceof nd)b.push(F);else{const q=id(H,D);q!=null&&(b.push(F),E.set(F,q))}}const I=new qi(b);return new E1(E,I,f.fieldTransforms)}function MD(n,e,t,s=!1){return id(t,n.Cc(s?4:3,e))}function id(n,e){if(I1(n=Lt(n)))return Uv("Unsupported field value:",e,n),N1(n,e);if(n instanceof Mm)return function(s,o){if(!S1(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const _ of s){let y=id(_,o.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),f++}return{arrayValue:{values:u}}}(n,e)}return function(s,o){if((s=Lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ct.fromDate(s);return{timestampValue:nm(o.serializer,u)}}if(s instanceof ct){const u=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nm(o.serializer,u)}}if(s instanceof xr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ps)return{bytesValue:qS(o.serializer,s._byteString)};if(s instanceof Yt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wv(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof br)return function(f,_){return{mapValue:{fields:{[vS]:{stringValue:yS},[Jf]:{arrayValue:{values:f.toArray().map(b=>{if(typeof b!="number")throw _.Sc("VectorValues must only contain numeric values.");return vv(_.serializer,b)})}}}}}}(s,o);throw o.Sc(`Unsupported field value: ${vm(s)}`)}(n,e)}function N1(n,e){const t={};return dS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,(s,o)=>{const u=id(o,e.mc(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function I1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof xr||n instanceof ps||n instanceof Yt||n instanceof Mm||n instanceof br)}function Uv(n,e,t){if(!I1(t)||!uS(t)){const s=vm(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function I_(n,e,t){if((e=Lt(e))instanceof Pm)return e._internalPath;if(typeof e=="string")return zv(n,e);throw am("Field path arguments must be of type string or ",n,!1,void 0,t)}const jD=new RegExp("[~\\*/\\[\\]]");function zv(n,e,t){if(e.search(jD)>=0)throw am(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pm(...e.split("."))._internalPath}catch{throw am(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function am(n,e,t,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let y="";return(u||f)&&(y+=" (found",u&&(y+=` in field ${s}`),f&&(y+=` in document ${o}`),y+=")"),new we(he.INVALID_ARGUMENT,_+n+y)}function R1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Lm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LD extends C1{data(){return super.data()}}function Lm(n,e){return typeof e=="string"?zv(n,e):e instanceof Pm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bv{}class k1 extends Bv{}function Bc(n,e,...t){let s=[];e instanceof Bv&&s.push(e),s=s.concat(t),function(u){const f=u.filter(y=>y instanceof Fv).length,_=u.filter(y=>y instanceof Dm).length;if(f>1||f>0&&_>0)throw new we(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)n=o._apply(n);return n}class Dm extends k1{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Dm(e,t,s)}_apply(e){const t=this._parse(e);return P1(e._query,t),new Hl(e.firestore,e.converter,g_(e._query,t))}_parse(e){const t=jm(e.firestore);return function(u,f,_,y,b,E,I){let N;if(b.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new we(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){X0(I,E);const H=[];for(const D of I)H.push(Q0(y,u,D));N={arrayValue:{values:H}}}else N=Q0(y,u,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||X0(I,E),N=MD(_,f,I,E==="in"||E==="not-in");return hn.create(b,E,N)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Oh(n,e,t){const s=e,o=Lm("where",n);return Dm._create(o,s,t)}class Fv extends Bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fv(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Ks.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let f=o;const _=u.getFlattenedFilters();for(const y of _)P1(f,y),f=g_(f,y)}(e._query,t),new Hl(e.firestore,e.converter,g_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hv extends k1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hv(e,t)}_apply(e){const t=function(o,u,f){if(o.startAt!==null)throw new we(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new we(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mh(u,f)}(e._query,this._field,this._direction);return new Hl(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new su(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function jc(n,e="asc"){const t=e,s=Lm("orderBy",n);return Hv._create(s,t)}function Q0(n,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new we(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NS(e)&&t.indexOf("/")!==-1)throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(jt.fromString(t));if(!Le.isDocumentKey(s))throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return f0(n,new Le(s))}if(t instanceof Yt)return f0(n,t._key);throw new we(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vm(t)}.`)}function X0(n,e){if(!Array.isArray(n)||n.length===0)throw new we(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function P1(n,e){const t=function(o,u){for(const f of o)for(const _ of f.getFlattenedFilters())if(u.indexOf(_.op)>=0)return _.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new we(he.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(he.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class OD{convertValue(e,t="none"){switch(Co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Fe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Bo(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){const t=e.fields?.[Jf].arrayValue?.values?.map(s=>sn(s.doubleValue));return new br(t)}convertGeoPoint(e){return new xr(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=bm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ch(e));default:return null}}convertTimestamp(e){const t=Io(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=jt.fromString(e);vt(WS(s),9688,{name:e});const o=new kh(s.get(1),s.get(3)),u=new Le(s.popFirst(5));return o.isEqual(t)||ua(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class lh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends C1{constructor(e,t,s,o,u,f){super(e,t,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Lm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(he.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=kl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}kl._jsonSchemaVersion="firestore/documentSnapshot/1.0",kl._jsonSchema={type:dn("string",kl._jsonSchemaVersion),bundleSource:dn("string","DocumentSnapshot"),bundleName:dn("string"),bundle:dn("string")};class kf extends kl{data(e={}){return super.data(e)}}class Fc{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new lh(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new kf(this._firestore,this._userDataWriter,s.key,s,new lh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(_=>{const y=new kf(o._firestore,o._userDataWriter,_.doc.key,_.doc,new lh(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter);return _.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(_=>u||_.type!==3).map(_=>{const y=new kf(o._firestore,o._userDataWriter,_.doc.key,_.doc,new lh(o._snapshot.mutatedKeys.has(_.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,E=-1;return _.type!==0&&(b=f.indexOf(_.doc.key),f=f.delete(_.doc.key)),_.type!==1&&(f=f.add(_.doc),E=f.indexOf(_.doc.key)),{type:VD(_.type),doc:y,oldIndex:b,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(he.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Fe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(n){n=_s(n,Yt);const e=_s(n.firestore,Mo);return ED(Dv(e),n._key).then(t=>O1(e,n,t))}Fc._jsonSchemaVersion="firestore/querySnapshot/1.0",Fc._jsonSchema={type:dn("string",Fc._jsonSchemaVersion),bundleSource:dn("string","QuerySnapshot"),bundleName:dn("string"),bundle:dn("string")};class j1 extends OD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ps(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}}function J0(n,e,t){n=_s(n,Yt);const s=_s(n.firestore,Mo),o=M1(n.converter,e);return Om(s,[A1(jm(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,vs.none())])}function om(n,e,t,...s){n=_s(n,Yt);const o=_s(n.firestore,Mo),u=jm(o);let f;return f=typeof(e=Lt(e))=="string"||e instanceof Pm?PD(u,"updateDoc",n._key,e,t,s):kD(u,"updateDoc",n._key,e),Om(o,[f.toMutation(n._key,vs.exists(!0))])}function L1(n){return Om(_s(n.firestore,Mo),[new yv(n._key,vs.none())])}function D1(n,e){const t=_s(n.firestore,Mo),s=xi(n),o=M1(n.converter,e);return Om(t,[A1(jm(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,vs.exists(!1))]).then(()=>s)}function yo(n,...e){n=Lt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||W0(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(W0(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let u,f,_;if(n instanceof Yt)f=_s(n.firestore,Mo),_=wm(n._key.path),u={next:y=>{e[s]&&e[s](O1(f,n,y))},error:e[s+1],complete:e[s+2]};else{const y=_s(n,Hl);f=_s(y.firestore,Mo),_=y._query;const b=new j1(f);u={next:E=>{e[s]&&e[s](new Fc(f,b,y,E))},error:e[s+1],complete:e[s+2]},DD(n._query)}return function(b,E,I,N){const F=new x1(N),H=new h1(E,F,I);return b.asyncQueue.enqueueAndForget(async()=>c1(await N_(b),H)),()=>{F.Nu(),b.asyncQueue.enqueueAndForget(async()=>u1(await N_(b),H))}}(Dv(f),_,o,u)}function Om(n,e){return function(s,o){const u=new To;return s.asyncQueue.enqueueAndForget(async()=>dD(await TD(s),o,u)),u.promise}(Dv(n),e)}function O1(n,e,t){const s=t.docs.get(e._key),o=new j1(n);return new kl(n,o,e._key,s,new lh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){return new nd("deleteField")}function zD(n){return new Vv("increment",n)}(function(e,t=!0){(function(o){tu=o})(zl),ys(new $i("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),_=new Mo(new MM(s.getProvider("auth-internal")),new DM(f,s.getProvider("app-check-internal")),function(b,E){if(!Object.prototype.hasOwnProperty.apply(b.options,["projectId"]))throw new we(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kh(b.options.projectId,E)}(f,o),f);return u={useFetchStreams:t,...u},_._setSettings(u),_},"PUBLIC").setMultipleInstances(!0)),Qn(e0,t0,e),Qn(e0,t0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebasestorage.googleapis.com",U1="storageBucket",BD=120*1e3,FD=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends ws{constructor(e,t,s=0){super(Og(e),`Firebase Storage: ${t} (${Og(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function Og(n){return"storage/"+n}function qv(){const n="An unknown error occurred, please check the error payload for server response.";return new Qt(Wt.UNKNOWN,n)}function HD(n){return new Qt(Wt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function qD(n){return new Qt(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function GD(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qt(Wt.UNAUTHENTICATED,n)}function ZD(){return new Qt(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $D(n){return new Qt(Wt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KD(){return new Qt(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YD(){return new Qt(Wt.CANCELED,"User canceled the upload/download.")}function WD(n){return new Qt(Wt.INVALID_URL,"Invalid URL '"+n+"'.")}function QD(n){return new Qt(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function XD(){return new Qt(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U1+"' property when initializing the app?")}function JD(){return new Qt(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eO(){return new Qt(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tO(n){return new Qt(Wt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function C_(n){return new Qt(Wt.INVALID_ARGUMENT,n)}function z1(){return new Qt(Wt.APP_DELETED,"The Firebase app was deleted.")}function nO(n){return new Qt(Wt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _h(n,e){return new Qt(Wt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ju(n){throw new Qt(Wt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Gi.makeFromUrl(e,t)}catch{return new Gi(e,"")}if(s.path==="")return s;throw QD(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(pe){pe.path.charAt(pe.path.length-1)==="/"&&(pe.path_=pe.path_.slice(0,-1))}const f="(/(.*))?$",_=new RegExp("^gs://"+o+f,"i"),y={bucket:1,path:3};function b(pe){pe.path_=decodeURIComponent(pe.path)}const E="v[A-Za-z0-9_]+",I=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",F=new RegExp(`^https?://${I}/${E}/b/${o}/o${N}`,"i"),H={bucket:1,path:3},D=t===V1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",Y=new RegExp(`^https?://${D}/${o}/${q}`,"i"),ne=[{regex:_,indices:y,postModify:u},{regex:F,indices:H,postModify:b},{regex:Y,indices:{bucket:1,path:2},postModify:b}];for(let pe=0;pe<ne.length;pe++){const xe=ne[pe],ge=xe.regex.exec(e);if(ge){const G=ge[xe.indices.bucket];let k=ge[xe.indices.path];k||(k=""),s=new Gi(G,k),xe.postModify(s);break}}if(s==null)throw WD(e);return s}}class iO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(n,e,t){let s=1,o=null,u=null,f=!1,_=0;function y(){return _===2}let b=!1;function E(...q){b||(b=!0,e.apply(null,q))}function I(q){o=setTimeout(()=>{o=null,n(F,y())},q)}function N(){u&&clearTimeout(u)}function F(q,...Y){if(b){N();return}if(q){N(),E.call(null,q,...Y);return}if(y()||f){N(),E.call(null,q,...Y);return}s<64&&(s*=2);let ne;_===1?(_=2,ne=0):ne=(s+Math.random())*1e3,I(ne)}let H=!1;function D(q){H||(H=!0,N(),!b&&(o!==null?(q||(_=2),clearTimeout(o),I(0)):q||(_=1)))}return I(0),u=setTimeout(()=>{f=!0,D(!0)},t),D}function rO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n){return n!==void 0}function oO(n){return typeof n=="object"&&!Array.isArray(n)}function Gv(n){return typeof n=="string"||n instanceof String}function eT(n){return Zv()&&n instanceof Blob}function Zv(){return typeof Blob<"u"}function tT(n,e,t,s){if(s<e)throw C_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw C_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function B1(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Pl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Pl||(Pl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,u=e.indexOf(n)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,s,o,u,f,_,y,b,E,I,N=!0,F=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=_,this.errorCallback_=y,this.timeout_=b,this.progressCallback_=E,this.connectionFactory_=I,this.retry=N,this.isUsingEmulator=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,D)=>{this.resolve_=H,this.reject_=D,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new gf(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=_=>{const y=_.loaded,b=_.lengthComputable?_.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,b)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const _=u.getErrorCode()===Pl.NO_ERROR,y=u.getStatus();if(!_||lO(y,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===Pl.ABORT;s(!1,new gf(!1,null,E));return}const b=this.successCodes_.indexOf(y)!==-1;s(!0,new gf(b,u))})},t=(s,o)=>{const u=this.resolve_,f=this.reject_,_=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(_,_.getResponse());aO(y)?u(y):u()}catch(y){f(y)}else if(_!==null){const y=qv();y.serverResponse=_.getErrorText(),this.errorCallback_?f(this.errorCallback_(_,y)):f(y)}else if(o.canceled){const y=this.appDelete_?z1():YD();f(y)}else{const y=KD();f(y)}};this.canceled_?t(!1,new gf(!1,null,!0)):this.backoffId_=sO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gf{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function uO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function hO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function mO(n,e,t,s,o,u,f=!0,_=!1){const y=B1(n.urlParams),b=n.url+y,E=Object.assign({},n.headers);return dO(E,e),uO(E,t),hO(E,u),fO(E,s),new cO(b,n.method,E,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,f,_)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function gO(...n){const e=pO();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Zv())return new Blob(n);throw new Qt(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _O(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){if(typeof atob>"u")throw tO("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vg{constructor(e,t){this.data=e,this.contentType=t||null}}function yO(n,e){switch(n){case gr.RAW:return new Vg(F1(e));case gr.BASE64:case gr.BASE64URL:return new Vg(H1(n,e));case gr.DATA_URL:return new Vg(bO(e),wO(e))}throw qv()}function F1(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,f=n.charCodeAt(++t);s=65536|(u&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function xO(n){let e;try{e=decodeURIComponent(n)}catch{throw _h(gr.DATA_URL,"Malformed data URL.")}return F1(e)}function H1(n,e){switch(n){case gr.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw _h(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw _h(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=vO(e)}catch(o){throw o.message.includes("polyfill")?o:_h(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class q1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw _h(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=TO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function bO(n){const e=new q1(n);return e.base64?H1(gr.BASE64,e.rest):xO(e.rest)}function wO(n){return new q1(n).contentType}function TO(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){let s=0,o="";eT(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(eT(this.data_)){const s=this.data_,o=_O(s,e,t);return o===null?null:new go(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new go(s,!0)}}static getBlob(...e){if(Zv()){const t=e.map(s=>s instanceof go?s.data_:s);return new go(gO.apply(null,t))}else{const t=e.map(f=>Gv(f)?yO(gr.RAW,f).data:f.data_);let s=0;t.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(f=>{for(let _=0;_<f.length;_++)o[u++]=f[_]}),new go(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(n){let e;try{e=JSON.parse(n)}catch{return null}return oO(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SO(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function Z1(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(n,e){return e}class ai{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||AO}}let _f=null;function NO(n){return!Gv(n)||n.length<2?n:Z1(n)}function $1(){if(_f)return _f;const n=[];n.push(new ai("bucket")),n.push(new ai("generation")),n.push(new ai("metageneration")),n.push(new ai("name","fullPath",!0));function e(u,f){return NO(f)}const t=new ai("name");t.xform=e,n.push(t);function s(u,f){return f!==void 0?Number(f):f}const o=new ai("size");return o.xform=s,n.push(o),n.push(new ai("timeCreated")),n.push(new ai("updated")),n.push(new ai("md5Hash",null,!0)),n.push(new ai("cacheControl",null,!0)),n.push(new ai("contentDisposition",null,!0)),n.push(new ai("contentEncoding",null,!0)),n.push(new ai("contentLanguage",null,!0)),n.push(new ai("contentType",null,!0)),n.push(new ai("metadata","customMetadata",!0)),_f=n,_f}function IO(n,e){function t(){const s=n.bucket,o=n.fullPath,u=new Gi(s,o);return e._makeStorageReference(u)}Object.defineProperty(n,"ref",{get:t})}function RO(n,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const f=t[u];s[f.local]=f.xform(s,e[f.server])}return IO(s,n),s}function K1(n,e,t){const s=G1(e);return s===null?null:RO(n,s,t)}function CO(n,e,t,s){const o=G1(e);if(o===null||!Gv(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(b=>{const E=n.bucket,I=n.fullPath,N="/b/"+f(E)+"/o/"+f(I),F=$v(N,t,s),H=B1({alt:"media",token:b});return F+H})[0]}function kO(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}class Y1{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){if(!n)throw qv()}function PO(n,e){function t(s,o){const u=K1(n,o,e);return W1(u!==null),u}return t}function MO(n,e){function t(s,o){const u=K1(n,o,e);return W1(u!==null),CO(u,o,n.host,n._protocol)}return t}function Q1(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=ZD():o=GD():t.getStatus()===402?o=qD(n.bucket):t.getStatus()===403?o=$D(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function jO(n){const e=Q1(n);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=HD(n.path)),u.serverResponse=o.serverResponse,u}return t}function LO(n,e,t){const s=e.fullServerUrl(),o=$v(s,n.host,n._protocol),u="GET",f=n.maxOperationRetryTime,_=new Y1(o,u,MO(n,t),f);return _.errorHandler=jO(e),_}function DO(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function OO(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=DO(null,e)),s}function VO(n,e,t,s,o){const u=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function _(){let ne="";for(let pe=0;pe<2;pe++)ne=ne+Math.random().toString().slice(2);return ne}const y=_();f["Content-Type"]="multipart/related; boundary="+y;const b=OO(e,s,o),E=kO(b,t),I="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+y+`\r
Content-Type: `+b.contentType+`\r
\r
`,N=`\r
--`+y+"--",F=go.getBlob(I,s,N);if(F===null)throw JD();const H={name:b.fullPath},D=$v(u,n.host,n._protocol),q="POST",Y=n.maxUploadRetryTime,oe=new Y1(D,q,PO(n,t),Y);return oe.urlParams=H,oe.headers=f,oe.body=F.uploadData(),oe.errorHandler=Q1(e),oe}class UO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Pl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Pl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,u){if(this.sent_)throw Ju("cannot .send() more than once");if(Do(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ju("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ju("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ju("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ju("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zO extends UO{initXhr(){this.xhr_.responseType="text"}}function X1(){return new zO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t){this._service=e,t instanceof Gi?this._location=t:this._location=Gi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ol(e,t)}get root(){const e=new Gi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z1(this._location.path)}get storage(){return this._service}get parent(){const e=EO(this._location.path);if(e===null)return null;const t=new Gi(this._location.bucket,e);return new Ol(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw nO(e)}}function BO(n,e,t){n._throwIfRoot("uploadBytes");const s=VO(n.storage,n._location,$1(),new go(e,!0),t);return n.storage.makeRequestWithTokens(s,X1).then(o=>({metadata:o,ref:n}))}function FO(n){n._throwIfRoot("getDownloadURL");const e=LO(n.storage,n._location,$1());return n.storage.makeRequestWithTokens(e,X1).then(t=>{if(t===null)throw eO();return t})}function HO(n,e){const t=SO(n._location.path,e),s=new Gi(n._location.bucket,t);return new Ol(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(n){return/^[A-Za-z]+:\/\//.test(n)}function GO(n,e){return new Ol(n,e)}function J1(n,e){if(n instanceof Kv){const t=n;if(t._bucket==null)throw XD();const s=new Ol(t,t._bucket);return e!=null?J1(s,e):s}else return e!==void 0?HO(n,e):n}function ZO(n,e){if(e&&qO(e)){if(n instanceof Kv)return GO(n,e);throw C_("To use ref(service, url), the first argument must be a Storage instance.")}else return J1(n,e)}function nT(n,e){const t=e?.[U1];return t==null?null:Gi.makeFromBucketSpec(t,n)}function $O(n,e,t,s={}){n.host=`${e}:${t}`;const o=Do(e);o&&(W_(`https://${n.host}/b`),Q_("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(n._overrideAuthToken=typeof u=="string"?u:mE(u,n.app.options.projectId))}class Kv{constructor(e,t,s,o,u,f=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=V1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BD,this._maxUploadRetryTime=FD,this._requests=new Set,o!=null?this._bucket=Gi.makeFromBucketSpec(o,this._host):this._bucket=nT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Gi.makeFromBucketSpec(this._url,e):this._bucket=nT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ol(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new iO(z1());{const f=mO(e,this._appId,s,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const iT="@firebase/storage",sT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="storage";function Yv(n,e,t){return n=Lt(n),BO(n,e,t)}function Wv(n){return n=Lt(n),FO(n)}function Qv(n,e){return n=Lt(n),ZO(n,e)}function KO(n=Zh(),e){n=Lt(n);const s=ma(n,eA).getImmediate({identifier:e}),o=hE("storage");return o&&YO(s,...o),s}function YO(n,e,t,s={}){$O(n,e,t,s)}function WO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new Kv(t,s,o,e,zl)}function QO(){ys(new $i(eA,WO,"PUBLIC").setMultipleInstances(!0)),Qn(iT,sT,""),Qn(iT,sT,"esm2020")}QO();const tA="@firebase/installations",Xv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=1e4,iA=`w:${Xv}`,sA="FIS_v2",XO="https://firebaseinstallations.googleapis.com/v1",JO=3600*1e3,e4="installations",t4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vl=new Oo(e4,t4,n4);function rA(n){return n instanceof ws&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA({projectId:n}){return`${XO}/projects/${n}/installations`}function oA(n){return{token:n.token,requestStatus:2,expiresIn:s4(n.expiresIn),creationTime:Date.now()}}async function lA(n,e){const s=(await e.json()).error;return Vl.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function cA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function i4(n,{refreshToken:e}){const t=cA(n);return t.append("Authorization",r4(e)),t}async function uA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function s4(n){return Number(n.replace("s","000"))}function r4(n){return`${sA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=aA(n),o=cA(n),u=e.getImmediate({optional:!0});if(u){const b=await u.getHeartbeatsHeader();b&&o.append("x-firebase-client",b)}const f={fid:t,authVersion:sA,appId:n.appId,sdkVersion:iA},_={method:"POST",headers:o,body:JSON.stringify(f)},y=await uA(()=>fetch(s,_));if(y.ok){const b=await y.json();return{fid:b.fid||t,registrationStatus:2,refreshToken:b.refreshToken,authToken:oA(b.authToken)}}else throw await lA("Create Installation",y)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=/^[cdef][\w-]{21}$/,k_="";function c4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=u4(n);return l4.test(t)?t:k_}catch{return k_}}function u4(n){return o4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;function fA(n,e){const t=Vm(n);mA(t,e),h4(t,e)}function mA(n,e){const t=dA.get(n);if(t)for(const s of t)s(e)}function h4(n,e){const t=d4();t&&t.postMessage({key:n,fid:e}),f4()}let Cl=null;function d4(){return!Cl&&"BroadcastChannel"in self&&(Cl=new BroadcastChannel("[Firebase] FID Change"),Cl.onmessage=n=>{mA(n.data.key,n.data.fid)}),Cl}function f4(){dA.size===0&&Cl&&(Cl.close(),Cl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="firebase-installations-database",p4=1,Ul="firebase-installations-store";let Ug=null;function Jv(){return Ug||(Ug=yE(m4,p4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ul)}}})),Ug}async function lm(n,e){const t=Vm(n),o=(await Jv()).transaction(Ul,"readwrite"),u=o.objectStore(Ul),f=await u.get(t);return await u.put(e,t),await o.done,(!f||f.fid!==e.fid)&&fA(n,e.fid),e}async function pA(n){const e=Vm(n),s=(await Jv()).transaction(Ul,"readwrite");await s.objectStore(Ul).delete(e),await s.done}async function Um(n,e){const t=Vm(n),o=(await Jv()).transaction(Ul,"readwrite"),u=o.objectStore(Ul),f=await u.get(t),_=e(f);return _===void 0?await u.delete(t):await u.put(_,t),await o.done,_&&(!f||f.fid!==_.fid)&&fA(n,_.fid),_}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ey(n){let e;const t=await Um(n.appConfig,s=>{const o=g4(s),u=_4(n,o);return e=u.registrationPromise,u.installationEntry});return t.fid===k_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function g4(n){const e=n||{fid:c4(),registrationStatus:0};return gA(e)}function _4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Vl.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=v4(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:y4(n)}:{installationEntry:e}}async function v4(n,e){try{const t=await a4(n,e);return lm(n.appConfig,t)}catch(t){throw rA(t)&&t.customData.serverCode===409?await pA(n.appConfig):await lm(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function y4(n){let e=await rT(n.appConfig);for(;e.registrationStatus===1;)await hA(100),e=await rT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await ey(n);return s||t}return e}function rT(n){return Um(n,e=>{if(!e)throw Vl.create("installation-not-found");return gA(e)})}function gA(n){return x4(n)?{fid:n.fid,registrationStatus:0}:n}function x4(n){return n.registrationStatus===1&&n.registrationTime+nA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4({appConfig:n,heartbeatServiceProvider:e},t){const s=w4(n,t),o=i4(n,t),u=e.getImmediate({optional:!0});if(u){const b=await u.getHeartbeatsHeader();b&&o.append("x-firebase-client",b)}const f={installation:{sdkVersion:iA,appId:n.appId}},_={method:"POST",headers:o,body:JSON.stringify(f)},y=await uA(()=>fetch(s,_));if(y.ok){const b=await y.json();return oA(b)}else throw await lA("Generate Auth Token",y)}function w4(n,{fid:e}){return`${aA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ty(n,e=!1){let t;const s=await Um(n.appConfig,u=>{if(!_A(u))throw Vl.create("not-registered");const f=u.authToken;if(!e&&S4(f))return u;if(f.requestStatus===1)return t=T4(n,e),u;{if(!navigator.onLine)throw Vl.create("app-offline");const _=N4(u);return t=E4(n,_),_}});return t?await t:s.authToken}async function T4(n,e){let t=await aT(n.appConfig);for(;t.authToken.requestStatus===1;)await hA(100),t=await aT(n.appConfig);const s=t.authToken;return s.requestStatus===0?ty(n,e):s}function aT(n){return Um(n,e=>{if(!_A(e))throw Vl.create("not-registered");const t=e.authToken;return I4(t)?{...e,authToken:{requestStatus:0}}:e})}async function E4(n,e){try{const t=await b4(n,e),s={...e,authToken:t};return await lm(n.appConfig,s),t}catch(t){if(rA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await pA(n.appConfig);else{const s={...e,authToken:{requestStatus:0}};await lm(n.appConfig,s)}throw t}}function _A(n){return n!==void 0&&n.registrationStatus===2}function S4(n){return n.requestStatus===2&&!A4(n)}function A4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+JO}function N4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function I4(n){return n.requestStatus===1&&n.requestTime+nA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(n){const e=n,{installationEntry:t,registrationPromise:s}=await ey(e);return s?s.catch(console.error):ty(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(n,e=!1){const t=n;return await k4(t),(await ty(t,e)).token}async function k4(n){const{registrationPromise:e}=await ey(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(n){if(!n||!n.options)throw zg("App Configuration");if(!n.name)throw zg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw zg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function zg(n){return Vl.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="installations",M4="installations-internal",j4=n=>{const e=n.getProvider("app").getImmediate(),t=P4(e),s=ma(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},L4=n=>{const e=n.getProvider("app").getImmediate(),t=ma(e,vA).getImmediate();return{getId:()=>R4(t),getToken:o=>C4(t,o)}};function D4(){ys(new $i(vA,j4,"PUBLIC")),ys(new $i(M4,L4,"PRIVATE"))}D4();Qn(tA,Xv);Qn(tA,Xv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="analytics",O4="firebase_id",V4="origin",U4=60*1e3,z4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=new Gh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zi=new Oo("analytics","Analytics",B4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){if(!n.startsWith(ny)){const e=Zi.create("invalid-gtag-resource",{gtagURL:n});return bi.warn(e.message),""}return n}function yA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function H4(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function q4(n,e){const t=H4("firebase-js-sdk-policy",{createScriptURL:F4}),s=document.createElement("script"),o=`${ny}?l=${n}&id=${e}`;s.src=t?t?.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function G4(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Z4(n,e,t,s,o,u){const f=s[o];try{if(f)await e[f];else{const y=(await yA(t)).find(b=>b.measurementId===o);y&&await e[y.appId]}}catch(_){bi.error(_)}n("config",o,u)}async function $4(n,e,t,s,o){try{let u=[];if(o&&o.send_to){let f=o.send_to;Array.isArray(f)||(f=[f]);const _=await yA(t);for(const y of f){const b=_.find(I=>I.measurementId===y),E=b&&e[b.appId];if(E)u.push(E);else{u=[];break}}}u.length===0&&(u=Object.values(e)),await Promise.all(u),n("event",s,o||{})}catch(u){bi.error(u)}}function K4(n,e,t,s){async function o(u,...f){try{if(u==="event"){const[_,y]=f;await $4(n,e,t,_,y)}else if(u==="config"){const[_,y]=f;await Z4(n,e,t,s,_,y)}else if(u==="consent"){const[_,y]=f;n("consent",_,y)}else if(u==="get"){const[_,y,b]=f;n("get",_,y,b)}else if(u==="set"){const[_]=f;n("set",_)}else n(u,...f)}catch(_){bi.error(_)}}return o}function Y4(n,e,t,s,o){let u=function(...f){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=K4(u,n,e,t),{gtagCore:u,wrappedGtag:window[o]}}function W4(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ny)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=30,X4=1e3;class J4{constructor(e={},t=X4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xA=new J4;function e3(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function t3(n){const{appId:e,apiKey:t}=n,s={method:"GET",headers:e3(t)},o=z4.replace("{app-id}",e),u=await fetch(o,s);if(u.status!==200&&u.status!==304){let f="";try{const _=await u.json();_.error?.message&&(f=_.error.message)}catch{}throw Zi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:f})}return u.json()}async function n3(n,e=xA,t){const{appId:s,apiKey:o,measurementId:u}=n.options;if(!s)throw Zi.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:s};throw Zi.create("no-api-key")}const f=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},_=new r3;return setTimeout(async()=>{_.abort()},U4),bA({appId:s,apiKey:o,measurementId:u},f,_,e)}async function bA(n,{throttleEndTimeMillis:e,backoffCount:t},s,o=xA){const{appId:u,measurementId:f}=n;try{await i3(s,e)}catch(_){if(f)return bi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:u,measurementId:f};throw _}try{const _=await t3(n);return o.deleteThrottleMetadata(u),_}catch(_){const y=_;if(!s3(y)){if(o.deleteThrottleMetadata(u),f)return bi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:f};throw _}const b=Number(y?.customData?.httpStatus)===503?Ew(t,o.intervalMillis,Q4):Ew(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return o.setThrottleMetadata(u,E),bi.debug(`Calling attemptFetch again in ${b} millis`),bA(n,E,s,o)}}function i3(n,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),s(Zi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function s3(n){if(!(n instanceof ws)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class r3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function a3(n,e,t,s,o){if(o&&o.global){n("event",t,s);return}else{const u=await e,f={...s,send_to:u};n("event",t,f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(){if(X_())try{await J_()}catch(n){return bi.warn(Zi.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return bi.warn(Zi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function l3(n,e,t,s,o,u,f){const _=n3(n);_.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&bi.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>bi.error(N)),e.push(_);const y=o3().then(N=>{if(N)return s.getId()}),[b,E]=await Promise.all([_,y]);W4(u)||q4(u,b.measurementId),o("js",new Date);const I=f?.config??{};return I[V4]="firebase",I.update=!0,E!=null&&(I[O4]=E),o("config",b.measurementId,I),b.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.app=e}_delete(){return delete vh[this.app.options.appId],Promise.resolve()}}let vh={},oT=[];const lT={};let Bg="dataLayer",u3="gtag",cT,wA,uT=!1;function h3(){const n=[];if(pE()&&n.push("This is a browser extension environment."),gE()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=Zi.create("invalid-analytics-context",{errorInfo:e});bi.warn(t.message)}}function d3(n,e,t){h3();const s=n.options.appId;if(!s)throw Zi.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)bi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zi.create("no-api-key");if(vh[s]!=null)throw Zi.create("already-exists",{id:s});if(!uT){G4(Bg);const{wrappedGtag:u,gtagCore:f}=Y4(vh,oT,lT,Bg,u3);wA=u,cT=f,uT=!0}return vh[s]=l3(n,oT,lT,e,cT,Bg,t),new c3(n)}function f3(n=Zh()){n=Lt(n);const e=ma(n,cm);return e.isInitialized()?e.getImmediate():m3(n)}function m3(n,e={}){const t=ma(n,cm);if(t.isInitialized()){const o=t.getImmediate();if(So(e,t.getOptions()))return o;throw Zi.create("already-initialized")}return t.initialize({options:e})}function p3(n,e,t,s){n=Lt(n),a3(wA,vh[n.app.options.appId],e,t,s).catch(o=>bi.error(o))}const hT="@firebase/analytics",dT="0.10.18";function g3(){ys(new $i(cm,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return d3(s,o,t)},"PUBLIC")),ys(new $i("analytics-internal",n,"PRIVATE")),Qn(hT,dT),Qn(hT,dT,"esm2020");function n(e){try{const t=e.getProvider(cm).getImmediate();return{logEvent:(s,o,u)=>p3(t,s,o,u)}}catch(t){throw Zi.create("interop-component-reg-failed",{reason:t})}}}g3();var P_,fT,zm=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},TA=function(n){if(document.readyState==="loading")return"loading";var e=zm();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},_3=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},iy=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var s=n,o=s.id?"#"+s.id:_3(s)+(s.classList&&s.classList.value&&s.classList.value.trim()&&s.classList.value.trim().length?"."+s.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,s.id)break;n=s.parentNode}}catch{}return t},EA=-1,v3=function(){return EA},sd=function(n){addEventListener("pageshow",function(e){e.persisted&&(EA=e.timeStamp,n(e))},!0)},sy=function(){var n=zm();return n&&n.activationStart||0},jo=function(n,e){var t=zm(),s="navigate";return v3()>=0?s="back-forward-cache":t&&(document.prerendering||sy()>0?s="prerender":document.wasDiscarded?s="restore":t.type&&(s=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:s}},au=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var s=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return s.observe(Object.assign({type:n,buffered:!0},t||{})),s}}catch{}},Lo=function(n,e,t,s){var o,u;return function(f){e.value>=0&&(f||s)&&((u=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=u,e.rating=function(_,y){return _>y[1]?"poor":_>y[0]?"needs-improvement":"good"}(e.value,t),n(e))}},ry=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},Bm=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},ay=function(n){var e=!1;return function(){e||(n(),e=!0)}},Lc=-1,mT=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},um=function(n){document.visibilityState==="hidden"&&Lc>-1&&(Lc=n.type==="visibilitychange"?n.timeStamp:0,y3())},pT=function(){addEventListener("visibilitychange",um,!0),addEventListener("prerenderingchange",um,!0)},y3=function(){removeEventListener("visibilitychange",um,!0),removeEventListener("prerenderingchange",um,!0)},SA=function(){return Lc<0&&(Lc=mT(),pT(),sd(function(){setTimeout(function(){Lc=mT(),pT()},0)})),{get firstHiddenTime(){return Lc}}},oy=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},gT=[1800,3e3],x3=function(n,e){e=e||{},oy(function(){var t,s=SA(),o=jo("FCP"),u=au("paint",function(f){f.forEach(function(_){_.name==="first-contentful-paint"&&(u.disconnect(),_.startTime<s.firstHiddenTime&&(o.value=Math.max(_.startTime-sy(),0),o.entries.push(_),t(!0)))})});u&&(t=Lo(n,o,gT,e.reportAllChanges),sd(function(f){o=jo("FCP"),t=Lo(n,o,gT,e.reportAllChanges),ry(function(){o.value=performance.now()-f.timeStamp,t(!0)})}))})},_T=[.1,.25],b3=function(n,e){(function(t,s){s=s||{},x3(ay(function(){var o,u=jo("CLS",0),f=0,_=[],y=function(E){E.forEach(function(I){if(!I.hadRecentInput){var N=_[0],F=_[_.length-1];f&&I.startTime-F.startTime<1e3&&I.startTime-N.startTime<5e3?(f+=I.value,_.push(I)):(f=I.value,_=[I])}}),f>u.value&&(u.value=f,u.entries=_,o())},b=au("layout-shift",y);b&&(o=Lo(t,u,_T,s.reportAllChanges),Bm(function(){y(b.takeRecords()),o(!0)}),sd(function(){f=0,u=jo("CLS",0),o=Lo(t,u,_T,s.reportAllChanges),ry(function(){return o()})}),setTimeout(o,0))}))})(function(t){var s=function(o){var u,f={};if(o.entries.length){var _=o.entries.reduce(function(b,E){return b&&b.value>E.value?b:E});if(_&&_.sources&&_.sources.length){var y=(u=_.sources).find(function(b){return b.node&&b.node.nodeType===1})||u[0];y&&(f={largestShiftTarget:iy(y.node),largestShiftTime:_.startTime,largestShiftValue:_.value,largestShiftSource:y,largestShiftEntry:_,loadState:TA(_.startTime)})}}return Object.assign(o,{attribution:f})}(t);n(s)},e)},AA=0,Fg=1/0,vf=0,w3=function(n){n.forEach(function(e){e.interactionId&&(Fg=Math.min(Fg,e.interactionId),vf=Math.max(vf,e.interactionId),AA=vf?(vf-Fg)/7+1:0)})},NA=function(){return P_?AA:performance.interactionCount||0},T3=function(){"interactionCount"in performance||P_||(P_=au("event",w3,{type:"event",buffered:!0,durationThreshold:0}))},Hs=[],yh=new Map,IA=0,E3=function(){var n=Math.min(Hs.length-1,Math.floor((NA()-IA)/50));return Hs[n]},RA=[],S3=function(n){if(RA.forEach(function(o){return o(n)}),n.interactionId||n.entryType==="first-input"){var e=Hs[Hs.length-1],t=yh.get(n.interactionId);if(t||Hs.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var s={id:n.interactionId,latency:n.duration,entries:[n]};yh.set(s.id,s),Hs.push(s)}Hs.sort(function(o,u){return u.latency-o.latency}),Hs.length>10&&Hs.splice(10).forEach(function(o){return yh.delete(o.id)})}}},ly=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=ay(n),document.visibilityState==="hidden"?n():(t=e(n),Bm(n)),t},vT=[200,500],A3=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},oy(function(){var t;T3();var s,o=jo("INP"),u=function(_){ly(function(){_.forEach(S3);var y=E3();y&&y.latency!==o.value&&(o.value=y.latency,o.entries=y.entries,s())})},f=au("event",u,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});s=Lo(n,o,vT,e.reportAllChanges),f&&(f.observe({type:"first-input",buffered:!0}),Bm(function(){u(f.takeRecords()),s(!0)}),sd(function(){IA=NA(),Hs.length=0,yh.clear(),o=jo("INP"),s=Lo(n,o,vT,e.reportAllChanges)}))}))},Hc=[],_o=[],M_=0,cy=new WeakMap,qc=new Map,j_=-1,N3=function(n){Hc=Hc.concat(n),CA()},CA=function(){j_<0&&(j_=ly(I3))},I3=function(){qc.size>10&&qc.forEach(function(f,_){yh.has(_)||qc.delete(_)});var n=Hs.map(function(f){return cy.get(f.entries[0])}),e=_o.length-50;_o=_o.filter(function(f,_){return _>=e||n.includes(f)});for(var t=new Set,s=0;s<_o.length;s++){var o=_o[s];kA(o.startTime,o.processingEnd).forEach(function(f){t.add(f)})}var u=Hc.length-1-50;Hc=Hc.filter(function(f,_){return f.startTime>M_&&_>u||t.has(f)}),j_=-1};RA.push(function(n){n.interactionId&&n.target&&!qc.has(n.interactionId)&&qc.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;M_=Math.max(M_,n.processingEnd);for(var s=_o.length-1;s>=0;s--){var o=_o[s];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},_o.push(e)),(n.interactionId||n.entryType==="first-input")&&cy.set(n,e),CA()});var kA=function(n,e){for(var t,s=[],o=0;t=Hc[o];o++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;s.push(t)}return s},R3=function(n,e){fT||(fT=au("long-animation-frame",N3)),A3(function(t){var s=function(o){var u=o.entries[0],f=cy.get(u),_=u.processingStart,y=f.processingEnd,b=f.entries.sort(function(q,Y){return q.processingStart-Y.processingStart}),E=kA(u.startTime,y),I=o.entries.find(function(q){return q.target}),N=I&&I.target||qc.get(u.interactionId),F=[u.startTime+u.duration,y].concat(E.map(function(q){return q.startTime+q.duration})),H=Math.max.apply(Math,F),D={interactionTarget:iy(N),interactionTargetElement:N,interactionType:u.name.startsWith("key")?"keyboard":"pointer",interactionTime:u.startTime,nextPaintTime:H,processedEventEntries:b,longAnimationFrameEntries:E,inputDelay:_-u.startTime,processingDuration:y-_,presentationDelay:Math.max(H-y,0),loadState:TA(u.startTime)};return Object.assign(o,{attribution:D})}(t);n(s)},e)},yT=[2500,4e3],Hg={},C3=function(n,e){(function(t,s){s=s||{},oy(function(){var o,u=SA(),f=jo("LCP"),_=function(E){s.reportAllChanges||(E=E.slice(-1)),E.forEach(function(I){I.startTime<u.firstHiddenTime&&(f.value=Math.max(I.startTime-sy(),0),f.entries=[I],o())})},y=au("largest-contentful-paint",_);if(y){o=Lo(t,f,yT,s.reportAllChanges);var b=ay(function(){Hg[f.id]||(_(y.takeRecords()),y.disconnect(),Hg[f.id]=!0,o(!0))});["keydown","click"].forEach(function(E){addEventListener(E,function(){return ly(b)},{once:!0,capture:!0})}),Bm(b),sd(function(E){f=jo("LCP"),o=Lo(t,f,yT,s.reportAllChanges),ry(function(){f.value=performance.now()-E.timeStamp,Hg[f.id]=!0,o(!0)})})}})})(function(t){var s=function(o){var u={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var f=zm();if(f){var _=f.activationStart||0,y=o.entries[o.entries.length-1],b=y.url&&performance.getEntriesByType("resource").filter(function(H){return H.name===y.url})[0],E=Math.max(0,f.responseStart-_),I=Math.max(E,b?(b.requestStart||b.startTime)-_:0),N=Math.max(I,b?b.responseEnd-_:0),F=Math.max(N,y.startTime-_);u={element:iy(y.element),timeToFirstByte:E,resourceLoadDelay:I-E,resourceLoadDuration:N-I,elementRenderDelay:F-N,navigationEntry:f,lcpEntry:y},y.url&&(u.url=y.url),b&&(u.lcpResourceEntry=b)}}return Object.assign(o,{attribution:u})}(t);n(s)},e)};const xT="@firebase/performance",L_="0.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=L_,k3="FB-PERF-TRACE-START",P3="FB-PERF-TRACE-STOP",D_="FB-PERF-TRACE-MEASURE",MA="_wt_",jA="_fp",LA="_fcp",DA="_fid",OA="_lcp",M3="lcp_element",VA="_inp",j3="inp_interactionTarget",UA="_cls",L3="cls_largestShiftTarget",zA="@firebase/performance/config",BA="@firebase/performance/configexpire",D3="performance",FA="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},Kn=new Oo(D3,FA,O3);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Gh(FA);da.logLevel=st.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qg,HA;class vn{constructor(e){if(this.window=e,!e)throw Kn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=C3,this.onINP=R3,this.onCLS=b3}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,s){!this.performance||!this.performance.measure||this.performance.measure(e,t,s)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!gE()?(da.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):X_()?!0:(da.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const u of o.getEntries())t(u)}).observe({entryTypes:[e]})}static getInstance(){return qg===void 0&&(qg=new vn(HA)),qg}}function V3(n){HA=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qA;function U3(n){const e=n.getId();return e.then(t=>{qA=t}),e}function uy(){return qA}function z3(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n,e){const t=n.length-e.length;if(t<0||t>1)throw Kn.create("invalid String merger input");const s=[];for(let o=0;o<n.length;o++)s.push(n.charAt(o)),e.length>o&&s.push(e.charAt(o));return s.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gg;class li{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=bT("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=bT("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12,this.logMaxFlushSize=40}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Gg===void 0&&(Gg=new li),Gg}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xh;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(xh||(xh={}));const B3=["firebase_","google_","ga_"],F3=new RegExp("^[a-zA-Z]\\w*$"),H3=40,O_=100;function q3(){const n=vn.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function G3(){switch(vn.getInstance().document.visibilityState){case"visible":return xh.VISIBLE;case"hidden":return xh.HIDDEN;default:return xh.UNKNOWN}}function Z3(){const e=vn.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function $3(n){return n.length===0||n.length>H3?!1:!B3.some(t=>n.startsWith(t))&&!!n.match(F3)}function K3(n){return n.length!==0&&n.length<=O_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(n){const e=n.options?.appId;if(!e)throw Kn.create("no app id");return e}function Y3(n){const e=n.options?.projectId;if(!e)throw Kn.create("no project id");return e}function W3(n){const e=n.options?.apiKey;if(!e)throw Kn.create("no api key");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3="0.0.1",Hi={loggingEnabled:!0},X3="FIREBASE_INSTALLATIONS_AUTH";function J3(n,e){const t=e6();return t?(wT(t),Promise.resolve()):i6(n,e).then(wT).then(s=>t6(s),()=>{})}function e6(){const n=vn.getInstance().localStorage;if(!n)return;const e=n.getItem(BA);if(!e||!s6(e))return;const t=n.getItem(zA);if(t)try{return JSON.parse(t)}catch{return}}function t6(n){const e=vn.getInstance().localStorage;!n||!e||(e.setItem(zA,JSON.stringify(n)),e.setItem(BA,String(Date.now()+li.getInstance().configTimeToLive*60*60*1e3)))}const n6="Could not fetch config, will use default configs";function i6(n,e){return z3(n.installations).then(t=>{const s=Y3(n.app),o=W3(n.app),u=`https://firebaseremoteconfig.googleapis.com/v1/projects/${s}/namespaces/fireperf:fetch?key=${o}`,f=new Request(u,{method:"POST",headers:{Authorization:`${X3} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:GA(n.app),app_version:PA,sdk_version:Q3})});return fetch(f).then(_=>{if(_.ok)return _.json();throw Kn.create("RC response not ok")})}).catch(()=>{da.info(n6)})}function wT(n){if(!n)return n;const e=li.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=Hi.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):Hi.logSource&&(e.logSource=Hi.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:Hi.logEndPointUrl&&(e.logEndPointUrl=Hi.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:Hi.transportKey&&(e.transportKey=Hi.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):Hi.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=Hi.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):Hi.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=Hi.tracesSamplingRate),t.fpr_log_max_flush_size?e.logMaxFlushSize=Number(t.fpr_log_max_flush_size):Hi.logMaxFlushSize&&(e.logMaxFlushSize=Hi.logMaxFlushSize),e.logTraceAfterSampling=TT(e.tracesSamplingRate),e.logNetworkAfterSampling=TT(e.networkRequestsSamplingRate),n}function s6(n){return Number(n)>Date.now()}function TT(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy=1,Zg;function ZA(n){return hy=2,Zg=Zg||a6(n),Zg}function r6(){return hy===3}function a6(n){return o6().then(()=>U3(n.installations)).then(e=>J3(n,e)).then(()=>ET(),()=>ET())}function o6(){const n=vn.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function ET(){hy=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=10*1e3,l6=5.5*1e3,c6=1e3,KA=3,u6=65536,h6=new TextEncoder;let Pf=KA,ms=[],ST=!1;function d6(){ST||(dy(l6),ST=!0)}function dy(n){setTimeout(()=>{Pf<=0||(ms.length>0&&f6(),dy($A))},n)}function f6(){const n=ms.splice(0,c6),e=V_(n);m6(e).then(()=>{Pf=KA}).catch(()=>{ms=[...n,...ms],Pf--,da.info(`Tries left: ${Pf}.`),dy($A)})}function V_(n){const e=n.map(s=>({source_extension_json_proto3:s.message,event_time_ms:String(s.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:li.getInstance().logSource,log_event:e};return JSON.stringify(t)}function m6(n){const e=li.getInstance().getFlTransportFullUrl();return h6.encode(n).length<=u6&&navigator.sendBeacon&&navigator.sendBeacon(e,n)?Promise.resolve():fetch(e,{method:"POST",body:n})}function p6(n){if(!n.eventTime||!n.message)throw Kn.create("invalid cc log");ms=[...ms,n]}function g6(n){return(...e)=>{const t=n(...e);p6({message:t,eventTime:Date.now()})}}function _6(){const n=li.getInstance().getFlTransportFullUrl();for(;ms.length>0;){const e=ms.splice(-li.getInstance().logMaxFlushSize),t=V_(e);if(!(navigator.sendBeacon&&navigator.sendBeacon(n,t))){ms=[...ms,...e];break}}if(ms.length>0){const e=V_(ms);fetch(n,{method:"POST",body:e}).catch(()=>{da.info("Failed flushing queued events.")})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh;function YA(n,e){bh||(bh={send:g6(x6),flush:_6}),bh.send(n,e)}function yf(n){const e=li.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||vn.getInstance().requiredApisAvailable()&&(r6()?$g(n):ZA(n.performanceController).then(()=>$g(n),()=>$g(n)))}function v6(){bh&&bh.flush()}function $g(n){if(!uy())return;const e=li.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||YA(n,1)}function y6(n){const e=li.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,s=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===s||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||YA(n,0)}function x6(n,e){return e===0?b6(n):w6(n)}function b6(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:WA(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function w6(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const s={application_info:WA(n.performanceController.app),trace_metric:e};return JSON.stringify(s)}function WA(n){return{google_app_id:GA(n),app_instance_id:uy(),web_app_info:{sdk_version:PA,page_url:vn.getInstance().getUrl(),service_worker_status:q3(),visibility_state:G3(),effective_connection_type:Z3()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n,e){const t=e;if(!t||t.responseStart===void 0)return;const s=vn.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+s)*1e3),u=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,f=Math.floor((t.responseEnd-t.startTime)*1e3),_=t.name&&t.name.split("?")[0],y={performanceController:n,url:_,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:u,timeToResponseCompletedUs:f};y6(y)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=100,E6="_",S6=[jA,LA,DA,OA,UA,VA];function A6(n,e){return n.length===0||n.length>T6?!1:e&&e.startsWith(MA)&&S6.indexOf(n)>-1||!n.startsWith(E6)}function N6(n){const e=Math.floor(n);return e<n&&da.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,s=!1,o){this.performanceController=e,this.name=t,this.isAuto=s,this.state=1,this.customAttributes={},this.counters={},this.api=vn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${k3}-${this.randomId}-${this.name}`,this.traceStopMark=`${P3}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${D_}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw Kn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw Kn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),yf(this)}record(e,t,s){if(e<=0)throw Kn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw Kn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),s&&s.attributes&&(this.customAttributes={...s.attributes}),s&&s.metrics)for(const o of Object.keys(s.metrics))isNaN(Number(s.metrics[o]))||(this.counters[o]=Math.floor(Number(s.metrics[o])));yf(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(A6(e,this.name))this.counters[e]=N6(t??0);else throw Kn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const s=$3(e),o=K3(t);if(s&&o){this.customAttributes[e]=t;return}if(!s)throw Kn.create("invalid attribute name",{attributeName:e});if(!o)throw Kn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return{...this.customAttributes}}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,s,o,u){const f=vn.getInstance().getUrl();if(!f)return;const _=new Vh(e,MA+f,!0),y=Math.floor(vn.getInstance().getTimeOrigin()*1e3);_.setStartTime(y),t&&t[0]&&(_.setDuration(Math.floor(t[0].duration*1e3)),_.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),_.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),_.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const b="first-paint",E="first-contentful-paint";if(s){const I=s.find(F=>F.name===b);I&&I.startTime&&_.putMetric(jA,Math.floor(I.startTime*1e3));const N=s.find(F=>F.name===E);N&&N.startTime&&_.putMetric(LA,Math.floor(N.startTime*1e3)),u&&_.putMetric(DA,Math.floor(u*1e3))}this.addWebVitalMetric(_,OA,M3,o.lcp),this.addWebVitalMetric(_,UA,L3,o.cls),this.addWebVitalMetric(_,VA,j3,o.inp),yf(_),v6()}static addWebVitalMetric(e,t,s,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&(o.elementAttribution.length>O_?e.putAttribute(s,o.elementAttribution.substring(0,O_)):e.putAttribute(s,o.elementAttribution)))}static createUserTimingTrace(e,t){const s=new Vh(e,t,!1,t);yf(s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf={},NT=!1,QA;function IT(n){uy()&&(setTimeout(()=>R6(n),0),setTimeout(()=>I6(n),0),setTimeout(()=>C6(n),0))}function I6(n){const e=vn.getInstance(),t=e.getEntriesByType("resource");for(const s of t)AT(n,s);e.setupObserver("resource",s=>AT(n,s))}function R6(n){const e=vn.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Kg(n)):e.document.addEventListener("unload",()=>Kg(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Kg(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{QA=t}),e.onLCP(t=>{Mf.lcp={value:t.value,elementAttribution:t.attribution?.element}}),e.onCLS(t=>{Mf.cls={value:t.value,elementAttribution:t.attribution?.largestShiftTarget}}),e.onINP(t=>{Mf.inp={value:t.value,elementAttribution:t.attribution?.interactionTarget}})}function C6(n){const e=vn.getInstance(),t=e.getEntriesByType("measure");for(const s of t)RT(n,s);e.setupObserver("measure",s=>RT(n,s))}function RT(n,e){const t=e.name;t.substring(0,D_.length)!==D_&&Vh.createUserTimingTrace(n,t)}function Kg(n){if(!NT){NT=!0;const e=vn.getInstance(),t=e.getEntriesByType("navigation"),s=e.getEntriesByType("paint");setTimeout(()=>{Vh.createOobTrace(n,t,s,Mf,QA)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),vn.getInstance().requiredApisAvailable()?J_().then(t=>{t&&(d6(),ZA(this).then(()=>IT(this),()=>IT(this)),this.initialized=!0)}).catch(t=>{da.info(`Environment doesn't support IndexedDB: ${t}`)}):da.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){li.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return li.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){li.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return li.getInstance().dataCollectionEnabled}}const P6="[DEFAULT]";function M6(n=Zh()){return n=Lt(n),ma(n,"performance").getImmediate()}const j6=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),s=n.getProvider("installations-internal").getImmediate();if(t.name!==P6)throw Kn.create("FB not default");if(typeof window>"u")throw Kn.create("no window");V3(window);const o=new k6(t,s);return o._init(e),o};function L6(){ys(new $i("performance",j6,"PUBLIC")),Qn(xT,L_),Qn(xT,L_,"esm2020")}L6();function D6(){const n=[];if(n.length>0)throw new Error(`Missing Firebase environment variables: ${n.join(", ")}. Create a .env.local with VITE_ variables as documented in README.`)}D6();const O6={apiKey:"AIzaSyC7FbIWC863CPOLAgHBSjh63lcZtmbftxc",authDomain:"travel-v2-e5507.firebaseapp.com",projectId:"travel-v2-e5507",storageBucket:"travel-v2-e5507.firebasestorage.app",messagingSenderId:"355011873482",appId:"1:355011873482:web:28e2975436f93b85a60233",measurementId:"G-VVVXYDFB1B"},Uh=xE(O6),eh=NM(Uh),rn=AD(Uh),fy=KO(Uh);let V6=null,U6=null;if(typeof window<"u")try{V6=f3(Uh),U6=M6(Uh),console.log("📊 Firebase Analytics & Performance 초기화됨")}catch(n){console.warn("⚠️ Analytics/Performance 초기화 실패:",n)}const XA=U.createContext(void 0);function Ys(){const n=U.useContext(XA);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}function z6({children:n}){const[e,t]=U.useState(null),[s,o]=U.useState(!0),[u,f]=U.useState(null);U.useEffect(()=>pP(eh,F=>{t(F),o(!1)}),[]);const I={user:e,loading:s,error:u,signInAnonymously:async()=>{try{f(null),o(!0),await oP(eh)}catch(N){f(N instanceof Error?N.message:"익명 로그인에 실패했습니다.")}finally{o(!1)}},signInWithEmailAndPassword:async(N,F)=>{try{f(null),o(!0),await dP(eh,N,F)}catch(H){throw f(H instanceof Error?H.message:"이메일 로그인에 실패했습니다."),H}finally{o(!1)}},signInWithGoogle:async()=>{try{f(null),o(!0);const N=new ea;await DP(eh,N)}catch(N){throw f(N instanceof Error?N.message:"Google 로그인에 실패했습니다."),N}finally{o(!1)}},signOut:async()=>{try{return f(null),await gP(eh),{success:!0}}catch(N){const F=N instanceof Error?N.message:"로그아웃에 실패했습니다.";return f(F),{success:!1,error:F}}}};return d.jsx(XA.Provider,{value:I,children:n})}U.createContext(void 0);function JA(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=JA(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function B6(){for(var n,e,t=0,s="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=JA(n))&&(s&&(s+=" "),s+=e);return s}const my="-",F6=n=>{const e=q6(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:f=>{const _=f.split(my);return _[0]===""&&_.length!==1&&_.shift(),eN(_,e)||H6(f)},getConflictingClassGroupIds:(f,_)=>{const y=t[f]||[];return _&&s[f]?[...y,...s[f]]:y}}},eN=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),o=s?eN(n.slice(1),s):void 0;if(o)return o;if(e.validators.length===0)return;const u=n.join(my);return e.validators.find(({validator:f})=>f(u))?.classGroupId},CT=/^\[(.+)\]$/,H6=n=>{if(CT.test(n)){const e=CT.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},q6=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return Z6(Object.entries(n.classGroups),t).forEach(([u,f])=>{U_(f,s,u,e)}),s},U_=(n,e,t,s)=>{n.forEach(o=>{if(typeof o=="string"){const u=o===""?e:kT(e,o);u.classGroupId=t;return}if(typeof o=="function"){if(G6(o)){U_(o(s),e,t,s);return}e.validators.push({validator:o,classGroupId:t});return}Object.entries(o).forEach(([u,f])=>{U_(f,kT(e,u),t,s)})})},kT=(n,e)=>{let t=n;return e.split(my).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},G6=n=>n.isThemeGetter,Z6=(n,e)=>e?n.map(([t,s])=>{const o=s.map(u=>typeof u=="string"?e+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([f,_])=>[e+f,_])):u);return[t,o]}):n,$6=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const o=(u,f)=>{t.set(u,f),e++,e>n&&(e=0,s=t,t=new Map)};return{get(u){let f=t.get(u);if(f!==void 0)return f;if((f=s.get(u))!==void 0)return o(u,f),f},set(u,f){t.has(u)?t.set(u,f):o(u,f)}}},tN="!",K6=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,o=e[0],u=e.length,f=_=>{const y=[];let b=0,E=0,I;for(let q=0;q<_.length;q++){let Y=_[q];if(b===0){if(Y===o&&(s||_.slice(q,q+u)===e)){y.push(_.slice(E,q)),E=q+u;continue}if(Y==="/"){I=q;continue}}Y==="["?b++:Y==="]"&&b--}const N=y.length===0?_:_.substring(E),F=N.startsWith(tN),H=F?N.substring(1):N,D=I&&I>E?I-E:void 0;return{modifiers:y,hasImportantModifier:F,baseClassName:H,maybePostfixModifierPosition:D}};return t?_=>t({className:_,parseClassName:f}):f},Y6=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},W6=n=>({cache:$6(n.cacheSize),parseClassName:K6(n),...F6(n)}),Q6=/\s+/,X6=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:o}=e,u=[],f=n.trim().split(Q6);let _="";for(let y=f.length-1;y>=0;y-=1){const b=f[y],{modifiers:E,hasImportantModifier:I,baseClassName:N,maybePostfixModifierPosition:F}=t(b);let H=!!F,D=s(H?N.substring(0,F):N);if(!D){if(!H){_=b+(_.length>0?" "+_:_);continue}if(D=s(N),!D){_=b+(_.length>0?" "+_:_);continue}H=!1}const q=Y6(E).join(":"),Y=I?q+tN:q,oe=Y+D;if(u.includes(oe))continue;u.push(oe);const ne=o(D,H);for(let pe=0;pe<ne.length;++pe){const xe=ne[pe];u.push(Y+xe)}_=b+(_.length>0?" "+_:_)}return _};function J6(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=nN(e))&&(s&&(s+=" "),s+=t);return s}const nN=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=nN(n[s]))&&(t&&(t+=" "),t+=e);return t};function eV(n,...e){let t,s,o,u=f;function f(y){const b=e.reduce((E,I)=>I(E),n());return t=W6(b),s=t.cache.get,o=t.cache.set,u=_,_(y)}function _(y){const b=s(y);if(b)return b;const E=X6(y,t);return o(y,E),E}return function(){return u(J6.apply(null,arguments))}}const Ot=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},iN=/^\[(?:([a-z-]+):)?(.+)\]$/i,tV=/^\d+\/\d+$/,nV=new Set(["px","full","screen"]),iV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rV=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aV=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oV=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Jr=n=>Gc(n)||nV.has(n)||tV.test(n),uo=n=>ou(n,"length",pV),Gc=n=>!!n&&!Number.isNaN(Number(n)),Yg=n=>ou(n,"number",Gc),th=n=>!!n&&Number.isInteger(Number(n)),lV=n=>n.endsWith("%")&&Gc(n.slice(0,-1)),Xe=n=>iN.test(n),ho=n=>iV.test(n),cV=new Set(["length","size","percentage"]),uV=n=>ou(n,cV,sN),hV=n=>ou(n,"position",sN),dV=new Set(["image","url"]),fV=n=>ou(n,dV,_V),mV=n=>ou(n,"",gV),nh=()=>!0,ou=(n,e,t)=>{const s=iN.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},pV=n=>sV.test(n)&&!rV.test(n),sN=()=>!1,gV=n=>aV.test(n),_V=n=>oV.test(n),vV=()=>{const n=Ot("colors"),e=Ot("spacing"),t=Ot("blur"),s=Ot("brightness"),o=Ot("borderColor"),u=Ot("borderRadius"),f=Ot("borderSpacing"),_=Ot("borderWidth"),y=Ot("contrast"),b=Ot("grayscale"),E=Ot("hueRotate"),I=Ot("invert"),N=Ot("gap"),F=Ot("gradientColorStops"),H=Ot("gradientColorStopPositions"),D=Ot("inset"),q=Ot("margin"),Y=Ot("opacity"),oe=Ot("padding"),ne=Ot("saturate"),pe=Ot("scale"),xe=Ot("sepia"),ge=Ot("skew"),G=Ot("space"),k=Ot("translate"),j=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",Xe,e],V=()=>[Xe,e],M=()=>["",Jr,uo],ve=()=>["auto",Gc,Xe],ke=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>["start","end","center","between","around","evenly","stretch"],Ee=()=>["","0",Xe],_e=()=>["auto","avoid","all","avoid-page","page","left","right","column"],je=()=>[Gc,Xe];return{cacheSize:500,separator:":",theme:{colors:[nh],spacing:[Jr,uo],blur:["none","",ho,Xe],brightness:je(),borderColor:[n],borderRadius:["none","","full",ho,Xe],borderSpacing:V(),borderWidth:M(),contrast:je(),grayscale:Ee(),hueRotate:je(),invert:Ee(),gap:V(),gradientColorStops:[n],gradientColorStopPositions:[lV,uo],inset:Z(),margin:Z(),opacity:je(),padding:V(),saturate:je(),scale:je(),sepia:Ee(),skew:je(),space:V(),translate:V()},classGroups:{aspect:[{aspect:["auto","square","video",Xe]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":_e()}],"break-before":[{"break-before":_e()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ke(),Xe]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[D]}],"inset-x":[{"inset-x":[D]}],"inset-y":[{"inset-y":[D]}],start:[{start:[D]}],end:[{end:[D]}],top:[{top:[D]}],right:[{right:[D]}],bottom:[{bottom:[D]}],left:[{left:[D]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",th,Xe]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Xe]}],grow:[{grow:Ee()}],shrink:[{shrink:Ee()}],order:[{order:["first","last","none",th,Xe]}],"grid-cols":[{"grid-cols":[nh]}],"col-start-end":[{col:["auto",{span:["full",th,Xe]},Xe]}],"col-start":[{"col-start":ve()}],"col-end":[{"col-end":ve()}],"grid-rows":[{"grid-rows":[nh]}],"row-start-end":[{row:["auto",{span:[th,Xe]},Xe]}],"row-start":[{"row-start":ve()}],"row-end":[{"row-end":ve()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Xe]}],gap:[{gap:[N]}],"gap-x":[{"gap-x":[N]}],"gap-y":[{"gap-y":[N]}],"justify-content":[{justify:["normal",...J()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...J(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...J(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[oe]}],px:[{px:[oe]}],py:[{py:[oe]}],ps:[{ps:[oe]}],pe:[{pe:[oe]}],pt:[{pt:[oe]}],pr:[{pr:[oe]}],pb:[{pb:[oe]}],pl:[{pl:[oe]}],m:[{m:[q]}],mx:[{mx:[q]}],my:[{my:[q]}],ms:[{ms:[q]}],me:[{me:[q]}],mt:[{mt:[q]}],mr:[{mr:[q]}],mb:[{mb:[q]}],ml:[{ml:[q]}],"space-x":[{"space-x":[G]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[G]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Xe,e]}],"min-w":[{"min-w":[Xe,e,"min","max","fit"]}],"max-w":[{"max-w":[Xe,e,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[Xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yg]}],"font-family":[{font:[nh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Xe]}],"line-clamp":[{"line-clamp":["none",Gc,Yg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Jr,Xe]}],"list-image":[{"list-image":["none",Xe]}],"list-style-type":[{list:["none","disc","decimal",Xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[Y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[Y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Jr,uo]}],"underline-offset":[{"underline-offset":["auto",Jr,Xe]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ke(),hV]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uV]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fV]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[H]}],"gradient-via-pos":[{via:[H]}],"gradient-to-pos":[{to:[H]}],"gradient-from":[{from:[F]}],"gradient-via":[{via:[F]}],"gradient-to":[{to:[F]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[_]}],"border-w-x":[{"border-x":[_]}],"border-w-y":[{"border-y":[_]}],"border-w-s":[{"border-s":[_]}],"border-w-e":[{"border-e":[_]}],"border-w-t":[{"border-t":[_]}],"border-w-r":[{"border-r":[_]}],"border-w-b":[{"border-b":[_]}],"border-w-l":[{"border-l":[_]}],"border-opacity":[{"border-opacity":[Y]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[_]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[_]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Y]}],"divide-style":[{divide:X()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Jr,Xe]}],"outline-w":[{outline:[Jr,uo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[Y]}],"ring-offset-w":[{"ring-offset":[Jr,uo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ho,mV]}],"shadow-color":[{shadow:[nh]}],opacity:[{opacity:[Y]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[y]}],"drop-shadow":[{"drop-shadow":["","none",ho,Xe]}],grayscale:[{grayscale:[b]}],"hue-rotate":[{"hue-rotate":[E]}],invert:[{invert:[I]}],saturate:[{saturate:[ne]}],sepia:[{sepia:[xe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[y]}],"backdrop-grayscale":[{"backdrop-grayscale":[b]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[E]}],"backdrop-invert":[{"backdrop-invert":[I]}],"backdrop-opacity":[{"backdrop-opacity":[Y]}],"backdrop-saturate":[{"backdrop-saturate":[ne]}],"backdrop-sepia":[{"backdrop-sepia":[xe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[f]}],"border-spacing-x":[{"border-spacing-x":[f]}],"border-spacing-y":[{"border-spacing-y":[f]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Xe]}],duration:[{duration:je()}],ease:[{ease:["linear","in","out","in-out",Xe]}],delay:[{delay:je()}],animate:[{animate:["none","spin","ping","pulse","bounce",Xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[pe]}],"scale-x":[{"scale-x":[pe]}],"scale-y":[{"scale-y":[pe]}],rotate:[{rotate:[th,Xe]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[ge]}],"skew-y":[{"skew-y":[ge]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Xe]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Xe]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Xe]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Jr,uo,Yg]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yV=eV(vV);function Zs(...n){return yV(B6(n))}const Me=({children:n,className:e,variant:t="default",withWaveEffect:s=!1,hoverable:o=!0,onClick:u,onKeyDown:f,..._})=>{const y={default:"bg-glass-light backdrop-blur-md border border-white/20",strong:"bg-glass-strong backdrop-blur-xl border border-white/30",light:"bg-glass-light backdrop-blur-sm border border-white/10",travel:"bg-gradient-to-br from-primary-500/10 via-glass-medium to-travel-blue/10 backdrop-blur-lg border border-primary-300/20"},b=E=>{u&&(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),u(E)),f?.(E)};return d.jsxs("div",{className:Zs(y[t],"rounded-2xl p-6 shadow-lg",o&&"transition-all duration-300 hover:bg-white/15 hover:border-white/30 hover:translate-y-[-2px] hover:shadow-xl",s&&"relative overflow-hidden","transform-gpu will-change-transform",e),onClick:u,onKeyDown:b,role:u?"button":void 0,tabIndex:u?0:void 0,..._,children:[s&&d.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-2xl",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent wave-animation"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-full h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent wave-animation",style:{animationDelay:"1s"}})]}),d.jsx("div",{className:Zs("relative z-10",s&&"relative"),children:n})]})},Oe=({children:n,onClick:e,variant:t="primary",size:s="md",className:o,ariaLabel:u,disabled:f=!1,..._})=>{const[y,b]=U.useState(!1),E=()=>{f||(b(!0),setTimeout(()=>b(!1),600),e?.())},I={primary:"bg-primary-500/20 backdrop-blur-xl border border-primary-300/30 text-white hover:bg-primary-400/30",secondary:"bg-glass-medium backdrop-blur-md border border-white/20 text-white/90 hover:bg-glass-strong",ghost:"bg-glass-light backdrop-blur-sm border border-white/10 text-white/80 hover:bg-glass-medium",travel:"bg-gradient-to-r from-travel-blue/20 to-travel-purple/20 backdrop-blur-lg border border-travel-blue/30 text-white hover:from-travel-blue/30 hover:to-travel-purple/30"},N={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"};return d.jsxs("button",{onClick:E,"aria-label":u,disabled:f,className:Zs("relative overflow-hidden rounded-xl font-semibold transition-all duration-300","active:scale-95 transform focus:outline-none focus:ring-2 focus:ring-white/50","touch-manipulation transform-gpu will-change-transform","flex items-center justify-center",I[t],N[s],f&&"opacity-50 cursor-not-allowed",o),..._,children:[d.jsx("div",{className:Zs("absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent","wave-animation",f&&"hidden")}),y&&d.jsx("div",{className:"absolute inset-0 bg-white/20 wave-ripple rounded-xl"}),d.jsx("span",{className:"relative z-10 break-keep-ko flex items-center justify-center w-full h-full",children:n})]})},xV=({trip:n,onClick:e,onEdit:t,onDelete:s,className:o,showActions:u=!1,...f})=>{const _=E=>new Date(E).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),y=()=>{const E=new Date(n.start_date),I=new Date(n.end_date),N=Math.abs(I.getTime()-E.getTime());return`${Math.ceil(N/(1e3*60*60*24))+1}일`},b=E=>{E.target.closest(".action-button")||e?.()};return d.jsxs(Me,{variant:"travel",hoverable:!!e,withWaveEffect:!0,className:Zs("cursor-pointer group transition-all duration-300","hover:scale-105 hover:shadow-2xl",o),onClick:b,...f,children:[d.jsxs("div",{className:"relative w-full h-32 sm:h-36 md:h-40 mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-travel-blue/20 to-travel-purple/20",children:[n.cover_image?d.jsx("img",{src:n.cover_image,alt:n.title,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(DT,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 text-white/60"})}),d.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 bg-black/30 backdrop-blur-sm rounded-full px-2 py-1 sm:px-3 sm:py-1",children:d.jsx("span",{className:"text-white text-xs sm:text-sm font-semibold",children:y()})}),u&&(t||s)&&d.jsxs("div",{className:"absolute top-2 left-2 sm:top-3 sm:left-3 flex items-center space-x-1 opacity-80 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[t&&d.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),t()},className:"action-button p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/40 transition-colors backdrop-blur-sm","aria-label":"여행 편집",children:d.jsx(jf,{className:"w-3 h-3 text-blue-300"})}),s&&d.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),window.confirm("이 여행을 삭제하시겠습니까?")&&s()},className:"action-button p-2 rounded-lg bg-red-500/20 hover:bg-red-500/40 transition-colors backdrop-blur-sm","aria-label":"여행 삭제",children:d.jsx(Lf,{className:"w-3 h-3 text-red-300"})})]})]}),d.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[d.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white group-hover:text-travel-blue transition-colors line-clamp-2",children:n.title}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(Wn,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsx("span",{className:"text-xs sm:text-sm",children:n.country})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(gs,{className:"w-3 h-3 sm:w-4 sm:h-4"}),d.jsxs("span",{className:"text-xs sm:text-sm",children:[_(n.start_date)," ~ ",_(n.end_date)]})]}),n.plans_count!==void 0&&d.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[d.jsx("span",{className:"text-white/60 text-xs sm:text-sm",children:"일정"}),d.jsxs("span",{className:"text-travel-orange font-semibold text-xs sm:text-sm",children:[n.plans_count,"개"]})]})]})]})};function Sr(){const n=fa(),e=n.pathname==="/",t=n.pathname==="/settings",s=n.pathname==="/trip-map";return d.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 p-4",role:"banner","aria-label":"페이지 상단 네비게이션",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex-shrink-0",children:d.jsx(sa,{to:"/",children:d.jsx(Oe,{variant:e?"primary":"ghost",size:"sm",ariaLabel:"홈으로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(EI,{size:20,className:"icon-enhanced"})})})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(sa,{to:"/trip-map",children:d.jsx(Oe,{variant:s?"primary":"ghost",size:"sm",ariaLabel:"지도로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(OT,{size:20,className:"icon-enhanced"})})}),d.jsx(sa,{to:"/settings",children:d.jsx(Oe,{variant:t?"primary":"ghost",size:"sm",ariaLabel:"설정으로 이동",className:"p-2 hover:bg-white/30 active:scale-95 focus:ring-2 focus:ring-white/50 transition-all",children:d.jsx(Df,{size:20,className:"icon-enhanced"})})})]})]})})})}function Ho(){const{user:n}=Ys();return d.jsx("footer",{className:"px-4 pb-6",role:"contentinfo","aria-label":"페이지 하단 정보",children:d.jsx("div",{className:"max-w-7xl mx-auto",children:d.jsxs(Me,{variant:"light",className:"p-6 relative overflow-hidden group",children:[d.jsxs("div",{className:"absolute inset-0 opacity-5 group-hover:opacity-10 transition-opacity duration-500",children:[d.jsx("div",{className:"absolute top-2 left-4 w-2 h-2 bg-gradient-to-r from-primary-400 to-secondary-400 rounded-full animate-pulse"}),d.jsx("div",{className:"absolute bottom-4 right-6 w-1 h-1 bg-gradient-to-r from-warning-400 to-error-400 rounded-full animate-bounce"}),d.jsx("div",{className:"absolute top-1/2 left-1/4 w-1 h-1 bg-gradient-to-r from-success-400 to-info-400 rounded-full animate-ping"})]}),d.jsx("div",{className:"relative z-10",children:d.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[d.jsx("div",{className:"w-6 h-6 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center shadow-lg",children:d.jsx(SI,{size:14,className:"text-white icon-enhanced",strokeWidth:2})}),d.jsx("span",{className:"text-white font-medium text-sm tracking-normal",children:"Moonwave Travel"})]}),d.jsx("div",{className:"text-center",children:d.jsxs("p",{className:"text-white/80 text-sm break-keep-ko leading-relaxed tracking-normal",children:["© 2025 Moonwave Travel •"," ",d.jsx("span",{className:"text-white font-medium",children:n?.displayName||n?.email?.split("@")[0]||"사용자"}),"님의 여행 공간"]})}),d.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[d.jsx(sa,{to:"/about",className:"text-white/80 text-sm hover:text-primary-400 transition-colors duration-300 tracking-normal underline decoration-primary-400/50 hover:decoration-primary-400",children:"About Moonwave Travel"}),d.jsx("span",{className:"text-white/80 text-sm",children:"•"}),d.jsx(sa,{to:"/terms",className:"text-white/80 text-sm hover:text-primary-400 transition-colors duration-300 tracking-normal underline decoration-primary-400/50 hover:decoration-primary-400",children:"Terms of Service"})]}),d.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/60",children:[d.jsx(Of,{size:12,className:"animate-pulse icon-enhanced",strokeWidth:1.5}),d.jsx("span",{className:"tracking-normal",children:"Made with"})]}),d.jsxs("div",{className:"flex items-center space-x-1 text-xs text-white/60",children:[d.jsx(AI,{size:12,className:"animate-spin icon-enhanced",strokeWidth:1.5}),d.jsx("span",{className:"tracking-normal",children:"Tailwind CSS"})]})]})]})}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700 transform -skew-x-12"})]})})})}const bV=()=>{const{user:n,loading:e}=Ys(),t=bs(),[s,o]=U.useState([]),[u,f]=U.useState(!1);U.useEffect(()=>{if(!n)return;const N=(async()=>{f(!0);try{const F=Bc(aa(rn,"trips"),Oh("user_id","==",n.uid),jc("created_at","desc"));return yo(F,D=>{const q=D.docs.map(Y=>({id:Y.id,...Y.data()}));o(q),f(!1)})}catch(F){console.error("여행 데이터 로드 실패:",F),f(!1)}})();return()=>{N instanceof Function&&N()}},[n]);const _=()=>{t("/trips/new")},y=I=>{t(`/trips/${I.id}`)},b=I=>{t(`/trips/${I.id}/edit`)},E=async I=>{if(I.id)try{await L1(xi(rn,"trips",I.id))}catch(N){console.error("여행 삭제 실패:",N),alert("여행 삭제에 실패했습니다.")}};return e?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})}):n?d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-24",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs(Me,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(Wn,{className:"w-8 h-8 text-travel-green mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.length}),d.jsx("div",{className:"text-white/60 text-sm",children:"여행"})]}),d.jsxs(Me,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(gs,{className:"w-8 h-8 text-travel-orange mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.reduce((I,N)=>I+(N.plans_count||0),0)}),d.jsx("div",{className:"text-white/60 text-sm",children:"일정"})]}),d.jsxs(Me,{variant:"light",className:"text-center p-4 animate-fade-in",children:[d.jsx(wh,{className:"w-8 h-8 text-travel-purple mx-auto mb-2"}),d.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(I=>new Date(I.end_date)<new Date).length}),d.jsx("div",{className:"text-white/60 text-sm",children:"완료"})]})]})}),d.jsx("div",{className:"mb-6",children:d.jsxs(Oe,{variant:"travel",size:"lg",onClick:_,className:"w-full",children:[d.jsx(Dc,{className:"w-5 h-5 mr-2"}),"새 여행 만들기"]})}),d.jsxs("div",{className:"pb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"내 여행"}),u?d.jsx("div",{className:"text-center text-white/60 py-8",children:"여행 목록을 불러오는 중..."}):s.length===0?d.jsxs(Me,{variant:"light",className:"text-center py-8 animate-fade-in",children:[d.jsx(wh,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-4",children:"아직 여행이 없어요"}),d.jsx(Oe,{variant:"ghost",onClick:_,children:"첫 번째 여행 만들기"})]}):d.jsx("div",{className:"space-y-4",children:s.map((I,N)=>d.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${N*.1}s`},children:d.jsx(xV,{trip:I,onClick:()=>y(I),onEdit:()=>b(I),onDelete:()=>E(I),showActions:!0})},I.id))})]})]})}),d.jsx(Ho,{})]}):(t("/login"),null)},wV=()=>{const{user:n}=Ys(),e=bs(),[t,s]=U.useState({title:"",country:"",start_date:"",end_date:""}),[o,u]=U.useState(null),[f,_]=U.useState(null),[y,b]=U.useState(!1),[E,I]=U.useState(null),N=ne=>{if(!ne)return"";const[pe,xe,ge]=ne.split("-"),G=new Date(Number(pe),Number(xe)-1,Number(ge)),j=["일","월","화","수","목","금","토"][G.getDay()],O=xe.padStart(2,"0"),Z=ge.padStart(2,"0");return`${pe}.${O}.${Z}.${j}`},F=["대한민국","일본","중국","미국","영국","프랑스","독일","이탈리아","스페인","캐나다","호주","태국","베트남","싱가포르","말레이시아","인도네시아","필리핀","인도","브라질","아르헨티나","기타"],H=ne=>{const pe=ne.target.files?.[0];if(pe){if(pe.size>5*1024*1024){I("이미지 크기는 5MB를 초과할 수 없습니다.");return}u(pe);const xe=new FileReader;xe.onload=ge=>{_(ge.target?.result)},xe.readAsDataURL(pe),I(null)}},D=()=>{u(null),_(null)},q=()=>{if(t.start_date&&t.end_date){const ne=new Date(t.start_date),pe=new Date(t.end_date),xe=Math.abs(pe.getTime()-ne.getTime());return Math.ceil(xe/(1e3*60*60*24))+1}return 0},Y=()=>t.title.trim()?t.title.length<2||t.title.length>60?(I("여행 제목은 2-60자 사이여야 합니다."),!1):t.country?!t.start_date||!t.end_date?(I("여행 날짜를 선택해주세요."),!1):new Date(t.start_date)>new Date(t.end_date)?(I("시작 날짜가 종료 날짜보다 늦을 수 없습니다."),!1):!0:(I("국가를 선택해주세요."),!1):(I("여행 제목을 입력해주세요."),!1),oe=async ne=>{if(ne.preventDefault(),!(!n||!Y())){b(!0),I(null);try{let pe="";if(o){const G=Qv(fy,`trip-covers/${n.uid}/${Date.now()}_${o.name}`),k=await Yv(G,o);pe=await Wv(k.ref)}const xe={user_id:n.uid,title:t.title.trim(),country:t.country,start_date:t.start_date,end_date:t.end_date,plans_count:0,created_at:ct.now(),updated_at:ct.now()};pe&&(xe.cover_image=pe);const ge=await D1(aa(rn,"trips"),xe);e(`/trips/${ge.id}`)}catch(pe){console.error("여행 생성 실패:",pe),I("여행 생성에 실패했습니다. 다시 시도해주세요.")}finally{b(!1)}}};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-6 animate-fade-in",children:[d.jsx("h1",{className:"text-2xl-ko md:text-3xl-ko lg:text-4xl-ko xl:text-5xl-ko font-bold text-white moonwave-glow break-keep-ko",children:"새 여행 만들기"}),d.jsx("p",{className:"text-sm-ko md:text-base-ko lg:text-lg-ko xl:text-xl-ko text-white/60 mt-2 tracking-ko-normal",children:"특별한 여행의 시작을 계획해보세요"})]}),d.jsxs("form",{onSubmit:oe,className:"w-full space-y-6",children:[d.jsxs(Me,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg-ko font-semibold text-white mb-4 tracking-ko-normal",children:"커버 이미지"}),f?d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:f,alt:"커버 이미지 미리보기",className:"w-full h-40 md:h-48 lg:h-56 object-cover rounded-xl"}),d.jsx(Oe,{type:"button",onClick:D,variant:"secondary",size:"sm",className:"absolute top-2 right-2 !p-2 !px-2 !py-2 rounded-full",ariaLabel:"이미지 삭제",children:d.jsx(Ml,{className:"w-4 h-4"})})]}):d.jsxs("label",{className:"block w-full h-40 md:h-48 lg:h-56 border-2 border-dashed border-white/30 rounded-xl cursor-pointer hover:border-white/50 transition-colors touch-optimized wave-float",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(B_,{className:"w-8 h-8 mb-2 wave-pulse"}),d.jsx("span",{className:"text-sm-ko tracking-ko-normal",children:"이미지 업로드"}),d.jsx("span",{className:"text-xs-ko mt-1 text-white/40",children:"최대 5MB"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"hidden"})]})]}),d.jsx(Me,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"여행 제목 *"}),d.jsx("input",{type:"text",value:t.title,onChange:ne=>s({...t,title:ne.target.value}),placeholder:"예: 도쿄 벚꽃 여행",maxLength:60,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all"}),d.jsxs("div",{className:"text-xs-ko text-white/60 mt-1 text-numeric",children:[t.title.length,"/60자"]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(Wn,{className:"w-4 h-4 inline mr-1"}),"국가 *"]}),d.jsxs("select",{value:t.country,onChange:ne=>s({...t,country:ne.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all",children:[d.jsx("option",{value:"",disabled:!0,children:"국가를 선택해주세요"}),F.map(ne=>d.jsx("option",{value:ne,className:"bg-primary-800 text-base-ko",children:ne},ne))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(gs,{className:"w-4 h-4 inline mr-1"}),"시작일 *"]}),d.jsx("input",{type:"date",value:t.start_date,onChange:ne=>s({...t,start_date:ne.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.start_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:N(t.start_date)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"종료일 *"}),d.jsx("input",{type:"date",value:t.end_date,onChange:ne=>s({...t,end_date:ne.target.value}),min:t.start_date,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),t.end_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:N(t.end_date)})]})]}),t.start_date&&t.end_date&&d.jsx(Me,{variant:"light",className:"animate-fade-in moonwave-glow",children:d.jsxs("p",{className:"text-white text-sm-ko text-center tracking-ko-normal",children:[d.jsx(gs,{className:"w-4 h-4 inline mr-1"}),"총 ",d.jsxs("span",{className:"font-bold text-travel-blue text-numeric",children:[q(),"일"]})," 여행"]})})]})}),E&&d.jsx(Me,{variant:"strong",className:"animate-fade-in wave-pulse",children:d.jsx("p",{className:"text-error-foreground text-sm-ko text-center tracking-ko-normal break-keep-ko",children:E})}),d.jsx(Oe,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in touch-optimized wave-optimized group relative overflow-hidden",style:{animationDelay:"0.3s"},disabled:y,ariaLabel:y?"여행 생성 중":"여행 만들기",children:y?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{className:"text-base-ko tracking-ko-normal",children:"여행 생성 중..."})]}):d.jsxs("span",{className:"text-base-ko tracking-ko-normal flex items-center justify-center space-x-2 group-hover:scale-105 transition-transform",children:[d.jsx("span",{children:"여행 만들기"}),d.jsx(gs,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"})]})})]})]})}),d.jsx(Ho,{})]})},TV=()=>{const{user:n}=Ys(),e=bs(),{id:t}=dm(),[s,o]=U.useState({title:"",country:"",start_date:"",end_date:""}),[u,f]=U.useState(null),[_,y]=U.useState(null),[b,E]=U.useState(null),[I,N]=U.useState(!1),[F,H]=U.useState(!1),[D,q]=U.useState(!0),[Y,oe]=U.useState(null),ne=["대한민국","일본","중국","미국","영국","프랑스","독일","이탈리아","스페인","캐나다","호주","태국","베트남","싱가포르","말레이시아","인도네시아","필리핀","인도","브라질","아르헨티나","기타"],pe=V=>{if(!V)return"";const[M,ve,ke]=V.split("-"),X=new Date(Number(M),Number(ve)-1,Number(ke)),J=["일","월","화","수","목","금","토"][X.getDay()],Ee=ve.padStart(2,"0"),_e=ke.padStart(2,"0");return`${M}.${Ee}.${_e}.${J}`};U.useEffect(()=>{(async()=>{if(!(!t||!n))try{const M=await R_(xi(rn,"trips",t));if(M.exists()){const ve={id:M.id,...M.data()};if(ve.user_id!==n.uid){oe("접근 권한이 없습니다."),q(!1);return}f(ve),o({title:ve.title,country:ve.country,start_date:ve.start_date,end_date:ve.end_date}),ve.cover_image&&E(ve.cover_image)}else oe("여행을 찾을 수 없습니다.")}catch(M){console.error("여행 로드 실패:",M),oe("여행 데이터를 불러오는데 실패했습니다.")}finally{q(!1)}})()},[t,n]);const xe=V=>{const M=V.target.files?.[0];if(M){if(M.size>5*1024*1024){oe("이미지 크기는 5MB를 초과할 수 없습니다.");return}y(M);const ve=new FileReader;ve.onload=ke=>{E(ke.target?.result)},ve.readAsDataURL(M),N(!1),oe(null)}},ge=()=>{y(null),E(u?.cover_image||null),N(!1)},G=()=>{y(null),E(null),N(!0)},k=()=>{y(null),E(u?.cover_image||null),N(!1)},j=()=>{if(s.start_date&&s.end_date){const V=new Date(s.start_date),M=new Date(s.end_date),ve=Math.abs(M.getTime()-V.getTime());return Math.ceil(ve/(1e3*60*60*24))+1}return 0},O=()=>s.title.trim()?s.title.length<2||s.title.length>60?(oe("여행 제목은 2-60자 사이여야 합니다."),!1):s.country?!s.start_date||!s.end_date?(oe("여행 날짜를 선택해주세요."),!1):new Date(s.start_date)>new Date(s.end_date)?(oe("시작 날짜가 종료 날짜보다 늦을 수 없습니다."),!1):!0:(oe("국가를 선택해주세요."),!1):(oe("여행 제목을 입력해주세요."),!1),Z=async V=>{if(V.preventDefault(),!(!n||!u||!O())){H(!0),oe(null);try{let M=u.cover_image||"";if(_){const ke=Qv(fy,`trip-covers/${n.uid}/${Date.now()}_${_.name}`),X=await Yv(ke,_);M=await Wv(X.ref)}const ve={title:s.title.trim(),country:s.country,start_date:s.start_date,end_date:s.end_date,updated_at:ct.now()};I?ve.cover_image=UD():_&&(ve.cover_image=M),await om(xi(rn,"trips",u.id),ve),e(`/trips/${u.id}`)}catch(M){console.error("여행 수정 실패:",M),oe("여행 수정에 실패했습니다. 다시 시도해주세요.")}finally{H(!1)}}};return D?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"여행 정보 로딩 중..."})}):Y&&!u?d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(Me,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:Y}),d.jsx(Oe,{onClick:()=>e("/"),children:"홈으로 돌아가기"})]})}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"text-center mb-6 animate-fade-in",children:[d.jsx("h1",{className:"text-2xl-ko md:text-3xl-ko lg:text-4xl-ko xl:text-5xl-ko font-bold text-white moonwave-glow break-keep-ko",children:"여행 수정하기"}),d.jsx("p",{className:"text-sm-ko md:text-base-ko lg:text-lg-ko xl:text-xl-ko text-white/60 mt-2 tracking-ko-normal",children:"여행 정보를 업데이트하세요"})]}),d.jsxs("form",{onSubmit:Z,className:"w-full space-y-6",children:[d.jsxs(Me,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg-ko font-semibold text-white mb-4 tracking-ko-normal",children:"커버 이미지"}),b?d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:b,alt:"커버 이미지 미리보기",className:"w-full h-40 md:h-48 lg:h-56 object-cover rounded-xl"}),d.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[d.jsxs("label",{className:"cursor-pointer",children:[d.jsx("div",{className:"inline-flex items-center justify-center p-2 rounded-full bg-blue-500/20 hover:bg-blue-500/40 backdrop-blur-sm transition-all duration-300 wave-float",children:d.jsx(NI,{className:"w-4 h-4 text-blue-300"})}),d.jsx("input",{type:"file",accept:"image/*",onChange:xe,className:"hidden"})]}),d.jsx(Oe,{type:"button",onClick:G,variant:"secondary",size:"sm",className:"!p-2 !px-2 !py-2 rounded-full bg-red-500/20 hover:bg-red-500/40 backdrop-blur-sm",ariaLabel:"이미지 삭제",children:d.jsx(Lf,{className:"w-4 h-4 text-red-300"})}),(_||I)&&d.jsx(Oe,{type:"button",onClick:_?ge:k,variant:"secondary",size:"sm",className:"!p-2 !px-2 !py-2 rounded-full bg-white/20 hover:bg-white/40 backdrop-blur-sm",ariaLabel:_?"새 이미지 취소":"원본으로 복원",children:d.jsx(Ml,{className:"w-4 h-4 text-white"})})]}),d.jsxs("div",{className:"absolute bottom-2 left-2",children:[_&&d.jsx("div",{className:"bg-green-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-green-300",children:"새 이미지"}),I&&!_&&d.jsx("div",{className:"bg-red-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-red-300",children:"삭제 예정"}),!_&&!I&&u?.cover_image&&d.jsx("div",{className:"bg-blue-500/20 backdrop-blur-sm rounded-full px-3 py-1 text-xs text-blue-300",children:"기존 이미지"})]})]}):d.jsxs("div",{className:"space-y-4",children:[I&&d.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 text-center",children:[d.jsx(Lf,{className:"w-8 h-8 text-red-400 mx-auto mb-2"}),d.jsx("p",{className:"text-red-300 text-sm",children:"커버 이미지가 삭제됩니다"}),d.jsx(Oe,{type:"button",onClick:k,variant:"ghost",size:"sm",className:"mt-2 text-red-300 hover:text-red-200",children:"삭제 취소"})]}),d.jsxs("label",{className:"block w-full h-40 md:h-48 lg:h-56 border-2 border-dashed border-white/30 rounded-xl cursor-pointer hover:border-white/50 transition-colors touch-optimized wave-float",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(B_,{className:"w-8 h-8 mb-2 wave-pulse"}),d.jsx("span",{className:"text-sm-ko tracking-ko-normal",children:I?"새 이미지 업로드":"이미지 업로드"}),d.jsx("span",{className:"text-xs-ko mt-1 text-white/40",children:"최대 5MB"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:xe,className:"hidden"})]})]})]}),d.jsx(Me,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"animate-fade-in wave-optimized",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"여행 제목 *"}),d.jsx("input",{type:"text",value:s.title,onChange:V=>o({...s,title:V.target.value}),placeholder:"예: 도쿄 벚꽃 여행",maxLength:60,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all"}),d.jsxs("div",{className:"text-xs-ko text-white/60 mt-1 text-numeric",children:[s.title.length,"/60자"]})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(Wn,{className:"w-4 h-4 inline mr-1"}),"국가 *"]}),d.jsxs("select",{value:s.country,onChange:V=>o({...s,country:V.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all",children:[d.jsx("option",{value:"",disabled:!0,children:"국가를 선택해주세요"}),ne.map(V=>d.jsx("option",{value:V,className:"bg-primary-800 text-base-ko",children:V},V))]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:[d.jsx(gs,{className:"w-4 h-4 inline mr-1"}),"시작일 *"]}),d.jsx("input",{type:"date",value:s.start_date,onChange:V=>o({...s,start_date:V.target.value}),className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),s.start_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:pe(s.start_date)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm-ko font-medium mb-2 tracking-ko-normal",children:"종료일 *"}),d.jsx("input",{type:"date",value:s.end_date,onChange:V=>o({...s,end_date:V.target.value}),min:s.start_date,className:"w-full px-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 touch-optimized transition-all text-numeric"}),s.end_date&&d.jsx("div",{className:"text-xs-ko text-white/60 mt-1",children:pe(s.end_date)})]})]}),s.start_date&&s.end_date&&d.jsx(Me,{variant:"light",className:"animate-fade-in moonwave-glow",children:d.jsxs("p",{className:"text-white text-sm-ko text-center tracking-ko-normal",children:[d.jsx(gs,{className:"w-4 h-4 inline mr-1"}),"총 ",d.jsxs("span",{className:"font-bold text-travel-blue text-numeric",children:[j(),"일"]})," 여행"]})})]})}),Y&&d.jsx(Me,{variant:"strong",className:"animate-fade-in wave-pulse",children:d.jsx("p",{className:"text-error-foreground text-sm-ko text-center tracking-ko-normal break-keep-ko",children:Y})}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx(Oe,{type:"button",variant:"ghost",size:"lg",onClick:()=>e(`/trips/${u?.id}`),className:"flex-1 animate-fade-in touch-optimized",style:{animationDelay:"0.3s"},ariaLabel:"취소",children:"취소"}),d.jsx(Oe,{type:"submit",variant:"travel",size:"lg",className:"flex-1 animate-fade-in touch-optimized wave-optimized group relative overflow-hidden",style:{animationDelay:"0.3s"},disabled:F,ariaLabel:F?"여행 수정 중":"여행 수정하기",children:F?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{className:"text-base-ko tracking-ko-normal",children:"수정 중..."})]}):d.jsxs("span",{className:"text-base-ko tracking-ko-normal flex items-center justify-center space-x-2 group-hover:scale-105 transition-transform",children:[d.jsx("span",{children:"수정하기"}),d.jsx(gs,{className:"w-4 h-4 group-hover:rotate-12 transition-transform"})]})})]})]})]})}),d.jsx(Ho,{})]})},EV=({photos:n,isOpen:e,onClose:t,initialIndex:s=0,placeName:o=""})=>{const[u,f]=U.useState(s);U.useEffect(()=>{e&&f(s)},[e,s]),U.useEffect(()=>{const b=E=>{if(e)switch(E.key){case"Escape":t();break;case"ArrowLeft":y();break;case"ArrowRight":_();break}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[e,u,n.length]);const _=()=>{f(b=>(b+1)%n.length)},y=()=>{f(b=>(b-1+n.length)%n.length)};return!e||n.length===0?null:d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm",children:[d.jsx(Oe,{variant:"ghost",size:"sm",onClick:t,className:"absolute top-4 right-4 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:d.jsx(Ml,{className:"w-6 h-6 text-white"})}),n.length>1&&d.jsxs(d.Fragment,{children:[d.jsx(Oe,{variant:"ghost",size:"sm",onClick:y,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"이전 사진",children:d.jsx(II,{className:"w-6 h-6 text-white"})}),d.jsx(Oe,{variant:"ghost",size:"sm",onClick:_,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"다음 사진",children:d.jsx(RI,{className:"w-6 h-6 text-white"})})]}),d.jsxs("div",{className:"flex flex-col items-center justify-center max-w-7xl max-h-full p-4",children:[d.jsx("div",{className:"relative mb-4",children:d.jsx("img",{src:n[u],alt:`${o} 사진 ${u+1}`,className:"max-w-full max-h-[80vh] object-contain rounded-xl shadow-2xl"})}),d.jsx(Me,{variant:"light",className:"max-w-md",children:d.jsxs("div",{className:"text-center space-y-2",children:[o&&d.jsx("h3",{className:"text-lg font-semibold text-white",children:o}),d.jsx("div",{className:"flex items-center justify-center space-x-4 text-white/70 text-sm",children:d.jsxs("span",{children:[u+1," / ",n.length]})}),n.length>1&&d.jsx("div",{className:"flex justify-center space-x-2 mt-4 overflow-x-auto max-w-full",children:n.map((b,E)=>d.jsx("button",{onClick:()=>f(E),className:`relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden transition-all ${E===u?"ring-2 ring-primary-400 scale-110":"opacity-60 hover:opacity-100"}`,children:d.jsx("img",{src:b,alt:`썸네일 ${E+1}`,className:"w-full h-full object-cover"})},E))})]})})]}),d.jsx("div",{className:"absolute inset-0 -z-10",onClick:t})]})},rN=n=>{try{const e=new URL(n);let t=null;if(e.hostname==="youtu.be"?t=e.pathname.slice(1):(e.hostname==="www.youtube.com"||e.hostname==="youtube.com")&&(e.pathname==="/watch"?t=e.searchParams.get("v"):e.pathname.startsWith("/embed/")?t=e.pathname.slice(7):e.pathname.startsWith("/v/")&&(t=e.pathname.slice(3))),t){const s=e.searchParams.get("t")||e.searchParams.get("start");let o="";if(s){const u=parseInt(s.replace(/[^\d]/g,""));isNaN(u)||(o=`?start=${u}`)}return`https://www.youtube.com/embed/${t}${o}`}return null}catch(e){return console.error("Invalid YouTube URL:",e),null}},SV=n=>{const e=rN(n);if(e){const t=e.match(/\/embed\/([^?]+)/);return t?t[1]:null}return null},PT=(n,e="medium")=>{const t=SV(n);return t?`https://img.youtube.com/vi/${t}/${e}default.jpg`:null},AV=({url:n,title:e,className:t=""})=>{const[s,o]=U.useState(!1),[u,f]=U.useState(!1),_=rN(n),y=PT(n,"maxres")||PT(n,"high");if(!_)return d.jsx("div",{className:`text-red-400 text-sm ${t}`,children:"유효하지 않은 유튜브 URL입니다."});const b=N=>{N.stopPropagation(),N.preventDefault(),o(!0)},E=N=>{N.stopPropagation(),N.preventDefault(),f(!0)},I=N=>{N&&(N.stopPropagation(),N.preventDefault()),o(!1),f(!1)};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`relative group cursor-pointer ${t}`,"data-youtube-embed":!0,children:y?d.jsxs("div",{className:"relative youtube-thumbnail",children:[d.jsx("img",{src:y,alt:e||"유튜브 비디오",className:"w-full aspect-video object-cover rounded-lg transition-transform group-hover:scale-105",onClick:b}),d.jsx("div",{className:"absolute inset-0 bg-black/30 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity youtube-play-button",onClick:b,children:d.jsx("div",{className:"bg-red-600 rounded-full p-3",children:d.jsx(Wg,{className:"w-6 h-6 text-white ml-1"})})}),d.jsx("div",{className:"absolute top-2 right-2 bg-red-600 rounded px-2 py-1",children:d.jsx(Al,{className:"w-4 h-4 text-white"})})]}):d.jsx("div",{className:"w-full aspect-video bg-gradient-to-br from-red-600/20 to-red-800/20 rounded-lg flex items-center justify-center cursor-pointer hover:from-red-600/30 hover:to-red-800/30 transition-colors youtube-thumbnail",onClick:b,children:d.jsxs("div",{className:"text-center youtube-play-button",children:[d.jsx(Al,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),d.jsx("span",{className:"text-white text-sm",children:"유튜브 비디오"})]})})}),s&&aE.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm p-6 md:p-8 lg:p-12",onClick:N=>{N.target===N.currentTarget&&I(N)},children:[d.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>I(),className:"absolute top-6 right-6 md:top-8 md:right-8 lg:top-12 lg:right-12 z-10 bg-black/30 hover:bg-black/50 rounded-full p-3",ariaLabel:"닫기",children:d.jsx(Ml,{className:"w-6 h-6 text-white"})}),d.jsx(Me,{variant:"travel",className:"w-full max-w-5xl mx-auto my-8 md:my-12 lg:my-16 mb-12 md:mb-16 lg:mb-20",withWaveEffect:!0,onClick:N=>{N.stopPropagation()},children:d.jsxs("div",{className:"space-y-6 p-2 md:p-4 lg:p-6 pb-4 md:pb-6 lg:pb-8",children:[e&&d.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[d.jsx(Al,{className:"w-5 h-5 text-red-500"}),d.jsx("h3",{className:"text-lg md:text-xl font-semibold text-white",children:e})]}),d.jsx("div",{className:"relative w-full aspect-video bg-black rounded-xl overflow-hidden shadow-2xl",children:u?d.jsx("iframe",{src:`${_}${_.includes("?")?"&":"?"}autoplay=1&rel=0&modestbranding=1&playsinline=1&enablejsapi=1`,title:e||"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0,className:"absolute inset-0 w-full h-full"}):d.jsx("div",{className:"relative w-full h-full",children:y?d.jsxs(d.Fragment,{children:[d.jsx("img",{src:y,alt:e||"유튜브 비디오",className:"absolute inset-0 w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center cursor-pointer group youtube-play-button",onClick:E,"data-youtube-embed":!0,children:d.jsx("div",{className:"bg-red-600 rounded-full p-6 group-hover:bg-red-700 transition-all transform group-hover:scale-110",children:d.jsx(Wg,{className:"w-12 h-12 text-white ml-1"})})}),d.jsx("div",{className:"absolute bottom-4 right-4",children:d.jsxs("div",{className:"bg-red-600 px-2 py-1 rounded flex items-center space-x-1",children:[d.jsx(Al,{className:"w-4 h-4 text-white"}),d.jsx("span",{className:"text-white text-sm font-medium",children:"YouTube"})]})})]}):d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsxs("div",{className:"text-center cursor-pointer youtube-play-button",onClick:E,"data-youtube-embed":!0,children:[d.jsx("div",{className:"bg-red-600 rounded-full p-6 hover:bg-red-700 transition-colors",children:d.jsx(Al,{className:"w-12 h-12 text-white"})}),d.jsx("span",{className:"text-white text-sm mt-2 block",children:"비디오 재생"})]})})})}),d.jsxs("div",{className:"flex items-center justify-between text-white/70 text-sm mt-8 pt-6 pb-4 border-t border-white/10",children:[d.jsxs("span",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),d.jsx("span",{children:"YouTube에서 재생 중"})]}),d.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 hover:text-white transition-colors bg-white/5 hover:bg-white/10 px-3 py-2 rounded-lg",onClick:N=>N.stopPropagation(),children:[d.jsx(Al,{className:"w-4 h-4"}),d.jsx("span",{children:"YouTube에서 보기"})]})]})]})})]}),document.body)]})},NV=n=>{switch(n){case"attraction":return d.jsx(Eh,{className:"w-5 h-5"});case"restaurant":return d.jsx(H_,{className:"w-5 h-5"});case"hotel":return d.jsx(F_,{className:"w-5 h-5"});case"transport":return d.jsx(zf,{className:"w-5 h-5"});case"car":return d.jsx(zf,{className:"w-5 h-5"});case"plane":return d.jsx(wh,{className:"w-5 h-5"});case"airport":return d.jsx(uh,{className:"w-5 h-5"});case"other":return d.jsx(Wn,{className:"w-5 h-5"});default:return d.jsx(Wn,{className:"w-5 h-5"})}},IV=n=>{switch(n){case"attraction":return"text-travel-orange";case"restaurant":return"text-travel-green";case"hotel":return"text-travel-purple";case"transport":return"text-travel-blue";case"car":return"text-travel-blue";case"plane":return"text-travel-blue";case"airport":return"text-travel-blue";case"other":return"text-white/80";default:return"text-white/80"}},RV=n=>{switch(n){case"attraction":return"관광지";case"restaurant":return"음식점";case"hotel":return"숙소";case"transport":return"대중교통";case"car":return"자동차";case"plane":return"비행기";case"airport":return"공항";case"other":return"기타";default:return"기타"}},z_=({plan:n,onClick:e,onEdit:t,onDelete:s,className:o,showActions:u=!0,...f})=>{const[_,y]=U.useState(!1),[b,E]=U.useState(0),I=H=>H.slice(0,5),N=H=>{const D=H.target;D.closest(".action-button")||D.closest("[data-youtube-embed]")||D.closest("[data-photo-modal]")||D.closest("iframe")||D.closest(".youtube-thumbnail")||D.closest(".youtube-play-button")||e?.(H)},F=(H,D)=>{H.stopPropagation(),E(D),y(!0)};return d.jsxs(Me,{variant:"light",hoverable:!!e,className:Zs("cursor-pointer group transition-all duration-300","hover:border-primary-300/40 hover:shadow-lg hover:shadow-primary-500/10","border border-white/10",o),onClick:N,...f,children:[d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:Zs("flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center","bg-gradient-to-br from-white/10 to-white/5 border border-white/20",IV(n.type)),children:NV(n.type)}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h4",{className:"text-lg font-semibold text-white truncate group-hover:text-primary-300 transition-colors",children:n.place_name}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:Zs("text-xs px-2 py-1 rounded-full border","bg-white/5 border-white/20 text-white/70"),children:RV(n.type)}),u&&(t||s)&&d.jsxs("div",{className:"flex items-center space-x-1 opacity-80 sm:opacity-60 sm:group-hover:opacity-100 transition-opacity",children:[t&&d.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),t()},className:"action-button p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/40 transition-colors","aria-label":"일정 편집",children:d.jsx(jf,{className:"w-3 h-3 text-blue-300"})}),s&&d.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),window.confirm("이 일정을 삭제하시겠습니까?")&&s()},className:"action-button p-2 rounded-lg bg-red-500/20 hover:bg-red-500/40 transition-colors","aria-label":"일정 삭제",children:d.jsx(Lf,{className:"w-3 h-3 text-red-300"})})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-3",children:[d.jsx(Th,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm",children:[I(n.start_time),n.end_time&&` ~ ${I(n.end_time)}`]})]}),n.opening_hours&&d.jsxs("div",{className:"flex items-center space-x-2 text-white/80 mb-2",children:[d.jsx(Th,{className:"w-4 h-4 text-travel-green"}),d.jsx("span",{className:"text-sm",children:n.opening_hours})]}),n.photos&&n.photos.length>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-travel-orange",children:[d.jsx(VT,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm",children:[n.photos.length,"장의 사진"]})]}),d.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2",children:n.photos.slice(0,4).map((H,D)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:H,alt:`${n.place_name} 사진 ${D+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105 cursor-pointer",onClick:q=>F(q,D)}),D===3&&n.photos&&n.photos.length>4&&d.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-lg flex items-center justify-center cursor-pointer hover:bg-black/70 transition-colors",onClick:q=>F(q,D),children:d.jsxs("span",{className:"text-white text-sm font-semibold",children:["+",n.photos.length-4]})})]},D))})]}),n.youtube_link&&d.jsx("div",{className:"mt-3 mb-4",children:d.jsx(AV,{url:n.youtube_link,title:`${n.place_name} 비디오`,className:"w-full"})}),d.jsxs("div",{className:`flex items-center justify-between ${n.youtube_link?"mt-2":"mt-4"}`,children:[n.latitude&&n.longitude&&d.jsxs("div",{className:"flex items-center space-x-2 text-travel-blue",children:[d.jsx(Wn,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs text-white/60",children:"위치 정보 있음"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[n.website&&d.jsxs("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",onClick:H=>H.stopPropagation(),className:"flex items-center space-x-1 text-travel-purple hover:text-travel-purple/80 transition-colors",children:[d.jsx(Vf,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"홈페이지"})]}),n.youtube_link&&d.jsxs("a",{href:n.youtube_link,target:"_blank",rel:"noopener noreferrer",onClick:H=>H.stopPropagation(),className:"flex items-center space-x-1 text-travel-orange hover:text-travel-orange/80 transition-colors",children:[d.jsx(Uf,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"유튜브"})]}),n.map_url&&d.jsxs("a",{href:n.map_url,target:"_blank",rel:"noopener noreferrer",onClick:H=>H.stopPropagation(),className:"flex items-center space-x-1 text-travel-green hover:text-travel-green/80 transition-colors",children:[d.jsx(Uf,{className:"w-4 h-4"}),d.jsx("span",{className:"text-xs",children:"지도"})]})]})]})]})]}),n.photos&&n.photos.length>0&&d.jsx(EV,{photos:n.photos,isOpen:_,onClose:()=>y(!1),initialIndex:b,placeName:n.place_name})]})},CV=()=>{const{id:n}=dm(),{user:e}=Ys(),t=bs(),[s,o]=U.useState(null),[u,f]=U.useState([]),[_,y]=U.useState(!0),[b,E]=U.useState(null),[I,N]=U.useState(1);if(U.useEffect(()=>{if(!n||!e)return;const ge=yo(xi(rn,"trips",n),j=>{if(j.exists()){const O={id:j.id,...j.data()};if(O.user_id!==e.uid){E("접근 권한이 없습니다."),y(!1);return}o(O)}else E("여행을 찾을 수 없습니다.");y(!1)},j=>{console.error("Trip 로딩 실패:",j),E("여행 데이터를 불러오는데 실패했습니다."),y(!1)}),G=Bc(aa(rn,"plans"),Oh("trip_id","==",n)),k=yo(G,j=>{const Z=j.docs.map(V=>({id:V.id,...V.data()})).sort((V,M)=>V.day!==M.day?V.day-M.day:V.start_time.localeCompare(M.start_time));f(Z)},j=>{console.error("Plans 로딩 실패:",j)});return()=>{ge(),k()}},[n,e]),_)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})});if(b||!s)return d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(Me,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:b||"여행을 찾을 수 없습니다."}),d.jsx(Oe,{onClick:()=>t("/"),children:"Back"})]})});const F=ge=>new Date(ge).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),H=ge=>{if(!ge)return"";const[G,k,j]=ge.split("-"),O=new Date(Number(G),Number(k)-1,Number(j)),V=["일","월","화","수","목","금","토"][O.getDay()],M=k.padStart(2,"0"),ve=j.padStart(2,"0");return`${G}.${M}.${ve}.${V}`},D=()=>{const ge=new Date(s.start_date),G=new Date(s.end_date),k=Math.abs(G.getTime()-ge.getTime());return Math.ceil(k/(1e3*60*60*24))+1},q=ge=>u.filter(G=>G.day===ge),Y=Array.from({length:D()},(ge,G)=>G+1),oe=()=>{t(`/trips/${n}/plans/new?day=${I}`)},ne=ge=>{t(`/trips/${n}/plans/${ge.id}`)},pe=ge=>{t(`/trips/${n}/plans/${ge.id}`)},xe=async ge=>{if(ge.id)try{await L1(xi(rn,"plans",ge.id))}catch(G){console.error("일정 삭제 실패:",G),alert("일정 삭제에 실패했습니다.")}};return d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsx("div",{className:"mb-4",children:d.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"flex items-center gap-2",children:[d.jsx(zh,{className:"w-4 h-4"}),"Back"]})}),d.jsxs(Me,{variant:"travel",withWaveEffect:!0,hoverable:!0,className:"mb-6 animate-fade-in wave-optimized",style:{animationDelay:"0.1s"},children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-white moonwave-glow break-words",children:s.title}),d.jsxs("p",{className:"text-white/60 text-sm mt-1",children:[H(s.start_date)," ~ ",H(s.end_date)]})]}),d.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>t(`/trips/${s.id}/edit`),className:"flex items-center gap-2 hover:bg-white/10",ariaLabel:"여행 수정",children:[d.jsx(jf,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"수정"})]})]}),d.jsxs("div",{className:"relative w-full h-48 md:h-56 lg:h-64 mb-4 rounded-xl overflow-hidden bg-gradient-to-br from-travel-blue/20 to-travel-purple/20",children:[s.cover_image?d.jsx("img",{src:s.cover_image,alt:s.title,className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsx(DT,{className:"w-16 h-16 text-white/60"})}),d.jsx("div",{className:"absolute top-2 right-2 sm:top-3 sm:right-3 opacity-80 sm:opacity-60 hover:opacity-100 transition-opacity",children:d.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>t(`/trips/${s.id}/edit`),className:"p-2 rounded-lg bg-black/30 hover:bg-black/50 backdrop-blur-sm",ariaLabel:"이미지 수정",children:d.jsx(jf,{className:"w-3 h-3 text-white"})})})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(Wn,{className:"w-4 h-4"}),d.jsx("span",{className:"text-sm md:text-base",children:s.country})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-white/80",children:[d.jsx(gs,{className:"w-4 h-4"}),d.jsxs("span",{className:"text-sm md:text-base",children:[F(s.start_date)," ~ ",F(s.end_date)]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2 border-t border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white/60 text-sm md:text-base",children:"총 기간"}),d.jsxs("span",{className:"text-travel-blue font-semibold text-sm md:text-base",children:[D(),"일"]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white/60 text-sm md:text-base",children:"일정 개수"}),d.jsxs("span",{className:"text-travel-orange font-semibold text-sm md:text-base",children:[u.length,"개"]})]})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx(Me,{variant:"light",withWaveEffect:!0,hoverable:!1,className:"mb-4 animate-fade-in",style:{animationDelay:"0.2s"},children:d.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white",children:"일정"}),d.jsx("p",{className:"text-white/60 text-sm mt-1",children:"일정 카드를 클릭하거나 편집 버튼으로 수정할 수 있습니다"})]}),d.jsxs(Oe,{variant:"travel",size:"sm",onClick:oe,className:"wave-optimized",children:[d.jsx(Dc,{className:"w-4 h-4 mr-1"}),"추가"]})]})}),d.jsx(Me,{variant:"light",className:"animate-fade-in",style:{animationDelay:"0.3s"},children:d.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:Y.map(ge=>{const G=q(ge);return d.jsxs("button",{onClick:()=>N(ge),className:`flex-shrink-0 px-3 md:px-4 py-2 rounded-lg text-sm md:text-base font-medium transition-all wave-float ${I===ge?"bg-primary-500 text-white shadow-lg shadow-primary-500/25":"bg-white/10 text-white/70 hover:bg-white/20 hover:scale-105"}`,children:["Day ",ge,G.length>0&&d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:G.length})]},ge)})})})]}),d.jsx("div",{className:"space-y-4",children:q(I).length===0?d.jsxs(Me,{variant:"light",withWaveEffect:!0,className:"text-center py-8 animate-fade-in wave-optimized",style:{animationDelay:"0.4s"},children:[d.jsx(gs,{className:"w-16 h-16 text-white/40 mx-auto mb-4 wave-pulse"}),d.jsxs("p",{className:"text-white/60 mb-4",children:["Day ",I,"에 일정이 없어요"]}),d.jsxs(Oe,{variant:"travel",onClick:oe,className:"wave-optimized",children:[d.jsx(Dc,{className:"w-4 h-4 mr-2"}),"첫 번째 일정 추가"]})]}):q(I).map((ge,G)=>d.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${.4+G*.1}s`},children:d.jsx(z_,{plan:ge,onClick:()=>ne(ge),onEdit:()=>pe(ge),onDelete:()=>xe(ge),showActions:!0,className:"wave-optimized"})},ge.id))})]})}),d.jsx(Ho,{})]})},MT=()=>{const{tripId:n,planId:e}=dm(),{user:t}=Ys(),s=bs(),[o]=rE(),[u,f]=U.useState(null),[_,y]=U.useState(!1),[b,E]=U.useState(!0),[I,N]=U.useState(!1),[F,H]=U.useState(null),[D,q]=U.useState({day:parseInt(o.get("day")||"1"),place_name:"",start_time:"09:00",end_time:"10:00",type:"attraction",address:"",website:"",opening_hours:"",memo:"",youtube_link:"",map_url:"",latitude:"",longitude:""}),[Y,oe]=U.useState([]),[ne,pe]=U.useState([]),[xe,ge]=U.useState([]),G=[{value:"attraction",label:"관광지",icon:d.jsx(Eh,{className:"w-4 h-4 inline mr-1 text-travel-orange"})},{value:"restaurant",label:"음식점",icon:d.jsx(H_,{className:"w-4 h-4 inline mr-1 text-travel-green"})},{value:"hotel",label:"숙소",icon:d.jsx(F_,{className:"w-4 h-4 inline mr-1 text-travel-purple"})},{value:"transport",label:"대중교통",icon:d.jsx(Wn,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"car",label:"자동차",icon:d.jsx(zf,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"plane",label:"비행기",icon:d.jsx(wh,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"airport",label:"공항",icon:d.jsx(uh,{className:"w-4 h-4 inline mr-1 text-travel-blue"})},{value:"other",label:"기타",icon:d.jsx(Wn,{className:"w-4 h-4 inline mr-1 text-white/80"})}];U.useEffect(()=>{if(!n||!t)return;(async()=>{try{const ve=await R_(xi(rn,"trips",n));if(!ve.exists()){H("여행을 찾을 수 없습니다."),E(!1);return}const ke={id:ve.id,...ve.data()};if(ke.user_id!==t.uid){H("접근 권한이 없습니다."),E(!1);return}if(f(ke),e){y(!0);const X=await R_(xi(rn,"plans",e));if(X.exists()){const ce={id:X.id,...X.data()};q({day:ce.day,place_name:ce.place_name,start_time:ce.start_time,end_time:ce.end_time||"",type:ce.type,address:ce.address||"",website:ce.website||"",opening_hours:ce.opening_hours||"",memo:ce.memo||"",youtube_link:ce.youtube_link||"",map_url:ce.map_url||"",latitude:ce.latitude?.toString()||"",longitude:ce.longitude?.toString()||""}),ge(ce.photos||[])}}E(!1)}catch(ve){console.error("데이터 로딩 실패:",ve),H("데이터를 불러오는데 실패했습니다."),E(!1)}})()},[n,e,t]);const k=M=>{const ve=Array.from(M.target.files||[]);if(Y.length+xe.length+ve.length>5){H("사진은 최대 5장까지 업로드할 수 있습니다.");return}ve.forEach(X=>{if(X.size>5*1024*1024){H("각 이미지는 5MB를 초과할 수 없습니다.");return}}),oe(X=>[...X,...ve]),ve.forEach(X=>{const ce=new FileReader;ce.onload=J=>{pe(Ee=>[...Ee,J.target?.result])},ce.readAsDataURL(X)}),H(null)},j=(M,ve=!1)=>{ve?ge(ke=>ke.filter((X,ce)=>ce!==M)):(oe(ke=>ke.filter((X,ce)=>ce!==M)),pe(ke=>ke.filter((X,ce)=>ce!==M)))},O=()=>{if(!u)return Array.from({length:10},(J,Ee)=>Ee+1);const M=new Date(u.start_date),ve=new Date(u.end_date),ke=Math.abs(ve.getTime()-M.getTime()),X=Math.ceil(ke/(1e3*60*60*24))+1,ce=Math.min(Math.max(1,X),30);return Array.from({length:ce},(J,Ee)=>Ee+1)},Z=()=>D.place_name.trim()?D.start_time?D.end_time&&D.start_time>=D.end_time?(H("종료 시간은 시작 시간보다 늦어야 합니다."),!1):D.memo.length>1e3?(H("메모는 1000자를 초과할 수 없습니다."),!1):D.latitude&&(isNaN(Number(D.latitude))||Number(D.latitude)<-90||Number(D.latitude)>90)?(H("위도는 -90에서 90 사이의 숫자여야 합니다."),!1):D.longitude&&(isNaN(Number(D.longitude))||Number(D.longitude)<-180||Number(D.longitude)>180)?(H("경도는 -180에서 180 사이의 숫자여야 합니다."),!1):!0:(H("시작 시간을 선택해주세요."),!1):(H("장소명을 입력해주세요."),!1),V=async M=>{if(M.preventDefault(),!(!t||!u||!Z())){N(!0),H(null);try{const ve=[];for(const X of Y){const ce=Qv(fy,`plan-photos/${t.uid}/${Date.now()}_${X.name}`),J=await Yv(ce,X),Ee=await Wv(J.ref);ve.push(Ee)}const ke={trip_id:n,day:D.day,place_name:D.place_name.trim(),start_time:D.start_time,type:D.type,photos:[...xe,...ve],created_at:ct.now(),updated_at:ct.now()};if(D.end_time&&(ke.end_time=D.end_time),D.address.trim()&&(ke.address=D.address.trim()),D.website.trim()&&(ke.website=D.website.trim()),D.opening_hours.trim()&&(ke.opening_hours=D.opening_hours.trim()),D.memo.trim()&&(ke.memo=D.memo.trim()),D.youtube_link.trim()&&(ke.youtube_link=D.youtube_link.trim()),D.map_url.trim()&&(ke.map_url=D.map_url.trim()),D.latitude&&!isNaN(Number(D.latitude))&&(ke.latitude=Number(D.latitude)),D.longitude&&!isNaN(Number(D.longitude))&&(ke.longitude=Number(D.longitude)),_&&e)await J0(xi(rn,"plans",e),{...ke,updated_at:ct.now()});else{const X=xi(aa(rn,"plans"));await J0(X,ke)}s(`/trips/${n}`)}catch(ve){console.error("일정 저장 실패:",ve),H("일정 저장에 실패했습니다. 다시 시도해주세요.")}finally{N(!1)}}};return b?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"로딩 중..."})}):F&&!u?d.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:d.jsxs(Me,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:F}),d.jsx(Oe,{onClick:()=>s("/"),children:"Back"})]})}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>s(`/trips/${n}`),className:"flex items-center space-x-2",ariaLabel:"Back to trip details",children:[d.jsx(zh,{className:"w-4 h-4"}),d.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),d.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white text-glow text-center flex-1",children:_?"일정 편집":"새 일정 추가"}),d.jsx("div",{className:"w-20 sm:w-24"})]}),u&&d.jsxs(Me,{variant:"light",className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:u.title}),d.jsxs("p",{className:"text-white/60",children:["Day ",D.day," 일정"]})]}),d.jsxs("form",{onSubmit:V,className:"space-y-6",children:[d.jsxs(Me,{variant:"travel",className:"animate-fade-in",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"기본 정보"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"Day *"}),d.jsx("select",{value:D.day,onChange:M=>q({...D,day:parseInt(M.target.value)}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all",children:O().map(M=>d.jsxs("option",{value:M,className:"bg-primary-800",children:["Day ",M]},M))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"유형 *"}),d.jsxs("div",{className:"relative",children:[d.jsx("select",{value:D.type,onChange:M=>q({...D,type:M.target.value}),className:"w-full px-12 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all appearance-none",children:G.map(M=>d.jsx("option",{value:M.value,className:"bg-primary-800",children:M.label},M.value))}),d.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:G.find(M=>M.value===D.type)?.icon})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"장소명 *"}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[d.jsx("input",{type:"text",value:D.place_name,onChange:M=>q({...D,place_name:M.target.value}),placeholder:"예: 도쿄 스카이트리",className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"}),d.jsxs(Oe,{type:"button",variant:"ghost",onClick:()=>s(`/places/search?trip=${n}`),className:"!p-3 sm:!p-3 w-full sm:w-auto",ariaLabel:"장소 검색",children:[d.jsx(Qg,{className:"w-5 h-5"}),d.jsx("span",{className:"ml-2 sm:hidden",children:"장소 검색"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"주소"}),d.jsx("input",{type:"text",value:D.address,onChange:M=>q({...D,address:M.target.value}),placeholder:"예: 도쿄도 스미다구 오시아게 1-1-2",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Th,{className:"w-4 h-4 inline mr-1"}),"시작 시간 *"]}),d.jsx("input",{type:"time",value:D.start_time,onChange:M=>q({...D,start_time:M.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"종료 시간"}),d.jsx("input",{type:"time",value:D.end_time,onChange:M=>q({...D,end_time:M.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]})]})]})]}),d.jsxs(Me,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"상세 정보"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Vf,{className:"w-4 h-4 inline mr-2"}),"홈페이지"]}),d.jsx("input",{type:"url",value:D.website,onChange:M=>q({...D,website:M.target.value}),placeholder:"https://example.com",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Th,{className:"w-4 h-4 inline mr-2"}),"영업 시간"]}),d.jsx("input",{type:"text",value:D.opening_hours,onChange:M=>q({...D,opening_hours:M.target.value}),placeholder:"예: 월-금 09:00-18:00, 토요일 휴무",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-travel-blue focus:ring-1 focus:ring-travel-blue"})]})]})]}),d.jsxs(Me,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.2s"},children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[d.jsx(VT,{className:"w-5 h-5 inline mr-2"}),"사진 (",xe.length+Y.length,"/5)"]}),xe.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:xe.map((M,ve)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:M,alt:`사진 ${ve+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),d.jsx(Oe,{type:"button",onClick:()=>j(ve,!0),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:d.jsx(Ml,{className:"w-3 h-3"})})]},ve))}),ne.length>0&&d.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-3 mb-4",children:ne.map((M,ve)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:M,alt:`새 사진 ${ve+1}`,className:"w-full aspect-square object-cover rounded-lg transition-transform group-hover:scale-105"}),d.jsx(Oe,{type:"button",onClick:()=>j(ve),variant:"secondary",size:"sm",className:"absolute top-1 right-1 !p-1 !px-1 !py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",ariaLabel:"사진 삭제",children:d.jsx(Ml,{className:"w-3 h-3"})})]},ve))}),xe.length+Y.length<5&&d.jsxs("label",{className:"block w-full h-20 border-2 border-dashed border-white/30 rounded-lg cursor-pointer hover:border-white/50 transition-colors",children:[d.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-white/60 hover:text-white/80",children:[d.jsx(B_,{className:"w-6 h-6 mb-1"}),d.jsx("span",{className:"text-sm",children:"사진 추가"})]}),d.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k,className:"hidden"})]})]}),d.jsxs(Me,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.3s"},children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[d.jsx(Wn,{className:"w-5 h-5 inline mr-2"}),"위치 정보"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"위도 (Latitude)"}),d.jsx("input",{type:"text",value:D.latitude,onChange:M=>q({...D,latitude:M.target.value}),placeholder:"예: 35.710063",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"경도 (Longitude)"}),d.jsx("input",{type:"text",value:D.longitude,onChange:M=>q({...D,longitude:M.target.value}),placeholder:"예: 139.810700",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]})]})]}),d.jsxs(Me,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.4s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"링크"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(Al,{className:"w-4 h-4 inline mr-1"}),"YouTube 링크"]}),d.jsx("input",{type:"url",value:D.youtube_link,onChange:M=>q({...D,youtube_link:M.target.value}),placeholder:"https://youtube.com/watch?v=...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"block text-white text-sm font-medium mb-2",children:[d.jsx(OT,{className:"w-4 h-4 inline mr-1"}),"지도 링크"]}),d.jsx("input",{type:"url",value:D.map_url,onChange:M=>q({...D,map_url:M.target.value}),placeholder:"https://maps.google.com/...",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 transition-all"})]})]})]}),d.jsxs(Me,{variant:"travel",className:"animate-fade-in",style:{animationDelay:"0.5s"},children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"메모"}),d.jsx("textarea",{value:D.memo,onChange:M=>q({...D,memo:M.target.value}),placeholder:"이 장소에 대한 메모를 작성해주세요...",maxLength:1e3,rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300 resize-none transition-all"}),d.jsxs("div",{className:"text-xs text-white/60 mt-1 text-right",children:[D.memo.length,"/1000자"]})]}),F&&d.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-xl p-4",children:d.jsx("p",{className:"text-red-200 text-sm text-center",children:F})}),d.jsx("div",{className:"sticky bottom-6 z-10",children:d.jsx(Oe,{type:"submit",variant:"travel",size:"lg",className:"w-full animate-fade-in shadow-lg",style:{animationDelay:"0.6s"},disabled:I,ariaLabel:I?"저장 중":_?"일정 수정하기":"일정 추가하기",children:I?d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white/30 border-t-white rounded-full"}),d.jsx("span",{children:"저장 중..."})]}):d.jsxs(d.Fragment,{children:[d.jsx(CI,{className:"w-5 h-5 mr-2"}),_?"수정하기":"추가하기"]})})})]})]})}),d.jsx(Ho,{})]})},kV=({place:n,onSelect:e,onToggleFavorite:t})=>{const s=u=>{switch(u){case"attraction":return d.jsx(Eh,{className:"w-5 h-5 text-travel-orange"});case"restaurant":return d.jsx(H_,{className:"w-5 h-5 text-travel-green"});case"hotel":return d.jsx(F_,{className:"w-5 h-5 text-travel-purple"});case"transport":return d.jsx(zf,{className:"w-5 h-5 text-travel-blue"});default:return d.jsx(Wn,{className:"w-5 h-5 text-white/80"})}},o=u=>{switch(u){case"attraction":return"관광지";case"restaurant":return"음식점";case"hotel":return"숙소";case"transport":return"교통";default:return"기타"}};return d.jsx(Me,{variant:"light",hoverable:!0,className:"cursor-pointer",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>e(n),children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s(n.type),d.jsx("span",{className:"text-xs text-white/60 bg-white/10 px-2 py-1 rounded-full",children:o(n.type)}),n.favorite&&d.jsx(Of,{className:"w-4 h-4 text-red-400 fill-current"})]}),d.jsx("h3",{className:"text-lg font-semibold text-white mb-1 truncate",children:n.name}),n.address&&d.jsxs("div",{className:"flex items-center space-x-1 text-white/60 text-sm mb-2",children:[d.jsx(Wn,{className:"w-3 h-3"}),d.jsx("span",{className:"truncate",children:n.address})]}),n.rating&&n.rating>0&&d.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[d.jsx(Eh,{className:"w-4 h-4 text-yellow-400 fill-current"}),d.jsx("span",{className:"text-white/80 text-sm",children:n.rating})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-white/50",children:[d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(Th,{className:"w-3 h-3"}),d.jsxs("span",{children:[n.usage_count||0,"번 사용"]})]}),n.created_at&&d.jsx("span",{children:n.created_at.toDate().toLocaleDateString("ko-KR")})]})]}),d.jsx("button",{onClick:u=>{u.stopPropagation(),t(n)},className:"ml-2 p-2 hover:bg-white/10 rounded-lg transition-colors",children:d.jsx(Of,{className:`w-5 h-5 ${n.favorite?"text-red-400 fill-current":"text-white/40"}`})})]})})},PV=()=>{const{user:n}=Ys(),e=bs(),[t]=rE(),s=t.get("trip"),[o,u]=U.useState([]),[f,_]=U.useState(""),[y,b]=U.useState("all"),[E,I]=U.useState("recent"),[N,F]=U.useState(!0),[H,D]=U.useState(!1),[q,Y]=U.useState({name:"",address:"",type:"attraction",rating:0}),oe=[{value:"all",label:"전체",icon:"📍"},{value:"attraction",label:"관광지",icon:"🏛️"},{value:"restaurant",label:"음식점",icon:"🍽️"},{value:"hotel",label:"숙소",icon:"🏨"},{value:"transport",label:"교통",icon:"🚗"},{value:"other",label:"기타",icon:"📍"}],ne=[{value:"recent",label:"최근 추가순"},{value:"favorite",label:"즐겨찾기"},{value:"usage",label:"자주 사용"}];U.useEffect(()=>{if(!n)return;const k=Bc(aa(rn,"users",n.uid,"places"),Oh("user_id","==",n.uid));return yo(k,O=>{const Z=O.docs.map(V=>({id:V.id,...V.data()}));u(Z),F(!1)},O=>{console.error("Places 로딩 실패:",O),F(!1)})},[n]);const pe=U.useMemo(()=>{let k=o;if(f.trim()){const j=f.toLowerCase().trim();k=k.filter(O=>O.name.toLowerCase().includes(j)||O.address&&O.address.toLowerCase().includes(j))}return y!=="all"&&(k=k.filter(j=>j.type===y)),k.sort((j,O)=>{switch(E){case"favorite":return j.favorite&&!O.favorite?-1:!j.favorite&&O.favorite?1:(O.usage_count||0)-(j.usage_count||0);case"usage":return(O.usage_count||0)-(j.usage_count||0);case"recent":default:return O.created_at.toMillis()-j.created_at.toMillis()}}),k},[o,f,y,E]),xe=async k=>{try{if(await om(xi(rn,"users",n.uid,"places",k.id),{usage_count:zD(1),last_used:ct.now()}),s){const j=new URLSearchParams({place_name:k.name,address:k.address||"",type:k.type,rating:k.rating?.toString()||"0",latitude:k.latitude?.toString()||"",longitude:k.longitude?.toString()||""});e(`/trips/${s}/plans/new?${j.toString()}`)}else e(-1)}catch(j){console.error("장소 선택 실패:",j),e(-1)}},ge=async k=>{try{await om(xi(rn,"users",n.uid,"places",k.id),{favorite:!k.favorite,updated_at:ct.now()})}catch(j){console.error("즐겨찾기 토글 실패:",j)}},G=async k=>{if(k.preventDefault(),!(!n||!q.name.trim()))try{const j={name:q.name.trim(),address:q.address.trim()||void 0,type:q.type,rating:q.rating||void 0,latitude:void 0,longitude:void 0,favorite:!1,usage_count:0,created_at:ct.now(),updated_at:ct.now()};await D1(aa(rn,"users",n.uid,"places"),j),Y({name:"",address:"",type:"attraction",rating:0}),D(!1)}catch(j){console.error("새 장소 추가 실패:",j)}};return N?d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"장소 목록을 불러오는 중..."})}):d.jsxs("div",{className:"min-h-screen",children:[d.jsx(Sr,{}),d.jsx("div",{className:"pt-20 px-4 pb-6",children:d.jsxs("div",{className:"max-w-7xl mx-auto",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold text-white text-center flex-1 text-glow",children:"장소 검색"}),d.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>D(!H),className:"!p-2",children:d.jsx(Dc,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"relative",children:[d.jsx(Qg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-white/50"}),d.jsx("input",{type:"text",value:f,onChange:k=>_(k.target.value),placeholder:"장소명이나 주소로 검색...",className:"w-full pl-12 pr-4 py-3 bg-glass-light backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]})}),d.jsxs("div",{className:"mb-6 space-y-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(UT,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"유형"})]}),d.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:oe.map(k=>d.jsxs("button",{onClick:()=>b(k.value),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm transition-all ${y===k.value?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[k.icon," ",k.label]},k.value))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center space-x-2 mb-2",children:d.jsx("span",{className:"text-white/60 text-sm",children:"정렬"})}),d.jsx("div",{className:"flex space-x-2",children:ne.map(k=>d.jsx("button",{onClick:()=>I(k.value),className:`px-3 py-2 rounded-lg text-sm transition-all ${E===k.value?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:k.label},k.value))})]})]}),H&&d.jsxs(Me,{variant:"travel",className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"새 장소 추가"}),d.jsxs("form",{onSubmit:G,className:"space-y-4",children:[d.jsx("div",{children:d.jsx("input",{type:"text",value:q.name,onChange:k=>Y({...q,name:k.target.value}),placeholder:"장소명 *",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300",required:!0})}),d.jsx("div",{children:d.jsx("input",{type:"text",value:q.address,onChange:k=>Y({...q,address:k.target.value}),placeholder:"주소",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsx("select",{value:q.type,onChange:k=>Y({...q,type:k.target.value}),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300",children:oe.filter(k=>k.value!=="all").map(k=>d.jsx("option",{value:k.value,className:"bg-primary-800",children:k.label},k.value))}),d.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(k=>d.jsx("button",{type:"button",onClick:()=>Y({...q,rating:k}),className:`w-6 h-6 ${k<=q.rating?"text-yellow-400":"text-white/30"}`,children:d.jsx(Eh,{className:"w-6 h-6 fill-current"})},k))})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx(Oe,{type:"submit",variant:"travel",size:"sm",className:"flex-1",children:"추가"}),d.jsx(Oe,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(!1),children:"취소"})]})]})]}),d.jsx("div",{className:"space-y-4",children:pe.length===0?d.jsx(Me,{variant:"light",className:"text-center py-8",children:f.trim()?d.jsxs(d.Fragment,{children:[d.jsx(Qg,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsxs("p",{className:"text-white/60 mb-4",children:["'",f,"'에 대한 검색 결과가 없습니다"]}),d.jsxs(Oe,{variant:"travel",onClick:()=>D(!0),children:[d.jsx(Dc,{className:"w-4 h-4 mr-2"}),"새 장소 추가"]})]}):d.jsxs(d.Fragment,{children:[d.jsx(Wn,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-4",children:"저장된 장소가 없어요"}),d.jsxs(Oe,{variant:"travel",onClick:()=>D(!0),children:[d.jsx(Dc,{className:"w-4 h-4 mr-2"}),"첫 번째 장소 추가"]})]})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-white/60 text-sm mb-2",children:[pe.length,"개의 장소"]}),pe.map(k=>d.jsx(kV,{place:k,onSelect:xe,onToggleFavorite:ge},k.id))]})})]})}),d.jsx(Ho,{})]})};function aN(n,e){const t=U.useRef(e);U.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const MV=1;function jV(n){return Object.freeze({__version:MV,map:n})}function LV(n,e){return Object.freeze({...n,...e})}const py=U.createContext(null);function gy(){const n=U.use(py);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function DV(n){function e(t,s){const{instance:o,context:u}=n(t).current;U.useImperativeHandle(s,()=>o);const{children:f}=t;return f==null?null:Bf.createElement(py,{value:u},f)}return U.forwardRef(e)}function OV(n){function e(t,s){const[o,u]=U.useState(!1),{instance:f}=n(t,u).current;U.useImperativeHandle(s,()=>f),U.useEffect(function(){o&&f.update()},[f,o,t.children]);const _=f._contentNode;return _?aE.createPortal(t.children,_):null}return U.forwardRef(e)}function VV(n){function e(t,s){const{instance:o}=n(t).current;return U.useImperativeHandle(s,()=>o),null}return U.forwardRef(e)}function oN(n,e){const t=U.useRef(void 0);U.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function _y(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function UV(n,e){return function(s,o){const u=gy(),f=n(_y(s,u),u);return aN(u.map,s.attribution),oN(f.current,s.eventHandlers),e(f.current,u,s,o),f}}var ch={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var zV=ch.exports,jT;function BV(){return jT||(jT=1,function(n,e){(function(t,s){s(e)})(zV,function(t){var s="1.9.4";function o(a){var c,p,x,T;for(p=1,x=arguments.length;p<x;p++){T=arguments[p];for(c in T)a[c]=T[c]}return a}var u=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function f(a,c){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var x=p.call(arguments,2);return function(){return a.apply(c,x.length?x.concat(p.call(arguments)):arguments)}}var _=0;function y(a){return"_leaflet_id"in a||(a._leaflet_id=++_),a._leaflet_id}function b(a,c,p){var x,T,R,z;return z=function(){x=!1,T&&(R.apply(p,T),T=!1)},R=function(){x?T=arguments:(a.apply(p,arguments),setTimeout(z,c),x=!0)},R}function E(a,c,p){var x=c[1],T=c[0],R=x-T;return a===x&&p?a:((a-T)%R+R)%R+T}function I(){return!1}function N(a,c){if(c===!1)return a;var p=Math.pow(10,c===void 0?6:c);return Math.round(a*p)/p}function F(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function H(a){return F(a).split(/\s+/)}function D(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?u(a.options):{});for(var p in c)a.options[p]=c[p];return a.options}function q(a,c,p){var x=[];for(var T in a)x.push(encodeURIComponent(p?T.toUpperCase():T)+"="+encodeURIComponent(a[T]));return(!c||c.indexOf("?")===-1?"?":"&")+x.join("&")}var Y=/\{ *([\w_ -]+) *\}/g;function oe(a,c){return a.replace(Y,function(p,x){var T=c[x];if(T===void 0)throw new Error("No value provided for variable "+p);return typeof T=="function"&&(T=T(c)),T})}var ne=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function pe(a,c){for(var p=0;p<a.length;p++)if(a[p]===c)return p;return-1}var xe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var G=0;function k(a){var c=+new Date,p=Math.max(0,16-(c-G));return G=c+p,window.setTimeout(a,p)}var j=window.requestAnimationFrame||ge("RequestAnimationFrame")||k,O=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function Z(a,c,p){if(p&&j===k)a.call(c);else return j.call(window,f(a,c))}function V(a){a&&O.call(window,a)}var M={__proto__:null,extend:o,create:u,bind:f,get lastId(){return _},stamp:y,throttle:b,wrapNum:E,falseFn:I,formatNum:N,trim:F,splitWords:H,setOptions:D,getParamString:q,template:oe,isArray:ne,indexOf:pe,emptyImageUrl:xe,requestFn:j,cancelFn:O,requestAnimFrame:Z,cancelAnimFrame:V};function ve(){}ve.extend=function(a){var c=function(){D(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,x=u(p);x.constructor=c,c.prototype=x;for(var T in this)Object.prototype.hasOwnProperty.call(this,T)&&T!=="prototype"&&T!=="__super__"&&(c[T]=this[T]);return a.statics&&o(c,a.statics),a.includes&&(ke(a.includes),o.apply(null,[x].concat(a.includes))),o(x,a),delete x.statics,delete x.includes,x.options&&(x.options=p.options?u(p.options):{},o(x.options,a.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var R=0,z=x._initHooks.length;R<z;R++)x._initHooks[R].call(this)}},c},ve.include=function(a){var c=this.prototype.options;return o(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},ve.mergeOptions=function(a){return o(this.prototype.options,a),this},ve.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function ke(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=ne(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var X={on:function(a,c,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],c);else{a=H(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],c,p)}return this},off:function(a,c,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var x in a)this._off(x,a[x],c);else{a=H(a);for(var T=arguments.length===1,R=0,z=a.length;R<z;R++)T?this._off(a[R]):this._off(a[R],c,p)}return this},_on:function(a,c,p,x){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,p)===!1){p===this&&(p=void 0);var T={fn:c,ctx:p};x&&(T.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(T)}},_off:function(a,c,p){var x,T,R;if(this._events&&(x=this._events[a],!!x)){if(arguments.length===1){if(this._firingCount)for(T=0,R=x.length;T<R;T++)x[T].fn=I;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var z=this._listens(a,c,p);if(z!==!1){var Q=x[z];this._firingCount&&(Q.fn=I,this._events[a]=x=x.slice()),x.splice(z,1)}}},fire:function(a,c,p){if(!this.listens(a,p))return this;var x=o({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var T=this._events[a];if(T){this._firingCount=this._firingCount+1||1;for(var R=0,z=T.length;R<z;R++){var Q=T[R],re=Q.fn;Q.once&&this.off(a,re,Q.ctx),re.call(Q.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(a,c,p,x){typeof a!="string"&&console.warn('"string" type argument expected');var T=c;typeof c!="function"&&(x=!!c,T=void 0,p=void 0);var R=this._events&&this._events[a];if(R&&R.length&&this._listens(a,T,p)!==!1)return!0;if(x){for(var z in this._eventParents)if(this._eventParents[z].listens(a,c,p,x))return!0}return!1},_listens:function(a,c,p){if(!this._events)return!1;var x=this._events[a]||[];if(!c)return!!x.length;p===this&&(p=void 0);for(var T=0,R=x.length;T<R;T++)if(x[T].fn===c&&x[T].ctx===p)return T;return!1},once:function(a,c,p){if(typeof a=="object")for(var x in a)this._on(x,a[x],c,!0);else{a=H(a);for(var T=0,R=a.length;T<R;T++)this._on(a[T],c,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[y(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[y(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,o({layer:a.target,propagatedFrom:a.target},a),!0)}};X.addEventListener=X.on,X.removeEventListener=X.clearAllEventListeners=X.off,X.addOneTimeEventListener=X.once,X.fireEvent=X.fire,X.hasEventListeners=X.listens;var ce=ve.extend(X);function J(a,c,p){this.x=p?Math.round(a):a,this.y=p?Math.round(c):c}var Ee=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(a){return this.clone()._add(_e(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(_e(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new J(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new J(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ee(this.x),this.y=Ee(this.y),this},distanceTo:function(a){a=_e(a);var c=a.x-this.x,p=a.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(a){return a=_e(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=_e(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function _e(a,c,p){return a instanceof J?a:ne(a)?new J(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new J(a.x,a.y):new J(a,c,p)}function je(a,c){if(a)for(var p=c?[a,c]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}je.prototype={extend:function(a){var c,p;if(!a)return this;if(a instanceof J||typeof a[0]=="number"||"x"in a)c=p=_e(a);else if(a=Ie(a),c=a.min,p=a.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return _e((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return _e(this.min.x,this.max.y)},getTopRight:function(){return _e(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,p;return typeof a[0]=="number"||a instanceof J?a=_e(a):a=Ie(a),a instanceof je?(c=a.min,p=a.max):c=p=a,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=Ie(a);var c=this.min,p=this.max,x=a.min,T=a.max,R=T.x>=c.x&&x.x<=p.x,z=T.y>=c.y&&x.y<=p.y;return R&&z},overlaps:function(a){a=Ie(a);var c=this.min,p=this.max,x=a.min,T=a.max,R=T.x>c.x&&x.x<p.x,z=T.y>c.y&&x.y<p.y;return R&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,p=this.max,x=Math.abs(c.x-p.x)*a,T=Math.abs(c.y-p.y)*a;return Ie(_e(c.x-x,c.y-T),_e(p.x+x,p.y+T))},equals:function(a){return a?(a=Ie(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function Ie(a,c){return!a||a instanceof je?a:new je(a,c)}function Se(a,c){if(a)for(var p=c?[a,c]:a,x=0,T=p.length;x<T;x++)this.extend(p[x])}Se.prototype={extend:function(a){var c=this._southWest,p=this._northEast,x,T;if(a instanceof qe)x=a,T=a;else if(a instanceof Se){if(x=a._southWest,T=a._northEast,!x||!T)return this}else return a?this.extend(Ge(a)||$e(a)):this;return!c&&!p?(this._southWest=new qe(x.lat,x.lng),this._northEast=new qe(T.lat,T.lng)):(c.lat=Math.min(x.lat,c.lat),c.lng=Math.min(x.lng,c.lng),p.lat=Math.max(T.lat,p.lat),p.lng=Math.max(T.lng,p.lng)),this},pad:function(a){var c=this._southWest,p=this._northEast,x=Math.abs(c.lat-p.lat)*a,T=Math.abs(c.lng-p.lng)*a;return new Se(new qe(c.lat-x,c.lng-T),new qe(p.lat+x,p.lng+T))},getCenter:function(){return new qe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new qe(this.getNorth(),this.getWest())},getSouthEast:function(){return new qe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof qe||"lat"in a?a=Ge(a):a=$e(a);var c=this._southWest,p=this._northEast,x,T;return a instanceof Se?(x=a.getSouthWest(),T=a.getNorthEast()):x=T=a,x.lat>=c.lat&&T.lat<=p.lat&&x.lng>=c.lng&&T.lng<=p.lng},intersects:function(a){a=$e(a);var c=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>=c.lat&&x.lat<=p.lat,z=T.lng>=c.lng&&x.lng<=p.lng;return R&&z},overlaps:function(a){a=$e(a);var c=this._southWest,p=this._northEast,x=a.getSouthWest(),T=a.getNorthEast(),R=T.lat>c.lat&&x.lat<p.lat,z=T.lng>c.lng&&x.lng<p.lng;return R&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=$e(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function $e(a,c){return a instanceof Se?a:new Se(a,c)}function qe(a,c,p){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,p!==void 0&&(this.alt=+p)}qe.prototype={equals:function(a,c){if(!a)return!1;a=Ge(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+N(this.lat,a)+", "+N(this.lng,a)+")"},distanceTo:function(a){return Gt.distance(this,Ge(a))},wrap:function(){return Gt.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,p=c/Math.cos(Math.PI/180*this.lat);return $e([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new qe(this.lat,this.lng,this.alt)}};function Ge(a,c,p){return a instanceof qe?a:ne(a)&&typeof a[0]!="object"?a.length===3?new qe(a[0],a[1],a[2]):a.length===2?new qe(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new qe(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new qe(a,c,p)}var Xt={latLngToPoint:function(a,c){var p=this.projection.project(a),x=this.scale(c);return this.transformation._transform(p,x)},pointToLatLng:function(a,c){var p=this.scale(c),x=this.transformation.untransform(a,p);return this.projection.unproject(x)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(a),x=this.transformation.transform(c.min,p),T=this.transformation.transform(c.max,p);return new je(x,T)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?E(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?E(a.lat,this.wrapLat,!0):a.lat,x=a.alt;return new qe(p,c,x)},wrapLatLngBounds:function(a){var c=a.getCenter(),p=this.wrapLatLng(c),x=c.lat-p.lat,T=c.lng-p.lng;if(x===0&&T===0)return a;var R=a.getSouthWest(),z=a.getNorthEast(),Q=new qe(R.lat-x,R.lng-T),re=new qe(z.lat-x,z.lng-T);return new Se(Q,re)}},Gt=o({},Xt,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var p=Math.PI/180,x=a.lat*p,T=c.lat*p,R=Math.sin((c.lat-a.lat)*p/2),z=Math.sin((c.lng-a.lng)*p/2),Q=R*R+Math.cos(x)*Math.cos(T)*z*z,re=2*Math.atan2(Math.sqrt(Q),Math.sqrt(1-Q));return this.R*re}}),Ts=6378137,Ki={R:Ts,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,a.lat),-p),T=Math.sin(x*c);return new J(this.R*a.lng*c,this.R*Math.log((1+T)/(1-T))/2)},unproject:function(a){var c=180/Math.PI;return new qe((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=Ts*Math.PI;return new je([-a,-a],[a,a])}()};function wi(a,c,p,x){if(ne(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=p,this._d=x}wi.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new J((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function Ti(a,c,p,x){return new wi(a,c,p,x)}var Es=o({},Gt,{code:"EPSG:3857",projection:Ki,transformation:function(){var a=.5/(Math.PI*Ki.R);return Ti(a,.5,-a,.5)}()}),Ar=o({},Es,{code:"EPSG:900913"});function pa(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function qo(a,c){var p="",x,T,R,z,Q,re;for(x=0,R=a.length;x<R;x++){for(Q=a[x],T=0,z=Q.length;T<z;T++)re=Q[T],p+=(T?"L":"M")+re.x+" "+re.y;p+=c?Ce.svg?"z":"x":""}return p||"M0 0"}var Vn=document.documentElement.style,ga="ActiveXObject"in window,Go=ga&&!document.addEventListener,Nr="msLaunchUri"in navigator&&!("documentMode"in document),Ss=zn("webkit"),ql=zn("android"),Ir=zn("android 2")||zn("android 3"),Zo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gl=ql&&zn("Google")&&Zo<537&&!("AudioNode"in window),It=!!window.opera,ft=!Nr&&zn("chrome"),Un=zn("gecko")&&!Ss&&!It&&!ga,yn=!ft&&zn("safari"),$o=zn("phantom"),Zl="OTransition"in Vn,Rr=navigator.platform.indexOf("Win")===0,Ws=ga&&"transition"in Vn,As="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ir,ci="MozPerspective"in Vn,_a=!window.L_DISABLE_3D&&(Ws||As||ci)&&!Zl&&!$o,Ei=typeof orientation<"u"||zn("mobile"),Ko=Ei&&Ss,Yo=Ei&&As,va=!window.PointerEvent&&window.MSPointerEvent,Yi=!!(window.PointerEvent||va),Wi="ontouchstart"in window||!!window.TouchEvent,Wo=!window.L_NO_TOUCH&&(Wi||Yi),Qi=Ei&&It,Qo=Ei&&Un,Qs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ya=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",I,c),window.removeEventListener("testPassiveEventSupport",I,c)}catch{}return a}(),Xs=function(){return!!document.createElement("canvas").getContext}(),xa=!!(document.createElementNS&&pa("svg").createSVGRect),Rt=!!xa&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jt=!xa&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Zt=navigator.platform.indexOf("Mac")===0,ui=navigator.platform.indexOf("Linux")===0;function zn(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var Ce={ie:ga,ielt9:Go,edge:Nr,webkit:Ss,android:ql,android23:Ir,androidStock:Gl,opera:It,chrome:ft,gecko:Un,safari:yn,phantom:$o,opera12:Zl,win:Rr,ie3d:Ws,webkit3d:As,gecko3d:ci,any3d:_a,mobile:Ei,mobileWebkit:Ko,mobileWebkit3d:Yo,msPointer:va,pointer:Yi,touch:Wo,touchNative:Wi,mobileOpera:Qi,mobileGecko:Qo,retina:Qs,passiveEvents:ya,canvas:Xs,svg:xa,vml:Jt,inlineSvg:Rt,mac:Zt,linux:ui},Ns=Ce.msPointer?"MSPointerDown":"pointerdown",Xo=Ce.msPointer?"MSPointerMove":"pointermove",Js=Ce.msPointer?"MSPointerUp":"pointerup",Is=Ce.msPointer?"MSPointerCancel":"pointercancel",Si={touchstart:Ns,touchmove:Xo,touchend:Js,touchcancel:Is},Ai={touchstart:kr,touchmove:Cr,touchend:Cr,touchcancel:Cr},Rn={},xn=!1;function zt(a,c,p){return c==="touchstart"&&$l(),Ai[c]?(p=Ai[c].bind(this,p),a.addEventListener(Si[c],p,!1),p):(console.warn("wrong event specified:",c),I)}function Jo(a,c,p){if(!Si[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(Si[c],p,!1)}function ba(a){Rn[a.pointerId]=a}function Ni(a){Rn[a.pointerId]&&(Rn[a.pointerId]=a)}function Xi(a){delete Rn[a.pointerId]}function $l(){xn||(document.addEventListener(Ns,ba,!0),document.addEventListener(Xo,Ni,!0),document.addEventListener(Js,Xi,!0),document.addEventListener(Is,Xi,!0),xn=!0)}function Cr(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in Rn)c.touches.push(Rn[p]);c.changedTouches=[c],a(c)}}function kr(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&wt(c),Cr(a,c)}function Kl(a){var c={},p,x;for(x in a)p=a[x],c[x]=p&&p.bind?p.bind(a):p;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var er=200;function Ji(a,c){a.addEventListener("dblclick",c);var p=0,x;function T(R){if(R.detail!==1){x=R.detail;return}if(!(R.pointerType==="mouse"||R.sourceCapabilities&&!R.sourceCapabilities.firesTouchEvents)){var z=Ea(R);if(!(z.some(function(re){return re instanceof HTMLLabelElement&&re.attributes.for})&&!z.some(function(re){return re instanceof HTMLInputElement||re instanceof HTMLSelectElement}))){var Q=Date.now();Q-p<=er?(x++,x===2&&c(Kl(R))):x=1,p=Q}}}return a.addEventListener("click",T),{dblclick:c,simDblclick:T}}function fn(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var Rs=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),tr=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),es=tr==="webkitTransition"||tr==="OTransition"?tr+"End":"transitionend";function Pr(a){return typeof a=="string"?document.getElementById(a):a}function ts(a,c){var p=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var x=document.defaultView.getComputedStyle(a,null);p=x?x[c]:null}return p==="auto"?null:p}function et(a,c,p){var x=document.createElement(a);return x.className=c||"",p&&p.appendChild(x),x}function gt(a){var c=a.parentNode;c&&c.removeChild(a)}function an(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function ns(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function nr(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function ir(a,c){if(a.classList!==void 0)return a.classList.contains(c);var p=Dt(a);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function Ke(a,c){if(a.classList!==void 0)for(var p=H(c),x=0,T=p.length;x<T;x++)a.classList.add(p[x]);else if(!ir(a,c)){var R=Dt(a);el(a,(R?R+" ":"")+c)}}function yt(a,c){a.classList!==void 0?a.classList.remove(c):el(a,F((" "+Dt(a)+" ").replace(" "+c+" "," ")))}function el(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function Dt(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Ct(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Mr(a,c)}function Mr(a,c){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(x)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):a.style.filter+=" progid:"+x+"(opacity="+c+")"}function Ii(a){for(var c=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in c)return a[p];return!1}function Cn(a,c,p){var x=c||new J(0,0);a.style[Rs]=(Ce.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function ze(a,c){a._leaflet_pos=c,Ce.any3d?Cn(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function Jn(a){return a._leaflet_pos||new J(0,0)}var bn,Ri,wa;if("onselectstart"in document)bn=function(){De(window,"selectstart",wt)},Ri=function(){ut(window,"selectstart",wt)};else{var Cs=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);bn=function(){if(Cs){var a=document.documentElement.style;wa=a[Cs],a[Cs]="none"}},Ri=function(){Cs&&(document.documentElement.style[Cs]=wa,wa=void 0)}}function jr(){De(window,"dragstart",wt)}function tl(){ut(window,"dragstart",wt)}var Ta,sr;function Ci(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(kn(),Ta=a,sr=a.style.outlineStyle,a.style.outlineStyle="none",De(window,"keydown",kn))}function kn(){Ta&&(Ta.style.outlineStyle=sr,Ta=void 0,sr=void 0,ut(window,"keydown",kn))}function is(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function ki(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var nl={__proto__:null,TRANSFORM:Rs,TRANSITION:tr,TRANSITION_END:es,get:Pr,getStyle:ts,create:et,remove:gt,empty:an,toFront:ns,toBack:nr,hasClass:ir,addClass:Ke,removeClass:yt,setClass:el,getClass:Dt,setOpacity:Ct,testProp:Ii,setTransform:Cn,setPosition:ze,getPosition:Jn,get disableTextSelection(){return bn},get enableTextSelection(){return Ri},disableImageDrag:jr,enableImageDrag:tl,preventOutline:Ci,restoreOutline:kn,getSizedParentNode:is,getScale:ki};function De(a,c,p,x){if(c&&typeof c=="object")for(var T in c)ks(a,T,c[T],p);else{c=H(c);for(var R=0,z=c.length;R<z;R++)ks(a,c[R],p,x)}return this}var ei="_leaflet_events";function ut(a,c,p,x){if(arguments.length===1)hi(a),delete a[ei];else if(c&&typeof c=="object")for(var T in c)di(a,T,c[T],p);else if(c=H(c),arguments.length===2)hi(a,function(Q){return pe(c,Q)!==-1});else for(var R=0,z=c.length;R<z;R++)di(a,c[R],p,x);return this}function hi(a,c){for(var p in a[ei]){var x=p.split(/\d/)[0];(!c||c(x))&&di(a,x,null,null,p)}}var Bn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ks(a,c,p,x){var T=c+y(p)+(x?"_"+y(x):"");if(a[ei]&&a[ei][T])return this;var R=function(Q){return p.call(x||a,Q||window.event)},z=R;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?R=zt(a,c,R):Ce.touch&&c==="dblclick"?R=Ji(a,R):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(Bn[c]||c,R,Ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(R=function(Q){Q=Q||window.event,Ms(a,Q)&&z(Q)},a.addEventListener(Bn[c],R,!1)):a.addEventListener(c,z,!1):a.attachEvent("on"+c,R),a[ei]=a[ei]||{},a[ei][T]=R}function di(a,c,p,x,T){T=T||c+y(p)+(x?"_"+y(x):"");var R=a[ei]&&a[ei][T];if(!R)return this;!Ce.touchNative&&Ce.pointer&&c.indexOf("touch")===0?Jo(a,c,R):Ce.touch&&c==="dblclick"?fn(a,R):"removeEventListener"in a?a.removeEventListener(Bn[c]||c,R,!1):a.detachEvent("on"+c,R),a[ei][T]=null}function Fn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Pi(a){return ks(a,"wheel",Fn),this}function Ps(a){return De(a,"mousedown touchstart dblclick contextmenu",Fn),a._leaflet_disable_click=!0,this}function wt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function wn(a){return wt(a),Fn(a),this}function Ea(a){if(a.composedPath)return a.composedPath();for(var c=[],p=a.target;p;)c.push(p),p=p.parentNode;return c}function en(a,c){if(!c)return new J(a.clientX,a.clientY);var p=ki(c),x=p.boundingClientRect;return new J((a.clientX-x.left)/p.x-c.clientLeft,(a.clientY-x.top)/p.y-c.clientTop)}var mt=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lr(a){return Ce.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/mt:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Ms(a,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var Yl={__proto__:null,on:De,off:ut,stopPropagation:Fn,disableScrollPropagation:Pi,disableClickPropagation:Ps,preventDefault:wt,stop:wn,getPropagationPath:Ea,getMousePosition:en,getWheelDelta:Lr,isExternalTarget:Ms,addListener:De,removeListener:ut},Dr=ce.extend({run:function(a,c,p,x){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=Jn(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Z(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var p=this._startPos.add(this._offset.multiplyBy(a));c&&p._round(),ze(this._el,p),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Qe=ce.extend({options:{crs:Es,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=D(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ge(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=tr&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),De(this._proxy,es,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(Ge(a),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=o({animate:p.animate},p.zoom),p.pan=o({animate:p.animate,duration:p.duration},p.pan));var x=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,p.zoom):this._tryAnimatedPan(a,p.pan);if(x)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,p){var x=this.getZoomScale(c),T=this.getSize().divideBy(2),R=a instanceof J?a:this.latLngToContainerPoint(a),z=R.subtract(T).multiplyBy(1-1/x),Q=this.containerPointToLatLng(T.add(z));return this.setView(Q,c,{zoom:p})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():$e(a);var p=_e(c.paddingTopLeft||c.padding||[0,0]),x=_e(c.paddingBottomRight||c.padding||[0,0]),T=this.getBoundsZoom(a,!1,p.add(x));if(T=typeof c.maxZoom=="number"?Math.min(c.maxZoom,T):T,T===1/0)return{center:a.getCenter(),zoom:T};var R=x.subtract(p).divideBy(2),z=this.project(a.getSouthWest(),T),Q=this.project(a.getNorthEast(),T),re=this.unproject(z.add(Q).divideBy(2).add(R),T);return{center:re,zoom:T}},fitBounds:function(a,c){if(a=$e(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=_e(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Dr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Ke(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,p){if(p=p||{},p.animate===!1||!Ce.any3d)return this.setView(a,c,p);this._stop();var x=this.project(this.getCenter()),T=this.project(a),R=this.getSize(),z=this._zoom;a=Ge(a),c=c===void 0?z:c;var Q=Math.max(R.x,R.y),re=Q*this.getZoomScale(z,c),me=T.distanceTo(x)||1,be=1.42,Ae=be*be;function Re(Vt){var us=Vt?-1:1,Us=Vt?re:Q,ur=re*re-Q*Q+us*Ae*Ae*me*me,zs=2*Us*Ae*me,_l=ur/zs,lc=Math.sqrt(_l*_l+1)-_l,vl=lc<1e-9?-18:Math.log(lc);return vl}function Ze(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function Pt(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}function Bt(Vt){return Ze(Vt)/Pt(Vt)}var En=Re(0);function fi(Vt){return Q*(Pt(En)/Pt(En+be*Vt))}function dd(Vt){return Q*(Pt(En)*Bt(En+be*Vt)-Ze(En))/Ae}function fd(Vt){return 1-Math.pow(1-Vt,1.5)}var gl=Date.now(),Ba=(Re(1)-En)/be,md=p.duration?1e3*p.duration:1e3*Ba*.8;function Fa(){var Vt=(Date.now()-gl)/md,us=fd(Vt)*Ba;Vt<=1?(this._flyToFrame=Z(Fa,this),this._move(this.unproject(x.add(T.subtract(x).multiplyBy(dd(us)/me)),z),this.getScaleZoom(Q/fi(us),z),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Fa.call(this),this},flyToBounds:function(a,c){var p=this._getBoundsCenterZoom(a,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(a){return a=$e(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,$e(a));return p.equals(x)||this.panTo(x,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var p=_e(c.paddingTopLeft||c.padding||[0,0]),x=_e(c.paddingBottomRight||c.padding||[0,0]),T=this.project(this.getCenter()),R=this.project(a),z=this.getPixelBounds(),Q=Ie([z.min.add(p),z.max.subtract(x)]),re=Q.getSize();if(!Q.contains(R)){this._enforcingBounds=!0;var me=R.subtract(Q.getCenter()),be=Q.extend(R).getSize().subtract(re);T.x+=me.x<0?-be.x:be.x,T.y+=me.y<0?-be.y:be.y,this.panTo(this.unproject(T),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=o({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=c.divideBy(2).round(),T=p.divideBy(2).round(),R=x.subtract(T);return!R.x&&!R.y?this:(a.animate&&a.pan?this.panBy(R):(a.pan&&this._rawPanBy(R),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=o({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=f(this._handleGeolocationResponse,this),p=f(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,a):navigator.geolocation.getCurrentPosition(c,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,p=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,p=a.coords.longitude,x=new qe(c,p),T=x.toBounds(a.coords.accuracy*2),R=this._locateOptions;if(R.setView){var z=this.getBoundsZoom(T);this.setView(x,R.maxZoom?Math.min(z,R.maxZoom):z)}var Q={latlng:x,bounds:T,timestamp:a.timestamp};for(var re in a.coords)typeof a.coords[re]=="number"&&(Q[re]=a.coords[re]);this.fire("locationfound",Q)}},addHandler:function(a,c){if(!c)return this;var p=this[a]=new c(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)gt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),x=et("div",p,c||this._mapPane);return a&&(this._panes[a]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new Se(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,p){a=$e(a),p=_e(p||[0,0]);var x=this.getZoom()||0,T=this.getMinZoom(),R=this.getMaxZoom(),z=a.getNorthWest(),Q=a.getSouthEast(),re=this.getSize().subtract(p),me=Ie(this.project(Q,x),this.project(z,x)).getSize(),be=Ce.any3d?this.options.zoomSnap:1,Ae=re.x/me.x,Re=re.y/me.y,Ze=c?Math.max(Ae,Re):Math.min(Ae,Re);return x=this.getScaleZoom(Ze,x),be&&(x=Math.round(x/(be/100))*(be/100),x=c?Math.ceil(x/be)*be:Math.floor(x/be)*be),Math.max(T,Math.min(R,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var p=this._getTopLeftPoint(a,c);return new je(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(a)/p.scale(c)},getScaleZoom:function(a,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var x=p.zoom(a*p.scale(c));return isNaN(x)?1/0:x},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ge(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(_e(a),c)},layerPointToLatLng:function(a){var c=_e(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(Ge(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Ge(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds($e(a))},distance:function(a,c){return this.options.crs.distance(Ge(a),Ge(c))},containerPointToLayerPoint:function(a){return _e(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return _e(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(_e(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ge(a)))},mouseEventToContainerPoint:function(a){return en(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=Pr(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");De(c,"scroll",this._onScroll,this),this._containerId=y(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Ke(a,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ts(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ze(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ke(a.markerPane,"leaflet-zoom-hide"),Ke(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,p){ze(this._mapPane,new J(0,0));var x=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var T=this._zoom!==c;this._moveStart(T,p)._move(a,c)._moveEnd(T),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,p,x){c===void 0&&(c=this._zoom);var T=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),x?p&&p.pinch&&this.fire("zoom",p):((T||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){ze(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[y(this._container)]=this;var c=a?ut:De;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=Z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var p=[],x,T=c==="mouseout"||c==="mouseover",R=a.target||a.srcElement,z=!1;R;){if(x=this._targets[y(R)],x&&(c==="click"||c==="preclick")&&this._draggableMoved(x)){z=!0;break}if(x&&x.listens(c,!0)&&(T&&!Ms(R,a)||(p.push(x),T))||R===this._container)break;R=R.parentNode}return!p.length&&!z&&!T&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var p=a.type;p==="mousedown"&&Ci(c),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,p){if(a.type==="click"){var x=o({},a);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var T=this._findEventTargets(a,c);if(p){for(var R=[],z=0;z<p.length;z++)p[z].listens(c,!0)&&R.push(p[z]);T=R.concat(T)}if(T.length){c==="contextmenu"&&wt(a);var Q=T[0],re={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var me=Q.getLatLng&&(!Q._radius||Q._radius<=10);re.containerPoint=me?this.latLngToContainerPoint(Q.getLatLng()):this.mouseEventToContainerPoint(a),re.layerPoint=this.containerPointToLayerPoint(re.containerPoint),re.latlng=me?Q.getLatLng():this.layerPointToLatLng(re.layerPoint)}for(z=0;z<T.length;z++)if(T[z].fire(c,re,!0),re.originalEvent._stopped||T[z].options.bubblingMouseEvents===!1&&pe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return Jn(this._mapPane)||new J(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var p=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var p=this.getSize()._divideBy(2);return this.project(a,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,p){var x=this._getNewPixelOrigin(p,c);return this.project(a,c)._subtract(x)},_latLngBoundsToNewLayerBounds:function(a,c,p){var x=this._getNewPixelOrigin(p,c);return Ie([this.project(a.getSouthWest(),c)._subtract(x),this.project(a.getNorthWest(),c)._subtract(x),this.project(a.getSouthEast(),c)._subtract(x),this.project(a.getNorthEast(),c)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,p){if(!p)return a;var x=this.project(a,c),T=this.getSize().divideBy(2),R=new je(x.subtract(T),x.add(T)),z=this._getBoundsOffset(R,p,c);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?a:this.unproject(x.add(z),c)},_limitOffset:function(a,c){if(!c)return a;var p=this.getPixelBounds(),x=new je(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(x,c))},_getBoundsOffset:function(a,c,p){var x=Ie(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),T=x.min.subtract(a.min),R=x.max.subtract(a.max),z=this._rebound(T.x,-R.x),Q=this._rebound(T.y,-R.y);return new J(z,Q)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),p=this.getMaxZoom(),x=Ce.any3d?this.options.zoomSnap:1;return x&&(a=Math.round(a/x)*x),Math.max(c,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var p=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var a=this._proxy=et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var p=Rs,x=this._proxy.style[p];Cn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();Cn(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(c),T=this._getCenterOffset(a)._divideBy(1-1/x);return p.animate!==!0&&!this.getSize().contains(T)?!1:(Z(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Ke(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ss(a,c){return new Qe(a,c)}var mn=ve.extend({options:{position:"topright"},initialize:function(a){D(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),p=this.getPosition(),x=a._controlCorners[p];return Ke(c,"leaflet-control"),p.indexOf("bottom")!==-1?x.insertBefore(c,x.firstChild):x.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Tn=function(a){return new mn(a)};Qe.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",p=this._controlContainer=et("div",c+"control-container",this._container);function x(T,R){var z=c+T+" "+c+R;a[T+R]=et("div",z,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)gt(this._controlCorners[a]);gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var il=mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,p,x){return p<x?-1:x<p?1:0}},initialize:function(a,c,p){D(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var x in a)this._addLayer(a[x],x);for(x in c)this._addLayer(c[x],x,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return mn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(y(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Ke(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Ke(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=et("div",a),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Ps(c),Pi(c);var x=this._section=et("section",a+"-list");p&&(this._map.on("click",this.collapse,this),De(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var T=this._layersLink=et("a",a+"-toggle",c);T.href="#",T.title="Layers",T.setAttribute("role","button"),De(T,{keydown:function(R){R.keyCode===13&&this._expandSafely()},click:function(R){wt(R),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=et("div",a+"-base",x),this._separator=et("div",a+"-separator",x),this._overlaysList=et("div",a+"-overlays",x),c.appendChild(x)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&y(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(f(function(x,T){return this.options.sortFunction(x.layer,T.layer,x.name,T.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;an(this._baseLayersList),an(this._overlaysList),this._layerControlInputs=[];var a,c,p,x,T=0;for(p=0;p<this._layers.length;p++)x=this._layers[p],this._addItem(x),c=c||x.overlay,a=a||!x.overlay,T+=x.overlay?0:1;return this.options.hideSingleBase&&(a=a&&T>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(y(a.target)),p=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(a,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(a){var c=document.createElement("label"),p=this._map.hasLayer(a.layer),x;a.overlay?(x=document.createElement("input"),x.type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+y(this),p),this._layerControlInputs.push(x),x.layerId=y(a.layer),De(x,"click",this._onInputClick,this);var T=document.createElement("span");T.innerHTML=" "+a.name;var R=document.createElement("span");c.appendChild(R),R.appendChild(x),R.appendChild(T);var z=a.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,p,x=[],T=[];this._handlingClick=!0;for(var R=a.length-1;R>=0;R--)c=a[R],p=this._getLayer(c.layerId).layer,c.checked?x.push(p):c.checked||T.push(p);for(R=0;R<T.length;R++)this._map.hasLayer(T[R])&&this._map.removeLayer(T[R]);for(R=0;R<x.length;R++)this._map.hasLayer(x[R])||this._map.addLayer(x[R]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,p,x=this._map.getZoom(),T=a.length-1;T>=0;T--)c=a[T],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&x<p.options.minZoom||p.options.maxZoom!==void 0&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,De(a,"click",wt),this.expand();var c=this;setTimeout(function(){ut(a,"click",wt),c._preventClick=!1})}}),lu=function(a,c,p){return new il(a,c,p)},js=mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",p=et("div",c+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,p,x,T){var R=et("a",p,x);return R.innerHTML=a,R.href="#",R.title=c,R.setAttribute("role","button"),R.setAttribute("aria-label",c),Ps(R),De(R,"click",wn),De(R,"click",T,this),De(R,"click",this._refocusOnMap,this),R},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";yt(this._zoomInButton,c),yt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Ke(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Ke(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qe.mergeOptions({zoomControl:!0}),Qe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new js,this.addControl(this.zoomControl))});var Sa=function(a){return new js(a)},Aa=mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",p=et("div",c),x=this.options;return this._addScales(x,c+"-line",p),a.on(x.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,p){a.metric&&(this._mScale=et("div",c,p)),a.imperial&&(this._iScale=et("div",c,p))},_update:function(){var a=this._map,c=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/a)},_updateImperial:function(a){var c=a*3.2808399,p,x,T;c>5280?(p=c/5280,x=this._getRoundNum(p),this._updateScale(this._iScale,x+" mi",x/p)):(T=this._getRoundNum(c),this._updateScale(this._iScale,T+" ft",T/c))},_updateScale:function(a,c,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),p=a/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),Na=function(a){return new Aa(a)},Wl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',rr=mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?Wl+" ":"")+"Leaflet</a>"},initialize:function(a){D(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=et("div","leaflet-control-attribution"),Ps(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Qe.mergeOptions({attributionControl:!0}),Qe.addInitHook(function(){this.options.attributionControl&&new rr().addTo(this)});var cu=function(a){return new rr(a)};mn.Layers=il,mn.Zoom=js,mn.Scale=Aa,mn.Attribution=rr,Tn.layers=lu,Tn.zoom=Sa,Tn.scale=Na,Tn.attribution=cu;var Hn=ve.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Hn.addTo=function(a,c){return a.addHandler(c,this),this};var Or={Events:X},sl=Ce.touch?"touchstart mousedown":"mousedown",Mi=ce.extend({options:{clickTolerance:3},initialize:function(a,c,p,x){D(this,x),this._element=a,this._dragStartTarget=c||a,this._preventOutline=p},enable:function(){this._enabled||(De(this._dragStartTarget,sl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Mi._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,sl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!ir(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Mi._dragging===this&&this.finishDrag();return}if(!(Mi._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Mi._dragging=this,this._preventOutline&&Ci(this._element),jr(),bn(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,p=is(this._element);this._startPoint=new J(c.clientX,c.clientY),this._startPos=Jn(this._element),this._parentScale=ki(p);var x=a.type==="mousedown";De(document,x?"mousemove":"touchmove",this._onMove,this),De(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,p=new J(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,wt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Ke(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ke(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),ze(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),tl(),Ri();var c=this._moved&&this._moving;this._moving=!1,Mi._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Ia(a,c,p){var x,T=[1,4,2,8],R,z,Q,re,me,be,Ae,Re;for(R=0,be=a.length;R<be;R++)a[R]._code=rs(a[R],c);for(Q=0;Q<4;Q++){for(Ae=T[Q],x=[],R=0,be=a.length,z=be-1;R<be;z=R++)re=a[R],me=a[z],re._code&Ae?me._code&Ae||(Re=on(me,re,Ae,c,p),Re._code=rs(Re,c),x.push(Re)):(me._code&Ae&&(Re=on(me,re,Ae,c,p),Re._code=rs(Re,c),x.push(Re)),x.push(re));a=x}return a}function ar(a,c){var p,x,T,R,z,Q,re,me,be;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Ae=Ge([0,0]),Re=$e(a),Ze=Re.getNorthWest().distanceTo(Re.getSouthWest())*Re.getNorthEast().distanceTo(Re.getNorthWest());Ze<1700&&(Ae=Ra(a));var Pt=a.length,Bt=[];for(p=0;p<Pt;p++){var En=Ge(a[p]);Bt.push(c.project(Ge([En.lat-Ae.lat,En.lng-Ae.lng])))}for(Q=re=me=0,p=0,x=Pt-1;p<Pt;x=p++)T=Bt[p],R=Bt[x],z=T.y*R.x-R.y*T.x,re+=(T.x+R.x)*z,me+=(T.y+R.y)*z,Q+=z*3;Q===0?be=Bt[0]:be=[re/Q,me/Q];var fi=c.unproject(_e(be));return Ge([fi.lat+Ae.lat,fi.lng+Ae.lng])}function Ra(a){for(var c=0,p=0,x=0,T=0;T<a.length;T++){var R=Ge(a[T]);c+=R.lat,p+=R.lng,x++}return Ge([c/x,p/x])}var Ca={__proto__:null,clipPolygon:Ia,polygonCenter:ar,centroid:Ra};function rl(a,c){if(!c||!a.length)return a.slice();var p=c*c;return a=Xl(a,p),a=Ql(a,p),a}function ka(a,c,p){return Math.sqrt(qn(a,c,p,!0))}function Ls(a,c,p){return qn(a,c,p)}function Ql(a,c){var p=a.length,x=typeof Uint8Array<"u"?Uint8Array:Array,T=new x(p);T[0]=T[p-1]=1,Pa(a,T,c,0,p-1);var R,z=[];for(R=0;R<p;R++)T[R]&&z.push(a[R]);return z}function Pa(a,c,p,x,T){var R=0,z,Q,re;for(Q=x+1;Q<=T-1;Q++)re=qn(a[Q],a[x],a[T],!0),re>R&&(z=Q,R=re);R>p&&(c[z]=1,Pa(a,c,p,x,z),Pa(a,c,p,z,T))}function Xl(a,c){for(var p=[a[0]],x=1,T=0,R=a.length;x<R;x++)Jl(a[x],a[T])>c&&(p.push(a[x]),T=x);return T<R-1&&p.push(a[R-1]),p}var al;function Vr(a,c,p,x,T){var R=x?al:rs(a,p),z=rs(c,p),Q,re,me;for(al=z;;){if(!(R|z))return[a,c];if(R&z)return!1;Q=R||z,re=on(a,c,Q,p,T),me=rs(re,p),Q===R?(a=re,R=me):(c=re,z=me)}}function on(a,c,p,x,T){var R=c.x-a.x,z=c.y-a.y,Q=x.min,re=x.max,me,be;return p&8?(me=a.x+R*(re.y-a.y)/z,be=re.y):p&4?(me=a.x+R*(Q.y-a.y)/z,be=Q.y):p&2?(me=re.x,be=a.y+z*(re.x-a.x)/R):p&1&&(me=Q.x,be=a.y+z*(Q.x-a.x)/R),new J(me,be,T)}function rs(a,c){var p=0;return a.x<c.min.x?p|=1:a.x>c.max.x&&(p|=2),a.y<c.min.y?p|=4:a.y>c.max.y&&(p|=8),p}function Jl(a,c){var p=c.x-a.x,x=c.y-a.y;return p*p+x*x}function qn(a,c,p,x){var T=c.x,R=c.y,z=p.x-T,Q=p.y-R,re=z*z+Q*Q,me;return re>0&&(me=((a.x-T)*z+(a.y-R)*Q)/re,me>1?(T=p.x,R=p.y):me>0&&(T+=z*me,R+=Q*me)),z=a.x-T,Q=a.y-R,x?z*z+Q*Q:new J(T,R)}function m(a){return!ne(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function w(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),m(a)}function S(a,c){var p,x,T,R,z,Q,re,me;if(!a||a.length===0)throw new Error("latlngs not passed");m(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var be=Ge([0,0]),Ae=$e(a),Re=Ae.getNorthWest().distanceTo(Ae.getSouthWest())*Ae.getNorthEast().distanceTo(Ae.getNorthWest());Re<1700&&(be=Ra(a));var Ze=a.length,Pt=[];for(p=0;p<Ze;p++){var Bt=Ge(a[p]);Pt.push(c.project(Ge([Bt.lat-be.lat,Bt.lng-be.lng])))}for(p=0,x=0;p<Ze-1;p++)x+=Pt[p].distanceTo(Pt[p+1])/2;if(x===0)me=Pt[0];else for(p=0,R=0;p<Ze-1;p++)if(z=Pt[p],Q=Pt[p+1],T=z.distanceTo(Q),R+=T,R>x){re=(R-x)/T,me=[Q.x-re*(Q.x-z.x),Q.y-re*(Q.y-z.y)];break}var En=c.unproject(_e(me));return Ge([En.lat+be.lat,En.lng+be.lng])}var P={__proto__:null,simplify:rl,pointToSegmentDistance:ka,closestPointOnSegment:Ls,clipSegment:Vr,_getEdgeIntersection:on,_getBitCode:rs,_sqClosestPointOnSegment:qn,isFlat:m,_flat:w,polylineCenter:S},W={project:function(a){return new J(a.lng,a.lat)},unproject:function(a){return new qe(a.y,a.x)},bounds:new je([-180,-90],[180,90])},ae={R:6378137,R_MINOR:6356752314245179e-9,bounds:new je([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,p=this.R,x=a.lat*c,T=this.R_MINOR/p,R=Math.sqrt(1-T*T),z=R*Math.sin(x),Q=Math.tan(Math.PI/4-x/2)/Math.pow((1-z)/(1+z),R/2);return x=-p*Math.log(Math.max(Q,1e-10)),new J(a.lng*c*p,x)},unproject:function(a){for(var c=180/Math.PI,p=this.R,x=this.R_MINOR/p,T=Math.sqrt(1-x*x),R=Math.exp(-a.y/p),z=Math.PI/2-2*Math.atan(R),Q=0,re=.1,me;Q<15&&Math.abs(re)>1e-7;Q++)me=T*Math.sin(z),me=Math.pow((1-me)/(1+me),T/2),re=Math.PI/2-2*Math.atan(R*me)-z,z+=re;return new qe(z*c,a.x*c/p)}},ye={__proto__:null,LonLat:W,Mercator:ae,SphericalMercator:Ki},rt=o({},Gt,{code:"EPSG:3395",projection:ae,transformation:function(){var a=.5/(Math.PI*ae.R);return Ti(a,.5,-a,.5)}()}),$t=o({},Gt,{code:"EPSG:4326",projection:W,transformation:Ti(1/180,1,-1/180,.5)}),at=o({},Xt,{projection:W,transformation:Ti(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var p=c.lng-a.lng,x=c.lat-a.lat;return Math.sqrt(p*p+x*x)},infinite:!0});Xt.Earth=Gt,Xt.EPSG3395=rt,Xt.EPSG3857=Es,Xt.EPSG900913=Ar,Xt.EPSG4326=$t,Xt.Simple=at;var _t=ce.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[y(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[y(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});Qe.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=y(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=y(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return y(a)in this._layers},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},_addLayers:function(a){a=a?ne(a)?a:[a]:[];for(var c=0,p=a.length;c<p;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[y(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=y(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var T=this._zoomBoundLayers[x].options;a=T.minZoom===void 0?a:Math.min(a,T.minZoom),c=T.maxZoom===void 0?c:Math.max(c,T.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kt=_t.extend({initialize:function(a,c){D(this,c),this._layers={};var p,x;if(a)for(p=0,x=a.length;p<x;p++)this.addLayer(a[p])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),p,x;for(p in this._layers)x=this._layers[p],x[a]&&x[a].apply(x,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return y(a)}}),Ds=function(a,c){return new kt(a,c)},At=kt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),kt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),kt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new Se;for(var c in this._layers){var p=this._layers[c];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),as=function(a,c){return new At(a,c)},os=ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){D(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(x,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),x},_setIconStyles:function(a,c){var p=this.options,x=p[c+"Size"];typeof x=="number"&&(x=[x,x]);var T=_e(x),R=_e(c==="shadow"&&p.shadowAnchor||p.iconAnchor||T&&T.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(p.className||""),R&&(a.style.marginLeft=-R.x+"px",a.style.marginTop=-R.y+"px"),T&&(a.style.width=T.x+"px",a.style.height=T.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return Ce.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function ec(a){return new os(a)}var Ma=os.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ma.imagePath!="string"&&(Ma.imagePath=this._detectIconPath()),(this.options.imagePath||Ma.imagePath)+os.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(p,x,T){var R=x.exec(p);return R&&R[T]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=et("div","leaflet-default-icon-path",document.body),c=ts(a,"background-image")||ts(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),uu=Hn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Mi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ke(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,p=c._map,x=this._marker.options.autoPanSpeed,T=this._marker.options.autoPanPadding,R=Jn(c._icon),z=p.getPixelBounds(),Q=p.getPixelOrigin(),re=Ie(z.min._subtract(Q).add(T),z.max._subtract(Q).subtract(T));if(!re.contains(R)){var me=_e((Math.max(re.max.x,R.x)-re.max.x)/(z.max.x-re.max.x)-(Math.min(re.min.x,R.x)-re.min.x)/(z.min.x-re.min.x),(Math.max(re.max.y,R.y)-re.max.y)/(z.max.y-re.max.y)-(Math.min(re.min.y,R.y)-re.min.y)/(z.min.y-re.min.y)).multiplyBy(x);p.panBy(me,{animate:!1}),this._draggable._newPos._add(me),this._draggable._startPos._add(me),ze(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=Z(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=Z(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,p=c._shadow,x=Jn(c._icon),T=c._map.layerPointToLatLng(x);p&&ze(p,x),c._latlng=T,a.latlng=T,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),ja=_t.extend({options:{icon:new Ma,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){D(this,c),this._latlng=Ge(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=Ge(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Ke(p,c),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(p,"focus",this._panOnFocus,this);var T=a.icon.createShadow(this._shadow),R=!1;T!==this._shadow&&(this._removeShadow(),R=!0),T&&(Ke(T,c),T.alt=""),this._shadow=T,a.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),T&&R&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&ze(this._icon,a),this._shadow&&ze(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Ke(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),uu)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new uu(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Ct(this._icon,a),this._shadow&&Ct(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,p=c.iconSize?_e(c.iconSize):_e(0,0),x=c.iconAnchor?_e(c.iconAnchor):_e(0,0);a.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function hu(a,c){return new ja(a,c)}var Os=_t.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return D(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ol=Os.extend({options:{fill:!0,radius:10},initialize:function(a,c){D(this,c),this._latlng=Ge(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=Ge(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return Os.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,p=this._clickTolerance(),x=[a+p,c+p];this._pxBounds=new je(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ad(a,c){return new ol(a,c)}var du=ol.extend({initialize:function(a,c,p){if(typeof c=="number"&&(c=o({},p,{radius:c})),D(this,c),this._latlng=Ge(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new Se(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Os.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===Gt.distance){var T=Math.PI/180,R=this._mRadius/Gt.R/T,z=p.project([c+R,a]),Q=p.project([c-R,a]),re=z.add(Q).divideBy(2),me=p.unproject(re).lat,be=Math.acos((Math.cos(R*T)-Math.sin(c*T)*Math.sin(me*T))/(Math.cos(c*T)*Math.cos(me*T)))/T;(isNaN(be)||be===0)&&(be=R/Math.cos(Math.PI/180*c)),this._point=re.subtract(p.getPixelOrigin()),this._radius=isNaN(be)?0:re.x-p.project([me,a-be]).x,this._radiusY=re.y-z.y}else{var Ae=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Ae).x}this._updateBounds()}});function Hm(a,c,p){return new du(a,c,p)}var Vs=Os.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){D(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,p=null,x=qn,T,R,z=0,Q=this._parts.length;z<Q;z++)for(var re=this._parts[z],me=1,be=re.length;me<be;me++){T=re[me-1],R=re[me];var Ae=x(a,T,R,!0);Ae<c&&(c=Ae,p=x(a,T,R))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return S(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=Ge(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new Se,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return m(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],p=m(a),x=0,T=a.length;x<T;x++)p?(c[x]=Ge(a[x]),this._bounds.extend(c[x])):c[x]=this._convertLatLngs(a[x]);return c},_project:function(){var a=new je;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new J(a,a);this._rawPxBounds&&(this._pxBounds=new je([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,p){var x=a[0]instanceof qe,T=a.length,R,z;if(x){for(z=[],R=0;R<T;R++)z[R]=this._map.latLngToLayerPoint(a[R]),p.extend(z[R]);c.push(z)}else for(R=0;R<T;R++)this._projectLatlngs(a[R],c,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,x,T,R,z,Q,re;for(p=0,T=0,R=this._rings.length;p<R;p++)for(re=this._rings[p],x=0,z=re.length;x<z-1;x++)Q=Vr(re[x],re[x+1],a,x,!0),Q&&(c[T]=c[T]||[],c[T].push(Q[0]),(Q[1]!==re[x+1]||x===z-2)&&(c[T].push(Q[1]),T++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,p=0,x=a.length;p<x;p++)a[p]=rl(a[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var p,x,T,R,z,Q,re=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,R=this._parts.length;p<R;p++)for(Q=this._parts[p],x=0,z=Q.length,T=z-1;x<z;T=x++)if(!(!c&&x===0)&&ka(a,Q[T],Q[x])<=re)return!0;return!1}});function qm(a,c){return new Vs(a,c)}Vs._flat=w;var La=Vs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ar(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=Vs.prototype._convertLatLngs.call(this,a),p=c.length;return p>=2&&c[0]instanceof qe&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(a){Vs.prototype._setLatLngs.call(this,a),m(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return m(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,p=new J(c,c);if(a=new je(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var x=0,T=this._rings.length,R;x<T;x++)R=Ia(this._rings[x],a,!0),R.length&&this._parts.push(R)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,p,x,T,R,z,Q,re,me;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(R=0,re=this._parts.length;R<re;R++)for(p=this._parts[R],z=0,me=p.length,Q=me-1;z<me;Q=z++)x=p[z],T=p[Q],x.y>a.y!=T.y>a.y&&a.x<(T.x-x.x)*(a.y-x.y)/(T.y-x.y)+x.x&&(c=!c);return c||Vs.prototype._containsPoint.call(this,a,!0)}});function ti(a,c){return new La(a,c)}var ni=At.extend({initialize:function(a,c){D(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=ne(a)?a:a.features,p,x,T;if(c){for(p=0,x=c.length;p<x;p++)T=c[p],(T.geometries||T.geometry||T.features||T.coordinates)&&this.addData(T);return this}var R=this.options;if(R.filter&&!R.filter(a))return this;var z=ll(a,R);return z?(z.feature=Da(a),z.defaultOptions=z.options,this.resetStyle(z),R.onEachFeature&&R.onEachFeature(a,z),this.addLayer(z)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=o({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function ll(a,c){var p=a.type==="Feature"?a.geometry:a,x=p?p.coordinates:null,T=[],R=c&&c.pointToLayer,z=c&&c.coordsToLatLng||tc,Q,re,me,be;if(!x&&!p)return null;switch(p.type){case"Point":return Q=z(x),fu(R,a,Q,c);case"MultiPoint":for(me=0,be=x.length;me<be;me++)Q=z(x[me]),T.push(fu(R,a,Q,c));return new At(T);case"LineString":case"MultiLineString":return re=cl(x,p.type==="LineString"?0:1,z),new Vs(re,c);case"Polygon":case"MultiPolygon":return re=cl(x,p.type==="Polygon"?1:2,z),new La(re,c);case"GeometryCollection":for(me=0,be=p.geometries.length;me<be;me++){var Ae=ll({geometry:p.geometries[me],type:"Feature",properties:a.properties},c);Ae&&T.push(Ae)}return new At(T);case"FeatureCollection":for(me=0,be=p.features.length;me<be;me++){var Re=ll(p.features[me],c);Re&&T.push(Re)}return new At(T);default:throw new Error("Invalid GeoJSON object.")}}function fu(a,c,p,x){return a?a(c,p):new ja(p,x&&x.markersInheritOptions&&x)}function tc(a){return new qe(a[1],a[0],a[2])}function cl(a,c,p){for(var x=[],T=0,R=a.length,z;T<R;T++)z=c?cl(a[T],c-1,p):(p||tc)(a[T]),x.push(z);return x}function ul(a,c){return a=Ge(a),a.alt!==void 0?[N(a.lng,c),N(a.lat,c),N(a.alt,c)]:[N(a.lng,c),N(a.lat,c)]}function nc(a,c,p,x){for(var T=[],R=0,z=a.length;R<z;R++)T.push(c?nc(a[R],m(a[R])?0:c-1,p,x):ul(a[R],x));return!c&&p&&T.length>0&&T.push(T[0].slice()),T}function ji(a,c){return a.feature?o({},a.feature,{geometry:c}):Da(c)}function Da(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Ur={toGeoJSON:function(a){return ji(this,{type:"Point",coordinates:ul(this.getLatLng(),a)})}};ja.include(Ur),du.include(Ur),ol.include(Ur),Vs.include({toGeoJSON:function(a){var c=!m(this._latlngs),p=nc(this._latlngs,c?1:0,!1,a);return ji(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),La.include({toGeoJSON:function(a){var c=!m(this._latlngs),p=c&&!m(this._latlngs[0]),x=nc(this._latlngs,p?2:c?1:0,!0,a);return c||(x=[x]),ji(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),kt.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(a).geometry.coordinates)}),ji(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var p=c==="GeometryCollection",x=[];return this.eachLayer(function(T){if(T.toGeoJSON){var R=T.toGeoJSON(a);if(p)x.push(R.geometry);else{var z=Da(R);z.type==="FeatureCollection"?x.push.apply(x,z.features):x.push(z)}}}),p?ji(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});function ic(a,c){return new ni(a,c)}var od=ic,ls=_t.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,p){this._url=a,this._bounds=$e(c),D(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ke(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&ns(this._image),this},bringToBack:function(){return this._map&&nr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=$e(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:et("img");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onload=f(this.fire,this,"load"),c.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Cn(this._image,p,c)},_reset:function(){var a=this._image,c=new je(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();ze(a,c.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Ct(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Oa=function(a,c,p){return new ls(a,c,p)},sc=ls.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:et("video");if(Ke(c,"leaflet-image-layer"),this._zoomAnimated&&Ke(c,"leaflet-zoom-animated"),this.options.className&&Ke(c,this.options.className),c.onselectstart=I,c.onmousemove=I,c.onloadeddata=f(this.fire,this,"load"),a){for(var p=c.getElementsByTagName("source"),x=[],T=0;T<p.length;T++)x.push(p[T].src);this._url=p.length>0?x:[c.src];return}ne(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var R=0;R<this._url.length;R++){var z=et("source");z.src=this._url[R],c.appendChild(z)}}});function ld(a,c,p){return new sc(a,c,p)}var or=ls.extend({_initImage:function(){var a=this._image=this._url;Ke(a,"leaflet-image-layer"),this._zoomAnimated&&Ke(a,"leaflet-zoom-animated"),this.options.className&&Ke(a,this.options.className),a.onselectstart=I,a.onmousemove=I}});function cd(a,c,p){return new or(a,c,p)}var Li=_t.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof qe||ne(a))?(this._latlng=Ge(a),D(this,c)):(D(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Ct(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Ct(this._container,1),this.bringToFront(),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Ct(this._container,0),this._removeTimeout=setTimeout(f(gt,void 0,this._container),200)):gt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Ge(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ns(this._container),this},bringToBack:function(){return this._map&&nr(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof At){c=null;var p=this._source._layers;for(var x in p)if(p[x]._map){c=p[x];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=_e(this.options.offset),p=this._getAnchor();this._zoomAnimated?ze(this._container,a.add(p)):c=c.add(a).add(p);var x=this._containerBottom=-c.y,T=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=x+"px",this._container.style.left=T+"px"}},_getAnchor:function(){return[0,0]}});Qe.include({_initOverlay:function(a,c,p,x){var T=c;return T instanceof a||(T=new a(x).setContent(c)),p&&T.setLatLng(p),T}}),_t.include({_initOverlay:function(a,c,p,x){var T=p;return T instanceof a?(D(T,x),T._source=this):(T=c&&!x?c:new a(x,this),T.setContent(p)),T}});var hl=Li.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Li.prototype.openOn.call(this,a)},onAdd:function(a){Li.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Os||this._source.on("preclick",Fn))},onRemove:function(a){Li.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Os||this._source.off("preclick",Fn))},getEvents:function(){var a=Li.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=et("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=et("div",a+"-content-wrapper",c);if(this._contentNode=et("div",a+"-content",p),Ps(c),Pi(this._contentNode),De(c,"contextmenu",Fn),this._tipContainer=et("div",a+"-tip-container",c),this._tip=et("div",a+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=et("a",a+"-close-button",c);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',De(x,"click",function(T){wt(T),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var x=a.offsetHeight,T=this.options.maxHeight,R="leaflet-popup-scrolled";T&&x>T?(c.height=T+"px",Ke(a,R)):yt(a,R),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();ze(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(ts(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,x=this._containerWidth,T=new J(this._containerLeft,-p-this._containerBottom);T._add(Jn(this._container));var R=a.layerPointToContainerPoint(T),z=_e(this.options.autoPanPadding),Q=_e(this.options.autoPanPaddingTopLeft||z),re=_e(this.options.autoPanPaddingBottomRight||z),me=a.getSize(),be=0,Ae=0;R.x+x+re.x>me.x&&(be=R.x+x-me.x+re.x),R.x-be-Q.x<0&&(be=R.x-Q.x),R.y+p+re.y>me.y&&(Ae=R.y+p-me.y+re.y),R.y-Ae-Q.y<0&&(Ae=R.y-Q.y),(be||Ae)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([be,Ae]))}},_getAnchor:function(){return _e(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gm=function(a,c){return new hl(a,c)};Qe.mergeOptions({closePopupOnClick:!0}),Qe.include({openPopup:function(a,c,p){return this._initOverlay(hl,a,c,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),_t.include({bindPopup:function(a,c){return this._popup=this._initOverlay(hl,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof At||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){wn(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof Os)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var rc=Li.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Li.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Li.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Li.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=et("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,p,x=this._map,T=this._container,R=x.latLngToContainerPoint(x.getCenter()),z=x.layerPointToContainerPoint(a),Q=this.options.direction,re=T.offsetWidth,me=T.offsetHeight,be=_e(this.options.offset),Ae=this._getAnchor();Q==="top"?(c=re/2,p=me):Q==="bottom"?(c=re/2,p=0):Q==="center"?(c=re/2,p=me/2):Q==="right"?(c=0,p=me/2):Q==="left"?(c=re,p=me/2):z.x<R.x?(Q="right",c=0,p=me/2):(Q="left",c=re+(be.x+Ae.x)*2,p=me/2),a=a.subtract(_e(c,p,!0)).add(be).add(Ae),yt(T,"leaflet-tooltip-right"),yt(T,"leaflet-tooltip-left"),yt(T,"leaflet-tooltip-top"),yt(T,"leaflet-tooltip-bottom"),Ke(T,"leaflet-tooltip-"+Q),ze(T,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Ct(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return _e(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Zm=function(a,c){return new rc(a,c)};Qe.include({openTooltip:function(a,c,p){return this._initOverlay(rc,a,c,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),_t.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(rc,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof At||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(De(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),De(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,p,x;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),x=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(c)}});var mu=os.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(an(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var x=_e(p.bgPos);c.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function ud(a){return new mu(a)}os.Default=Ma;var zr=_t.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){D(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),gt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ns(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(nr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof J?a:new J(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,p=-a(-1/0,1/0),x=0,T=c.length,R;x<T;x++)R=c[x].style.zIndex,c[x]!==this._container&&R&&(p=a(p,+R));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){Ct(this._container,this.options.opacity);var a=+new Date,c=!1,p=!1;for(var x in this._tiles){var T=this._tiles[x];if(!(!T.current||!T.loaded)){var R=Math.min(1,(a-T.loaded)/200);Ct(T.el,R),R<1?c=!0:(T.active?p=!0:this._onOpaqueTile(T),T.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(V(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this))}},_onOpaqueTile:I,_initContainer:function(){this._container||(this._container=et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=c-Math.abs(a-p),this._onUpdateLevel(p)):(gt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[a],T=this._map;return x||(x=this._levels[a]={},x.el=et("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=c,x.origin=T.project(T.unproject(T.getPixelOrigin()),a).round(),x.zoom=a,this._setZoomTransform(x,T.getCenter(),T.getZoom()),I(x.el.offsetWidth),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:I,_onRemoveLevel:I,_onCreateLevel:I,_pruneTiles:function(){if(this._map){var a,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var x=c.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)gt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,p,x){var T=Math.floor(a/2),R=Math.floor(c/2),z=p-1,Q=new J(+T,+R);Q.z=+z;var re=this._tileCoordsToKey(Q),me=this._tiles[re];return me&&me.active?(me.retain=!0,!0):(me&&me.loaded&&(me.retain=!0),z>x?this._retainParent(T,R,z,x):!1)},_retainChildren:function(a,c,p,x){for(var T=2*a;T<2*a+2;T++)for(var R=2*c;R<2*c+2;R++){var z=new J(T,R);z.z=p+1;var Q=this._tileCoordsToKey(z),re=this._tiles[Q];if(re&&re.active){re.retain=!0;continue}else re&&re.loaded&&(re.retain=!0);p+1<x&&this._retainChildren(T,R,p+1,x)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,p,x){var T=Math.round(c);this.options.maxZoom!==void 0&&T>this.options.maxZoom||this.options.minZoom!==void 0&&T<this.options.minZoom?T=void 0:T=this._clampZoom(T);var R=this.options.updateWhenZooming&&T!==this._tileZoom;(!x||R)&&(this._tileZoom=T,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),T!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,c)},_setZoomTransform:function(a,c,p){var x=this._map.getZoomScale(p,a.zoom),T=a.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(c,p)).round();Ce.any3d?Cn(a.el,T,x):ze(a.el,T)},_resetGrid:function(){var a=this._map,c=a.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,T=this._map.getPixelWorldBounds(this._tileZoom);T&&(this._globalTileRange=this._pxBoundsToTileRange(T)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],x).x/p.x),Math.ceil(a.project([0,c.wrapLng[1]],x).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],x).y/p.x),Math.ceil(a.project([c.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),x=c.getZoomScale(p,this._tileZoom),T=c.project(a,this._tileZoom).floor(),R=c.getSize().divideBy(x*2);return new je(T.subtract(R),T.add(R))},_update:function(a){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var x=this._getTiledPixelBounds(a),T=this._pxBoundsToTileRange(x),R=T.getCenter(),z=[],Q=this.options.keepBuffer,re=new je(T.getBottomLeft().subtract([Q,-Q]),T.getTopRight().add([Q,-Q]));if(!(isFinite(T.min.x)&&isFinite(T.min.y)&&isFinite(T.max.x)&&isFinite(T.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var me in this._tiles){var be=this._tiles[me].coords;(be.z!==this._tileZoom||!re.contains(new J(be.x,be.y)))&&(this._tiles[me].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Ae=T.min.y;Ae<=T.max.y;Ae++)for(var Re=T.min.x;Re<=T.max.x;Re++){var Ze=new J(Re,Ae);if(Ze.z=this._tileZoom,!!this._isValidTile(Ze)){var Pt=this._tiles[this._tileCoordsToKey(Ze)];Pt?Pt.current=!0:z.push(Ze)}}if(z.sort(function(En,fi){return En.distanceTo(R)-fi.distanceTo(R)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bt=document.createDocumentFragment();for(Re=0;Re<z.length;Re++)this._addTile(z[Re],Bt);this._level.el.appendChild(Bt)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!c.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(a);return $e(this.options.bounds).overlaps(x)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,p=this.getTileSize(),x=a.scaleBy(p),T=x.add(p),R=c.unproject(x,a.z),z=c.unproject(T,a.z);return[R,z]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),p=new Se(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),p=new J(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(a){var c=this._tiles[a];c&&(gt(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Ke(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=I,a.onmousemove=I,Ce.ielt9&&this.options.opacity<1&&Ct(a,this.options.opacity)},_addTile:function(a,c){var p=this._getTilePos(a),x=this._tileCoordsToKey(a),T=this.createTile(this._wrapCoords(a),f(this._tileReady,this,a));this._initTile(T),this.createTile.length<2&&Z(f(this._tileReady,this,a,null,T)),ze(T,p),this._tiles[x]={el:T,coords:a,current:!0},c.appendChild(T),this.fire("tileloadstart",{tile:T,coords:a})},_tileReady:function(a,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:a});var x=this._tileCoordsToKey(a);p=this._tiles[x],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Ct(p.el,0),V(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(Ke(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?Z(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new J(this._wrapX?E(a.x,this._wrapX):a.x,this._wrapY?E(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new je(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Di(a){return new zr(a)}var Br=zr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=D(this,c),c.detectRetina&&Ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var p=document.createElement("img");return De(p,"load",f(this._tileOnLoad,this,c,p)),De(p,"error",f(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var c={r:Ce.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=p),c["-y"]=p}return oe(this._url,o(c,this.options))},_tileOnLoad:function(a,c){Ce.ielt9?setTimeout(f(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,p){var x=this.options.errorTileUrl;x&&c.getAttribute("src")!==x&&(c.src=x),a(p,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,x=this.options.zoomOffset;return p&&(a=c-a),a+x},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=I,c.onerror=I,!c.complete)){c.src=xe;var p=this._tiles[a].coords;gt(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",xe),zr.prototype._removeTile.call(this,a)},_tileReady:function(a,c,p){if(!(!this._map||p&&p.getAttribute("src")===xe))return zr.prototype._tileReady.call(this,a,c,p)}});function ii(a,c){return new Br(a,c)}var si=Br.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var p=o({},this.defaultWmsParams);for(var x in c)x in this.options||(p[x]=c[x]);c=D(this,c);var T=c.detectRetina&&Ce.retina?2:1,R=this.getTileSize();p.width=R.x*T,p.height=R.y*T,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Br.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),p=this._crs,x=Ie(p.project(c[0]),p.project(c[1])),T=x.min,R=x.max,z=(this._wmsVersion>=1.3&&this._crs===$t?[T.y,T.x,R.y,R.x]:[T.x,T.y,R.x,R.y]).join(","),Q=Br.prototype.getTileUrl.call(this,a);return Q+q(this.wmsParams,Q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(a,c){return o(this.wmsParams,a),c||this.redraw(),this}});function Va(a,c){return new si(a,c)}Br.WMS=si,ii.wms=Va;var Oi=_t.extend({options:{padding:.1},initialize:function(a){D(this,a),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ke(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var p=this._map.getZoomScale(c,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),T=this._map.project(this._center,c),R=x.multiplyBy(-p).add(T).subtract(this._map._getNewPixelOrigin(a,c));Ce.any3d?Cn(this._container,R,p):ze(this._container,R)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new je(p,p.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),dl=Oi.extend({options:{tolerance:0},getEvents:function(){var a=Oi.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Oi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");De(a,"mousemove",this._onMouseMove,this),De(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),De(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,gt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,c=this._container,p=a.getSize(),x=Ce.retina?2:1;ze(c,a.min),c.width=x*p.x,c.height=x*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Oi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[y(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,p=c.next,x=c.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete a._order,delete this._layers[y(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),p=[],x,T;for(T=0;T<c.length;T++){if(x=Number(c[T]),isNaN(x))return;p.push(x)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||Z(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new je,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)a=x.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var p,x,T,R,z=a._parts,Q=z.length,re=this._ctx;if(Q){for(re.beginPath(),p=0;p<Q;p++){for(x=0,T=z[p].length;x<T;x++)R=z[p][x],re[x?"lineTo":"moveTo"](R.x,R.y);c&&re.closePath()}this._fillStroke(re,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,p=this._ctx,x=Math.max(Math.round(a._radius),1),T=(Math.max(Math.round(a._radiusY),1)||x)/x;T!==1&&(p.save(),p.scale(1,T)),p.beginPath(),p.arc(c.x,c.y/T,x,0,Math.PI*2,!1),T!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,c){var p=c.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(x?[x]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(yt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var p,x,T=this._drawFirst;T;T=T.next)p=T.layer,p.options.interactive&&p._containsPoint(c)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(a),x&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([x],a,"mouseover"),this._hoveredLayer=x)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,p){this._map._fireDOMEvent(c,p||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var p=c.next,x=c.prev;if(p)p.prev=x;else return;x?x.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var p=c.next,x=c.prev;if(x)x.next=p;else return;p?p.prev=x:x&&(this._drawLast=x),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function fl(a){return Ce.canvas?new dl(a):null}var Fr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Ua={_initContainer:function(){this._container=et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Oi.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Fr("shape");Ke(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Fr("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;gt(c),a.removeInteractiveTarget(c),delete this._layers[y(a)]},_updateStyle:function(a){var c=a._stroke,p=a._fill,x=a.options,T=a._container;T.stroked=!!x.stroke,T.filled=!!x.fill,x.stroke?(c||(c=a._stroke=Fr("stroke")),T.appendChild(c),c.weight=x.weight+"px",c.color=x.color,c.opacity=x.opacity,x.dashArray?c.dashStyle=ne(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=x.lineCap.replace("butt","flat"),c.joinstyle=x.lineJoin):c&&(T.removeChild(c),a._stroke=null),x.fill?(p||(p=a._fill=Fr("fill")),T.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(T.removeChild(p),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),p=Math.round(a._radius),x=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+x+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){ns(a._container)},_bringToBack:function(a){nr(a._container)}},ml=Ce.vml?Fr:pa,lr=Oi.extend({_initContainer:function(){this._container=ml("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ml("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Oi.prototype._update.call(this);var a=this._bounds,c=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),ze(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=ml("path");a.options.className&&Ke(c,a.options.className),a.options.interactive&&Ke(c,"leaflet-interactive"),this._updateStyle(a),this._layers[y(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){gt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[y(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,p=a.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,qo(a._parts,c))},_updateCircle:function(a){var c=a._point,p=Math.max(Math.round(a._radius),1),x=Math.max(Math.round(a._radiusY),1)||p,T="a"+p+","+x+" 0 1,0 ",R=a._empty()?"M0 0":"M"+(c.x-p)+","+c.y+T+p*2+",0 "+T+-p*2+",0 ";this._setPath(a,R)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){ns(a._path)},_bringToBack:function(a){nr(a._path)}});Ce.vml&&lr.include(Ua);function Hr(a){return Ce.svg||Ce.vml?new lr(a):null}Qe.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&fl(a)||Hr(a)}});var hd=La.extend({initialize:function(a,c){La.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=$e(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ri(a,c){return new hd(a,c)}lr.create=ml,lr.pointsToPath=qo,ni.geometryToLayer=ll,ni.coordsToLatLng=tc,ni.coordsToLatLngs=cl,ni.latLngToCoords=ul,ni.latLngsToCoords=nc,ni.getFeature=ji,ni.asFeature=Da,Qe.mergeOptions({boxZoom:!0});var ac=Hn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),bn(),jr(),this._startPoint=this._map.mouseEventToContainerPoint(a),De(document,{contextmenu:wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=et("div","leaflet-zoom-box",this._container),Ke(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new je(this._point,this._startPoint),p=c.getSize();ze(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(gt(this._box),yt(this._container,"leaflet-crosshair")),Ri(),tl(),ut(document,{contextmenu:wn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var c=new Se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qe.addInitHook("addHandler","boxZoom",ac),Qe.mergeOptions({doubleClickZoom:!0});var cs=Hn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,p=c.getZoom(),x=c.options.zoomDelta,T=a.originalEvent.shiftKey?p-x:p+x;c.options.doubleClickZoom==="center"?c.setZoom(T):c.setZoomAround(a.containerPoint,T)}});Qe.addInitHook("addHandler","doubleClickZoom",cs),Qe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var pu=Hn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Mi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Ke(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=$e(this._map.options.maxBounds);this._offsetLimit=Ie(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,T=(x-c+p)%a+c-p,R=(x+c+p)%a-c-p,z=Math.abs(T+p)<Math.abs(R+p)?T:R;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(a){var c=this._map,p=c.options,x=!p.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),x)c.fire("moveend");else{this._prunePositions(+new Date);var T=this._lastPos.subtract(this._positions[0]),R=(this._lastTime-this._times[0])/1e3,z=p.easeLinearity,Q=T.multiplyBy(z/R),re=Q.distanceTo([0,0]),me=Math.min(p.inertiaMaxSpeed,re),be=Q.multiplyBy(me/re),Ae=me/(p.inertiaDeceleration*z),Re=be.multiplyBy(-Ae/2).round();!Re.x&&!Re.y?c.fire("moveend"):(Re=c._limitOffset(Re,c.options.maxBounds),Z(function(){c.panBy(Re,{duration:Ae,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});Qe.addInitHook("addHandler","dragging",pu),Qe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var pl=Hn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),De(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,p=a.scrollTop||c.scrollTop,x=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},p=this.keyCodes,x,T;for(x=0,T=p.left.length;x<T;x++)c[p.left[x]]=[-1*a,0];for(x=0,T=p.right.length;x<T;x++)c[p.right[x]]=[a,0];for(x=0,T=p.down.length;x<T;x++)c[p.down[x]]=[0,a];for(x=0,T=p.up.length;x<T;x++)c[p.up[x]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},p=this.keyCodes,x,T;for(x=0,T=p.zoomIn.length;x<T;x++)c[p.zoomIn[x]]=a;for(x=0,T=p.zoomOut.length;x<T;x++)c[p.zoomOut[x]]=-a},_addHooks:function(){De(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,p=this._map,x;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[c],a.shiftKey&&(x=_e(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(_e(x),p.options.maxBounds)),p.options.worldCopyJump){var T=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(T)}else p.panBy(x)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;wn(a)}}});Qe.addInitHook("addHandler","keyboard",pl),Qe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var cr=Hn.extend({addHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=Lr(a),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),x),wn(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var x=this._delta/(this._map.options.wheelPxPerZoomLevel*4),T=4*Math.log(2/(1+Math.exp(-Math.abs(x))))/Math.LN2,R=p?Math.ceil(T/p)*p:T,z=a._limitZoom(c+(this._delta>0?R:-R))-c;this._delta=0,this._startTime=null,z&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+z):a.setZoomAround(this._lastMousePos,c+z))}});Qe.addInitHook("addHandler","scrollWheelZoom",cr);var gu=600;Qe.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var oc=Hn.extend({addHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new J(c.clientX,c.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(De(document,"touchend",wt),De(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),gu),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){ut(document,"touchend",wt),ut(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new J(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});Qe.addInitHook("addHandler","tapHold",oc),Qe.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var qr=Hn.extend({addHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(a.touches[0]),x=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),wt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(a.touches[0]),x=c.mouseEventToContainerPoint(a.touches[1]),T=p.distanceTo(x)/this._startDist;if(this._zoom=c.getScaleZoom(T,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&T<1||this._zoom>c.getMaxZoom()&&T>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,T===1)return}else{var R=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(T===1&&R.x===0&&R.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(R),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var z=f(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Z(z,this,!0),wt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qe.addInitHook("addHandler","touchZoom",qr),Qe.BoxZoom=ac,Qe.DoubleClickZoom=cs,Qe.Drag=pu,Qe.Keyboard=pl,Qe.ScrollWheelZoom=cr,Qe.TapHold=oc,Qe.TouchZoom=qr,t.Bounds=je,t.Browser=Ce,t.CRS=Xt,t.Canvas=dl,t.Circle=du,t.CircleMarker=ol,t.Class=ve,t.Control=mn,t.DivIcon=mu,t.DivOverlay=Li,t.DomEvent=Yl,t.DomUtil=nl,t.Draggable=Mi,t.Evented=ce,t.FeatureGroup=At,t.GeoJSON=ni,t.GridLayer=zr,t.Handler=Hn,t.Icon=os,t.ImageOverlay=ls,t.LatLng=qe,t.LatLngBounds=Se,t.Layer=_t,t.LayerGroup=kt,t.LineUtil=P,t.Map=Qe,t.Marker=ja,t.Mixin=Or,t.Path=Os,t.Point=J,t.PolyUtil=Ca,t.Polygon=La,t.Polyline=Vs,t.Popup=hl,t.PosAnimation=Dr,t.Projection=ye,t.Rectangle=hd,t.Renderer=Oi,t.SVG=lr,t.SVGOverlay=or,t.TileLayer=Br,t.Tooltip=rc,t.Transformation=wi,t.Util=M,t.VideoOverlay=sc,t.bind=f,t.bounds=Ie,t.canvas=fl,t.circle=Hm,t.circleMarker=ad,t.control=Tn,t.divIcon=ud,t.extend=o,t.featureGroup=as,t.geoJSON=ic,t.geoJson=od,t.gridLayer=Di,t.icon=ec,t.imageOverlay=Oa,t.latLng=Ge,t.latLngBounds=$e,t.layerGroup=Ds,t.map=ss,t.marker=hu,t.point=_e,t.polygon=ti,t.polyline=qm,t.popup=Gm,t.rectangle=ri,t.setOptions=D,t.stamp=y,t.svg=Hr,t.svgOverlay=cd,t.tileLayer=ii,t.tooltip=Zm,t.transformation=Ti,t.version=s,t.videoOverlay=ld;var za=window.L;t.noConflict=function(){return window.L=za,this},window.L=t})}(ch,ch.exports)),ch.exports}var rd=BV();const Fm=FT(rd);function vy(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function yy(n,e){return e==null?function(s,o){const u=U.useRef(void 0);return u.current||(u.current=n(s,o)),u}:function(s,o){const u=U.useRef(void 0);u.current||(u.current=n(s,o));const f=U.useRef(s),{instance:_}=u.current;return U.useEffect(function(){f.current!==s&&(e(_,s,f.current),f.current=s)},[_,s,e]),u}}function FV(n,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function lN(n){return function(t){const s=gy(),o=n(_y(t,s),s);return aN(s.map,t.attribution),oN(o.current,t.eventHandlers),FV(o.current,s),o}}function HV(n,e){const t=yy(n,e),s=lN(t);return DV(s)}function qV(n,e){const t=yy(n),s=UV(t,e);return OV(s)}function GV(n,e){const t=yy(n,e),s=lN(t);return VV(s)}function ZV(n,e,t){const{opacity:s,zIndex:o}=e;s!=null&&s!==t.opacity&&n.setOpacity(s),o!=null&&o!==t.zIndex&&n.setZIndex(o)}function $V(){return gy().map}function KV({bounds:n,boundsOptions:e,center:t,children:s,className:o,id:u,placeholder:f,style:_,whenReady:y,zoom:b,...E},I){const[N]=U.useState({className:o,id:u,style:_}),[F,H]=U.useState(null),D=U.useRef(void 0);U.useImperativeHandle(I,()=>F?.map??null,[F]);const q=U.useCallback(oe=>{if(oe!==null&&!D.current){const ne=new rd.Map(oe,E);D.current=ne,t!=null&&b!=null?ne.setView(t,b):n!=null&&ne.fitBounds(n,e),y!=null&&ne.whenReady(y),H(jV(ne))}},[]);U.useEffect(()=>()=>{F?.map.remove()},[F]);const Y=F?Bf.createElement(py,{value:F},s):f??null;return Bf.createElement("div",{...N,ref:q},Y)}const YV=U.forwardRef(KV),WV=HV(function({position:e,...t},s){const o=new rd.Marker(e,t);return vy(o,LV(s,{overlayContainer:o}))},function(e,t,s){t.position!==s.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==s.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==s.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==s.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==s.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),QV=qV(function(e,t){const s=new rd.Popup(e,t.overlayContainer);return vy(s,t)},function(e,t,{position:s},o){U.useEffect(function(){const{instance:f}=e;function _(b){b.popup===f&&(f.update(),o(!0))}function y(b){b.popup===f&&o(!1)}return t.map.on({popupopen:_,popupclose:y}),t.overlayContainer==null?(s!=null&&f.setLatLng(s),f.openOn(t.map)):t.overlayContainer.bindPopup(f),function(){t.map.off({popupopen:_,popupclose:y}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(f)}},[e,t,o,s])}),XV=GV(function({url:e,...t},s){const o=new rd.TileLayer(e,_y(t,s));return vy(o,s)},function(e,t,s){ZV(e,t,s);const{url:o}=t;o!=null&&o!==s.url&&e.setUrl(o)}),JV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",eU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",tU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";delete Fm.Icon.Default.prototype._getIconUrl;Fm.Icon.Default.mergeOptions({iconUrl:JV,iconRetinaUrl:eU,shadowUrl:tU});const nU=({plans:n})=>{const e=$V();return U.useEffect(()=>{if(n.length===0)return;const t=n.filter(s=>s.latitude&&s.longitude);if(t.length!==0)if(t.length===1){const s=t[0];e.setView([s.latitude,s.longitude],15)}else{const s=Fm.latLngBounds(t.map(o=>[o.latitude,o.longitude]));e.fitBounds(s,{padding:[20,20]})}},[n,e]),null},iU=({plans:n,center:e=[37.5665,126.978],zoom:t=10,className:s,height:o="400px",onPlanClick:u})=>{const f=U.useRef(null),_=n.filter(E=>E.latitude&&E.longitude),y=E=>{switch(E){case"attraction":return"#f59e0b";case"restaurant":return"#10b981";case"hotel":return"#8b5cf6";case"transport":return"#0ea5e9";default:return"#6b7280"}},b=E=>{const I=y(E);return Fm.divIcon({className:"custom-marker",html:`
        <div style="
          width: 24px;
          height: 24px;
          border-radius: 50%;
          background: ${I};
          border: 2px solid white;
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          justify-content: center;
        ">
          <div style="
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
          "></div>
        </div>
      `,iconSize:[24,24],iconAnchor:[12,12]})};return d.jsxs("div",{className:Zs("relative",s),style:{height:o},children:[d.jsxs(YV,{ref:f,center:e,zoom:t,className:"w-full h-full rounded-xl overflow-hidden",zoomControl:!0,scrollWheelZoom:!0,children:[d.jsx(XV,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),d.jsx(nU,{plans:_}),_.map((E,I)=>d.jsx(WV,{position:[E.latitude,E.longitude],icon:b(E.type),eventHandlers:{click:()=>u?.(E)},children:d.jsx(QV,{children:d.jsxs("div",{className:"p-2 min-w-[200px]",children:[d.jsx("h3",{className:"font-semibold text-lg mb-2",children:E.place_name}),d.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[E.start_time,E.end_time&&` ~ ${E.end_time}`]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y(E.type)}}),d.jsx("span",{className:"text-sm capitalize",children:E.type})]})]})})},I))]}),_.length===0&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded-xl",children:d.jsxs("div",{className:"text-center text-white/80",children:[d.jsx("p",{className:"text-lg font-semibold mb-2",children:"위치 정보가 없습니다"}),d.jsx("p",{className:"text-sm",children:"일정에 위치를 추가해보세요"})]})})]})},LT=()=>{const{id:n}=dm(),{user:e}=Ys(),t=bs(),[s,o]=U.useState([]),[u,f]=U.useState(null),[_,y]=U.useState([]),[b,E]=U.useState([]),[I,N]=U.useState(!0),[F,H]=U.useState(null),[D,q]=U.useState("all"),[Y,oe]=U.useState(!1),[ne,pe]=U.useState(null),[xe,ge]=U.useState(n||null),[G,k]=U.useState(!1),[j,O]=U.useState({planId:"",latitude:"",longitude:""});if(U.useEffect(()=>{if(!e||n)return;const J=Bc(aa(rn,"trips"),Oh("user_id","==",e.uid),jc("created_at","desc")),Ee=yo(J,_e=>{const je=_e.docs.map(Ie=>({id:Ie.id,...Ie.data()}));o(je),N(!1)});return()=>Ee()},[e,n]),U.useEffect(()=>{if(!e)return;const J=xe||n;if(!J){const Ie=Bc(aa(rn,"plans"),jc("day","asc"),jc("start_time","asc")),Se=yo(Ie,$e=>{const qe=$e.docs.map(Gt=>({id:Gt.id,...Gt.data()})),Ge=s.map(Gt=>Gt.id),Xt=qe.filter(Gt=>Ge.includes(Gt.trip_id));y(Xt)});return()=>Se()}const Ee=yo(xi(rn,"trips",J),Ie=>{if(Ie.exists()){const Se={id:Ie.id,...Ie.data()};if(Se.user_id!==e.uid){H("접근 권한이 없습니다."),N(!1);return}f(Se)}else H("여행을 찾을 수 없습니다.");N(!1)},Ie=>{console.error("Trip 로딩 실패:",Ie),H("여행 데이터를 불러오는데 실패했습니다."),N(!1)}),_e=Bc(aa(rn,"plans"),Oh("trip_id","==",J),jc("day","asc"),jc("start_time","asc")),je=yo(_e,Ie=>{const Se=Ie.docs.map($e=>({id:$e.id,...$e.data()}));y(Se)},Ie=>{console.error("Plans 로딩 실패:",Ie)});return()=>{Ee(),je()}},[xe,n,e,s]),U.useEffect(()=>{E(D==="all"?_:_.filter(J=>J.day===D))},[_,D]),I)return d.jsx("div",{className:"min-h-screen flex items-center justify-center",children:d.jsx("div",{className:"text-white text-lg",children:"지도를 불러오는 중..."})});if(F||!u&&n)return d.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:d.jsxs(Me,{variant:"travel",className:"text-center",children:[d.jsx("p",{className:"text-white mb-4",children:F||"여행을 찾을 수 없습니다."}),d.jsx(Oe,{onClick:()=>t("/"),children:"Back"})]})});const Z=()=>{if(!u)return 0;const J=new Date(u.start_date),Ee=new Date(u.end_date),_e=Math.abs(Ee.getTime()-J.getTime());return Math.ceil(_e/(1e3*60*60*24))+1},V=u?Array.from({length:Z()},(J,Ee)=>Ee+1):[],M=b.filter(J=>J.latitude&&J.longitude),ve=J=>{pe(J),oe(!0)},ke=J=>{t(`/trips/${n}/plans/${J.id}`)},X=J=>{O({planId:J.id,latitude:J.latitude?.toString()||"",longitude:J.longitude?.toString()||""}),k(!0)},ce=async()=>{if(!j.planId||!j.latitude||!j.longitude)return;const J=parseFloat(j.latitude),Ee=parseFloat(j.longitude);if(isNaN(J)||isNaN(Ee)||J<-90||J>90||Ee<-180||Ee>180){alert("올바른 좌표를 입력해주세요. (위도: -90~90, 경도: -180~180)");return}try{await om(xi(rn,"plans",j.planId),{latitude:J,longitude:Ee,updated_at:new Date}),k(!1),O({planId:"",latitude:"",longitude:""})}catch(_e){console.error("좌표 저장 실패:",_e),alert("좌표 저장에 실패했습니다.")}};return d.jsxs("div",{className:"h-screen relative overflow-hidden",children:[d.jsx(Sr,{}),d.jsxs("div",{className:"fixed top-16 left-0 right-0 z-20 bg-black/20 backdrop-blur-lg",children:[d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[(n||xe)&&d.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>{n?t(-1):xe&&t(`/trips/${xe}`)},className:"!p-2",children:d.jsx(zh,{className:"w-5 h-5"})}),d.jsx("h1",{className:"text-xl font-bold text-white text-glow",children:u?`${u.title} 지도`:"전체 여행 지도"})]}),d.jsx(Oe,{variant:"ghost",size:"sm",onClick:()=>oe(!Y),className:"!p-2 ml-4",children:d.jsx(UT,{className:"w-5 h-5"})})]})}),!n&&s.length>0&&d.jsx("div",{className:"px-4 pb-4",children:d.jsxs(Me,{variant:"light",className:"p-3",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(Wn,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"여행 선택"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsx("button",{onClick:()=>{ge(null),q("all")},className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${xe?"bg-white/10 text-white/70 hover:bg-white/20":"bg-primary-500 text-white"}`,children:"전체"}),s.map(J=>d.jsx("button",{onClick:()=>{ge(J.id),f(J),q(1)},className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${xe===J.id?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:J.title},J.id))]}),xe&&u&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[d.jsx(gs,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"Day 필터"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsxs("button",{onClick:()=>q("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${D==="all"?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["전체",d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:M.length})]}),V.map(J=>{const Ee=_.filter(_e=>_e.day===J&&_e.latitude&&_e.longitude);return d.jsxs("button",{onClick:()=>q(J),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${D===J?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["Day ",J,Ee.length>0&&d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:Ee.length})]},J)})]})]})]})})]}),d.jsx("div",{className:`fixed inset-0 ${!n&&s.length>0&&xe?"pt-96":!n&&s.length>0?"pt-72":"pt-32"} px-4`,children:d.jsx(iU,{plans:b,onPlanClick:ve,className:"h-full w-full",height:"100%"})}),n&&u&&d.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-10 px-4",children:d.jsxs(Me,{variant:"light",className:"p-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[d.jsx(gs,{className:"w-4 h-4 text-white/60"}),d.jsx("span",{className:"text-white/60 text-sm",children:"Day 필터"})]}),d.jsxs("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[d.jsxs("button",{onClick:()=>q("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${D==="all"?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["전체",d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:M.length})]}),V.map(J=>{const Ee=_.filter(_e=>_e.day===J&&_e.latitude&&_e.longitude);return d.jsxs("button",{onClick:()=>q(J),className:`flex-shrink-0 px-3 py-2 rounded-lg text-sm font-medium transition-all ${D===J?"bg-primary-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:["Day ",J,Ee.length>0&&d.jsx("span",{className:"ml-1 text-xs bg-white/20 rounded-full px-1",children:Ee.length})]},J)})]})]})}),Y&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 z-30",onClick:()=>oe(!1)}),d.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-black/50 backdrop-blur-lg z-40 overflow-y-auto",children:d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"일정 목록"}),d.jsx("button",{onClick:()=>oe(!1),className:"text-white/60 hover:text-white",children:"✕"})]}),ne&&d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"선택된 일정"}),d.jsx(z_,{plan:ne}),d.jsxs("div",{className:"mt-3 space-y-2",children:[d.jsxs(Oe,{variant:"travel",size:"sm",onClick:()=>ke(ne),className:"w-full",children:[d.jsx(kI,{className:"w-4 h-4 mr-2"}),"일정 편집"]}),(!ne.latitude||!ne.longitude)&&d.jsxs(Oe,{variant:"ghost",size:"sm",onClick:()=>X(ne),className:"w-full",children:[d.jsx(uh,{className:"w-4 h-4 mr-2"}),"위치 추가"]})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:D==="all"?"전체 일정":`Day ${D} 일정`}),b.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Wn,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60",children:"일정이 없습니다"})]}):d.jsx("div",{className:"space-y-3",children:b.map(J=>d.jsxs("div",{className:"relative",children:[d.jsx(z_,{plan:J,onClick:()=>pe(J)}),(!J.latitude||!J.longitude)&&d.jsx("div",{className:"absolute top-2 right-2",children:d.jsx("button",{onClick:()=>X(J),className:"w-6 h-6 bg-red-500/80 rounded-full flex items-center justify-center text-white text-xs",title:"위치 정보 없음",children:"!"})})]},J.id))})]})]})})]}),G&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black/50 z-50",onClick:()=>k(!1)}),d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:d.jsxs(Me,{variant:"travel",className:"w-full max-w-md",children:[d.jsxs("h3",{className:"text-lg font-semibold text-white mb-4",children:[d.jsx(uh,{className:"w-5 h-5 inline mr-2"}),"좌표 입력"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"위도 (Latitude) *"}),d.jsx("input",{type:"text",value:j.latitude,onChange:J=>O({...j,latitude:J.target.value}),placeholder:"예: 35.710063",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"경도 (Longitude) *"}),d.jsx("input",{type:"text",value:j.longitude,onChange:J=>O({...j,longitude:J.target.value}),placeholder:"예: 139.810700",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-primary-300 focus:ring-1 focus:ring-primary-300"})]}),d.jsx("div",{className:"bg-travel-blue/20 border border-travel-blue/30 rounded-xl p-3",children:d.jsxs("p",{className:"text-white/80 text-sm",children:["💡 ",d.jsx("strong",{children:"좌표 찾는 방법:"}),d.jsx("br",{}),"1. Google Maps에서 장소 검색",d.jsx("br",{}),"2. 장소를 우클릭 → 좌표 복사",d.jsx("br",{}),"3. 위도, 경도 순서로 입력"]})}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsx(Oe,{variant:"travel",onClick:ce,className:"flex-1",children:"저장"}),d.jsx(Oe,{variant:"ghost",onClick:()=>k(!1),className:"flex-1",children:"취소"})]})]})]})})]}),M.length===0&&d.jsx("div",{className:"absolute top-1/2 left-4 right-4 z-10 transform -translate-y-1/2 px-4",children:d.jsxs(Me,{variant:"light",className:"text-center",children:[d.jsx(uh,{className:"w-12 h-12 text-white/40 mx-auto mb-4"}),d.jsx("p",{className:"text-white/60 mb-2",children:"지도에 표시할 일정이 없습니다"}),d.jsx("p",{className:"text-white/50 text-sm",children:"일정에 위치 정보를 추가해보세요"})]})})]})};function sU(){const[n,e]=U.useState(""),[t,s]=U.useState(""),[o,u]=U.useState(!1),[f,_]=U.useState(""),[y,b]=U.useState(!1),[E,I]=U.useState(!1),N=bs(),{signInWithEmailAndPassword:F,signInWithGoogle:H}=Ys(),D=async Y=>{Y.preventDefault(),_(""),b(!0);try{if(!n||!t){_("이메일과 비밀번호를 입력해주세요.");return}await F(n,t),N("/")}catch(oe){_(oe.message||"로그인에 실패했습니다.")}finally{b(!1)}},q=async()=>{_(""),I(!0);try{await H(),N("/")}catch(Y){_(Y.message||"Google 로그인에 실패했습니다.")}finally{I(!1)}};return d.jsxs("main",{className:"min-h-screen flex items-center justify-center p-4 relative","aria-label":"로그인 페이지",children:[d.jsx(Sr,{}),d.jsx("div",{className:"w-full max-w-md sm:max-w-lg md:max-w-xl mx-auto px-4 sm:px-0 relative z-10",children:d.jsxs(Me,{variant:"strong",className:"p-6 sm:p-8 animate-fade-in",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"text-5xl mb-4 animate-bounce-gentle",children:"🌊"}),d.jsx("h1",{className:"text-3xl font-bold text-white mb-2 text-glow",children:"Moonwave Travel"}),d.jsx("p",{className:"text-white/80 text-lg",children:"여행의 모든 순간을 담다"})]}),f&&d.jsx(Me,{variant:"light",className:"p-4 mb-6 border-red-500/50 bg-red-500/10",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"text-red-400",children:"⚠️"}),d.jsx("p",{className:"text-sm text-white",children:f})]})}),d.jsx(Oe,{type:"button",variant:"secondary",size:"lg",className:"w-full mb-4",onClick:q,disabled:E,children:d.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[d.jsx("div",{className:"w-5 h-5",children:d.jsxs("svg",{viewBox:"0 0 24 24",className:"w-5 h-5",children:[d.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),d.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),d.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),d.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),d.jsx("span",{children:E?"Google 로그인 중...":"Google로 로그인"})]})}),d.jsxs("div",{className:"my-6 relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-white/20"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"bg-transparent px-2 text-white",children:"또는"})})]}),d.jsxs("form",{onSubmit:D,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"이메일"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(q_,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:"email",value:n,onChange:Y=>e(Y.target.value),className:`
                    glass-card w-full pl-10 pr-4 py-3 rounded-lg 
                    text-base text-white placeholder-white/50 
                    focus:outline-none focus:ring-2 
                    focus:ring-primary-500/50 focus:border-transparent
                    transition-all
                  `,placeholder:"이메일을 입력하세요",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"비밀번호"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(Xg,{className:"h-5 w-5 text-white"})}),d.jsx("input",{type:o?"text":"password",value:t,onChange:Y=>s(Y.target.value),className:`
                    glass-card w-full pl-10 pr-12 py-3 rounded-lg 
                    text-base text-white placeholder-white/50 
                    focus:outline-none focus:ring-2 
                    focus:ring-primary-500/50 focus:border-transparent
                    transition-all
                  `,placeholder:"비밀번호를 입력하세요",required:!0}),d.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center hover:bg-white/20 transition-all duration-200 min-w-[44px] min-h-[44px]",onClick:()=>u(!o),disabled:y||E,"aria-label":o?"비밀번호 숨기기":"비밀번호 보기",children:o?d.jsx(PI,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"}):d.jsx(MI,{className:"h-5 w-5 text-white hover:text-white/60 transition-colors"})})]})]}),d.jsx(Oe,{type:"submit",variant:"primary",size:"lg",className:"w-full",disabled:y,children:d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(jI,{size:20}),d.jsx("span",{children:y?"로그인 중...":"로그인"})]})})]}),d.jsx("div",{className:"text-center mt-6",children:d.jsxs("p",{className:"text-sm text-white",children:["아직 계정이 없으신가요?"," ",d.jsx(sa,{to:"/signup",className:"text-white font-medium hover:underline",children:"회원가입"})]})})]})})]})}const rU=({isOpen:n=!0,onClose:e})=>{const{user:t,signOut:s}=Ys(),o=bs(),[u,f]=U.useState("profile"),[_,y]=U.useState({theme:"auto",language:"ko",notifications:!0,emailNotifications:!0});U.useEffect(()=>{const N=localStorage.getItem("moonwaveTravelPreferences");if(N)try{y(JSON.parse(N))}catch(F){console.error("Failed to parse preferences:",F)}},[]);const b=N=>{y(N),localStorage.setItem("moonwaveTravelPreferences",JSON.stringify(N))},E=async()=>{try{await s(),e&&e(),o("/login")}catch(N){console.error("Logout failed:",N),alert("로그아웃에 실패했습니다.")}};if(!n)return null;const I=[{id:"profile",label:"프로필",icon:Df},{id:"notifications",label:"알림",icon:LI},{id:"privacy",label:"개인정보",icon:zT}];return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:d.jsxs(Me,{variant:"strong",className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx(wh,{className:"w-8 h-8 text-travel-blue"}),d.jsx("h1",{className:"text-2xl font-bold text-white",children:"설정"})]}),e&&d.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:d.jsx(Ml,{className:"w-5 h-5 text-white"})})]}),d.jsxs("div",{className:"flex h-[600px]",children:[d.jsxs("div",{className:"w-64 bg-white/5 p-4",children:[d.jsx("nav",{className:"space-y-2",children:I.map(N=>d.jsxs("button",{onClick:()=>f(N.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all ${u===N.id?"bg-travel-blue text-white":"text-white/70 hover:bg-white/10"}`,children:[d.jsx(N.icon,{size:20}),d.jsx("span",{children:N.label})]},N.id))}),d.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:d.jsxs(Oe,{variant:"secondary",size:"sm",onClick:E,className:"w-full",children:[d.jsx(DI,{size:16,className:"mr-2"}),"로그아웃"]})})]}),d.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[u==="profile"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"프로필 정보"}),d.jsxs(Me,{variant:"light",className:"p-6",children:[d.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-travel-blue to-travel-purple flex items-center justify-center overflow-hidden",children:t?.photoURL?d.jsx("img",{src:t.photoURL,alt:"Profile",className:"w-full h-full object-cover"}):d.jsx(Df,{className:"w-8 h-8 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:t?.displayName||t?.email?.split("@")[0]||"사용자"}),d.jsx("p",{className:"text-white/60",children:t?.email})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"이메일"}),d.jsx("input",{type:"email",value:t?.email||"",disabled:!0,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"표시 이름"}),d.jsx("input",{type:"text",value:t?.displayName||"",disabled:!0,className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",placeholder:"설정된 이름이 없습니다"})]})]})]})]}),u==="notifications"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"알림 설정"}),d.jsx(Me,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium",children:"푸시 알림"}),d.jsx("p",{className:"text-white/60 text-sm",children:"여행 일정 및 중요 알림을 받습니다"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:_.notifications,onChange:N=>b({..._,notifications:N.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-travel-blue"})]})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium",children:"이메일 알림"}),d.jsx("p",{className:"text-white/60 text-sm",children:"중요한 업데이트를 이메일로 받습니다"})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:_.emailNotifications,onChange:N=>b({..._,emailNotifications:N.target.checked}),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-travel-blue"})]})]})]})})]}),u==="privacy"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"개인정보 보호"}),d.jsx(Me,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium mb-2",children:"데이터 보호"}),d.jsx("p",{className:"text-white/70 text-sm mb-4",children:"모든 개인정보는 안전하게 암호화되어 저장됩니다."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white font-medium mb-2",children:"계정 보안"}),d.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Firebase Authentication을 통해 안전하게 관리됩니다."})]}),d.jsx("div",{className:"pt-4 border-t border-white/10",children:d.jsx(Oe,{variant:"secondary",size:"sm",onClick:()=>alert("계정 삭제 기능은 관리자에게 문의해주세요."),children:"계정 삭제"})})]})})]})]})]})]})})},aU=()=>{const n=bs(),[e,t]=U.useState(!1);U.useEffect(()=>{const o=setTimeout(()=>{t(!0)},100);return()=>clearTimeout(o)},[]);const s=()=>{t(!1),n("/")};return d.jsx(rU,{isOpen:e,onClose:s})};function cN(){return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-black"}),d.jsx("div",{className:"fixed inset-0 bg-gradient-to-t from-black/90 via-transparent to-gray-900/60"}),d.jsx("div",{className:"fixed inset-0 opacity-20 pointer-events-none overflow-hidden",children:d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-blue-400/10 to-transparent animate-pulse",style:{transform:"rotate(-12deg) scale(1.2)"}})}),d.jsx("div",{className:"fixed inset-0 opacity-60 pointer-events-none overflow-hidden",children:Array.from({length:60}).map((n,e)=>{const t=Math.random()*2+1,s=["#ffffff","#fbbf24","#60a5fa","#a855f7"],o=s[e%s.length];return d.jsx("div",{className:"absolute rounded-full",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,backgroundColor:o,animation:`twinkle ${Math.random()*3+2}s ease-in-out infinite ${Math.random()*2}s`,boxShadow:`0 0 ${t*3}px ${o}`,filter:"blur(0.2px)"}},`small-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-70 pointer-events-none overflow-hidden",children:Array.from({length:12}).map((n,e)=>{const t=Math.random()*3+3,s=["#ffffff","#fbbf24","#60a5fa","#f59e0b"],o=s[e%s.length];return d.jsx("div",{className:"absolute rounded-full",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,backgroundColor:o,animation:`twinkle ${Math.random()*4+3}s ease-in-out infinite ${Math.random()*3}s`,boxShadow:`0 0 ${t*4}px ${o}`,filter:"blur(0.3px)"}},`big-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-80 pointer-events-none overflow-hidden",children:Array.from({length:6}).map((n,e)=>{const s=[{left:"0%",top:"20%"},{left:"5%",top:"60%"},{left:"10%",top:"80%"},{left:"15%",top:"40%"},{left:"0%",top:"90%"},{left:"20%",top:"10%"}][e];return d.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full",style:{left:s.left,top:s.top,animation:`shooting-star ${Math.random()*2+4}s linear infinite ${Math.random()*3}s`,boxShadow:"0 0 15px #ffffff, 0 0 30px #ffffff",filter:"blur(0.2px)"}},`shooting-star-${e}`)})}),d.jsx("div",{className:"fixed inset-0 opacity-40 pointer-events-none overflow-hidden",children:Array.from({length:30}).map((n,e)=>{const t=Math.random()*1.5+.5;return d.jsx("div",{className:"absolute rounded-full bg-gray-300",style:{width:`${t}px`,height:`${t}px`,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animation:`float ${Math.random()*6+8}s ease-in-out infinite ${Math.random()*4}s`,filter:"blur(0.3px)"}},`dust-${e}`)})}),d.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-transparent via-blue-900/3 to-purple-900/3"})]})}function oU(){const n=U.useMemo(()=>[{name:"Music Platform",url:"music.moonwave.kr",description:"Moonwave만의 감성음악 제작",icon:OI,color:"from-purple-500 to-pink-500"},{name:"Travel Service",url:"travel.moonwave.kr",description:"Moonwave과 함께 세계여행",icon:Vf,color:"from-blue-500 to-cyan-500"},{name:"Subscription Manager",url:"sub.moonwave.kr",description:"AI 서비스 중심의 구독 관리",icon:VI,color:"from-green-500 to-emerald-500"},{name:"Crypto Trading",url:"btc.moonwave.kr",description:"Moonwave와 함께하는 크립토 매매",icon:UI,color:"from-yellow-500 to-orange-500"},{name:"Music Album",url:"oh.moonwave.kr",description:"국가대표 오안나 헌정 앨범",icon:zI,color:"from-pink-500 to-rose-500"},{name:"Financial Strategy",url:"financial.moonwave.kr",description:"Moonwave와 함께하는 금융투자 전략",icon:BI,color:"from-emerald-500 to-teal-500"},{name:"Kids Platform",url:"lego.moonwave.kr",description:"아이들과 함께 Lego 블럭 재사용 조립놀이",icon:ow,color:"from-indigo-500 to-purple-500"}],[]),e=U.useMemo(()=>[{title:"자신만의 파동",description:"세상의 기준이 아닌, 각자의 고유함을 존중합니다",icon:Of,color:"from-red-500 to-pink-500"},{title:"명료한 전략",description:"복잡함 속에서 본질을 찾아 단순하게 만듭니다",icon:FI,color:"from-blue-500 to-cyan-500"},{title:"지속적인 혁신",description:"멈추지 않되, 자신의 속도로 진화합니다",icon:HI,color:"from-purple-500 to-indigo-500"},{title:"진정한 파트너십",description:"함께 파동을 만들고 흐름을 이어갑니다",icon:qI,color:"from-green-500 to-emerald-500"}],[]),t=U.useMemo(()=>[{category:"AI가 만드는 공명",items:[{name:"GPT-4, Claude, Gemini",description:"전략적 사고의 파트너"},{name:"SUNO AI",description:"텍스트를 음악의 파동으로"},{name:"Sora",description:"상상을 시각적 파동으로"}],icon:GI,color:"from-purple-500 to-pink-500"},{category:"흐름을 만드는 인프라",items:[{name:"Supabase, Firebase",description:"실시간으로 흐르는 데이터"},{name:"Vercel",description:"빠르고 안정적인 배포의 흐름"},{name:"Make, n8n",description:"끊김 없는 업무 프로세스"}],icon:lw,color:"from-blue-500 to-cyan-500"},{category:"전문 AI 서비스",items:[{name:"Zenspike",description:"데이터에서 인사이트의 파동을 발견"},{name:"Skywork",description:"복잡한 워크플로우를 자연스러운 흐름으로"},{name:"Perplexcity",description:"스토리텔링에 몰입의 파동을 더하다"}],icon:ow,color:"from-yellow-500 to-orange-500"}],[]);return d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(cN,{}),d.jsx(Sr,{}),d.jsx("main",{className:"pt-28 pb-6 px-4 relative z-10",children:d.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[d.jsx("div",{className:"text-center space-y-6",children:d.jsx(Me,{variant:"strong",className:"p-8",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-center gap-3",children:[d.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(Vf,{className:"text-white text-2xl"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-white text-5xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Moonwave Travel"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"당신만의 여행 파동과 흐름으로 만드는 여행 경험"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("blockquote",{className:"text-white text-xl italic leading-relaxed tracking-normal",children:['"세상이 만들어낸 여행 속도는 나의 기준이 될 수 없으며,',d.jsx("br",{}),"타인의 여행은 나의 여행을 설명할 수 없다.",d.jsx("br",{}),'나는 오직 나만의 여행 파동으로, 나만의 여행 흐름으로 존재한다."']}),d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:"Moonwave Travel은 이 철학에서 시작되었습니다."})]})]})})}),d.jsx("div",{className:"space-y-6",children:d.jsx(Me,{variant:"light",className:"p-8",children:d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"About Moonwave Travel"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"Moonwave Travel의 철학과 가치에 대해 더 자세히 알아보세요"})]}),d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("p",{className:"text-white text-base opacity-90 leading-relaxed tracking-normal",children:"Moonwave Travel은 세상의 기준이 아닌, 각자의 고유한 여행 파동과 흐름으로 움직이는 여행 경험을 만들어갑니다."}),d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:'Footer의 "About Moonwave Travel" 링크를 클릭하여 더 자세한 정보를 확인하세요.'})]})]})})}),d.jsx("div",{className:"space-y-6",children:d.jsx(Me,{variant:"light",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Philosophy: 여행 파동(Wave)과 흐름(Flow)"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal",children:"우리가 믿는 것"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4 p-6 bg-white/5 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(lw,{className:"text-white text-xl"})}),d.jsx("h3",{className:"text-white text-xl font-semibold",children:"여행 파동(Wave)"})]}),d.jsx("p",{className:"text-white text-base leading-relaxed tracking-normal",children:"각자가 가진 고유한 여행 철학과 감성의 진동입니다. 이는 남과 비교할 수 없는, 오직 자신만의 여행 방식입니다."})]}),d.jsxs("div",{className:"space-y-4 p-6 bg-white/5 rounded-xl",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:d.jsx(ZI,{className:"text-white text-xl"})}),d.jsx("h3",{className:"text-white text-xl font-semibold",children:"여행 흐름(Flow)"})]}),d.jsx("p",{className:"text-white text-base leading-relaxed tracking-normal",children:"그 파동을 현실에서 실현하는 여행 전략과 실행의 연결입니다. 끊임없이 움직이되, 자신만의 속도로 흐르는 여행입니다."})]})]})]})})}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Values: 우리가 지키는 것"})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map((s,o)=>d.jsx(Me,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4 text-center",children:[d.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center shadow-lg mx-auto bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-2xl"})}),d.jsx("h3",{className:"text-white text-lg font-semibold",children:s.title}),d.jsx("p",{className:"text-white text-sm opacity-80 leading-relaxed tracking-normal",children:s.description})]})},s.title+"-"+o))})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Projects: 파동이 만드는 디지털 경험"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal mt-3",children:"우리가 만들어가는 고유한 서비스들"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((s,o)=>d.jsx(Me,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-xl"})}),d.jsx(Uf,{className:"text-white/60 w-5 h-5"})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:s.name}),d.jsx("p",{className:"text-white text-sm opacity-80 leading-relaxed tracking-normal mb-3",children:s.description}),d.jsx("p",{className:"text-primary-400 text-xs font-medium tracking-normal",children:s.url})]})]})},s.name+"-"+o))})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Technology: 파동을 실현하는 도구들"})}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:t.map((s,o)=>d.jsx(Me,{variant:"light",className:"p-6",style:{animationDelay:`${o*.1}s`,contain:"layout style paint"},children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg bg-gradient-to-r ${s.color}`,children:d.jsx(s.icon,{className:"text-white text-lg"})}),d.jsx("h3",{className:"text-white text-lg font-semibold",children:s.category})]}),d.jsx("div",{className:"space-y-3",children:s.items.map((u,f)=>d.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[d.jsx("p",{className:"text-white text-sm font-medium",children:u.name}),d.jsx("p",{className:"text-white text-xs opacity-70 tracking-normal",children:u.description})]},u.name+"-"+f))})]})},s.category+"-"+o))})]}),d.jsx("div",{className:"space-y-6",children:d.jsx(Me,{variant:"strong",className:"p-8",children:d.jsxs("div",{className:"text-center space-y-6",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-white text-3xl font-bold bg-gradient-to-r from-primary-400 to-secondary-400 bg-clip-text text-transparent",children:"Join the Travel Wave"}),d.jsx("p",{className:"text-white text-lg opacity-80 tracking-normal mt-3",children:"당신만의 여행 파동을 찾고 계신가요?"})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("blockquote",{className:"text-white text-xl italic leading-relaxed tracking-normal",children:['"여행의 속도는 순간의 환호를 가져올지 모르나',d.jsx("br",{}),'여행 파동과 흐름은 진정한 여행 경험을 가져온다."']}),d.jsx("p",{className:"text-white text-base opacity-80 tracking-normal",children:"Moonwave Travel은 당신이 세상의 여행 속도에 휩쓸리지 않고, 자신만의 여행 파동과 흐름을 만들 수 있도록 돕습니다."})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsxs(Oe,{variant:"primary",onClick:()=>window.location.href="mailto:deasoung@gmail.com",className:"px-6 py-3",children:[d.jsx(q_,{className:"w-5 h-5"}),"Contact Moonwave Travel"]}),d.jsxs(Oe,{variant:"secondary",onClick:()=>window.open("https://www.moonwave.kr","_blank"),className:"px-6 py-3",children:[d.jsx(Uf,{className:"w-5 h-5"}),"Visit Website"]})]}),d.jsxs("div",{className:"text-center space-y-3",children:[d.jsx("p",{className:"text-white text-sm opacity-60 tracking-normal",children:"Moonwave Travel HQ"}),d.jsx("p",{className:"text-white text-sm opacity-80 tracking-normal",children:"전략적 디지털 여행실에서 당신의 여행 파동을 기다립니다."})]})]})})}),d.jsx("div",{className:"flex justify-center",children:d.jsxs(Oe,{variant:"ghost",onClick:()=>window.history.back(),className:"px-6 py-3",children:[d.jsx(zh,{className:"w-5 h-5"}),"뒤로 가기"]})})]})}),d.jsx(Ho,{})]})}function lU(){return d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(Sr,{}),d.jsx("main",{className:"pt-28 pb-6 px-4 relative z-10",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"mb-8",children:d.jsxs(sa,{to:"/",className:"text-white hover:text-primary-400",children:[d.jsx(zh,{size:16}),d.jsx("span",{children:"뒤로 가기"})]})}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 mb-4 shadow-lg",children:d.jsx(cw,{size:24,className:"text-white icon-enhanced"})}),d.jsx("h1",{className:"text-4xl font-bold text-white mb-2 tracking-normal",children:"서비스 이용약관"}),d.jsx("p",{className:"text-lg text-white tracking-normal",children:"travel.moonwave.kr 여행 관리 서비스 이용과 관련된 약관 및 개인정보처리방침"}),d.jsxs("div",{className:"flex items-center justify-center space-x-6 mt-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(zT,{size:16,className:"text-green-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"안전한 서비스"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Xg,{size:16,className:"text-blue-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"개인정보 보호"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Df,{size:16,className:"text-purple-400 icon-enhanced"}),d.jsx("span",{className:"text-sm text-white tracking-normal",children:"사용자 중심"})]})]})]}),d.jsxs("div",{className:"space-y-8",children:[d.jsx(Me,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center",children:d.jsx(cw,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"travel.moonwave.kr 서비스 이용약관"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"시행일: 2025년 1월 1일"})]})]}),d.jsxs("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제1조 (목적)"}),d.jsx("p",{className:"break-keep-ko",children:'이 약관은 문유(문대성)(이하 "운영자")가 제공하는 여행 관리 플랫폼 travel.moonwave.kr(이하 "서비스")의 이용과 관련하여 운영자와 이용자의 권리, 의무 및 책임사항을 명확히 규정함을 목적으로 합니다.'})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제2조 (정의)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:'1. "서비스"란 운영자가 제공하는 여행 관리 플랫폼과 이를 통해 제공되는 모든 기능을 의미합니다.'}),d.jsx("p",{className:"break-keep-ko",children:'2. "이용자"란 이 약관에 따라 운영자가 제공하는 서비스를 이용하기 위하여 본 약관에 동의하고 가입한 자를 의미합니다.'}),d.jsx("p",{className:"break-keep-ko",children:'3. "계정"이란 이용자가 서비스 이용 시 본인을 식별하고 접속할 수 있도록 이메일 주소와 비밀번호를 설정하여 생성한 로그인 정보를 의미합니다.'})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제3조 (약관의 효력 및 변경)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 본 약관은 이용자가 회원가입 시 동의함으로써 효력이 발생합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 운영자는 필요한 경우 「약관의 규제에 관한 법률」 및 기타 관련 법령을 위배하지 않는 범위에서 이 약관을 변경할 수 있습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 약관이 변경될 경우 운영자는 변경된 약관의 시행일로부터 최소 7일 이전에 서비스 홈페이지 또는 이메일 등을 통해 공지합니다."}),d.jsx("p",{className:"break-keep-ko",children:"4. 이용자가 약관 변경 고지 이후에도 서비스를 계속 사용할 경우 변경된 약관에 동의한 것으로 간주합니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제4조 (서비스의 제공 및 변경)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 운영자는 다음 서비스를 제공합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"여행 일정 관리 및 계획"}),d.jsx("li",{className:"break-keep-ko",children:"여행지 정보 검색 및 저장"}),d.jsx("li",{className:"break-keep-ko",children:"여행 사진 및 메모 관리"}),d.jsx("li",{className:"break-keep-ko",children:"여행 지도 및 경로 확인"}),d.jsx("li",{className:"break-keep-ko",children:"여행 관련 정보 제공"})]}),d.jsx("p",{className:"break-keep-ko",children:"2. 서비스는 연중무휴, 1일 24시간 제공을 원칙으로 합니다. 다만, 운영상의 이유나 기술적 유지보수를 위해 일시 중지될 수 있습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 운영자는 서비스의 품질 개선, 기술적 사유, 법적 이유 등으로 서비스의 내용을 변경할 수 있으며, 변경 사항은 미리 공지합니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제5조 (서비스 이용)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스는 회원가입 절차를 통해 이용 가능하며, 현재 모든 기능은 무료로 제공됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 이용자는 계정의 관리 책임이 있으며, 계정을 타인과 공유하거나 양도할 수 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 이용자는 다음 행위를 금지합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"타인의 개인정보 도용 및 허위 정보 등록"}),d.jsx("li",{className:"break-keep-ko",children:"서비스의 안정적 운영을 방해하는 행위"}),d.jsx("li",{className:"break-keep-ko",children:"기타 대한민국 법률에 위반되는 행위"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제6조 (저작권 및 지적재산권)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스에 대한 저작권 및 기타 지적재산권은 운영자에게 귀속됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 이용자가 서비스 내에서 생성한 콘텐츠의 저작권은 이용자 본인에게 있으며, 운영자는 서비스 운영에 필요한 범위 내에서만 이를 이용할 수 있습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제7조 (책임 제한)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 운영자는 무료로 제공하는 서비스의 사용과 관련하여 발생하는 어떠한 손해에 대해서도 책임을 지지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 천재지변, 정전, 인터넷 장애 등 불가항력적 사유로 인한 서비스 중단에 대해서도 책임지지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 이용자의 서비스 이용으로 기대한 수익이나 효과가 발생하지 않은 것에 대해서 운영자는 책임지지 않습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"제8조 (분쟁 해결)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 서비스 이용과 관련한 분쟁 발생 시 우선 운영자와 이용자는 상호협의를 통해 해결합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 협의가 이루어지지 않을 경우, 분쟁은 대한민국 법률을 적용하며 관할 법원은 민사소송법에 따라 정합니다."})]})]})]})]})}),d.jsx(Me,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-secondary-500 to-secondary-600 flex items-center justify-center",children:d.jsx(Xg,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"travel.moonwave.kr 개인정보처리방침"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"시행일: 2025년 1월 1일"})]})]}),d.jsxs("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:[d.jsx("p",{className:"break-keep-ko",children:"운영자 문유(문대성)는 「개인정보 보호법」을 준수하여 이용자의 개인정보를 보호합니다."}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"1. 개인정보처리자 정보"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"개인정보처리자: 문유(문대성)"}),d.jsx("li",{className:"break-keep-ko",children:"서비스명: travel.moonwave.kr"}),d.jsxs("li",{className:"break-keep-ko",children:["연락처: ",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"2. 개인정보 수집 항목"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 서비스 제공을 위해 다음 개인정보를 수집합니다:"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-medium text-white tracking-normal mb-2",children:"필수 항목"}),d.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:d.jsx("li",{className:"break-keep-ko",children:"이메일 주소, 비밀번호(암호화 저장), 서비스 이용 기록"})})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-lg font-medium text-white tracking-normal mb-2",children:"선택 항목"}),d.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:d.jsx("li",{className:"break-keep-ko",children:"여행 일정 정보, 여행지 정보, 여행 사진 및 메모"})})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"3. 개인정보 수집 목적"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"회원 관리: 서비스 이용자 식별 및 인증"}),d.jsx("li",{className:"break-keep-ko",children:"서비스 제공: 여행 일정 관리 및 맞춤형 정보 제공"}),d.jsx("li",{className:"break-keep-ko",children:"서비스 개선: 이용 통계 분석 및 신규 기능 개발"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"4. 개인정보 보유 및 이용 기간"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"• 회원 탈퇴 시 즉시 파기합니다."}),d.jsx("p",{className:"break-keep-ko",children:"• 관계법령에 따라 필요한 경우 다음과 같이 보관합니다:"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"서비스 이용 기록: 3년 (통신비밀보호법)"}),d.jsx("li",{className:"break-keep-ko",children:"로그인 기록: 3개월 (통신비밀보호법)"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"5. 개인정보 제3자 제공"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 원칙적으로 이용자의 동의 없이 개인정보를 제3자에게 제공하지 않으며, 법률의 특별한 규정에 의한 경우에만 제공합니다."})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"6. 개인정보 안전성 확보 조치"}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"비밀번호 암호화 저장"}),d.jsx("li",{className:"break-keep-ko",children:"해킹 방지 기술적 조치: 보안 프로그램 설치 및 정기적 점검"}),d.jsx("li",{className:"break-keep-ko",children:"접근 권한 제한: 운영자 외 접근 불가"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"7. 이용자의 권리 행사"}),d.jsxs("p",{className:"break-keep-ko",children:["이용자는 이메일(",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"}),")을 통해 언제든지 개인정보의 열람, 정정, 삭제, 처리정지를 요구할 수 있습니다."]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"8. 쿠키(Cookie) 운영"}),d.jsx("p",{className:"break-keep-ko",children:"운영자는 쿠키를 통해 이용자 맞춤형 서비스를 제공합니다."}),d.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[d.jsx("li",{className:"break-keep-ko",children:"목적: 로그인 유지, 이용 행태 분석"}),d.jsx("li",{className:"break-keep-ko",children:"쿠키 거부 방법: 웹 브라우저 설정 변경을 통해 가능"}),d.jsx("li",{className:"break-keep-ko",children:"쿠키 거부 시 서비스 일부 기능 사용이 제한될 수 있습니다."})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-xl font-semibold text-white tracking-normal",children:"9. 개인정보처리방침 변경"}),d.jsx("p",{className:"break-keep-ko",children:"개인정보처리방침 변경 시 시행 7일 전 서비스 웹사이트 및 이메일 등을 통해 고지합니다."})]})]})]})}),d.jsx(Me,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center",children:d.jsx($I,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"면책조항"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"서비스 이용 관련 안내"})]})]}),d.jsx("div",{className:"space-y-6 text-base text-white tracking-normal leading-relaxed",children:d.jsxs("div",{className:"space-y-3",children:[d.jsx("p",{className:"break-keep-ko",children:"1. 개인 운영 서비스로서 운영자 개인이 관리합니다."}),d.jsx("p",{className:"break-keep-ko",children:"2. 서비스가 제공하는 정보는 참고용이며, 정확성이나 최신성을 보장하지 않습니다."}),d.jsx("p",{className:"break-keep-ko",children:"3. 모든 서비스는 무료 제공이며, 이에 대한 품질 보증이나 지속적 제공 의무는 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"4. 이용자는 중요 데이터를 별도 백업해야 하며, 데이터 손실에 대한 책임은 운영자에게 없습니다."}),d.jsx("p",{className:"break-keep-ko",children:"5. 외부 서비스 연동 시 해당 서비스 이용약관이 별도로 적용됩니다."}),d.jsx("p",{className:"break-keep-ko",children:"6. 개인 서비스 특성상 서비스는 예고 없이 중단될 수 있으며, 이로 인한 손해는 책임지지 않습니다."})]})})]})}),d.jsx(Me,{variant:"default",className:"p-6",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:d.jsx(q_,{size:20,className:"text-white icon-enhanced"})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-semibold text-white tracking-normal",children:"문의사항"}),d.jsx("p",{className:"text-sm text-white tracking-normal opacity-80",children:"궁금한 점이 있으시면 언제든 연락주세요"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-lg font-medium text-white tracking-normal",children:"운영자 정보"}),d.jsxs("div",{className:"space-y-2 text-base text-white tracking-normal",children:[d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"운영자:"})," 문유(문대성)"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"Email:"})," ",d.jsx("a",{href:"mailto:deasoung@gmail.com",className:"text-primary-400 hover:text-primary-300 underline",children:"deasoung@gmail.com"})]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"Website:"})," ",d.jsx("a",{href:"http://www.moonwave.kr",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300 underline",children:"www.moonwave.kr"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-lg font-medium text-white tracking-normal",children:"서비스 정보"}),d.jsxs("div",{className:"space-y-2 text-base text-white tracking-normal",children:[d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"서비스명:"})," travel.moonwave.kr"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"서비스 유형:"})," 여행 관리 플랫폼"]}),d.jsxs("p",{className:"break-keep-ko",children:[d.jsx("span",{className:"font-medium",children:"제공 방식:"})," 무료 서비스"]})]})]})]}),d.jsx("div",{className:"pt-6 border-t border-white/20",children:d.jsx("p",{className:"text-center text-sm text-white tracking-normal opacity-80",children:"© 2025 Moonwave Travel by 문유(문대성). All rights reserved."})})]})})]})]})}),d.jsx(Ho,{})]})}function cU({className:n}){const{user:e}=Ys(),t=U.useRef(null),[s,o]=U.useState(0),[u,f]=U.useState(!1),[_]=U.useState(.7),[y,b]=U.useState(!1),[E,I]=U.useState(0),[N,F]=U.useState(0),[H,D]=U.useState(!1),[q,Y]=U.useState(!1),oe=[{id:"1",title:"Glass Vault",artist:"Moonwave",duration:240,audioUrl:"/Music/10. Glass Vault.mp3"},{id:"2",title:"Null Error Grace Part1",artist:"Moonwave",duration:216,audioUrl:"/Music/11. Null Error Grace Part1.mp3"},{id:"3",title:"Null Error Grace Part2",artist:"Moonwave",duration:174,audioUrl:"/Music/12. Null Error Grace Part2.mp3"},{id:"4",title:"Shine Bright",artist:"Moonwave",duration:198,audioUrl:"/Music/13. Shine Bright.mp3"},{id:"5",title:"It's my Moonwave life",artist:"Moonwave",duration:228,audioUrl:"/Music/14. It's my Moonwave life.mp3"},{id:"6",title:"Ride My Wave",artist:"Moonwave",duration:294,audioUrl:"/Music/15. Ride My Wave.mp3"},{id:"7",title:"Glow Not Noise",artist:"Moonwave",duration:258,audioUrl:"/Music/16. Glow Not Noise.mp3"},{id:"8",title:"Moonwave",artist:"Moonwave",duration:300,audioUrl:"/Music/17. Moonwave.mp3"},{id:"9",title:"Under the Moonlight",artist:"Moonwave",duration:204,audioUrl:"/Music/18. Under the Moonlight.mp3"},{id:"10",title:"Decode me slow",artist:"Moonwave",duration:252,audioUrl:"/Music/19. Decode me slow.mp3"},{id:"11",title:"Daily Jump",artist:"Moonwave",duration:180,audioUrl:"/Music/6. 매일의 점프.mp3"},{id:"12",title:"Bloom Syntax",artist:"Moonwave",duration:210,audioUrl:"/Music/7. Bloom Syntax.mp3"}],ne=oe[s],pe=()=>{if(oe.length<=1)return;let O;do O=Math.floor(Math.random()*oe.length);while(O===s);console.log(`🔀 랜덤 재생: ${oe[O].title}`),o(O)};U.useEffect(()=>{t.current||(t.current=new Audio,t.current.volume=_);const O=t.current,Z=()=>{I(O.currentTime)},V=()=>{F(O.duration)},M=()=>{f(!1),Y(!0),pe()},ve=()=>{f(!0)},ke=()=>{f(!1)},X=()=>{console.log("오디오 로드 완료")},ce=J=>{console.error("오디오 에러:",J),f(!1)};return O.addEventListener("timeupdate",Z),O.addEventListener("loadedmetadata",V),O.addEventListener("ended",M),O.addEventListener("play",ve),O.addEventListener("pause",ke),O.addEventListener("canplay",X),O.addEventListener("error",ce),ne&&(O.src=ne.audioUrl,O.load()),()=>{O.removeEventListener("timeupdate",Z),O.removeEventListener("loadedmetadata",V),O.removeEventListener("ended",M),O.removeEventListener("play",ve),O.removeEventListener("pause",ke),O.removeEventListener("canplay",X),O.removeEventListener("error",ce)}},[s]),U.useEffect(()=>{if(e&&!H&&t.current&&ne){const O=Math.floor(Math.random()*oe.length);o(O),D(!0),setTimeout(async()=>{try{await t.current?.play(),console.log("자동재생 성공")}catch{console.log("자동재생 실패 (브라우저 정책)")}},1e3)}},[e,H,oe.length,ne]),U.useEffect(()=>{e||D(!1)},[e]),U.useEffect(()=>{if(t.current&&ne){const O=u;t.current.src=ne.audioUrl,t.current.load(),(O||q)&&(t.current.play().catch(console.error),Y(!1))}},[s,q]);const xe=O=>{if(isNaN(O))return"0:00";const Z=Math.floor(O/60),V=Math.floor(O%60);return`${Z}:${V.toString().padStart(2,"0")}`},ge=async()=>{if(t.current)try{u?t.current.pause():await t.current.play()}catch(O){console.error("재생 토글 실패:",O)}},G=()=>{const O=s>0?s-1:oe.length-1;o(O)},k=()=>{const O=s<oe.length-1?s+1:0;o(O)},j=()=>{const O=!y;b(O),t.current&&(t.current.volume=O?0:_)};return ne?d.jsx("div",{className:Zs("w-full max-w-7xl mx-auto mt-6 mb-6",n),children:d.jsxs(Me,{variant:"travel",withWaveEffect:u,hoverable:!1,className:"px-4 sm:px-6 py-4 sm:py-5",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-3",children:[d.jsx("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-1 min-w-0",children:d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"text-xs sm:text-sm font-medium text-white truncate",children:ne.title}),d.jsx("p",{className:"text-xs text-white/60 truncate hidden sm:block",children:ne.artist})]})}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 flex-shrink-0",children:[d.jsx(Oe,{variant:"ghost",size:"sm",onClick:G,ariaLabel:"이전 트랙",className:"p-1.5 sm:p-2 rounded-full transition-all duration-300 hidden sm:flex",children:d.jsx(KI,{size:14,className:"sm:w-4 sm:h-4"})}),d.jsx(Oe,{variant:"primary",size:"sm",onClick:ge,ariaLabel:u?"일시정지":"재생",className:Zs("p-2.5 sm:p-4 rounded-full transition-all duration-300","bg-gradient-to-r from-travel-blue to-travel-purple hover:from-travel-blue/80 hover:to-travel-purple/80","shadow-lg hover:shadow-xl"),children:u?d.jsx(YI,{size:18,className:"sm:w-6 sm:h-6"}):d.jsx(Wg,{size:18,className:"sm:w-6 sm:h-6 ml-0.5"})}),d.jsx(Oe,{variant:"ghost",size:"sm",onClick:k,ariaLabel:"다음 트랙",className:"p-1.5 sm:p-2 rounded-full transition-all duration-300 hidden sm:flex",children:d.jsx(WI,{size:14,className:"sm:w-4 sm:h-4"})}),d.jsx("div",{className:"relative volume-control",children:d.jsx(Oe,{variant:"ghost",size:"sm",onClick:j,ariaLabel:y?"음소거 해제":"볼륨 조절",className:"p-1.5 sm:p-2 rounded-full transition-all duration-300",children:y?d.jsx(QI,{size:14,className:"sm:w-4 sm:h-4"}):d.jsx(XI,{size:14,className:"sm:w-4 sm:h-4"})})})]})]}),d.jsxs("div",{className:"mt-4 hidden sm:block",children:[d.jsxs("div",{className:"flex items-center justify-between text-xs text-white/60 mb-1",children:[d.jsx("span",{children:xe(E)}),d.jsx("span",{children:xe(N)})]}),d.jsx("div",{className:"w-full bg-white/10 rounded-full h-1",children:d.jsx("div",{className:"bg-travel-blue h-1 rounded-full transition-all duration-300",style:{width:`${N>0?E/N*100:0}%`}})})]})]})}):null}function uU(){return d.jsx(z6,{children:d.jsx(bC,{basename:"/Travel_v2.0/",children:d.jsxs("div",{className:"min-h-screen relative",children:[d.jsx(cN,{}),d.jsx("div",{className:"relative z-10 min-h-screen",children:d.jsxs(QR,{children:[d.jsx(oi,{path:"/",element:d.jsx(bV,{})}),d.jsx(oi,{path:"/login",element:d.jsx(sU,{})}),d.jsx(oi,{path:"/settings",element:d.jsx(aU,{})}),d.jsx(oi,{path:"/about",element:d.jsx(oU,{})}),d.jsx(oi,{path:"/terms",element:d.jsx(lU,{})}),d.jsx(oi,{path:"/trips/new",element:d.jsx(wV,{})}),d.jsx(oi,{path:"/trips/:id/edit",element:d.jsx(TV,{})}),d.jsx(oi,{path:"/trips/:id",element:d.jsx(CV,{})}),d.jsx(oi,{path:"/trips/:tripId/plans/new",element:d.jsx(MT,{})}),d.jsx(oi,{path:"/trips/:tripId/plans/:planId",element:d.jsx(MT,{})}),d.jsx(oi,{path:"/places/search",element:d.jsx(PV,{})}),d.jsx(oi,{path:"/trips/:id/map",element:d.jsx(LT,{})}),d.jsx(oi,{path:"/trip-map",element:d.jsx(LT,{})}),d.jsx(oi,{path:"*",element:d.jsx("div",{children:"404 - Page Not Found"})})]})}),d.jsx("div",{className:"px-4 pb-4",children:d.jsx(cU,{})})]})})})}oR.createRoot(document.getElementById("root")).render(d.jsx(Bf.StrictMode,{children:d.jsx(uU,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/Travel_v2.0/sw.js").then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});
//# sourceMappingURL=index-DM-z2zvE.js.map
